"use strict";(self.webpackChunkTecRooms=self.webpackChunkTecRooms||[]).push([[179],{2011:(pt,Ae,V)=>{V.d(Ae,{Dh:()=>fe,GT:()=>he,cc:()=>xe,hO:()=>Be,on:()=>$,pX:()=>se,xv:()=>pe});var h=V(4650),te=V(127),F=V(5813);pt=V.hmd(pt);const ae=["ngOnDestroy"],se=(ge,rt,ht,Me={})=>new Proxy(ge,{get:(Ee,Se)=>ht.runOutsideAngular(()=>{var $e;if(ge[Se])return!(null===($e=Me?.spy)||void 0===$e)&&$e.get&&Me.spy.get(Se,ge[Se]),ge[Se];if(ae.indexOf(Se)>-1)return()=>{};const ze=rt.toPromise().then(j=>{const ve=j&&j[Se];return"function"==typeof ve?ve.bind(j):ve&&ve.then?ve.then(Z=>ht.run(()=>Z)):ht.run(()=>ve)});return new Proxy(()=>{},{get:(j,ve)=>ze[ve],apply:(j,ve,Z)=>ze.then(ee=>{var ie;const re=ee&&ee(...Z);return!(null===(ie=Me?.spy)||void 0===ie)&&ie.apply&&Me.spy.apply(Se,Z,re),re})})})}),he=(ge,rt)=>{rt.forEach(ht=>{Object.getOwnPropertyNames(ht.prototype||ht).forEach(Me=>{Object.defineProperty(ge.prototype,Me,Object.getOwnPropertyDescriptor(ht.prototype||ht,Me))})})};class ue{constructor(rt){return rt}}const fe=new h.OlP("angularfire2.app.options"),pe=new h.OlP("angularfire2.app.name");function $(ge,rt,ht){const Ee="object"==typeof ht&&ht||{};Ee.name=Ee.name||"string"==typeof ht&&ht||"[DEFAULT]";const $e=te.Z.apps.filter(ze=>ze&&ze.name===Ee.name)[0]||rt.runOutsideAngular(()=>te.Z.initializeApp(ge,Ee));try{JSON.stringify(ge)!==JSON.stringify($e.options)&&G("error",`${$e.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue($e)}const G=(ge,...rt)=>{(0,h.X6Q)()&&typeof console<"u"&&console[ge](...rt)},Q={provide:ue,useFactory:$,deps:[fe,h.R0b,[new h.FiY,pe]]};let Be=(()=>{class ge{constructor(ht){te.Z.registerVersion("angularfire",F.q4.full,"core"),te.Z.registerVersion("angularfire",F.q4.full,"app-compat"),te.Z.registerVersion("angular",h.q4F.full,ht.toString())}static initializeApp(ht,Me){return{ngModule:ge,providers:[{provide:fe,useValue:ht},{provide:pe,useValue:Me}]}}}return ge.\u0275fac=function(ht){return new(ht||ge)(h.LFG(h.Lbi))},ge.\u0275mod=h.oAB({type:ge}),ge.\u0275inj=h.cJS({providers:[Q]}),ge})();function xe(ge,rt,ht,Me,Ee){const[,Se,$e]=globalThis.\u0275AngularfireInstanceCache.find(ze=>ze[0]===ge)||[];if(Se)return function De(ge,rt){try{return ge.toString()===rt.toString()}catch{return ge===rt}}(Ee,$e)||(ye("error",`${rt} was already initialized on the ${ht} Firebase App with different settings.${at?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:Ee,was:$e})),Se;{const ze=Me();return globalThis.\u0275AngularfireInstanceCache.push([ge,ze,Ee]),ze}}const at=!!pt.hot,ye=(ge,...rt)=>{(0,h.X6Q)()&&typeof console<"u"&&console[ge](...rt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(pt,Ae,V)=>{V.d(Ae,{q4:()=>ai,iC:()=>Xi,HU:()=>da,vb:()=>qt,JM:()=>Ei});var h=V(4650),te=V(5867),F=V(5861),ae=V(9681),se=V(2090),he=V(4859),ue=V(1877),fe=V(8766);const pe="@firebase/installations",$="0.5.15",Q=`w:${$}`,Be="FIS_v2",rt=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ht(T){return T instanceof se.ZR&&T.code.includes("request-failed")}function Me({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Ee(T){return{token:T.token,requestStatus:2,expiresIn:ee(T.expiresIn),creationTime:Date.now()}}function Se(T,C){return $e.apply(this,arguments)}function $e(){return($e=(0,F.Z)(function*(T,C){const U=(yield C.json()).error;return rt.create("request-failed",{requestName:T,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function ze({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function j(T,{refreshToken:C}){const R=ze(T);return R.append("Authorization",function ie(T){return`${Be} ${T}`}(C)),R}function ve(T){return Z.apply(this,arguments)}function Z(){return(Z=(0,F.Z)(function*(T){const C=yield T();return C.status>=500&&C.status<600?T():C})).apply(this,arguments)}function ee(T){return Number(T.replace("s","000"))}function re(T,C){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,F.Z)(function*({appConfig:T,heartbeatServiceProvider:C},{fid:R}){const U=Me(T),X=ze(T),le=C.getImmediate({optional:!0});if(le){const ot=yield le.getHeartbeatsHeader();ot&&X.append("x-firebase-client",ot)}const Ge={method:"POST",headers:X,body:JSON.stringify({fid:R,authVersion:Be,appId:T.appId,sdkVersion:Q})},yt=yield ve(()=>fetch(U,Ge));if(yt.ok){const ot=yield yt.json();return{fid:ot.fid||R,registrationStatus:2,refreshToken:ot.refreshToken,authToken:Ee(ot.authToken)}}throw yield Se("Create Installation",yt)})).apply(this,arguments)}function Fe(T){return new Promise(C=>{setTimeout(C,T)})}const nn=/^[cdef][\w-]{21}$/;function Qe(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const R=function fn(T){return function _t(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return nn.test(R)?R:""}catch{return""}}function Sn(T){return`${T.appName}!${T.appId}`}const Xt=new Map;function rn(T,C){const R=Sn(T);gn(R,C),function us(T,C){const R=function Hr(){return!Pi&&"BroadcastChannel"in self&&(Pi=new BroadcastChannel("[Firebase] FID Change"),Pi.onmessage=T=>{gn(T.data.key,T.data.fid)}),Pi}();R&&R.postMessage({key:T,fid:C}),function ei(){0===Xt.size&&Pi&&(Pi.close(),Pi=null)}()}(R,C)}function gn(T,C){const R=Xt.get(T);if(R)for(const U of R)U(C)}let Pi=null;const fi="firebase-installations-store";let pi=null;function Ba(){return pi||(pi=(0,fe.X3)("firebase-installations-database",1,{upgrade:(T,C)=>{0===C&&T.createObjectStore(fi)}})),pi}function Xe(T,C){return Or.apply(this,arguments)}function Or(){return(Or=(0,F.Z)(function*(T,C){const R=Sn(T),X=(yield Ba()).transaction(fi,"readwrite"),le=X.objectStore(fi),Te=yield le.get(R);return yield le.put(C,R),yield X.done,(!Te||Te.fid!==C.fid)&&rn(T,C.fid),C})).apply(this,arguments)}function Us(T){return sr.apply(this,arguments)}function sr(){return(sr=(0,F.Z)(function*(T){const C=Sn(T),U=(yield Ba()).transaction(fi,"readwrite");yield U.objectStore(fi).delete(C),yield U.done})).apply(this,arguments)}function gi(T,C){return zi.apply(this,arguments)}function zi(){return(zi=(0,F.Z)(function*(T,C){const R=Sn(T),X=(yield Ba()).transaction(fi,"readwrite"),le=X.objectStore(fi),Te=yield le.get(R),Ge=C(Te);return void 0===Ge?yield le.delete(R):yield le.put(Ge,R),yield X.done,Ge&&(!Te||Te.fid!==Ge.fid)&&rn(T,Ge.fid),Ge})).apply(this,arguments)}function Gn(T){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,F.Z)(function*(T){let C;const R=yield gi(T.appConfig,U=>{const X=_n(U),le=wt(T,X);return C=le.registrationPromise,le.installationEntry});return""===R.fid?{installationEntry:yield C}:{installationEntry:R,registrationPromise:C}})).apply(this,arguments)}function _n(T){return Ft(T||{fid:Qe(),registrationStatus:0})}function wt(T,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(rt.create("app-offline"))};const R={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},U=function ft(T,C){return dn.apply(this,arguments)}(T,R);return{installationEntry:R,registrationPromise:U}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:Ar(T)}:{installationEntry:C}}function dn(){return(dn=(0,F.Z)(function*(T,C){try{const R=yield re(T,C);return Xe(T.appConfig,R)}catch(R){throw ht(R)&&409===R.customData.serverCode?yield Us(T.appConfig):yield Xe(T.appConfig,{fid:C.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Ar(T){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,F.Z)(function*(T){let C=yield ti(T.appConfig);for(;1===C.registrationStatus;)yield Fe(100),C=yield ti(T.appConfig);if(0===C.registrationStatus){const{installationEntry:R,registrationPromise:U}=yield Gn(T);return U||R}return C})).apply(this,arguments)}function ti(T){return gi(T,C=>{if(!C)throw rt.create("installation-not-found");return Ft(C)})}function Ft(T){return function Bs(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function an(T,C){return qi.apply(this,arguments)}function qi(){return(qi=(0,F.Z)(function*({appConfig:T,heartbeatServiceProvider:C},R){const U=ln(T,R),X=j(T,R),le=C.getImmediate({optional:!0});if(le){const ot=yield le.getHeartbeatsHeader();ot&&X.append("x-firebase-client",ot)}const Ge={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:Q,appId:T.appId}})},yt=yield ve(()=>fetch(U,Ge));if(yt.ok)return Ee(yield yt.json());throw yield Se("Generate Auth Token",yt)})).apply(this,arguments)}function ln(T,{fid:C}){return`${Me(T)}/${C}/authTokens:generate`}function or(T){return jr.apply(this,arguments)}function jr(){return(jr=(0,F.Z)(function*(T,C=!1){let R;const U=yield gi(T.appConfig,le=>{if(!Ht(le))throw rt.create("not-registered");const Te=le.authToken;if(!C&&z(Te))return le;if(1===Te.requestStatus)return R=st(T,C),le;{if(!navigator.onLine)throw rt.create("app-offline");const Ge=K(le);return R=Mt(T,Ge),Ge}});return R?yield R:U.authToken})).apply(this,arguments)}function st(T,C){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,F.Z)(function*(T,C){let R=yield it(T.appConfig);for(;1===R.authToken.requestStatus;)yield Fe(100),R=yield it(T.appConfig);const U=R.authToken;return 0===U.requestStatus?or(T,C):U})).apply(this,arguments)}function it(T){return gi(T,C=>{if(!Ht(C))throw rt.create("not-registered");return function be(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Mt(T,C){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,F.Z)(function*(T,C){try{const R=yield an(T,C),U=Object.assign(Object.assign({},C),{authToken:R});return yield Xe(T.appConfig,U),R}catch(R){if(!ht(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const U=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Xe(T.appConfig,U)}else yield Us(T.appConfig);throw R}})).apply(this,arguments)}function Ht(T){return void 0!==T&&2===T.registrationStatus}function z(T){return 2===T.requestStatus&&!function B(T){const C=Date.now();return C<T.creationTime||T.creationTime+T.expiresIn<C+36e5}(T)}function K(T){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:C})}function We(){return(We=(0,F.Z)(function*(T){const C=T,{installationEntry:R,registrationPromise:U}=yield Gn(C);return U?U.catch(console.error):or(C).catch(console.error),R.fid})).apply(this,arguments)}function Jt(){return(Jt=(0,F.Z)(function*(T,C=!1){const R=T;return yield yn(R),(yield or(R,C)).token})).apply(this,arguments)}function yn(T){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,F.Z)(function*(T){const{registrationPromise:C}=yield Gn(T);C&&(yield C)})).apply(this,arguments)}function Hs(T){return rt.create("missing-app-config-values",{valueName:T})}const Ko="installations",Cn=T=>{const C=T.getProvider("app").getImmediate(),R=function Tn(T){if(!T||!T.options)throw Hs("App Configuration");if(!T.name)throw Hs("App Name");const C=["projectId","apiKey","appId"];for(const R of C)if(!T.options[R])throw Hs(R);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(C);return{app:C,appConfig:R,heartbeatServiceProvider:(0,ae._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},go=T=>{const C=T.getProvider("app").getImmediate(),R=(0,ae._getProvider)(C,Ko).getImmediate();return{getId:()=>function J(T){return We.apply(this,arguments)}(R),getToken:X=>function gt(T){return Jt.apply(this,arguments)}(R,X)}};(function Gl(){(0,ae._registerComponent)(new he.wA(Ko,Cn,"PUBLIC")),(0,ae._registerComponent)(new he.wA("installations-internal",go,"PRIVATE"))})(),(0,ae.registerVersion)(pe,$),(0,ae.registerVersion)(pe,$,"esm2017");const Wi="@firebase/remote-config",tr=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class sh{constructor(C,R,U,X){this.client=C,this.storage=R,this.storageCache=U,this.logger=X}isCachedDataFresh(C,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-R,X=U<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${X}.`),X}fetch(C){var R=this;return(0,F.Z)(function*(){const[U,X]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(X&&R.isCachedDataFresh(C.cacheMaxAgeMillis,U))return X;C.eTag=X&&X.eTag;const le=yield R.client.fetch(C),Te=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&Te.push(R.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(Te),le})()}}function Rc(T=navigator){return T.languages&&T.languages[0]||T.language}class xc{constructor(C,R,U,X,le,Te){this.firebaseInstallations=C,this.sdkVersion=R,this.namespace=U,this.projectId=X,this.apiKey=le,this.appId=Te}fetch(C){var R=this;return(0,F.Z)(function*(){var U,X,le;const[Te,Ge]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),ot=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Bt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},mt={sdk_version:R.sdkVersion,app_instance_id:Te,app_instance_id_token:Ge,app_id:R.appId,language_code:Rc()},An={method:"POST",headers:Bt,body:JSON.stringify(mt)},fr=fetch(ot,An),ws=new Promise((xo,Ds)=>{C.signal.addEventListener(()=>{const Qc=new Error("The operation was aborted.");Qc.name="AbortError",Ds(Qc)})});let Fr;try{yield Promise.race([fr,ws]),Fr=yield fr}catch(xo){let Ds="fetch-client-network";throw"AbortError"===(null===(U=xo)||void 0===U?void 0:U.name)&&(Ds="fetch-timeout"),tr.create(Ds,{originalErrorMessage:null===(X=xo)||void 0===X?void 0:X.message})}let bs=Fr.status;const pa=Fr.headers.get("ETag")||void 0;let no,bi;if(200===Fr.status){let xo;try{xo=yield Fr.json()}catch(Ds){throw tr.create("fetch-client-parse",{originalErrorMessage:null===(le=Ds)||void 0===le?void 0:le.message})}no=xo.entries,bi=xo.state}if("INSTANCE_STATE_UNSPECIFIED"===bi?bs=500:"NO_CHANGE"===bi?bs=304:("NO_TEMPLATE"===bi||"EMPTY_CONFIG"===bi)&&(no={}),304!==bs&&200!==bs)throw tr.create("fetch-status",{httpStatus:bs});return{status:bs,eTag:pa,config:no}})()}}class Jg{constructor(C,R){this.client=C,this.storage=R}fetch(C){var R=this;return(0,F.Z)(function*(){const U=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(C,U)})()}attemptFetch(C,{throttleEndTimeMillis:R,backoffCount:U}){var X=this;return(0,F.Z)(function*(){yield function lr(T,C){return new Promise((R,U)=>{const X=Math.max(C-Date.now(),0),le=setTimeout(R,X);T.addEventListener(()=>{clearTimeout(le),U(tr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,R);try{const le=yield X.client.fetch(C);return yield X.storage.deleteThrottleMetadata(),le}catch(le){if(!function oh(T){if(!(T instanceof se.ZR&&T.customData))return!1;const C=Number(T.customData.httpStatus);return 429===C||500===C||503===C||504===C}(le))throw le;const Te={throttleEndTimeMillis:Date.now()+(0,se.$s)(U),backoffCount:U+1};return yield X.storage.setThrottleMetadata(Te),X.attemptFetch(C,Te)}})()}}class ah{constructor(C,R,U,X,le){this.app=C,this._client=R,this._storageCache=U,this._storage=X,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Nc(T,C){var R;const U=T.target.error||void 0;return tr.create(C,{originalErrorMessage:U&&(null===(R=U)||void 0===R?void 0:R.message)})}const qs="app_namespace_store";class rm{constructor(C,R,U,X=function nm(){return new Promise((T,C)=>{var R;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=X=>{C(Nc(X,"storage-open"))},U.onsuccess=X=>{T(X.target.result)},U.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(qs,{keyPath:"compositeKey"})}}catch(U){C(tr.create("storage-open",{originalErrorMessage:null===(R=U)||void 0===R?void 0:R.message}))}})}()){this.appId=C,this.appName=R,this.namespace=U,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var R=this;return(0,F.Z)(function*(){const U=yield R.openDbPromise;return new Promise((X,le)=>{var Te;const yt=U.transaction([qs],"readonly").objectStore(qs),ot=R.createCompositeKey(C);try{const Bt=yt.get(ot);Bt.onerror=mt=>{le(Nc(mt,"storage-get"))},Bt.onsuccess=mt=>{const An=mt.target.result;X(An?An.value:void 0)}}catch(Bt){le(tr.create("storage-get",{originalErrorMessage:null===(Te=Bt)||void 0===Te?void 0:Te.message}))}})})()}set(C,R){var U=this;return(0,F.Z)(function*(){const X=yield U.openDbPromise;return new Promise((le,Te)=>{var Ge;const ot=X.transaction([qs],"readwrite").objectStore(qs),Bt=U.createCompositeKey(C);try{const mt=ot.put({compositeKey:Bt,value:R});mt.onerror=An=>{Te(Nc(An,"storage-set"))},mt.onsuccess=()=>{le()}}catch(mt){Te(tr.create("storage-set",{originalErrorMessage:null===(Ge=mt)||void 0===Ge?void 0:Ge.message}))}})})()}delete(C){var R=this;return(0,F.Z)(function*(){const U=yield R.openDbPromise;return new Promise((X,le)=>{var Te;const yt=U.transaction([qs],"readwrite").objectStore(qs),ot=R.createCompositeKey(C);try{const Bt=yt.delete(ot);Bt.onerror=mt=>{le(Nc(mt,"storage-delete"))},Bt.onsuccess=()=>{X()}}catch(Bt){le(tr.create("storage-delete",{originalErrorMessage:null===(Te=Bt)||void 0===Te?void 0:Te.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class uh{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,F.Z)(function*(){const R=C.storage.getLastFetchStatus(),U=C.storage.getLastSuccessfulFetchTimestampMillis(),X=C.storage.getActiveConfig(),le=yield R;le&&(C.lastFetchStatus=le);const Te=yield U;Te&&(C.lastSuccessfulFetchTimestampMillis=Te);const Ge=yield X;Ge&&(C.activeConfig=Ge)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Wl(){return op.apply(this,arguments)}function op(){return(op=(0,F.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function Ws(){(0,ae._registerComponent)(new he.wA("remote-config",function T(C,{instanceIdentifier:R}){const U=C.getProvider("app").getImmediate(),X=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw tr.create("registration-window");if(!(0,se.hl)())throw tr.create("indexed-db-unavailable");const{projectId:le,apiKey:Te,appId:Ge}=U.options;if(!le)throw tr.create("registration-project-id");if(!Te)throw tr.create("registration-api-key");if(!Ge)throw tr.create("registration-app-id");const yt=new rm(Ge,U.name,R=R||"firebase"),ot=new uh(yt),Bt=new ue.Yd(Wi);Bt.logLevel=ue.in.ERROR;const mt=new xc(X,ae.SDK_VERSION,R,le,Te,Ge),An=new Jg(mt,yt),fr=new sh(An,yt,ot,Bt),ws=new ah(U,fr,ot,yt,Bt);return function Nn(T){const C=(0,se.m9)(T);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(ws),ws},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Wi,"0.3.14"),(0,ae.registerVersion)(Wi,"0.3.14","esm2017")}();const Zi="/firebase-messaging-sw.js",ds="/firebase-cloud-messaging-push-scope",hs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",$a="google.c.a.c_id",Zl="google.c.a.c_l",Pc="google.c.a.ts",ap="google.c.a.e";var fs=(()=>{return(T=fs||(fs={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",fs;var T})();function mi(T){const C=new Uint8Array(T);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ri(T){const R=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(R),X=new Uint8Array(U.length);for(let le=0;le<U.length;++le)X[le]=U.charCodeAt(le);return X}const Yo="fcm_token_details_db",Rr="fcm_token_object_Store";function lp(T){return up.apply(this,arguments)}function up(){return up=(0,F.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(Yo))return null;let C=null;return(yield(0,fe.X3)(Yo,5,{upgrade:(U=(0,F.Z)(function*(X,le,Te,Ge){var yt;if(le<2||!X.objectStoreNames.contains(Rr))return;const ot=Ge.objectStore(Rr),Bt=yield ot.index("fcmSenderId").get(T);if(yield ot.clear(),Bt)if(2===le){const mt=Bt;if(!mt.auth||!mt.p256dh||!mt.endpoint)return;C={token:mt.fcmToken,createTime:null!==(yt=mt.createTime)&&void 0!==yt?yt:Date.now(),subscriptionOptions:{auth:mt.auth,p256dh:mt.p256dh,endpoint:mt.endpoint,swScope:mt.swScope,vapidKey:"string"==typeof mt.vapidKey?mt.vapidKey:mi(mt.vapidKey)}}}else if(3===le){const mt=Bt;C={token:mt.fcmToken,createTime:mt.createTime,subscriptionOptions:{auth:mi(mt.auth),p256dh:mi(mt.p256dh),endpoint:mt.endpoint,swScope:mt.swScope,vapidKey:mi(mt.vapidKey)}}}else if(4===le){const mt=Bt;C={token:mt.fcmToken,createTime:mt.createTime,subscriptionOptions:{auth:mi(mt.auth),p256dh:mi(mt.p256dh),endpoint:mt.endpoint,swScope:mt.swScope,vapidKey:mi(mt.vapidKey)}}}}),function(le,Te,Ge,yt){return U.apply(this,arguments)})})).close(),yield(0,fe.Lj)(Yo),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),Vn(C)?C:null;var U}),up.apply(this,arguments)}function Vn(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:C}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const vi="firebase-messaging-store";let Gr=null;function Yl(){return Gr||(Gr=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(T,C)=>{0===C&&T.createObjectStore(vi)}})),Gr}function Qo(T){return ps.apply(this,arguments)}function ps(){return(ps=(0,F.Z)(function*(T){const C=Fi(T),U=yield(yield Yl()).transaction(vi).objectStore(vi).get(C);if(U)return U;{const X=yield lp(T.appConfig.senderId);if(X)return yield Yt(T,X),X}})).apply(this,arguments)}function Yt(T,C){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,F.Z)(function*(T,C){const R=Fi(T),X=(yield Yl()).transaction(vi,"readwrite");return yield X.objectStore(vi).put(C,R),yield X.done,C})).apply(this,arguments)}function _o(T){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,F.Z)(function*(T){const C=Fi(T),U=(yield Yl()).transaction(vi,"readwrite");yield U.objectStore(vi).delete(C),yield U.done})).apply(this,arguments)}function Fi({appConfig:T}){return T.appId}const Pn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Nt(T,C){return eu.apply(this,arguments)}function eu(){return(eu=(0,F.Z)(function*(T,C){var R;const U=yield kc(T),X=Ce(C),le={method:"POST",headers:U,body:JSON.stringify(X)};let Te;try{Te=yield(yield fetch(gs(T.appConfig),le)).json()}catch(Ge){throw Pn.create("token-subscribe-failed",{errorInfo:null===(R=Ge)||void 0===R?void 0:R.toString()})}if(Te.error)throw Pn.create("token-subscribe-failed",{errorInfo:Te.error.message});if(!Te.token)throw Pn.create("token-subscribe-no-token");return Te.token})).apply(this,arguments)}function dp(T,C){return tu.apply(this,arguments)}function tu(){return(tu=(0,F.Z)(function*(T,C){var R;const U=yield kc(T),X=Ce(C.subscriptionOptions),le={method:"PATCH",headers:U,body:JSON.stringify(X)};let Te;try{Te=yield(yield fetch(`${gs(T.appConfig)}/${C.token}`,le)).json()}catch(Ge){throw Pn.create("token-update-failed",{errorInfo:null===(R=Ge)||void 0===R?void 0:R.toString()})}if(Te.error)throw Pn.create("token-update-failed",{errorInfo:Te.error.message});if(!Te.token)throw Pn.create("token-update-no-token");return Te.token})).apply(this,arguments)}function nu(T,C){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,F.Z)(function*(T,C){var R;const X={method:"DELETE",headers:yield kc(T)};try{const Te=yield(yield fetch(`${gs(T.appConfig)}/${C}`,X)).json();if(Te.error)throw Pn.create("token-unsubscribe-failed",{errorInfo:Te.error.message})}catch(le){throw Pn.create("token-unsubscribe-failed",{errorInfo:null===(R=le)||void 0===R?void 0:R.toString()})}})).apply(this,arguments)}function gs({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function kc(T){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,F.Z)(function*({appConfig:T,installations:C}){const R=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Ce({p256dh:T,auth:C,endpoint:R,vapidKey:U}){const X={web:{endpoint:R,auth:C,p256dh:T}};return U!==hs&&(X.web.applicationPubKey=U),X}const Wt=6048e5;function ru(T){return iu.apply(this,arguments)}function iu(){return(iu=(0,F.Z)(function*(T){const C=yield Fc(T.swRegistration,T.vapidKey),R={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:C.endpoint,auth:mi(C.getKey("auth")),p256dh:mi(C.getKey("p256dh"))},U=yield Qo(T.firebaseDependencies);if(U){if(fh(U.subscriptionOptions,R))return Date.now()>=U.createTime+Wt?Xo(T,{token:U.token,createTime:Date.now(),subscriptionOptions:R}):U.token;try{yield nu(T.firebaseDependencies,U.token)}catch(X){console.warn(X)}return za(T.firebaseDependencies,R)}return za(T.firebaseDependencies,R)})).apply(this,arguments)}function Un(T){return su.apply(this,arguments)}function su(){return(su=(0,F.Z)(function*(T){const C=yield Qo(T.firebaseDependencies);C&&(yield nu(T.firebaseDependencies,C.token),yield _o(T.firebaseDependencies));const R=yield T.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Xo(T,C){return yi.apply(this,arguments)}function yi(){return(yi=(0,F.Z)(function*(T,C){try{const R=yield dp(T.firebaseDependencies,C),U=Object.assign(Object.assign({},C),{token:R,createTime:Date.now()});return yield Yt(T.firebaseDependencies,U),R}catch(R){throw yield Un(T),R}})).apply(this,arguments)}function za(T,C){return qa.apply(this,arguments)}function qa(){return(qa=(0,F.Z)(function*(T,C){const U={token:yield Nt(T,C),createTime:Date.now(),subscriptionOptions:C};return yield Yt(T,U),U.token})).apply(this,arguments)}function Fc(T,C){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,F.Z)(function*(T,C){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ri(C)})})).apply(this,arguments)}function fh(T,C){return C.vapidKey===T.vapidKey&&C.endpoint===T.endpoint&&C.auth===T.auth&&C.p256dh===T.p256dh}function Wa(T){const C={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function Bn(T,C){if(!C.notification)return;T.notification={};const R=C.notification.title;R&&(T.notification.title=R);const U=C.notification.body;U&&(T.notification.body=U);const X=C.notification.image;X&&(T.notification.image=X)}(C,T),function Ki(T,C){!C.data||(T.data=C.data)}(C,T),function Vc(T,C){var R,U,X,le,Te;if(!(C.fcmOptions||null!==(R=C.notification)&&void 0!==R&&R.click_action))return;T.fcmOptions={};const Ge=null!==(X=null===(U=C.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==X?X:null===(le=C.notification)||void 0===le?void 0:le.click_action;Ge&&(T.fcmOptions.link=Ge);const yt=null===(Te=C.fcmOptions)||void 0===Te?void 0:Te.analytics_label;yt&&(T.fcmOptions.analyticsLabel=yt)}(C,T),C}function Eo(T){return"object"==typeof T&&!!T&&$a in T}function ms(T,C){const R=[];for(let U=0;U<T.length;U++)R.push(T.charAt(U)),U<C.length&&R.push(C.charAt(U));return R.join("")}function Za(T){return Pn.create("missing-app-config-values",{valueName:T})}ms("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ms("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class sm{constructor(C,R,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function im(T){if(!T||!T.options)throw Za("App Configuration Object");if(!T.name)throw Za("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:R}=T;for(const U of C)if(!R[U])throw Za(U);return{appName:T.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:X,installations:R,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Uc(T){return ou.apply(this,arguments)}function ou(){return(ou=(0,F.Z)(function*(T){var C;try{T.swRegistration=yield navigator.serviceWorker.register(Zi,{scope:ds}),T.swRegistration.update().catch(()=>{})}catch(R){throw Pn.create("failed-service-worker-registration",{browserErrorMessage:null===(C=R)||void 0===C?void 0:C.message})}})).apply(this,arguments)}function Ka(T,C){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,F.Z)(function*(T,C){if(!C&&!T.swRegistration&&(yield Uc(T)),C||!T.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Pn.create("invalid-sw-registration");T.swRegistration=C}})).apply(this,arguments)}function Ya(T,C){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,F.Z)(function*(T,C){C?T.vapidKey=C:T.vapidKey||(T.vapidKey=hs)})).apply(this,arguments)}function lu(){return(lu=(0,F.Z)(function*(T,C){if(!navigator)throw Pn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Pn.create("permission-blocked");return yield Ya(T,C?.vapidKey),yield Ka(T,C?.serviceWorkerRegistration),ru(T)})).apply(this,arguments)}function jc(T,C,R){return $c.apply(this,arguments)}function $c(){return($c=(0,F.Z)(function*(T,C,R){const U=Gc(C);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:R[$a],message_name:R[Zl],message_time:R[Pc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Gc(T){switch(T){case fs.NOTIFICATION_CLICKED:return"notification_open";case fs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function wo(){return(wo=(0,F.Z)(function*(T,C){const R=C.data;if(!R.isFirebaseMessaging)return;T.onMessageHandler&&R.messageType===fs.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Wa(R)):T.onMessageHandler.next(Wa(R)));const U=R.data;Eo(U)&&"1"===U[ap]&&(yield jc(T,R.messageType,U))})).apply(this,arguments)}const bo="@firebase/messaging",ur=T=>{const C=new sm(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function ph(T,C){return wo.apply(this,arguments)}(C,R)),C},ii=T=>{const C=T.getProvider("messaging").getImmediate();return{getToken:U=>function au(T,C){return lu.apply(this,arguments)}(C,U)}};function gh(){return zc.apply(this,arguments)}function zc(){return(zc=(0,F.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function In(){(0,ae._registerComponent)(new he.wA("messaging",ur,"PUBLIC")),(0,ae._registerComponent)(new he.wA("messaging-internal",ii,"PRIVATE")),(0,ae.registerVersion)(bo,"0.9.19"),(0,ae.registerVersion)(bo,"0.9.19","esm2017")}();const ea="analytics",yh="firebase_id",So="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",hu="https://www.googletagmanager.com/gtag/js",Hn=new ue.Yd("@firebase/analytics");function fu(T){return Promise.all(T.map(C=>C.catch(R=>R)))}function pu(T,C){const R=document.createElement("script");R.src=`${hu}?l=${T}&id=${C}`,R.async=!0,document.head.appendChild(R)}function fp(T,C,R,U,X,le){return To.apply(this,arguments)}function To(){return(To=(0,F.Z)(function*(T,C,R,U,X,le){const Te=U[X];try{if(Te)yield C[Te];else{const yt=(yield fu(R)).find(ot=>ot.measurementId===X);yt&&(yield C[yt.appId])}}catch(Ge){Hn.error(Ge)}T("config",X,le)})).apply(this,arguments)}function ta(T,C,R,U,X){return Io.apply(this,arguments)}function Io(){return(Io=(0,F.Z)(function*(T,C,R,U,X){try{let le=[];if(X&&X.send_to){let Te=X.send_to;Array.isArray(Te)||(Te=[Te]);const Ge=yield fu(R);for(const yt of Te){const ot=Ge.find(mt=>mt.measurementId===yt),Bt=ot&&C[ot.appId];if(!Bt){le=[];break}le.push(Bt)}}0===le.length&&(le=Object.values(C)),yield Promise.all(le),T("event",U,X||{})}catch(le){Hn.error(le)}})).apply(this,arguments)}function Eh(T){const C=window.document.getElementsByTagName("script");for(const R of Object.values(C))if(R.src&&R.src.includes(hu)&&R.src.includes(T))return R;return null}const Er=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),el=new class Yi{constructor(C={},R=1e3){this.throttleMetadata=C,this.intervalMillis=R}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,R){this.throttleMetadata[C]=R}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function bh(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function tl(T){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,F.Z)(function*(T){var C;const{appId:R,apiKey:U}=T,X={method:"GET",headers:bh(U)},le=So.replace("{app-id}",R),Te=yield fetch(le,X);if(200!==Te.status&&304!==Te.status){let Ge="";try{const yt=yield Te.json();null!==(C=yt.error)&&void 0!==C&&C.message&&(Ge=yt.error.message)}catch{}throw Er.create("config-fetch-failed",{httpStatus:Te.status,responseMessage:Ge})}return Te.json()})).apply(this,arguments)}function zn(T){return Li.apply(this,arguments)}function Li(){return(Li=(0,F.Z)(function*(T,C=el,R){const{appId:U,apiKey:X,measurementId:le}=T.options;if(!U)throw Er.create("no-app-id");if(!X){if(le)return{measurementId:le,appId:U};throw Er.create("no-api-key")}const Te=C.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ge=new yu;return setTimeout((0,F.Z)(function*(){Ge.abort()}),void 0!==R?R:6e4),mu({appId:U,apiKey:X,measurementId:le},Te,Ge,C)})).apply(this,arguments)}function mu(T,C,R){return Co.apply(this,arguments)}function Co(){return(Co=(0,F.Z)(function*(T,{throttleEndTimeMillis:C,backoffCount:R},U,X=el){var le,Te;const{appId:Ge,measurementId:yt}=T;try{yield nl(U,C)}catch(ot){if(yt)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yt} provided in the "measurementId" field in the local Firebase config. [${null===(le=ot)||void 0===le?void 0:le.message}]`),{appId:Ge,measurementId:yt};throw ot}try{const ot=yield tl(T);return X.deleteThrottleMetadata(Ge),ot}catch(ot){const Bt=ot;if(!vu(Bt)){if(X.deleteThrottleMetadata(Ge),yt)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yt} provided in the "measurementId" field in the local Firebase config. [${Bt?.message}]`),{appId:Ge,measurementId:yt};throw ot}const mt=503===Number(null===(Te=Bt?.customData)||void 0===Te?void 0:Te.httpStatus)?(0,se.$s)(R,X.intervalMillis,30):(0,se.$s)(R,X.intervalMillis),An={throttleEndTimeMillis:Date.now()+mt,backoffCount:R+1};return X.setThrottleMetadata(Ge,An),Hn.debug(`Calling attemptFetch again in ${mt} millis`),mu(T,An,U,X)}})).apply(this,arguments)}function nl(T,C){return new Promise((R,U)=>{const X=Math.max(C-Date.now(),0),le=setTimeout(R,X);T.addEventListener(()=>{clearTimeout(le),U(Er.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function vu(T){if(!(T instanceof se.ZR&&T.customData))return!1;const C=Number(T.customData.httpStatus);return 429===C||500===C||503===C||504===C}class yu{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let Ys,il;function Qs(){return(Qs=(0,F.Z)(function*(T,C,R,U,X){if(X&&X.global)T("event",R,U);else{const le=yield C;T("event",R,Object.assign(Object.assign({},U),{send_to:le}))}})).apply(this,arguments)}function Mo(T){il=T}function Kc(T){Ys=T}function ys(){return wu.apply(this,arguments)}function wu(){return(wu=(0,F.Z)(function*(){var T;if(!(0,se.hl)())return Hn.warn(Er.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(C){return Hn.warn(Er.create("indexeddb-unavailable",{errorInfo:null===(T=C)||void 0===T?void 0:T.toString()}).message),!1}return!0})).apply(this,arguments)}function ia(){return(ia=(0,F.Z)(function*(T,C,R,U,X,le,Te){var Ge;const yt=zn(T);yt.then(fr=>{R[fr.measurementId]=fr.appId,T.options.measurementId&&fr.measurementId!==T.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${fr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(fr=>Hn.error(fr)),C.push(yt);const ot=ys().then(fr=>{if(fr)return U.getId()}),[Bt,mt]=yield Promise.all([yt,ot]);Eh(le)||pu(le,Bt.measurementId),il&&(X("consent","default",il),Mo(void 0)),X("js",new Date);const An=null!==(Ge=Te?.config)&&void 0!==Ge?Ge:{};return An.origin="firebase",An.update=!0,null!=mt&&(An[yh]=mt),X("config",Bt.measurementId,An),Ys&&(X("set",Ys),Kc(void 0)),Bt.measurementId})).apply(this,arguments)}class bu{constructor(C){this.app=C}_delete(){return delete si[this.app.options.appId],Promise.resolve()}}let si={},Xs=[];const sa={};let aa,Ro,oa="dataLayer",sl=!1;function Vy(T,C,R){!function om(){const T=[];if((0,se.ru)()&&T.push("This is a browser extension environment."),(0,se.zI)()||T.push("Cookies are not available."),T.length>0){const C=T.map((U,X)=>`(${X+1}) ${U}`).join(" "),R=Er.create("invalid-analytics-context",{errorInfo:C});Hn.warn(R.message)}}();const U=T.options.appId;if(!U)throw Er.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Er.create("no-api-key");Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=si[U])throw Er.create("already-exists",{id:U});if(!sl){!function _h(T){let C=[];Array.isArray(window[T])?C=window[T]:window[T]=C}(oa);const{wrappedGtag:le,gtagCore:Te}=function Qa(T,C,R,U,X){let le=function(...Te){window[U].push(arguments)};return window[X]&&"function"==typeof window[X]&&(le=window[X]),window[X]=function gu(T,C,R,U){function le(){return(le=(0,F.Z)(function*(Te,Ge,yt){try{"event"===Te?yield ta(T,C,R,Ge,yt):"config"===Te?yield fp(T,C,R,U,Ge,yt):"consent"===Te?T("consent","update",yt):T("set",Ge)}catch(ot){Hn.error(ot)}})).apply(this,arguments)}return function X(Te,Ge,yt){return le.apply(this,arguments)}}(le,T,C,R),{gtagCore:le,wrappedGtag:window[X]}}(si,Xs,sa,oa,"gtag");Ro=le,aa=Te,sl=!0}return si[U]=function ra(T,C,R,U,X,le,Te){return ia.apply(this,arguments)}(T,Xs,sa,C,aa,oa,R),new bu(T)}function By(){return pp.apply(this,arguments)}function pp(){return(pp=(0,F.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const _s="@firebase/analytics";!function cr(){(0,ae._registerComponent)(new he.wA(ea,(C,{options:R})=>Vy(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ae._registerComponent)(new he.wA("analytics-internal",function T(C){try{const R=C.getProvider(ea).getImmediate();return{logEvent:(U,X,le)=>function oi(T,C,R,U){T=(0,se.m9)(T),function Dh(T,C,R,U,X){return Qs.apply(this,arguments)}(Ro,si[T.app.options.appId],C,R,U).catch(X=>Hn.error(X))}(R,U,X,le)}}catch(R){throw Er.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ae.registerVersion)(_s,"0.8.3"),(0,ae.registerVersion)(_s,"0.8.3","esm2017")}();var tt=V(4408),Qi=V(7565);const ua=new class Js extends Qi.v{}(class dr extends tt.o{constructor(C,R){super(C,R),this.scheduler=C,this.work=R}schedule(C,R=0){return R>0?super.schedule(C,R):(this.delay=R,this.state=C,this.scheduler.flush(this),this)}execute(C,R){return R>0||this.closed?super.execute(C,R):this._execute(C,R)}requestAsyncId(C,R,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(C,R,U):(C.flush(this),0)}});var ca=V(4986),nr=V(8505),eo=V(9468),At=V(5363);const ai=new h.GfV("7.4.1"),Es="__angularfire_symbol__analyticsIsSupportedValue",_i="__angularfire_symbol__analyticsIsSupported",Su="__angularfire_symbol__remoteConfigIsSupportedValue",al="__angularfire_symbol__remoteConfigIsSupported",li="__angularfire_symbol__messagingIsSupportedValue",Th="__angularfire_symbol__messagingIsSupported";function Ei(T,C,R){if(C){if(1===C.length)return C[0];const le=C.filter(Te=>Te.app===R);if(1===le.length)return le[0]}return R.container.getProvider(T).getImmediate({optional:!0})}globalThis[_i]||(globalThis[_i]=By().then(T=>globalThis[Es]=T).catch(()=>globalThis[Es]=!1)),globalThis[Th]||(globalThis[Th]=gh().then(T=>globalThis[li]=T).catch(()=>globalThis[li]=!1)),globalThis[al]||(globalThis[al]=Wl().then(T=>globalThis[Su]=T).catch(()=>globalThis[Su]=!1));const qt=(T,C)=>{const R=C?[C]:(0,te.C6)(),U=[];return R.forEach(X=>{X.container.getProvider(T).instances.forEach(Te=>{U.includes(Te)||U.push(Te)})}),U};function ul(){}class hr{constructor(C,R=ua){this.zone=C,this.delegate=R}now(){return this.delegate.now()}schedule(C,R,U){const X=this.zone;return this.delegate.schedule(function(Te){X.runGuarded(()=>{C.apply(this,[Te])})},R,U)}}class lt{constructor(C){this.zone=C,this.task=null}call(C,R){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ul,{},ul,ul)),R.pipe((0,nr.b)({next:U,complete:U,error:U})).subscribe(C).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let da=(()=>{class T{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new hr(Zone.current)),this.insideAngular=R.run(()=>new hr(Zone.current,ca.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(R){return new(R||T)(h.LFG(h.R0b))},T.\u0275prov=h.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function bt(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Xi(T){return bt(),function Ih(T){return function(R){return(R=R.lift(new lt(T.ngZone))).pipe((0,eo.R)(T.outsideAngular),(0,At.Q)(T.insideAngular))}}(bt())(T)}},2090:(pt,Ae,V)=>{V.d(Ae,{$s:()=>it,BH:()=>zt,G6:()=>Se,L:()=>fe,LL:()=>Xt,Pz:()=>nn,Sg:()=>Qe,UG:()=>De,US:()=>he,ZB:()=>G,ZR:()=>Sn,aH:()=>_t,b$:()=>ge,eu:()=>ze,hl:()=>$e,jU:()=>at,m9:()=>Ht,ne:()=>Xn,pd:()=>zi,r3:()=>Oi,ru:()=>ye,tV:()=>pe,uI:()=>xe,vZ:()=>Xe,w1:()=>ht,xO:()=>sr,xb:()=>pi,z$:()=>Be,zI:()=>j,zd:()=>gi});const ae=function(z){const B=[];let K=0;for(let be=0;be<z.length;be++){let J=z.charCodeAt(be);J<128?B[K++]=J:J<2048?(B[K++]=J>>6|192,B[K++]=63&J|128):55296==(64512&J)&&be+1<z.length&&56320==(64512&z.charCodeAt(be+1))?(J=65536+((1023&J)<<10)+(1023&z.charCodeAt(++be)),B[K++]=J>>18|240,B[K++]=J>>12&63|128,B[K++]=J>>6&63|128,B[K++]=63&J|128):(B[K++]=J>>12|224,B[K++]=J>>6&63|128,B[K++]=63&J|128)}return B},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,B){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,be=[];for(let J=0;J<z.length;J+=3){const We=z[J],gt=J+1<z.length,Jt=gt?z[J+1]:0,yn=J+2<z.length,Kt=yn?z[J+2]:0;let $t=(15&Jt)<<2|Kt>>6,yr=63&Kt;yn||(yr=64,gt||($t=64)),be.push(K[We>>2],K[(3&We)<<4|Jt>>4],K[$t],K[yr])}return be.join("")},encodeString(z,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(z):this.encodeByteArray(ae(z),B)},decodeString(z,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(z):function(z){const B=[];let K=0,be=0;for(;K<z.length;){const J=z[K++];if(J<128)B[be++]=String.fromCharCode(J);else if(J>191&&J<224){const We=z[K++];B[be++]=String.fromCharCode((31&J)<<6|63&We)}else if(J>239&&J<365){const yn=((7&J)<<18|(63&z[K++])<<12|(63&z[K++])<<6|63&z[K++])-65536;B[be++]=String.fromCharCode(55296+(yn>>10)),B[be++]=String.fromCharCode(56320+(1023&yn))}else{const We=z[K++],gt=z[K++];B[be++]=String.fromCharCode((15&J)<<12|(63&We)<<6|63&gt)}}return B.join("")}(this.decodeStringToByteArray(z,B))},decodeStringToByteArray(z,B){this.init_();const K=B?this.charToByteMapWebSafe_:this.charToByteMap_,be=[];for(let J=0;J<z.length;){const We=K[z.charAt(J++)],Jt=J<z.length?K[z.charAt(J)]:0;++J;const Kt=J<z.length?K[z.charAt(J)]:64;++J;const qe=J<z.length?K[z.charAt(J)]:64;if(++J,null==We||null==Jt||null==Kt||null==qe)throw Error();be.push(We<<2|Jt>>4),64!==Kt&&(be.push(Jt<<4&240|Kt>>2),64!==qe&&be.push(Kt<<6&192|qe))}return be},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},fe=function(z){return function(z){const B=ae(z);return he.encodeByteArray(B,!0)}(z).replace(/\./g,"")},pe=function(z){try{return he.decodeString(z,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function G(z,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return B}for(const K in B)!B.hasOwnProperty(K)||!Q(K)||(z[K]=G(z[K],B[K]));return z}function Q(z){return"__proto__"!==z}function Be(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function xe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function De(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function at(){return"object"==typeof self&&self.self===self}function ye(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function ge(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ht(){const z=Be();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function Se(){return!De()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $e(){return"object"==typeof indexedDB}function ze(){return new Promise((z,B)=>{try{let K=!0;const be="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(be);J.onsuccess=()=>{J.result.close(),K||self.indexedDB.deleteDatabase(be),z(!0)},J.onupgradeneeded=()=>{K=!1},J.onerror=()=>{var We;B((null===(We=J.error)||void 0===We?void 0:We.message)||"")}}catch(K){B(K)}})}function j(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const re=()=>{try{return function ve(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const z=process.env.__FIREBASE_DEFAULTS__;return z?JSON.parse(z):void 0})()||(()=>{if(typeof document>"u")return;let z;try{z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=z&&pe(z[1]);return B&&JSON.parse(B)})()}catch(z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${z}`)}},_t=()=>{var z;return null===(z=re())||void 0===z?void 0:z.config},nn=z=>{var B;return null===(B=re())||void 0===B?void 0:B[`_${z}`]};class zt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,K)=>{this.resolve=B,this.reject=K})}wrapCallback(B){return(K,be)=>{K?this.reject(K):this.resolve(be),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(K):B(K,be))}}}function Qe(z,B){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const be=B||"demo-project",J=z.iat||0,We=z.sub||z.user_id;if(!We)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const gt=Object.assign({iss:`https://securetoken.google.com/${be}`,aud:be,iat:J,exp:J+3600,auth_time:J,sub:We,user_id:We,firebase:{sign_in_provider:"custom",identities:{}}},z);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(gt)),""].join(".")}class Sn extends Error{constructor(B,K,be){super(K),this.code=B,this.customData=be,this.name="FirebaseError",Object.setPrototypeOf(this,Sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xt.prototype.create)}}class Xt{constructor(B,K,be){this.service=B,this.serviceName=K,this.errors=be}create(B,...K){const be=K[0]||{},J=`${this.service}/${B}`,We=this.errors[B],gt=We?function rn(z,B){return z.replace(Br,(K,be)=>{const J=B[be];return null!=J?String(J):`<${be}?>`})}(We,be):"Error";return new Sn(J,`${this.serviceName}: ${gt} (${J}).`,be)}}const Br=/\{\$([^}]+)}/g;function Oi(z,B){return Object.prototype.hasOwnProperty.call(z,B)}function pi(z){for(const B in z)if(Object.prototype.hasOwnProperty.call(z,B))return!1;return!0}function Xe(z,B){if(z===B)return!0;const K=Object.keys(z),be=Object.keys(B);for(const J of K){if(!be.includes(J))return!1;const We=z[J],gt=B[J];if(Or(We)&&Or(gt)){if(!Xe(We,gt))return!1}else if(We!==gt)return!1}for(const J of be)if(!K.includes(J))return!1;return!0}function Or(z){return null!==z&&"object"==typeof z}function sr(z){const B=[];for(const[K,be]of Object.entries(z))Array.isArray(be)?be.forEach(J=>{B.push(encodeURIComponent(K)+"="+encodeURIComponent(J))}):B.push(encodeURIComponent(K)+"="+encodeURIComponent(be));return B.length?"&"+B.join("&"):""}function gi(z){const B={};return z.replace(/^\?/,"").split("&").forEach(be=>{if(be){const[J,We]=be.split("=");B[decodeURIComponent(J)]=decodeURIComponent(We)}}),B}function zi(z){const B=z.indexOf("?");if(!B)return"";const K=z.indexOf("#",B);return z.substring(B,K>0?K:void 0)}function Xn(z,B){const K=new _n(z,B);return K.subscribe.bind(K)}class _n{constructor(B,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{B(this)}).catch(be=>{this.error(be)})}next(B){this.forEachObserver(K=>{K.next(B)})}error(B){this.forEachObserver(K=>{K.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,K,be){let J;if(void 0===B&&void 0===K&&void 0===be)throw new Error("Missing Observer.");J=function ft(z,B){if("object"!=typeof z||null===z)return!1;for(const K of B)if(K in z&&"function"==typeof z[K])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:K,complete:be},void 0===J.next&&(J.next=dn),void 0===J.error&&(J.error=dn),void 0===J.complete&&(J.complete=dn);const We=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch{}}),this.observers.push(J),We}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,B)}sendOne(B,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{K(this.observers[B])}catch(be){typeof console<"u"&&console.error&&console.error(be)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dn(){}function it(z,B=1e3,K=2){const be=B*Math.pow(K,z),J=Math.round(.5*be*(Math.random()-.5)*2);return Math.min(144e5,be+J)}function Ht(z){return z&&z._delegate?z._delegate:z}},3680:(pt,Ae,V)=>{var h=V(4650);let te=null;function F(){return te}const ue=new h.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function pe(){return(0,h.LFG)(G)}()},providedIn:"platform"}),n})();const $=new h.OlP("Location Initialized");let G=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Q()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Q()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Be(){return new G((0,h.LFG)(ue))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function De(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function at(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(rt)},providedIn:"root"}),n})();const ge=new h.OlP("appBaseHref");let rt=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+at(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const u=this.prepareExternalUrl(i+at(s));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){const u=this.prepareExternalUrl(i+at(s));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(ge,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ht=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let u=this.prepareExternalUrl(i+at(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){let u=this.prepareExternalUrl(i+at(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(ge,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=De($e(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+at(r))}normalize(t){return n.stripTrailingSlash(function Se(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,$e(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+at(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+at(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=at,n.joinWithSlash=xe,n.stripTrailingSlash=De,n.\u0275fac=function(t){return new(t||n)(h.LFG(ye))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ee(){return new Me((0,h.LFG)(ye))}()},providedIn:"root"}),n})();function $e(n){return n.replace(/\/index.html$/,"")}class Ha{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gs=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ha(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===s?void 0:s);else if(null!==s){const d=r.get(s);r.move(d,u),zs(d,i)}});for(let i=0,s=r.length;i<s;i++){const d=r.get(i).context;d.index=i,d.count=s,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{zs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function zs(n,e){n.context.$implicit=e.item}let Nn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ac,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){_r("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){_r("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Ac{constructor(){this.$implicit=null,this.ngIf=null}}function _r(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let sh=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),u=-1===i.indexOf("-")?void 0:h.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,u):this._renderer.removeStyle(this._ngEl.nativeElement,i,u)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.aQg),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),yo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Rr(n){return"server"===n}let Kl=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new cp((0,h.LFG)(ue),window)}),n})();class cp{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Gr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const u=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=vi(this.window.history)||vi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function vi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class wo extends class ph extends class he{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function se(n){te||(te=n)}(new wo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function uu(){return bo=bo||document.querySelector("base"),bo?bo.getAttribute("href"):null}();return null==t?null:function ii(n){ur=ur||document.createElement("a"),ur.setAttribute("href",n);const e=ur.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){bo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function zl(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let ur,bo=null;const In=new h.OlP("TRANSITION_ID"),zc=[{provide:h.ip1,useFactory:function gh(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[In,ue,h.zs3],multi:!0}];let qc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const cu=new h.OlP("EventManagerPlugins");let mh=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const u=i[s];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(cu),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class du{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Do=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Jo=(()=>{class n extends Do{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const u=this._doc.createElement("style");u.textContent=s,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(vh),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(vh))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function vh(n){F().remove(n)}const ea={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yh=/%COMP%/g;function pu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?pu(n,i,t):(i=i.replace(yh,n),t.push(i))}return t}function _h(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let To=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ta(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Eh(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new wh(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=pu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(mh),h.LFG(Jo),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class ta{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ea[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Qa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Qa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=ea[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ea[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,_h(r)):this.eventManager.addEventListener(e,t,_h(r))}}function Qa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Eh extends ta{constructor(e,t,r,i){super(e),this.component=r;const s=pu(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function Hn(n){return"_ngcontent-%COMP%".replace(yh,n)}(i+"-"+r.id),this.hostAttr=function fu(n){return"_nghost-%COMP%".replace(yh,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class wh extends ta{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=pu(i.id,i.styles,[]);for(let u=0;u<s.length;u++){const d=document.createElement("style");d.textContent=s[u],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Er=(()=>{class n extends du{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Xa=["alt","control","meta","shift"],Ja={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let el=(()=>{class n extends du{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),u=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,s.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let u="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),u="code."),Xa.forEach(y=>{const b=r.indexOf(y);b>-1&&(r.splice(b,1),u+=y+".")}),u+=s,0!=r.length||0===s.length)return null;const p={};return p.domEventName=i,p.fullKey=u,p}static matchEventFullKeyCode(t,r){let i=Ja[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Xa.forEach(u=>{u!==i&&(0,Yi[u])(t)&&(s+=u+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const yu=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function mu(){wo.makeCurrent()},multi:!0},{provide:ue,useFactory:function nl(){return(0,h.RDi)(document),document},deps:[]}]),Ys=new h.OlP(""),Dh=[{provide:h.rWj,useClass:class hp{addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let s=i.length,u=!1;const d=function(p){u=u||p,s--,0==s&&r(u)};i.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],Qs=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Co(){return new h.qLn},deps:[]},{provide:cu,useClass:Er,multi:!0,deps:[ue,h.R0b,h.Lbi]},{provide:cu,useClass:el,multi:!0,deps:[ue]},{provide:To,useClass:To,deps:[mh,Jo,h.AFp]},{provide:h.FYo,useExisting:To},{provide:Do,useExisting:Jo},{provide:Jo,useClass:Jo,deps:[ue]},{provide:mh,useClass:mh,deps:[cu,h.R0b]},{provide:class Qo{},useClass:qc,deps:[]},[]];let _u=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:In,useExisting:h.AFp},zc]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ys,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...Qs,...Dh],imports:[yo,h.hGG]}),n})(),vs=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function na(){return new vs((0,h.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let ol=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):h.LFG(um),r},providedIn:"root"}),n})(),um=(()=>{class n extends ol{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case h.q3G.NONE:return r;case h.q3G.HTML:return(0,h.qzn)(r,"HTML")?(0,h.z3N)(r):(0,h.EiD)(this._doc,String(r)).toString();case h.q3G.STYLE:return(0,h.qzn)(r,"Style")?(0,h.z3N)(r):r;case h.q3G.SCRIPT:if((0,h.qzn)(r,"Script"))return(0,h.z3N)(r);throw new Error("unsafe value used in a script context");case h.q3G.URL:return(0,h.qzn)(r,"URL")?(0,h.z3N)(r):(0,h.mCW)(String(r));case h.q3G.RESOURCE_URL:if((0,h.qzn)(r,"ResourceURL"))return(0,h.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,h.JVY)(t)}bypassSecurityTrustStyle(t){return(0,h.L6k)(t)}bypassSecurityTrustScript(t){return(0,h.eBb)(t)}bypassSecurityTrustUrl(t){return(0,h.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,h.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function lm(n){return new um(n.get(ue))}(h.LFG(h.zs3)),r},providedIn:"root"}),n})();var oi=V(2011),la=V(4986),_s=V(9751),pn=V(8996),cr=V(7669);function tt(...n){const e=(0,cr.yG)(n);return(0,pn.D)(n,e)}var dr=V(5813),Qi=V(8189);function ua(...n){return function Js(){return(0,Qi.J)(1)}()((0,pn.D)(n,(0,cr.yG)(n)))}var zr=V(4482);function ca(...n){const e=(0,cr.yG)(n);return(0,zr.e)((t,r)=>{(e?ua(n,t,e):ua(n,t)).subscribe(r)})}var nr=V(5403);function eo(){return(0,zr.e)((n,e)=>{let t,r=!1;n.subscribe((0,nr.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var At=V(4004);function ai(n,e,t,r,i){return(s,u)=>{let d=t,p=e,y=0;s.subscribe((0,nr.x)(u,b=>{const I=y++;p=d?n(p,b,I):(d=!0,b),r&&u.next(p)},i&&(()=>{d&&u.next(p),u.complete()})))}}function Es(n,e){return(0,zr.e)(ai(n,e,arguments.length>=2,!0))}var _i=V(4671);function al(n,e){return n===e}function li(n,e){return(0,zr.e)((t,r)=>{let i=0;t.subscribe((0,nr.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}V(9545);var lt,ll=V(3942),_e=V(5861),to=V(9681),Yc=V(4859),Ei=V(1877),qt=V(2090),ul=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hr={},da=da||{},bt=ul||self;function ha(){}function wi(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function cl(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Xi="closure_uid_"+(1e9*Math.random()>>>0),Ih=0;function qn(n,e,t){return n.call.apply(n.bind,arguments)}function gp(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function T(n,e,t){return(T=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qn:gp).apply(null,arguments)}function C(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function R(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,s){for(var u=Array(arguments.length-2),d=2;d<arguments.length;d++)u[d-2]=arguments[d];return e.prototype[i].apply(r,u)}}function U(){this.s=this.s,this.o=this.o}var le={};U.prototype.s=!1,U.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function fa(n){return Object.prototype.hasOwnProperty.call(n,Xi)&&n[Xi]||(n[Xi]=++Ih)}(this);delete le[n]}},U.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Te=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Ge(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function yt(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(wi(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let u=0;u<s;u++)n[i+u]=r[u]}else n.push(r)}}function ot(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ot.prototype.h=function(){this.defaultPrevented=!0};var Bt=function(){if(!bt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{bt.addEventListener("test",ha,e),bt.removeEventListener("test",ha,e)}catch{}return n}();function mt(n){return/^[\s\xa0]*$/.test(n)}var An=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function fr(n,e){return n<e?-1:n>e?1:0}function ws(){var n=bt.navigator;return n&&(n=n.userAgent)?n:""}function Fr(n){return-1!=ws().indexOf(n)}function bs(n){return bs[" "](n),n}bs[" "]=ha;var Ch,n,no=Fr("Opera"),bi=Fr("Trident")||Fr("MSIE"),xo=Fr("Edge"),Ds=xo||bi,Qc=Fr("Gecko")&&!(-1!=ws().toLowerCase().indexOf("webkit")&&!Fr("Edge"))&&!(Fr("Trident")||Fr("MSIE"))&&!Fr("Edge"),cm=-1!=ws().toLowerCase().indexOf("webkit")&&!Fr("Edge");function dm(){var n=bt.document;return n?n.documentMode:void 0}e:{var Ah="",Tu=(n=ws(),Qc?/rv:([^\);]+)(\)|;)/.exec(n):xo?/Edge\/([\d\.]+)/.exec(n):bi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):cm?/WebKit\/(\S+)/.exec(n):no?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Tu&&(Ah=Tu?Tu[1]:""),bi){var dl=dm();if(null!=dl&&dl>parseFloat(Ah)){Ch=String(dl);break e}}Ch=Ah}var Hy={};var Db=bt.document&&bi&&(dm()||parseInt(Ch,10))||void 0;function hl(n,e){if(ot.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Qc){e:{try{bs(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:jy[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&hl.X.h.call(this)}}R(hl,ot);var jy={2:"touch",3:"pen",4:"mouse"};hl.prototype.h=function(){hl.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Iu="closure_listenable_"+(1e6*Math.random()|0),Cu=0;function vp(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++Cu,this.ba=this.ea=!1}function No(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function yp(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function pm(n){const e={};for(const t in n)e[t]=n[t];return e}const $y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Au(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<$y.length;s++)t=$y[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Mu(n){this.src=n,this.g={},this.h=0}function Mh(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=Te(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(No(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Rh(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==r)return i}return-1}Mu.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=Rh(n,e,r,i);return-1<u?(e=n[u],t||(e.ea=!1)):((e=new vp(e,this.src,s,!!r,i)).ea=t,n.push(e)),e};var xh="closure_lm_"+(1e6*Math.random()|0),Ss={};function gm(n,e,t,r,i){if(r&&r.once)return _p(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)gm(n,e[s],t,r,i);return null}return t=wp(t),n&&n[Iu]?n.N(e,t,cl(r)?!!r.capture:!!r,i):Nh(n,e,t,!1,r,i)}function Nh(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var u=cl(i)?!!i.capture:!!i,d=Ph(n);if(d||(n[xh]=d=new Mu(n)),(t=d.add(e,t,r,u,s)).proxy)return t;if(r=function Gy(){const e=vm;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Bt||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(fl(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function _p(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)_p(n,e[s],t,r,i);return null}return t=wp(t),n&&n[Iu]?n.O(e,t,cl(r)?!!r.capture:!!r,i):Nh(n,e,t,!0,r,i)}function mm(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)mm(n,e[s],t,r,i);else r=cl(r)?!!r.capture:!!r,t=wp(t),n&&n[Iu]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Rh(s=n.g[e],t,r,i))&&(No(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=Ph(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Rh(e,t,r,i)),(t=-1<n?e[n]:null)&&Vi(t))}function Vi(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Iu])Mh(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(fl(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ph(e))?(Mh(t,n),0==t.h&&(t.src=null,e[xh]=null)):No(n)}}}function fl(n){return n in Ss?Ss[n]:Ss[n]="on"+n}function vm(n,e){if(n.ba)n=!0;else{e=new hl(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Vi(n),n=t.call(r,e)}return n}function Ph(n){return(n=n[xh])instanceof Mu?n:null}var Ep="__closure_events_fn_"+(1e9*Math.random()>>>0);function wp(n){return"function"==typeof n?n:(n[Ep]||(n[Ep]=function(e){return n.handleEvent(e)}),n[Ep])}function xr(){U.call(this),this.i=new Mu(this),this.P=this,this.I=null}function Lr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ot(e,n);else if(e instanceof ot)e.target=e.target||n;else{var i=e;Au(e=new ot(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var u=e.g=t[s];i=Xc(u,r,!0,e)&&i}if(i=Xc(u=e.g=n,r,!0,e)&&i,i=Xc(u,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=Xc(u=e.g=t[s],r,!1,e)&&i}function Xc(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var u=e[s];if(u&&!u.ba&&u.capture==t){var d=u.listener,p=u.ha||u.src;u.ea&&Mh(n.i,u),i=!1!==d.call(p,r)&&i}}return i&&!r.defaultPrevented}R(xr,U),xr.prototype[Iu]=!0,xr.prototype.removeEventListener=function(n,e,t,r){mm(this,n,e,t,r)},xr.prototype.M=function(){if(xr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)No(t[r]);delete n.g[e],n.h--}}this.I=null},xr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},xr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Oh=bt.JSON.stringify;function zy(){var n=qy;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Fh,ga=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new kh,n=>n.reset());class kh{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Po(n){bt.setTimeout(()=>{throw n},0)}function ma(n,e){Fh||function Lh(){var n=bt.Promise.resolve(void 0);Fh=function(){n.then(ym)}}(),Vh||(Fh(),Vh=!0),qy.add(n,e)}var Vh=!1,qy=new class Sb{constructor(){this.h=this.g=null}add(e,t){const r=ga.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function ym(){for(var n;n=zy();){try{n.h.call(n.g)}catch(t){Po(t)}var e=ga;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Vh=!1}function bp(n,e){xr.call(this),this.h=n||1,this.g=e||bt,this.j=T(this.lb,this),this.l=Date.now()}function Jc(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function pl(n,e,t){if("function"==typeof n)t&&(n=T(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=T(n.handleEvent,n)}return 2147483647<Number(e)?-1:bt.setTimeout(n,e||0)}function Wy(n){n.g=pl(()=>{n.g=null,n.i&&(n.i=!1,Wy(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}R(bp,xr),(lt=bp.prototype).ca=!1,lt.R=null,lt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Lr(this,"tick"),this.ca&&(Jc(this),this.start()))}},lt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},lt.M=function(){bp.X.M.call(this),Jc(this),delete this.g};class Tb extends U{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Wy(this)}M(){super.M(),this.g&&(bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ru(n){U.call(this),this.h=n,this.g={}}R(Ru,U);var _m=[];function Em(n,e,t,r){Array.isArray(t)||(t&&(_m[0]=t.toString()),t=_m);for(var i=0;i<t.length;i++){var s=gm(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function Dp(n){yp(n.g,function(e,t){this.g.hasOwnProperty(t)&&Vi(e)},n),n.g={}}function xu(){this.g=!0}function Oo(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Zy(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<i.length;u++)i[u]=""}}}return Oh(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ru.prototype.M=function(){Ru.X.M.call(this),Dp(this)},Ru.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xu.prototype.Aa=function(){this.g=!1},xu.prototype.info=function(){};var wn={},Nu=null;function Bh(){return Nu=Nu||new xr}function Hh(n){ot.call(this,wn.Pa,n)}function Pu(n){const e=Bh();Lr(e,new Hh(e,n))}function Sp(n,e){ot.call(this,wn.STAT_EVENT,n),this.stat=e}function ui(n){const e=Bh();Lr(e,new Sp(e,n))}function bm(n,e){ot.call(this,wn.Qa,n),this.size=e}function td(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return bt.setTimeout(function(){n()},e)}wn.Pa="serverreachability",R(Hh,ot),wn.STAT_EVENT="statevent",R(Sp,ot),wn.Qa="timingevent",R(bm,ot);var jh={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},nd={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Dm(){}function $h(){}Dm.prototype.h=null;var qh,Ou={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Gh(){ot.call(this,"d")}function zh(){ot.call(this,"c")}function ml(){}function va(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Ru(this),this.O=Ib,this.T=new bp(n=Ds?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new rd}function rd(){this.i=null,this.g="",this.h=!1}R(Gh,ot),R(zh,ot),R(ml,Dm),ml.prototype.g=function(){return new XMLHttpRequest},ml.prototype.i=function(){return{}},qh=new ml;var Ib=45e3,id={},ku={};function qr(n,e,t){n.K=1,n.v=Fu(Ts(e)),n.s=t,n.P=!0,vl(n,null)}function vl(n,e){n.F=Date.now(),ro(n),n.A=Ts(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),W(t.i,"t",r),n.C=0,t=n.l.H,n.h=new rd,n.g=Ub(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Tb(T(n.La,n,n.g),n.N)),Em(n.S,n.g,"readystatechange",n.ib),e=n.H?pm(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Pu(1),function wm(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var u="",d=s.split("&"),p=0;p<d.length;p++){var y=d[p].split("=");if(1<y.length){var b=y[0];y=y[1];var I=b.split("_");u=2<=I.length&&"type"==I[1]?u+(b+"=")+y+"&":u+(b+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.U,n.s)}function ko(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Sm(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=sd(n,t),i==ku){4==e&&(n.o=4,ui(14),r=!1),Oo(n.j,n.m,null,"[Incomplete Response]");break}if(i==id){n.o=4,ui(15),Oo(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Oo(n.j,n.m,i,null),od(n,i)}ko(n)&&i!=ku&&i!=id&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ui(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Nm(e),e.K=!0,ui(11))):(Oo(n.j,n.m,t,"[Invalid Chunked Response]"),pr(n),ya(n))}function sd(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ku:(t=Number(e.substring(t,r)),isNaN(t)?id:(r+=1)+t>e.length?ku:(e=e.substr(r,t),n.C=r+t,e))}function ro(n){n.V=Date.now()+n.O,Tm(n,n.O)}function Tm(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=td(T(n.gb,n),e)}function yl(n){n.B&&(bt.clearTimeout(n.B),n.B=null)}function ya(n){0==n.l.G||n.I||Fb(n.l,n)}function pr(n){yl(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Jc(n.T),Dp(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function od(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||ud(t.h,n)))if(!n.J&&ud(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Rp(t),Wr(t)}i_(t),ui(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=td(T(t.cb,t),6e3));if(1>=Di(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else dd(t,11)}else if((n.J||t.g==n)&&Rp(t),!mt(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.T=y[0],y=y[1],2==t.G)if("c"==y[0]){t.I=y[1],t.ka=y[2];const b=y[3];null!=b&&(t.ma=b,t.j.info("VER="+t.ma));const I=y[4];null!=I&&(t.Ca=I,t.j.info("SVER="+t.Ca));const x=y[5];null!=x&&"number"==typeof x&&0<x&&(t.J=r=1.5*x,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const P=n.g;if(P){const k=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(k){var s=r.h;s.g||-1==k.indexOf("spdy")&&-1==k.indexOf("quic")&&-1==k.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ip(s,s.h),s.h=null))}if(r.D){const H=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;H&&(r.za=H,Mn(r.F,r.D,H))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var u=n;if((r=t).sa=Vb(r,r.H?r.ka:null,r.V),u.J){Lu(r.h,u);var d=u,p=r.J;p&&d.setTimeout(p),d.B&&(yl(d),ro(d)),r.g=u}else Ob(r);0<t.i.length&&Mp(t)}else"stop"!=y[0]&&"close"!=y[0]||dd(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?dd(t,7):t_(t):"noop"!=y[0]&&t.l&&t.l.wa(y),t.A=0)}Pu(4)}catch{}}function Im(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(wi(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Ky(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(wi(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Tp(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(wi(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(lt=va.prototype).setTimeout=function(n){this.O=n},lt.ib=function(n){n=n.target;const e=this.L;e&&3==Lo(n)?e.l():this.La(n)},lt.La=function(n){try{if(n==this.g)e:{const b=Lo(this.g);var e=this.g.Ea();const I=this.g.aa();if(!(3>b)&&(3!=b||Ds||this.g&&(this.h.h||this.g.fa()||xb(this.g)))){this.I||4!=b||7==e||Pu(8==e||0>=I?3:2),yl(this);var t=this.g.aa();this.Y=t;t:if(ko(this)){var r=xb(this.g);n="";var i=r.length,s=4==Lo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){pr(this),ya(this);var u="";break t}this.h.i=new bt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==t,function Uh(n,e,t,r,i,s,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.U,b,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mt(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,ui(12),pr(this),ya(this);break e}Oo(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,od(this,t)}this.P?(Sm(this,b,u),Ds&&this.i&&3==b&&(Em(this.S,this.T,"tick",this.hb),this.T.start())):(Oo(this.j,this.m,u,null),od(this,u)),4==b&&pr(this),this.i&&!this.I&&(4==b?Fb(this.l,this):(this.i=!1,ro(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,ui(12)):(this.o=0,ui(13)),pr(this),ya(this)}}}catch{}},lt.hb=function(){if(this.g){var n=Lo(this.g),e=this.g.fa();this.C<e.length&&(yl(this),Sm(this,n,e),this.i&&4!=n&&ro(this))}},lt.cancel=function(){this.I=!0,pr(this)},lt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function ed(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Pu(3),ui(17)),pr(this),this.o=2,ya(this)):Tm(this,this.V-n)};var Wh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fo(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Fo){this.h=void 0!==e?e:n.h,Zh(this,n.j),this.s=n.s,this.g=n.g,Ji(this,n.m),this.l=n.l,e=n.i;var t=new v;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),_a(this,t),this.o=n.o}else n&&(t=String(n).match(Wh))?(this.h=!!e,Zh(this,t[1]||"",!0),this.s=ad(t[2]||""),this.g=ad(t[3]||"",!0),Ji(this,t[4]),this.l=ad(t[5]||"",!0),_a(this,t[6]||"",!0),this.o=ad(t[7]||"")):(this.h=!!e,this.i=new v(null,this.h))}function Ts(n){return new Fo(n)}function Zh(n,e,t){n.j=t?ad(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ji(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function _a(n,e,t){e instanceof v?(n.i=e,function He(n,e){e&&!n.j&&(w(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(M(this,r),W(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ea(e,_)),n.i=new v(e,n.h))}function Mn(n,e,t){n.i.set(e,t)}function Fu(n){return Mn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ad(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ea(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Cb),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Cb(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Fo.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ea(e,Cm,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ea(e,Cm,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ea(t,"/"==t.charAt(0)?Yy:ld,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ea(t,g)),n.join("")};var Cm=/[#\/\?@]/g,ld=/[#\?:]/g,Yy=/[#\?]/g,_=/[#\?@]/g,g=/#/g;function v(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function w(n){n.g||(n.g=new Map,n.h=0,n.i&&function br(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function M(n,e){w(n),e=ce(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function O(n,e){return w(n),e=ce(n,e),n.g.has(e)}function W(n,e,t){M(n,e),0<t.length&&(n.i=null,n.g.set(ce(n,e),Ge(t)),n.h+=t.length)}function ce(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function St(n){this.l=n||Dt,n=bt.PerformanceNavigationTiming?0<(n=bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(bt.g&&bt.g.Ga&&bt.g.Ga()&&bt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(lt=v.prototype).add=function(n,e){w(this),this.i=null,n=ce(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},lt.forEach=function(n,e){w(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},lt.oa=function(){w(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},lt.W=function(n){w(this);let e=[];if("string"==typeof n)O(this,n)&&(e=e.concat(this.g.get(ce(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},lt.set=function(n,e){return w(this),this.i=null,O(this,n=ce(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},lt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),u=this.W(r);for(r=0;r<u.length;r++){var i=s;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var Dt=10;function gr(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Di(n){return n.h?1:n.g?n.g.size:0}function ud(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ip(n,e){n.g?n.g.add(e):n.h=e}function Lu(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Am(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Ge(n.i)}function Cp(){}function Mm(){this.g=new Cp}function Qy(n,e,t){const r=t||"";try{Im(n,function(i,s){let u=i;cl(i)&&(u=Oh(i)),e.push(r+s+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Vu(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function _l(n){this.l=n.ac||null,this.j=n.jb||!1}function Uu(n,e){xr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Bu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}St.prototype.cancel=function(){if(this.i=Am(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Cp.prototype.stringify=function(n){return bt.JSON.stringify(n,void 0)},Cp.prototype.parse=function(n){return bt.JSON.parse(n,void 0)},R(_l,Dm),_l.prototype.g=function(){return new Uu(this.l,this.j)},_l.prototype.i=function(n){return function(){return n}}({}),R(Uu,xr);var Bu=0;function Ap(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Kh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,cd(n)}function cd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(lt=Uu.prototype).open=function(n,e){if(this.readyState!=Bu)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,cd(this)},lt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||bt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Kh(this)),this.readyState=Bu},lt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,cd(this)),this.g&&(this.readyState=3,cd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof bt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ap(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},lt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Kh(this):cd(this),3==this.readyState&&Ap(this)}},lt.Va=function(n){this.g&&(this.response=this.responseText=n,Kh(this))},lt.Ua=function(n){this.g&&(this.response=n,Kh(this))},lt.ga=function(){this.g&&Kh(this)},lt.setRequestHeader=function(n,e){this.v.append(n,e)},lt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},lt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Uu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var dI=bt.JSON.parse;function Wn(n){xr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Yh,this.K=this.L=!1}R(Wn,xr);var Yh="",hI=/^https?$/i,fI=["POST","PUT"];function Jy(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Ab(n),Rm(n)}function Ab(n){n.D||(n.D=!0,Lr(n,"complete"),Lr(n,"error"))}function Mb(n){if(n.h&&typeof da<"u"&&(!n.C[1]||4!=Lo(n)||2!=n.aa()))if(n.v&&4==Lo(n))pl(n.Ha,0,n);else if(Lr(n,"readystatechange"),4==Lo(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(Wh)[1]||null;if(!i&&bt.self&&bt.self.location){var s=bt.self.location.protocol;i=s.substr(0,s.length-1)}r=!hI.test(i?i.toLowerCase():"")}t=r}if(t)Lr(n,"complete"),Lr(n,"success");else{n.m=6;try{var u=2<Lo(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.aa()+"]",Ab(n)}}finally{Rm(n)}}}function Rm(n,e){if(n.g){Rb(n);const t=n.g,r=n.C[0]?ha:null;n.g=null,n.C=null,e||Lr(n,"ready");try{t.onreadystatechange=r}catch{}}}function Rb(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(bt.clearTimeout(n.A),n.A=null)}function Lo(n){return n.g?n.g.readyState:0}function xb(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Yh:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Nb(n){let e="";return yp(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function e_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Nb(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Mn(n,e,t))}function Qh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Pb(n){this.Ca=0,this.i=[],this.j=new xu,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Qh("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Qh("baseRetryDelayMs",5e3,n),this.bb=Qh("retryDelaySeedMs",1e4,n),this.$a=Qh("forwardChannelMaxRetries",2,n),this.ta=Qh("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new St(n&&n.concurrentRequestLimit),this.Fa=new Mm,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function t_(n){if(xm(n),3==n.G){var e=n.U++,t=Ts(n.F);Mn(t,"SID",n.I),Mn(t,"RID",e),Mn(t,"TYPE","terminate"),El(n,t),(e=new va(n,n.j,e,void 0)).K=2,e.v=Fu(Ts(t)),t=!1,bt.navigator&&bt.navigator.sendBeacon&&(t=bt.navigator.sendBeacon(e.v.toString(),"")),!t&&bt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ub(e.l,null),e.g.da(e.v)),e.F=Date.now(),ro(e)}Lb(n)}function Wr(n){n.g&&(Nm(n),n.g.cancel(),n.g=null)}function xm(n){Wr(n),n.u&&(bt.clearTimeout(n.u),n.u=null),Rp(n),n.h.cancel(),n.m&&("number"==typeof n.m&&bt.clearTimeout(n.m),n.m=null)}function Mp(n){gr(n.h)||n.m||(n.m=!0,ma(n.Ja,n),n.C=0)}function ci(n,e){var t;t=e?e.m:n.U++;const r=Ts(n.F);Mn(r,"SID",n.I),Mn(r,"RID",t),Mn(r,"AID",n.T),El(n,r),n.o&&n.s&&e_(r,n.o,n.s),t=new va(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=r_(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Ip(n.h,t),qr(t,r,e)}function El(n,e){n.ia&&yp(n.ia,function(t,r){Mn(e,r,t)}),n.l&&Im({},function(t,r){Mn(e,r,t)})}function r_(n,e,t){t=Math.min(n.i.length,t);var r=n.l?T(n.l.Ra,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const u=["count="+t];-1==s?0<t?(s=i[0].h,u.push("ofs="+s)):s=0:u.push("ofs="+s);let d=!0;for(let p=0;p<t;p++){let y=i[p].h;const b=i[p].g;if(y-=s,0>y)s=Math.max(0,i[p].h-100),d=!1;else try{Qy(b,u,"req"+y+"_")}catch{r&&r(b)}}if(d){r=u.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Ob(n){n.g||n.u||(n.Z=1,ma(n.Ia,n),n.A=0)}function i_(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=td(T(n.Ia,n),s_(n,n.A)),n.A++,0))}function Nm(n){null!=n.B&&(bt.clearTimeout(n.B),n.B=null)}function kb(n){n.g=new va(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Ts(n.sa);Mn(e,"RID","rpc"),Mn(e,"SID",n.I),Mn(e,"CI",n.L?"0":"1"),Mn(e,"AID",n.T),Mn(e,"TYPE","xmlhttp"),El(n,e),n.o&&n.s&&e_(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Fu(Ts(e)),t.s=null,t.P=!0,vl(t,n)}function Rp(n){null!=n.v&&(bt.clearTimeout(n.v),n.v=null)}function Fb(n,e){var t=null;if(n.g==e){Rp(n),Nm(n),n.g=null;var r=2}else{if(!ud(n.h,e))return;t=e.D,Lu(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Lr(r=Bh(),new bm(r,t,e,i)),Mp(n)}else Ob(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function n_(n,e){return!(Di(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=td(T(n.Ja,n,e),s_(n,n.C)),n.C++,0)))}(n,e)||2==r&&i_(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:dd(n,5);break;case 4:dd(n,10);break;case 3:dd(n,6);break;default:dd(n,2)}}function s_(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function dd(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=T(n.kb,n);t||(t=new Fo("//www.google.com/images/cleardot.gif"),bt.location&&"http"==bt.location.protocol||Zh(t,"https"),Fu(t)),function Xy(n,e){const t=new xu;if(bt.Image){const r=new Image;r.onload=C(Vu,t,r,"TestLoadImage: loaded",!0,e),r.onerror=C(Vu,t,r,"TestLoadImage: error",!1,e),r.onabort=C(Vu,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=C(Vu,t,r,"TestLoadImage: timeout",!1,e),bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ui(2);n.G=0,n.l&&n.l.va(e),Lb(n),xm(n)}function Lb(n){if(n.G=0,n.la=[],n.l){const e=Am(n.h);(0!=e.length||0!=n.i.length)&&(yt(n.la,e),yt(n.la,n.i),n.h.i.length=0,Ge(n.i),n.i.length=0),n.l.ua()}}function Vb(n,e,t){var r=t instanceof Fo?Ts(t):new Fo(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Ji(r,r.m);else{var i=bt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Fo(null,void 0);r&&Zh(s,r),e&&(s.g=e),i&&Ji(s,i),t&&(s.l=t),r=s}return e=n.za,(t=n.D)&&e&&Mn(r,t,e),Mn(r,"VER",n.ma),El(n,r),r}function Ub(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Wn(t&&n.Da&&!n.ra?new _l({jb:!0}):n.ra)).Ka(n.H),e}function Bb(){}function wl(){if(bi&&!(10<=Number(Db)))throw Error("Environmental error: no available transport.")}function Dr(n,e){xr.call(this),this.g=new Pb(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!mt(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!mt(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new xp(this)}function Hb(n){Gh.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function jb(){zh.call(this),this.status=1}function xp(n){this.g=n}(lt=Wn.prototype).Ka=function(n){this.L=n},lt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():qh.g(),this.C=function gl(n){return n.h||(n.h=n.i())}(this.u?this.u:qh),this.g.onreadystatechange=T(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void Jy(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=bt.FormData&&n instanceof bt.FormData,!(0<=Te(fI,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,u]of t)this.g.setRequestHeader(s,u);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Rb(this),0<this.B&&((this.K=function pI(n){return bi&&function hm(){return function pa(n){var e=Hy;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=An(String(Ch)).split("."),t=An("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",s=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=fr(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||fr(0==i[2].length,0==s[2].length)||fr(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=T(this.qa,this)):this.A=pl(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){Jy(this,s)}},lt.qa=function(){typeof da<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Lr(this,"timeout"),this.abort(8))},lt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Lr(this,"complete"),Lr(this,"abort"),Rm(this))},lt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rm(this,!0)),Wn.X.M.call(this)},lt.Ha=function(){this.s||(this.F||this.v||this.l?Mb(this):this.fb())},lt.fb=function(){Mb(this)},lt.aa=function(){try{return 2<Lo(this)?this.g.status:-1}catch{return-1}},lt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},lt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),dI(e)}},lt.Ea=function(){return this.m},lt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(lt=Pb.prototype).ma=8,lt.G=1,lt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new va(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=pm(s),Au(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=r_(this,i,e),Mn(t=Ts(this.F),"RID",n),Mn(t,"CVER",22),this.D&&Mn(t,"X-HTTP-Session-Id",this.D),El(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(Nb(s)))+"&"+e:this.o&&e_(t,this.o,s)),Ip(this.h,i),this.Ya&&Mn(t,"TYPE","init"),this.O?(Mn(t,"$req",e),Mn(t,"SID","null"),i.Z=!0,qr(i,t,null)):qr(i,t,e),this.G=2}}else 3==this.G&&(n?ci(this,n):0==this.i.length||gr(this.h)||ci(this))},lt.Ia=function(){if(this.u=null,kb(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=td(T(this.eb,this),n)}},lt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ui(10),Wr(this),kb(this))},lt.cb=function(){null!=this.v&&(this.v=null,Wr(this),i_(this),ui(19))},lt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),ui(2)):(this.j.info("Failed to ping google.com"),ui(1))},(lt=Bb.prototype).xa=function(){},lt.wa=function(){},lt.va=function(){},lt.ua=function(){},lt.Ra=function(){},wl.prototype.g=function(n,e){return new Dr(n,e)},R(Dr,xr),Dr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;ui(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Vb(n,null,n.V),Mp(n)},Dr.prototype.close=function(){t_(this.g)},Dr.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Oh(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Mp(e)},Dr.prototype.M=function(){this.g.l=null,delete this.j,t_(this.g),delete this.g,Dr.X.M.call(this)},R(Hb,Gh),R(jb,zh),R(xp,Bb),xp.prototype.xa=function(){Lr(this.g,"a")},xp.prototype.wa=function(n){Lr(this.g,new Hb(n))},xp.prototype.va=function(n){Lr(this.g,new jb(n))},xp.prototype.ua=function(){Lr(this.g,"b")},wl.prototype.createWebChannel=wl.prototype.g,Dr.prototype.send=Dr.prototype.u,Dr.prototype.open=Dr.prototype.m,Dr.prototype.close=Dr.prototype.close,jh.NO_ERROR=0,jh.TIMEOUT=8,jh.HTTP_ERROR=6,nd.COMPLETE="complete",$h.EventType=Ou,Ou.OPEN="a",Ou.CLOSE="b",Ou.ERROR="c",Ou.MESSAGE="d",xr.prototype.listen=xr.prototype.N,Wn.prototype.listenOnce=Wn.prototype.O,Wn.prototype.getLastError=Wn.prototype.Oa,Wn.prototype.getLastErrorCode=Wn.prototype.Ea,Wn.prototype.getStatus=Wn.prototype.aa,Wn.prototype.getResponseJson=Wn.prototype.Sa,Wn.prototype.getResponseText=Wn.prototype.fa,Wn.prototype.send=Wn.prototype.da,Wn.prototype.setWithCredentials=Wn.prototype.Ka;var QR=hr.createWebChannelTransport=function(){return new wl},$b=hr.getStatEventTarget=function(){return Bh()},Gb=hr.ErrorCode=jh,wa=hr.EventType=nd,o_=hr.Event=wn,Pm=hr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},gI=hr.FetchXmlHttpFactory=_l,Np=hr.WebChannel=$h,mI=hr.XhrIo=Wn;const Xh="@firebase/firestore";class Zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zr.UNAUTHENTICATED=new Zr(null),Zr.GOOGLE_CREDENTIALS=new Zr("google-credentials-uid"),Zr.FIRST_PARTY=new Zr("first-party-uid"),Zr.MOCK_USER=new Zr("mock-user");let Jh="9.12.1";const ba=new Ei.Yd("@firebase/firestore");function Pp(){return ba.logLevel}function Le(n,...e){if(ba.logLevel<=Ei.in.DEBUG){const t=e.map(Om);ba.debug(`Firestore (${Jh}): ${n}`,...t)}}function On(n,...e){if(ba.logLevel<=Ei.in.ERROR){const t=e.map(Om);ba.error(`Firestore (${Jh}): ${n}`,...t)}}function bl(n,...e){if(ba.logLevel<=Ei.in.WARN){const t=e.map(Om);ba.warn(`Firestore (${Jh}): ${n}`,...t)}}function Om(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ut(n="Unexpected state"){const e=`FIRESTORE (${Jh}) INTERNAL ASSERTION FAILED: `+n;throw On(e),new Error(e)}function Rt(n,e){n||ut()}function Ye(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends qt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class qb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Wb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Zr.UNAUTHENTICATED))}shutdown(){}}class a_{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Zb{constructor(e){this.t=e,this.currentUser=Zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Vr,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const y=u;e.enqueueRetryable((0,_e.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},p=y=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Vr)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt("string"==typeof r.accessToken),new qb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rt(null===e||"string"==typeof e),new Zr(e)}}class l_{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Zr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Rt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class yI{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new l_(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Kb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yb{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=s=>{null!=s.error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.A;return this.A=s.token,Le("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt("string"==typeof t.token),this.A=t.token,new Kb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function hd(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class u_{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=hd(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Vt(n,e){return n<e?-1:n>e?1:0}function ef(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function EI(n){return n+"\0"}class Rn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rn.fromMillis(Date.now())}static fromDate(e){return Rn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Rn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vt(this.nanoseconds,e.nanoseconds):Vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Pt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Pt(e)}static min(){return new Pt(new Rn(0,0))}static max(){return new Pt(new Rn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class tf{constructor(e,t,r){void 0===t?t=0:t>e.length&&ut(),void 0===r?r=e.length-t:r>e.length-t&&ut(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===tf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sn extends tf{construct(e,t,r){return new sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new sn(t)}static emptyPath(){return new sn([])}}const Qb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zn extends tf{construct(e,t,r){return new Zn(e,t,r)}static isValidIdentifier(e){return Qb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Zn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Pe(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Pe(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Pe(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===d?(u=!u,i++):"."!==d||u?(r+=d,i++):(s(),i++)}if(s(),u)throw new Pe(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zn(t)}static emptyPath(){return new Zn([])}}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(sn.fromString(e))}static fromName(e){return new Ze(sn.fromString(e).popFirst(5))}static empty(){return new Ze(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new sn(e.slice()))}}class fd{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function nf(n){return n.fields.find(e=>2===e.kind)}function Hu(n){return n.fields.filter(e=>2!==e.kind)}fd.UNKNOWN_ID=-1;class Op{constructor(e,t){this.fieldPath=e,this.kind=t}}class Dl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Dl(0,Is.min())}}function Xb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Pt.fromTimestamp(1e9===r?new Rn(t+1,0):new Rn(t,r));return new Is(i,Ze.empty(),e)}function h_(n){return new Is(n.readTime,n.key,-1)}class Is{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Is(Pt.min(),Ze.empty(),-1)}static max(){return new Is(Pt.max(),Ze.empty(),-1)}}function f_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:Vt(n.largestBatchId,e.largestBatchId))}const p_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class km{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Sl(n){return Jb.apply(this,arguments)}function Jb(){return Jb=(0,_e.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==p_)throw n;Le("LocalStore","Unexpectedly lost primary lease")}),Jb.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let i=0,s=0,u=!1;e.forEach(d=>{++i,d.next(()=>{++s,u&&s===i&&t()},p=>r(p))}),u=!0,s===i&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(i=>i?oe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,i)=>{const s=e.length,u=new Array(s);let d=0;for(let p=0;p<s;p++){const y=p;t(e[y]).next(b=>{u[y]=b,++d,d===s&&r(u)},b=>i(b))}})}static doWhile(e,t){return new oe((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class Fm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Vr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new kp(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=g_(r.target.error);this.P.reject(new kp(e,i))}}static open(e,t,r,i){try{return new Fm(t,e.transaction(i,r))}catch(s){throw new kp(t,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new bI(t)}}class io{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===io.D((0,qt.z$)())&&On("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),ju(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,qt.hl)())return!1;if(io.N())return!0;const e=(0,qt.z$)(),t=io.D(e),r=0<t&&t<10,i=io.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=u=>{r(u.target.result)},s.onblocked=()=>{i(new kp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=u=>{const d=u.target.error;i("VersionError"===d.name?new Pe(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Pe(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new kp(e,d))},s.onupgradeneeded=u=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.S.$(u.target.result,s.transaction,u.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,_e.Z)(function*(){const u="readonly"===t;let d=0;for(;;){++d;try{s.db=yield s.F(e);const p=Fm.open(s.db,e,u?"readonly":"readwrite",r),y=i(p).next(b=>(p.V(),b)).catch(b=>(p.abort(b),oe.reject(b))).toPromise();return y.catch(()=>{}),yield p.v,y}catch(p){const y=p,b="FirebaseError"!==y.name&&d<3;if(Le("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),s.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class wI{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return ju(this.U.delete())}}class kp extends Pe{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Kr(n){return"IndexedDbTransactionError"===n.name}class bI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ju(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),ju(this.store.add(e))}get(e){return ju(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),ju(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),ju(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.H(i,(u,d)=>{s.push(d)}).next(()=>s)}{const i=this.store.getAll(r.range);return new oe((s,u)=>{i.onerror=d=>{u(d.target.error)},i.onsuccess=d=>{s(d.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((i,s)=>{r.onerror=u=>{s(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Y(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(s,u,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new oe((r,i)=>{t.onerror=s=>{const u=g_(s.target.error);i(u)},t.onsuccess=s=>{const u=s.target.result;u?e(u.primaryKey,u.value).next(d=>{d?u.continue():r()}):r()}})}H(e,t){const r=[];return new oe((i,s)=>{e.onerror=u=>{s(u.target.error)},e.onsuccess=u=>{const d=u.target.result;if(!d)return void i();const p=new wI(d),y=t(d.primaryKey,d.value,p);if(y instanceof oe){const b=y.catch(I=>(p.done(),oe.reject(I)));r.push(b)}p.isDone?i():null===p.G?d.continue():d.continue(p.G)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ju(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=g_(r.target.error);t(i)}})}let eD=!1;function g_(n){const e=io.D((0,qt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return eD||(eD=!0,setTimeout(()=>{throw r},0)),r}}return n}class DI{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Le("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.Z)(function*(){t.task=null;try{Le("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Kr(r)?Le("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Sl(r)}yield t.nt(6e4)}))}}class SI{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,_e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,s=!0;return oe.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return Le("IndexBackiller",`Processing collection: ${u}`),this.rt(e,u,i).next(d=>{i-=d,r.add(u)});s=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const u=s.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.ot(i,s)).next(d=>(Le("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>u.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,s)=>{const u=h_(s);f_(u,r)>0&&(r=u)}),new Is(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ui{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function tD(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function nD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ui.at=-1;class ct{constructor(e,t){this.comparator=e,this.root=t||Yr.EMPTY}insert(e,t){return new ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fp(this.root,e,this.comparator,!0)}}class Fp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Yr.RED,this.left=i??Yr.EMPTY,this.right=s??Yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Yr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Yr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}}Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1,Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Yr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bn{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rD(this.data.getIterator())}getIteratorFrom(e){return new rD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new bn(this.comparator);return t.data=e,t}}class rD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function rf(n){return n.hasNext()?n.getNext():void 0}class es{constructor(e){this.fields=e,e.sort(Zn.comparator)}static empty(){return new es([])}unionWith(e){let t=new bn(Zn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new es(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ef(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Nr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Nr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Nr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nr.EMPTY_BYTE_STRING=new Nr("");const II=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $u(n){if(Rt(!!n),"string"==typeof n){let e=0;const t=II.exec(n);if(Rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Sr(n.seconds),nanos:Sr(n.nanos)}}function Sr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Gu(n){return"string"==typeof n?Nr.fromBase64String(n):Nr.fromUint8Array(n)}function Lm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function zu(n){const e=n.mapValue.fields.__previous_value__;return Lm(e)?zu(e):e}function Lp(n){const e=$u(n.mapValue.fields.__local_write_time__.timestampValue);return new Rn(e.seconds,e.nanos)}class m_{constructor(e,t,r,i,s,u,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class Da{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Da("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Da&&e.projectId===this.projectId&&e.database===this.database}}function Vp(n){return null==n}function Vm(n){return 0===n&&1/n==-1/0}function CI(n){return"number"==typeof n&&Number.isInteger(n)&&!Vm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const gd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Um={nullValue:"NULL_VALUE"};function qu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Lm(n)?4:v_(n)?9007199254740991:10:ut()}function Tl(n,e){if(n===e)return!0;const t=qu(n);if(t!==qu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Lp(n).isEqual(Lp(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=$u(r.timestampValue),u=$u(i.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Gu(n.bytesValue).isEqual(Gu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Sr(r.geoPointValue.latitude)===Sr(i.geoPointValue.latitude)&&Sr(r.geoPointValue.longitude)===Sr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Sr(r.integerValue)===Sr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Sr(r.doubleValue),u=Sr(i.doubleValue);return s===u?Vm(s)===Vm(u):isNaN(s)&&isNaN(u)}return!1}(n,e);case 9:return ef(n.arrayValue.values||[],e.arrayValue.values||[],Tl);case 10:return function(r,i){const s=r.mapValue.fields||{},u=i.mapValue.fields||{};if(tD(s)!==tD(u))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===u[d]||!Tl(s[d],u[d])))return!1;return!0}(n,e);default:return ut()}var i}function Up(n,e){return void 0!==(n.values||[]).find(t=>Tl(t,e))}function Cs(n,e){if(n===e)return 0;const t=qu(n),r=qu(e);if(t!==r)return Vt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Vt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const u=Sr(i.integerValue||i.doubleValue),d=Sr(s.integerValue||s.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,e);case 3:return iD(n.timestampValue,e.timestampValue);case 4:return iD(Lp(n),Lp(e));case 5:return Vt(n.stringValue,e.stringValue);case 6:return function(i,s){const u=Gu(i),d=Gu(s);return u.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const u=i.split("/"),d=s.split("/");for(let p=0;p<u.length&&p<d.length;p++){const y=Vt(u[p],d[p]);if(0!==y)return y}return Vt(u.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const u=Vt(Sr(i.latitude),Sr(s.latitude));return 0!==u?u:Vt(Sr(i.longitude),Sr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const u=i.values||[],d=s.values||[];for(let p=0;p<u.length&&p<d.length;++p){const y=Cs(u[p],d[p]);if(y)return y}return Vt(u.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===gd.mapValue&&s===gd.mapValue)return 0;if(i===gd.mapValue)return 1;if(s===gd.mapValue)return-1;const u=i.fields||{},d=Object.keys(u),p=s.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let b=0;b<d.length&&b<y.length;++b){const I=Vt(d[b],y[b]);if(0!==I)return I;const x=Cs(u[d[b]],p[y[b]]);if(0!==x)return x}return Vt(d.length,y.length)}(n.mapValue,e.mapValue);default:throw ut()}}function iD(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Vt(n,e);const t=$u(n),r=$u(e),i=Vt(t.seconds,r.seconds);return 0!==i?i:Vt(t.nanos,r.nanos)}function md(n){return sf(n)}function sf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=$u(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Gu(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const u of r.values||[])s?s=!1:i+=",",i+=sf(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",u=!0;for(const d of i)u?u=!1:s+=",",s+=`${d}:${sf(r.fields[d])}`;return s+"}"}(n.mapValue):ut();var e}function vd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Bm(n){return!!n&&"integerValue"in n}function Bp(n){return!!n&&"arrayValue"in n}function sD(n){return!!n&&"nullValue"in n}function oD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hm(n){return!!n&&"mapValue"in n}function Hp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return pd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function v_(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function AI(n){return"nullValue"in n?Um:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?vd(Da.empty(),Ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ut()}function aD(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?vd(Da.empty(),Ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?gd:ut()}function y_(n,e){const t=Cs(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function jm(n,e){const t=Cs(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Si{constructor(e){this.value=e}static empty(){return new Si({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hp(t)}setAll(e){let t=Zn.emptyPath(),r={},i=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=d.popLast()}u?r[d.lastSegment()]=Hp(u):i.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Hm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Hm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){pd(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Si(Hp(this.value))}}function $m(n){const e=[];return pd(n.fields,(t,r)=>{const i=new Zn([t]);if(Hm(r)){const s=$m(r.mapValue).fields;if(0===s.length)e.push(i);else for(const u of s)e.push(i.child(u))}else e.push(i)}),new es(e)}class kn{constructor(e,t,r,i,s,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=u}static newInvalidDocument(e){return new kn(e,0,Pt.min(),Pt.min(),Si.empty(),0)}static newFoundDocument(e,t,r){return new kn(e,1,t,Pt.min(),r,0)}static newNoDocument(e,t){return new kn(e,2,t,Pt.min(),Si.empty(),0)}static newUnknownDocument(e,t){return new kn(e,3,t,Pt.min(),Si.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Si.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Si.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class XR{constructor(e,t=null,r=[],i=[],s=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=d,this.ht=null}}function yd(n,e=null,t=[],r=[],i=null,s=null,u=null){return new XR(n,e,t,r,i,s,u)}function Wu(n){const e=Ye(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+md(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Vp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>md(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>md(r)).join(",")),e.ht=t}return e.ht}function Zu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!w_(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Tl(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hD(n.startAt,e.startAt)&&hD(n.endAt,e.endAt)}function ts(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function jp(n,e){return n.filters.filter(t=>t instanceof jn&&t.field.isEqual(e))}function uD(n,e,t){let r=Um,i=!0;for(const s of jp(n,e)){let u=Um,d=!0;switch(s.op){case"<":case"<=":u=AI(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,d=!1;break;case"!=":case"not-in":u=Um}y_({value:r,inclusive:i},{value:u,inclusive:d})<0&&(r=u,i=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];y_({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function Gm(n,e,t){let r=gd,i=!0;for(const s of jp(n,e)){let u=gd,d=!0;switch(s.op){case">=":case">":u=aD(s.value),d=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,d=!1;break;case"!=":case"not-in":u=gd}jm({value:r,inclusive:i},{value:u,inclusive:d})>0&&(r=u,i=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];jm({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class jn extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new __(e,t,r):"array-contains"===t?new dD(e,r):"in"===t?new JR(e,r):"not-in"===t?new zm(e,r):"array-contains-any"===t?new qm(e,r):new jn(e,t,r)}static lt(e,t,r){return"in"===t?new cD(e,r):new E_(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Cs(t,this.value)):null!==t&&qu(this.value)===qu(t)&&this.ft(Cs(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ut()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class __ extends jn{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.ft(t)}}class cD extends jn{constructor(e,t){super(e,"in",t),this.keys=MI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class E_ extends jn{constructor(e,t){super(e,"not-in",t),this.keys=MI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function MI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class dD extends jn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bp(t)&&Up(t.arrayValue,this.value)}}class JR extends jn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Up(this.value.arrayValue,t)}}class zm extends jn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Up(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Up(this.value.arrayValue,t)}}class qm extends jn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Up(this.value.arrayValue,r))}}class Sa{constructor(e,t){this.position=e,this.inclusive=t}}class Ku{constructor(e,t="asc"){this.field=e,this.dir=t}}function w_(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function RI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(r=s.field.isKeyField()?Ze.comparator(Ze.fromName(u.referenceValue),t.key):Cs(u,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function hD(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Tl(n.position[t],e.position[t]))return!1;return!0}class Il{constructor(e,t=null,r=[],i=[],s=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=d,this.endAt=p,this._t=null,this.wt=null}}function fD(n,e,t,r,i,s,u,d){return new Il(n,e,t,r,i,s,u,d)}function af(n){return new Il(n)}function b_(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function pD(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function D_(n){for(const e of n.filters)if(e.dt())return e.field;return null}function gD(n){return null!==n.collectionGroup}function _d(n){const e=Ye(n);if(null===e._t){e._t=[];const t=D_(e),r=pD(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Ku(t)),e._t.push(new Ku(Zn.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e._t.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Ku(Zn.keyField(),s))}}}return e._t}function Ti(n){const e=Ye(n);if(!e.wt)if("F"===e.limitType)e.wt=yd(e.path,e.collectionGroup,_d(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of _d(e))t.push(new Ku(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Sa(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Sa(e.startAt.position,e.startAt.inclusive):null;e.wt=yd(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function Wm(n,e,t){return new Il(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ed(n,e){return Zu(Ti(n),Ti(e))&&n.limitType===e.limitType}function xI(n){return`${Wu(Ti(n))}|lt:${n.limitType}`}function mD(n){return`Query(target=${function lD(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${md(r.value)}`;var r}).join(", ")}]`),Vp(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>md(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>md(t)).join(",")),`Target(${e})`}(Ti(n))}; limitType=${n.limitType})`}function vD(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,u){const d=RI(i,s,u);return i.inclusive?d<=0:d<0}(t.startAt,_d(t),r)||t.endAt&&!function(i,s,u){const d=RI(i,s,u);return i.inclusive?d>=0:d>0}(t.endAt,_d(t),r)));var t,r}function NI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function PI(n){return(e,t)=>{let r=!1;for(const i of _d(n)){const s=ex(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function ex(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(i,s,u){const d=s.data.field(i),p=u.data.field(i);return null!==d&&null!==p?Cs(d,p):ut()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}function OI(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vm(e)?"-0":e}}function kI(n){return{integerValue:""+n}}function FI(n,e){return CI(e)?kI(e):OI(n,e)}class S_{constructor(){this._=void 0}}function Yu(n,e,t){return n instanceof wd?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Cl?I_(n,e):n instanceof Al?_D(n,e):function(r,i){const s=yD(r,i),u=C_(s)+C_(r.yt);return Bm(s)&&Bm(r.yt)?kI(u):OI(r.It,u)}(n,e)}function T_(n,e,t){return n instanceof Cl?I_(n,e):n instanceof Al?_D(n,e):t}function yD(n,e){return n instanceof As?Bm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class wd extends S_{}class Cl extends S_{constructor(e){super(),this.elements=e}}function I_(n,e){const t=ED(e);for(const r of n.elements)t.some(i=>Tl(i,r))||t.push(r);return{arrayValue:{values:t}}}class Al extends S_{constructor(e){super(),this.elements=e}}function _D(n,e){let t=ED(e);for(const r of n.elements)t=t.filter(i=>!Tl(i,r));return{arrayValue:{values:t}}}class As extends S_{constructor(e,t){super(),this.It=e,this.yt=t}}function C_(n){return Sr(n.integerValue||n.doubleValue)}function ED(n){return Bp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class $p{constructor(e,t){this.field=e,this.transform=t}}class LI{constructor(e,t){this.version=e,this.transformResults=t}}class Kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kn}static exists(e){return new Kn(void 0,e)}static updateTime(e){return new Kn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bd(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ml{}function Zm(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new uf(n.key,Kn.none()):new Sd(n.key,n.data,Kn.none());{const t=n.data,r=Si.empty();let i=new bn(Zn.comparator);for(let s of e.fields)if(!i.has(s)){let u=t.field(s);null===u&&s.length>1&&(s=s.popLast(),u=t.field(s)),null===u?r.delete(s):r.set(s,u),i=i.add(s)}return new Vo(n.key,r,new es(i.toArray()),Kn.none())}}function lf(n,e,t){n instanceof Sd?function(r,i,s){const u=r.value.clone(),d=M_(r.fieldTransforms,i,s.transformResults);u.setAll(d),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Vo?function(r,i,s){if(!bd(r.precondition,i))return void i.convertToUnknownDocument(s.version);const u=M_(r.fieldTransforms,i,s.transformResults),d=i.data;d.setAll(Ym(r)),d.setAll(u),i.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Dd(n,e,t,r){return n instanceof Sd?function(i,s,u,d){if(!bd(i.precondition,s))return u;const p=i.value.clone(),y=Qm(i.fieldTransforms,d,s);return p.setAll(y),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Vo?function(i,s,u,d){if(!bd(i.precondition,s))return u;const p=Qm(i.fieldTransforms,d,s),y=s.data;return y.setAll(Ym(i)),y.setAll(p),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(u=t,bd(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u);var s,u}function Km(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=yD(r.transform,i||null);null!=s&&(null===t&&(t=Si.empty()),t.set(r.field,s))}return t||null}function A_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ef(t,r,(i,s)=>function wD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Cl&&r instanceof Cl||t instanceof Al&&r instanceof Al?ef(t.elements,r.elements,Tl):t instanceof As&&r instanceof As?Tl(t.yt,r.yt):t instanceof wd&&r instanceof wd);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Sd extends Ml{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Vo extends Ml{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Ym(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function M_(n,e,t){const r=new Map;Rt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,d=e.data.field(s.field);r.set(s.field,T_(u,d,t[i]))}return r}function Qm(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,Yu(s,u,e))}return r}class uf extends Ml{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bD extends Ml{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class VI{constructor(e){this.count=e}}var Tr,un;function R_(n){switch(n){default:return ut();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function x_(n){if(void 0===n)return On("GRPC error has no .code"),de.UNKNOWN;switch(n){case Tr.OK:return de.OK;case Tr.CANCELLED:return de.CANCELLED;case Tr.UNKNOWN:return de.UNKNOWN;case Tr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case Tr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case Tr.INTERNAL:return de.INTERNAL;case Tr.UNAVAILABLE:return de.UNAVAILABLE;case Tr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case Tr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case Tr.NOT_FOUND:return de.NOT_FOUND;case Tr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case Tr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case Tr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case Tr.ABORTED:return de.ABORTED;case Tr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case Tr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case Tr.DATA_LOSS:return de.DATA_LOSS;default:return ut()}}(un=Tr||(Tr={}))[un.OK=0]="OK",un[un.CANCELLED=1]="CANCELLED",un[un.UNKNOWN=2]="UNKNOWN",un[un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",un[un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",un[un.NOT_FOUND=5]="NOT_FOUND",un[un.ALREADY_EXISTS=6]="ALREADY_EXISTS",un[un.PERMISSION_DENIED=7]="PERMISSION_DENIED",un[un.UNAUTHENTICATED=16]="UNAUTHENTICATED",un[un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",un[un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",un[un.ABORTED=10]="ABORTED",un[un.OUT_OF_RANGE=11]="OUT_OF_RANGE",un[un.UNIMPLEMENTED=12]="UNIMPLEMENTED",un[un.INTERNAL=13]="INTERNAL",un[un.UNAVAILABLE=14]="UNAVAILABLE",un[un.DATA_LOSS=15]="DATA_LOSS";class Qu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pd(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return nD(this.inner)}size(){return this.innerSize}}const Ms=new ct(Ze.comparator);function Bi(){return Ms}const DD=new ct(Ze.comparator);function Xm(...n){let e=DD;for(const t of n)e=e.insert(t.key,t);return e}function SD(n){let e=DD;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function so(){return Gp()}function N_(){return Gp()}function Gp(){return new Qu(n=>n.toString(),(n,e)=>n.isEqual(e))}const UI=new ct(Ze.comparator),BI=new bn(Ze.comparator);function Gt(...n){let e=BI;for(const t of n)e=e.add(t);return e}const HI=new bn(Vt);function zp(){return HI}class qp{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Wp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new qp(Pt.min(),i,zp(),Bi(),Gt())}}class Wp{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Wp(r,t,Gt(),Gt(),Gt())}}class Zp{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class P_{constructor(e,t){this.targetId=e,this.At=t}}class TD{constructor(e,t,r=Nr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Uo{constructor(){this.Rt=0,this.bt=CD(),this.Pt=Nr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Gt(),t=Gt(),r=Gt();return this.bt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ut()}}),new Wp(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=CD()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class O_{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Bi(),this.qt=ID(),this.Kt=new bn(Vt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:ut()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const s=i.target;if(ts(s))if(0===r){const u=new Ze(s.path);this.jt(t,u,kn.newNoDocument(u,Pt.min()))}else Rt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((s,u)=>{const d=this.Xt(u);if(d){if(s.current&&ts(d.target)){const p=new Ze(d.target.path);null!==this.Ut.get(p)||this.ee(u,p)||this.jt(u,p,kn.newNoDocument(p,e))}s.Dt&&(t.set(u,s.xt()),s.Nt())}});let r=Gt();this.qt.forEach((s,u)=>{let d=!0;u.forEachWhile(p=>{const y=this.Xt(p);return!y||2===y.purpose||(d=!1,!1)}),d&&(r=r.add(s))}),this.Ut.forEach((s,u)=>u.setReadTime(e));const i=new qp(e,t,this.Kt,this.Ut,r);return this.Ut=Bi(),this.qt=ID(),this.Kt=new bn(Vt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new Uo,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new bn(Vt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Uo),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function ID(){return new ct(Ze.comparator)}function CD(){return new ct(Ze.comparator)}const tx={asc:"ASCENDING",desc:"DESCENDING"},AD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class jI{constructor(e,t){this.databaseId=e,this.gt=t}}function Kp(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MD(n,e){return n.gt?e.toBase64():e.toUint8Array()}function k_(n,e){return Kp(n,e.toTimestamp())}function Qr(n){return Rt(!!n),Pt.fromTimestamp(function(e){const t=$u(e);return new Rn(t.seconds,t.nanos)}(n))}function F_(n,e){return(t=n,new sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Yp(n){const e=sn.fromString(n);return Rt(OD(e)),e}function Td(n,e){return F_(n.databaseId,e.path)}function Rs(n,e){const t=Yp(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(L_(t))}function RD(n,e){return F_(n.databaseId,e)}function Jm(n){const e=Yp(n);return 4===e.length?sn.emptyPath():L_(e)}function ev(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function L_(n){return Rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function V_(n,e,t){return{name:Td(n,e),fields:t.value.mapValue.fields}}function U_(n,e,t){const r=Rs(n,e.name),i=Qr(e.updateTime),s=new Si({mapValue:{fields:e.fields}}),u=kn.newFoundDocument(r,i,s);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function xs(n,e){let t;if(e instanceof Sd)t={update:V_(n,e.key,e.value)};else if(e instanceof uf)t={delete:Td(n,e.key)};else if(e instanceof Vo)t={update:V_(n,e.key,e.data),updateMask:zI(e.fieldMask)};else{if(!(e instanceof bD))return ut();t={verify:Td(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const u=s.transform;if(u instanceof wd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Cl)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Al)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof As)return{fieldPath:s.field.canonicalString(),increment:u.yt};throw ut()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:k_(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ut()),t;var i}function cf(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Kn.updateTime(Qr(i.updateTime)):void 0!==i.exists?Kn.exists(i.exists):Kn.none():Kn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,u){let d=null;"setToServerValue"in u?(Rt("REQUEST_TIME"===u.setToServerValue),d=new wd):"appendMissingElements"in u?d=new Cl(u.appendMissingElements.values||[]):"removeAllFromArray"in u?d=new Al(u.removeAllFromArray.values||[]):"increment"in u?d=new As(s,u.increment):ut();const p=Zn.fromServerFormat(u.fieldPath);return new $p(p,d)}(n,i)):[];var i;if(e.update){const i=Rs(n,e.update.name),s=new Si({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new es((e.updateMask.fieldPaths||[]).map(y=>Zn.fromServerFormat(y)));return new Vo(i,s,u,t,r)}return new Sd(i,s,t,r)}if(e.delete){const i=Rs(n,e.delete);return new uf(i,t)}if(e.verify){const i=Rs(n,e.verify);return new bD(i,t)}return ut()}function df(n,e){return{documents:[RD(n,e.path)]}}function H_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=RD(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=RD(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const y=p.map(b=>function(I){if("=="===I.op){if(oD(I.value))return{unaryFilter:{field:hf(I.field),op:"IS_NAN"}};if(sD(I.value))return{unaryFilter:{field:hf(I.field),op:"IS_NULL"}}}else if("!="===I.op){if(oD(I.value))return{unaryFilter:{field:hf(I.field),op:"IS_NOT_NAN"}};if(sD(I.value))return{unaryFilter:{field:hf(I.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hf(I.field),op:Qp(I.op),value:I.value}}}(b));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:hf((b=y).field),direction:$I(b.dir)};var b})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=(y=e.limit,n.gt||Vp(y)?y:{value:y});var y,d,p;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function nv(n){let e=Jm(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Rt(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let s=[];t.where&&(s=PD(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(b=>{return new Ku(Xp((I=b).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let d=null;t.limit&&(d=function(b){let I;return I="object"==typeof b?b.value:b,Vp(I)?null:I}(t.limit));let p=null;var b;t.startAt&&(p=new Sa((b=t.startAt).values||[],!!b.before));let y=null;return t.endAt&&(y=function(b){return new Sa(b.values||[],!b.before)}(t.endAt)),fD(e,i,u,s,d,"F",p,y)}function PD(n){return n?void 0!==n.unaryFilter?[nx(n)]:void 0!==n.fieldFilter?[GI(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>PD(e)).reduce((e,t)=>e.concat(t)):ut():[]}function $I(n){return tx[n]}function Qp(n){return AD[n]}function hf(n){return{fieldPath:n.canonicalString()}}function Xp(n){return Zn.fromServerFormat(n.fieldPath)}function GI(n){return jn.create(Xp(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(n.fieldFilter.op),n.fieldFilter.value)}function nx(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Xp(n.unaryFilter.field);return jn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Xp(n.unaryFilter.field);return jn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Xp(n.unaryFilter.field);return jn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Xp(n.unaryFilter.field);return jn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}function zI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function OD(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Hi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=rv(e)),e=kD(n.get(t),e);return rv(e)}function kD(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function rv(n){return n+"\x01\x01"}function Ta(n){const e=n.length;if(Rt(e>=2),2===e)return Rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const u=n.indexOf("\x01",s);switch((u<0||u>t)&&ut(),n.charAt(u+1)){case"\x01":const d=n.substring(s,u);let p;0===i.length?p=d:(i+=d,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,u),i+="\0";break;case"\x11":i+=n.substring(s,u+1);break;default:ut()}s=u+2}return new sn(r)}const iv=["userId","batchId"];function sv(n,e){return[n,Hi(e)]}function FD(n,e,t){return[n,Hi(e),t]}const qI={},WI=["prefixPath","collectionGroup","readTime","documentId"],ZI=["prefixPath","collectionGroup","documentId"],KI=["collectionGroup","readTime","prefixPath","documentId"],ov=["canonicalId","targetId"],Id=["targetId","path"],rx=["path","targetId"],Jp=["collectionId","parent"],YI=["indexId","uid"],QI=["uid","sequenceNumber"],j_=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],XI=["indexId","uid","orderedDocumentKey"],Ia=["userId","collectionPath","documentId"],eg=["userId","collectionPath","largestBatchId"],Ii=["userId","collectionGroup","largestBatchId"],Xu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],av=[...Xu,"documentOverlays"],Ns=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],lv=Ns,ff=[...lv,"indexConfiguration","indexState","indexEntries"];class Ju extends km{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function rr(n,e){const t=Ye(n);return io.M(t.ie,e)}class ec{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&lf(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Dd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Dd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=N_();return this.mutations.forEach(i=>{const s=e.get(i.key),u=s.overlayedDocument;let d=this.applyToLocalView(u,s.mutatedFields);d=t.has(i.key)?null:d;const p=Zm(u,d);null!==p&&r.set(i.key,p),u.isValidDocument()||u.convertToNoDocument(Pt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gt())}isEqual(e){return this.batchId===e.batchId&&ef(this.mutations,e.mutations,(t,r)=>A_(t,r))&&ef(this.baseMutations,e.baseMutations,(t,r)=>A_(t,r))}}class tc{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Rt(e.mutations.length===r.length);let i=UI;const s=e.mutations;for(let u=0;u<s.length;u++)i=i.insert(s[u].key,r[u].version);return new tc(e,t,r,i)}}class nc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ps{constructor(e,t,r,i,s=Pt.min(),u=Pt.min(),d=Nr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d}withSequenceNumber(e){return new Ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Cd{constructor(e){this.re=e}}function $_(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:tg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Td(i=n.re,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Kp(i,s.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:rc(e.version)};else{if(!e.isUnknownDocument())return ut();r.unknownDocument={path:t.path.toArray(),version:rc(e.version)}}var i,s;return r}function tg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function rc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ic(n){const e=new Rn(n.seconds,n.nanoseconds);return Pt.fromTimestamp(e)}function sc(n,e){const t=(e.baseMutations||[]).map(s=>cf(n.re,s));for(let s=0;s<e.mutations.length-1;++s){const u=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(u.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>cf(n.re,s)),i=Rn.fromMillis(e.localWriteTimeMs);return new ec(e.batchId,i,t,r)}function gf(n){const e=ic(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ic(n.lastLimboFreeSnapshotVersion):Pt.min();let r;var i;return void 0!==n.query.documents?(Rt(1===(i=n.query).documents.length),r=Ti(af(Jm(i.documents[0])))):r=Ti(nv(n.query)),new Ps(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Nr.fromBase64String(n.resumeToken))}function G_(n,e){const t=rc(e.snapshotVersion),r=rc(e.lastLimboFreeSnapshotVersion);let i;i=ts(e.target)?df(n.re,e.target):H_(n.re,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Wu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function uv(n){const e=nv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Wm(e,e.limit,"L"):e}function cv(n,e){return new nc(e.largestBatchId,cf(n.re,e.overlayMutation))}function LD(n,e){const t=e.path.lastSegment();return[n,Hi(e.path.popLast()),t]}function VD(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:rc(r.readTime),documentKey:Hi(r.documentKey.path),largestBatchId:r.largestBatchId}}class UD{getBundleMetadata(e,t){return BD(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:ic(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return BD(e).put({bundleId:(r=t).id,createTime:rc(Qr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return HD(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:uv(i.bundledQuery),readTime:ic(i.readTime)};var i})}saveNamedQuery(e,t){return HD(e).put({name:(r=t).name,readTime:rc(Qr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function BD(n){return rr(n,"bundles")}function HD(n){return rr(n,"namedQueries")}class mf{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new mf(e,t.uid||"")}getOverlay(e,t){return Ad(e).get(LD(this.userId,t)).next(r=>r?cv(this.It,r):null)}getOverlays(e,t){const r=so();return oe.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,u)=>{const d=new nc(t,u);i.push(this.ue(e,d))}),oe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Hi(u.getCollectionPath())));const s=[];return i.forEach(u=>{const d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);s.push(Ad(e).Y("collectionPathOverlayIndex",d))}),oe.waitFor(s)}getOverlaysForCollection(e,t,r){const i=so(),s=Hi(t),u=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ad(e).W("collectionPathOverlayIndex",u).next(d=>{for(const p of d){const y=cv(this.It,p);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=so();let u;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ad(e).Z({index:"collectionGroupOverlayIndex",range:d},(p,y,b)=>{const I=cv(this.It,y);s.size()<i||I.largestBatchId===u?(s.set(I.getKey(),I),u=I.largestBatchId):b.done()}).next(()=>s)}ue(e,t){return Ad(e).put(function(r,i,s){const[u,d,p]=LD(i,s.mutation.key);return{userId:i,collectionPath:d,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:xs(r.re,s.mutation)}}(this.It,this.userId,t))}}function Ad(n){return rr(n,"documentOverlays")}class Md{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Sr(e.integerValue));else if("doubleValue"in e){const r=Sr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Vm(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Gu(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?v_(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):ut()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Ze.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function dv(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function ng(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=dv(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}Md.Te=new Md;class z_{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=ng(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=ng(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class JI{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class hv{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class oc{constructor(){this.Be=new z_,this.Le=new JI(this.Be),this.Ue=new hv(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class ac{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ac(this.indexId,this.documentKey,this.arrayValue,r)}}function lc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=fv(n.arrayValue,e.arrayValue),0!==t?t:(t=fv(n.directionalValue,e.directionalValue),0!==t?t:Ze.comparator(n.documentKey,e.documentKey)))}function fv(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class jD{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=nf(e);if(void 0!==t&&!this.ze(t))return!1;const r=Hu(e);let i=0,s=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const u=r[i];if(!this.He(this.je,u)||!this.Je(this.Ge[s++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(s>=this.Ge.length||!this.Je(this.Ge[s++],u))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class $D{constructor(){this.Ye=new rg}addToCollectionParentIndex(e,t){return this.Ye.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Is.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class rg{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new bn(sn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new bn(sn.comparator)).toArray()}}const ig=new Uint8Array(0);class eC{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new rg,this.Ze=new Qu(r=>Wu(r),(r,i)=>Zu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const s={collectionId:r,parent:Hi(i)};return q_(e).put(s)}return oe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[EI(t),""],!1,!0);return q_(e).W(i).next(s=>{for(const u of s){if(u.collectionId!==t)break;r.push(Ta(u.parent))}return r})}addFieldIndex(e,t){const r=sg(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;delete i.indexId;const s=r.add(i);if(t.indexState){const u=yf(e);return s.next(d=>{u.put(VD(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=sg(e),i=yf(e),s=vf(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=vf(e);let i=!0;const s=new Map;return oe.forEach(this.tn(t),u=>this.en(e,u).next(d=>{i&&(i=!!d),s.set(u,d)})).next(()=>{if(i){let u=Gt();const d=[];return oe.forEach(s,(p,y)=>{var b;Le("IndexedDbIndexManager",`Using index ${b=p,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Oe=>`${Oe.fieldPath}:${Oe.kind}`).join(",")}`} to execute ${Wu(t)}`);const I=function(Oe,ke){const et=nf(ke);if(void 0===et)return null;for(const Je of jp(Oe,et.fieldPath))switch(Je.op){case"array-contains-any":return Je.value.arrayValue.values||[];case"array-contains":return[Je.value]}return null}(y,p),x=function(Oe,ke){const et=new Map;for(const Je of Hu(ke))for(const Et of jp(Oe,Je.fieldPath))switch(Et.op){case"==":case"in":et.set(Je.fieldPath.canonicalString(),Et.value);break;case"not-in":case"!=":return et.set(Je.fieldPath.canonicalString(),Et.value),Array.from(et.values())}return null}(y,p),P=function(Oe,ke){const et=[];let Je=!0;for(const Et of Hu(ke)){const on=0===Et.kind?uD(Oe,Et.fieldPath,Oe.startAt):Gm(Oe,Et.fieldPath,Oe.startAt);et.push(on.value),Je&&(Je=on.inclusive)}return new Sa(et,Je)}(y,p),k=function(Oe,ke){const et=[];let Je=!0;for(const Et of Hu(ke)){const on=0===Et.kind?Gm(Oe,Et.fieldPath,Oe.endAt):uD(Oe,Et.fieldPath,Oe.endAt);et.push(on.value),Je&&(Je=on.inclusive)}return new Sa(et,Je)}(y,p),H=this.nn(p,y,P),Y=this.nn(p,y,k),me=this.sn(p,y,x),Ne=this.rn(p.indexId,I,H,P.inclusive,Y,k.inclusive,me);return oe.forEach(Ne,Oe=>r.J(Oe,t.limit).next(ke=>{ke.forEach(et=>{const Je=Ze.fromSegments(et.documentKey);u.has(Je)||(u=u.add(Je),d.push(Je))})}))}).next(()=>d)}return oe.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,s,u,d){const p=(null!=t?t.length:1)*Math.max(r.length,s.length),y=p/(null!=t?t.length:1),b=[];for(let I=0;I<p;++I){const x=t?this.on(t[I/y]):ig,P=this.un(e,x,r[I%y],i),k=this.cn(e,x,s[I%y],u),H=d.map(Y=>this.un(e,x,Y,!0));b.push(...this.createRange(P,k,H))}return b}un(e,t,r,i){const s=new ac(e,Ze.empty(),t,r);return i?s:s.Ke()}cn(e,t,r,i){const s=new ac(e,Ze.empty(),t,r);return i?s.Ke():s}en(e,t){const r=new jD(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let u=null;for(const d of s)r.We(d)&&(!u||d.fields.length>u.fields.length)&&(u=d);return u})}getIndexType(e,t){let r=2;return oe.forEach(this.tn(t),i=>this.en(e,i).next(s=>{s?0!==r&&s.fields.length<function(u){let d=new bn(Zn.comparator),p=!1;for(const y of u.filters){const b=y;b.field.isKeyField()||("array-contains"===b.op||"array-contains-any"===b.op?p=!0:d=d.add(b.field))}for(const y of u.orderBy)y.field.isKeyField()||(d=d.add(y.field));return d.size+(p?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new oc;for(const i of Hu(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const u=r.qe(i.kind);Md.Te.ce(s,u)}return r.$e()}on(e){const t=new oc;return Md.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new oc;return Md.Te.ce(vd(this.databaseId,t),r.qe(function(i){const s=Hu(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new oc);let s=0;for(const u of Hu(e)){const d=r[s++];for(const p of i)if(this.ln(t,u.fieldPath)&&Bp(d))i=this.fn(i,u,d);else{const y=p.qe(u.kind);Md.Te.ce(d,y)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],s=[];for(const u of r.arrayValue.values||[])for(const d of i){const p=new oc;p.seed(d.$e()),Md.Te.ce(u,p.qe(t.kind)),s.push(p)}return s}ln(e,t){return!!e.filters.find(r=>r instanceof jn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=sg(e),i=yf(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const u=[];return oe.forEach(s,d=>i.get([d.indexId,this.uid]).next(p=>{u.push(function(y,b){const I=b?new Dl(b.sequenceNumber,new Is(ic(b.readTime),new Ze(Ta(b.documentKey)),b.largestBatchId)):Dl.empty(),x=y.fields.map(([P,k])=>new Op(Zn.fromServerFormat(P),k));return new fd(y.indexId,y.collectionGroup,x,I)}(d,p))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Vt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=sg(e),s=yf(e);return this._n(e).next(u=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>oe.forEach(d,p=>s.put(VD(p.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(i,s)=>{const u=r.get(i.collectionGroup);return(u?oe.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),oe.forEach(d,p=>this.wn(e,i,p).next(y=>{const b=this.mn(s,p);return y.isEqual(b)?oe.resolve():this.gn(e,s,p,y,b)}))))})}yn(e,t,r,i){return vf(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return vf(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=vf(e);let s=new bn(lc);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(u,d)=>{s=s.add(new ac(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>s)}mn(e,t){let r=new bn(lc);const i=this.an(t,e);if(null==i)return r;const s=nf(t);if(null!=s){const u=e.data.field(s.fieldPath);if(Bp(u))for(const d of u.arrayValue.values||[])r=r.add(new ac(t.indexId,e.key,this.on(d),i))}else r=r.add(new ac(t.indexId,e.key,ig,i));return r}gn(e,t,r,i,s){Le("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(d,p,y,b,I){const x=d.getIterator(),P=p.getIterator();let k=rf(x),H=rf(P);for(;k||H;){let Y=!1,me=!1;if(k&&H){const Ne=y(k,H);Ne<0?me=!0:Ne>0&&(Y=!0)}else null!=k?me=!0:Y=!0;Y?(b(H),H=rf(P)):me?(I(k),k=rf(x)):(k=rf(x),H=rf(P))}}(i,s,lc,d=>{u.push(this.yn(e,t,r,d))},d=>{u.push(this.pn(e,t,r,d))}),oe.waitFor(u)}_n(e){let t=1;return yf(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,d)=>lc(u,d)).filter((u,d,p)=>!d||0!==lc(u,p[d-1]));const i=[];i.push(e);for(const u of r){const d=lc(u,e),p=lc(u,t);if(0===d)i[0]=e.Ke();else if(d>0&&p<0)i.push(u),i.push(u.Ke());else if(p>0)break}i.push(t);const s=[];for(let u=0;u<i.length;u+=2)s.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,ig,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,ig,[]]));return s}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(GD)}getMinOffset(e,t){return oe.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||ut())).next(GD)}}function q_(n){return rr(n,"collectionParents")}function vf(n){return rr(n,"indexEntries")}function sg(n){return rr(n,"indexConfiguration")}function yf(n){return rr(n,"indexState")}function GD(n){Rt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;f_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Is(e.readTime,e.documentKey,t)}const zD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ns{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ns(e,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function W_(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],u=IDBKeyRange.only(t.batchId);let d=0;const p=r.Z({range:u},(b,I,x)=>(d++,x.delete()));s.push(p.next(()=>{Rt(1===d)}));const y=[];for(const b of t.mutations){const I=FD(e,b.key.path,t.batchId);s.push(i.delete(I)),y.push(b.key)}return oe.waitFor(s).next(()=>y)}function _f(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ut();e=n.noDocument}return JSON.stringify(e).length}ns.DEFAULT_COLLECTION_PERCENTILE=10,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ns.DEFAULT=new ns(41943040,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ns.DISABLED=new ns(-1,0,0);class og{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Rt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new og(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Rl(e).Z({index:"userMutationsIndex",range:r},(i,s,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Rd(e),u=Rl(e);return u.add({}).next(d=>{Rt("number"==typeof d);const p=new ec(d,t,r,i),y=function(x,P,k){const H=k.baseMutations.map(me=>xs(x.re,me)),Y=k.mutations.map(me=>xs(x.re,me));return{userId:P,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:H,mutations:Y}}(this.It,this.userId,p),b=[];let I=new bn((x,P)=>Vt(x.canonicalString(),P.canonicalString()));for(const x of i){const P=FD(this.userId,x.key.path,d);I=I.add(x.key.path.popLast()),b.push(u.put(y)),b.push(s.put(P,qI))}return I.forEach(x=>{b.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.In[d]=p.keys()}),oe.waitFor(b).next(()=>p)})}lookupMutationBatch(e,t){return Rl(e).get(t).next(r=>r?(Rt(r.userId===this.userId),sc(this.It,r)):null)}Tn(e,t){return this.In[t]?oe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Rl(e).Z({index:"userMutationsIndex",range:i},(u,d,p)=>{d.userId===this.userId&&(Rt(d.batchId>=r),s=sc(this.It,d)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Rl(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,s,u)=>{r=s.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Rl(e).W("userMutationsIndex",t).next(r=>r.map(i=>sc(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=sv(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Rd(e).Z({range:i},(u,d,p)=>{const[y,b,I]=u,x=Ta(b);if(y===this.userId&&t.path.isEqual(x))return Rl(e).get(I).next(P=>{if(!P)throw ut();Rt(P.userId===this.userId),s.push(sc(this.It,P))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bn(Vt);const i=[];return t.forEach(s=>{const u=sv(this.userId,s.path),d=IDBKeyRange.lowerBound(u),p=Rd(e).Z({range:d},(y,b,I)=>{const[x,P,k]=y,H=Ta(P);x===this.userId&&s.path.isEqual(H)?r=r.add(k):I.done()});i.push(p)}),oe.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=sv(this.userId,r),u=IDBKeyRange.lowerBound(s);let d=new bn(Vt);return Rd(e).Z({range:u},(p,y,b)=>{const[I,x,P]=p,k=Ta(x);I===this.userId&&r.isPrefixOf(k)?k.length===i&&(d=d.add(P)):b.done()}).next(()=>this.En(e,d))}En(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Rl(e).get(s).next(u=>{if(null===u)throw ut();Rt(u.userId===this.userId),r.push(sc(this.It,u))}))}),oe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return W_(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),oe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Rd(e).Z({range:r},(s,u,d)=>{if(s[0]===this.userId){const p=Ta(s[1]);i.push(p)}else d.done()}).next(()=>{Rt(0===i.length)})})}containsKey(e,t){return Z_(e,this.userId,t)}Rn(e){return K_(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Z_(n,e,t){const r=sv(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let u=!1;return Rd(n).Z({range:s,X:!0},(d,p,y)=>{const[b,I,x]=d;b===e&&I===i&&(u=!0),y.done()}).next(()=>u)}function Rl(n){return rr(n,"mutations")}function Rd(n){return rr(n,"documentMutations")}function K_(n){return rr(n,"mutationQueues")}class uc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new uc(0)}static vn(){return new uc(-1)}}class qD{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new uc(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Pt.fromTimestamp(new Rn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>xd(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Rt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return xd(e).Z((u,d)=>{const p=gf(d);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>oe.waitFor(s)).next(()=>i)}forEachTarget(e,t){return xd(e).Z((r,i)=>{const s=gf(i);t(s)})}Vn(e){return tC(e).get("targetGlobalKey").next(t=>(Rt(null!==t),t))}Sn(e,t){return tC(e).put("targetGlobalKey",t)}Dn(e,t){return xd(e).put(G_(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Wu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return xd(e).Z({range:i,index:"queryTargetsIndex"},(u,d,p)=>{const y=gf(d);Zu(t,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=cc(e);return t.forEach(u=>{const d=Hi(u.path);i.push(s.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,u))}),oe.waitFor(i)}removeMatchingKeys(e,t,r){const i=cc(e);return oe.forEach(t,s=>{const u=Hi(s.path);return oe.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=cc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=cc(e);let s=Gt();return i.Z({range:r,X:!0},(u,d,p)=>{const y=Ta(u[1]),b=new Ze(y);s=s.add(b)}).next(()=>s)}containsKey(e,t){const r=Hi(t.path),i=IDBKeyRange.bound([r],[EI(r)],!1,!0);let s=0;return cc(e).Z({index:"documentTargetsIndex",X:!0,range:i},([u,d],p,y)=>{0!==u&&(s++,y.done())}).next(()=>s>0)}se(e,t){return xd(e).get(t).next(r=>r?gf(r):null)}}function xd(n){return rr(n,"targets")}function tC(n){return rr(n,"targetGlobal")}function cc(n){return rr(n,"targetDocuments")}function WD([n,e],[t,r]){const i=Vt(n,t);return 0===i?Vt(e,r):i}class ZD{constructor(e){this.xn=e,this.buffer=new bn(WD),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();WD(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nC{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Le("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Kr(r)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Sl(r)}yield t.Fn(3e5)}))}}class Ur{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(Ui.at);const r=new ZD(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(zD)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zD):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,s,u,d,p,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),i=this.params.maximumSequenceNumbersToCollect):i=I,u=Date.now(),this.nthSequenceNumber(e,i))).next(I=>(r=I,d=Date.now(),this.removeTargets(e,r,t))).next(I=>(s=I,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(I=>(y=Date.now(),Pp()<=Ei.in.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-b}ms\n\tDetermined least recently used ${i} in `+(d-u)+`ms\n\tRemoved ${s} targets in `+(p-d)+`ms\n\tRemoved ${I} documents in `+(y-p)+`ms\nTotal Duration: ${y-b}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:I})))}}class KD{constructor(e,t){this.db=e,this.garbageCollector=new Ur(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return pv(e,r)}removeReference(e,t,r){return pv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return pv(e,t)}Gn(e,t){return function(r,i){let s=!1;return K_(r).tt(u=>Z_(r,u,i).next(d=>(d&&(s=!0),oe.resolve(!d)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Kn(e,(u,d)=>{if(d<=t){const p=this.Gn(e,u).next(y=>{if(!y)return s++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Pt.min()),cc(e).delete([0,Hi(u.path)])))});i.push(p)}}).next(()=>oe.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return pv(e,t)}Kn(e,t){const r=cc(e);let i,s=Ui.at;return r.Z({index:"documentTargetsIndex"},([u,d],{path:p,sequenceNumber:y})=>{0===u?(s!==Ui.at&&t(new Ze(Ta(i)),s),s=y,i=p):s=Ui.at}).next(()=>{s!==Ui.at&&t(new Ze(Ta(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pv(n,e){return cc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Hi(e.path),sequenceNumber:r}));var r}class YD{constructor(){this.changes=new Qu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class QD{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return oo(e).put(r)}removeEntry(e,t,r){return oo(e).delete(function(i,s){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],tg(s),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=kn.newInvalidDocument(t);return oo(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ag(t))},(i,s)=>{r=this.jn(t,s)}).next(()=>r)}Wn(e,t){let r={size:0,document:kn.newInvalidDocument(t)};return oo(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ag(t))},(i,s)=>{r={document:this.jn(t,s),size:_f(s)}}).next(()=>r)}getEntries(e,t){let r=Bi();return this.zn(e,t,(i,s)=>{const u=this.jn(i,s);r=r.insert(i,u)}).next(()=>r)}Hn(e,t){let r=Bi(),i=new ct(Ze.comparator);return this.zn(e,t,(s,u)=>{const d=this.jn(s,u);r=r.insert(s,d),i=i.insert(s,_f(u))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return oe.resolve();let i=new bn(Q_);t.forEach(p=>i=i.add(p));const s=IDBKeyRange.bound(ag(i.first()),ag(i.last())),u=i.getIterator();let d=u.getNext();return oo(e).Z({index:"documentKeyIndex",range:s},(p,y,b)=>{const I=Ze.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&Q_(d,I)<0;)r(d,null),d=u.getNext();d&&d.isEqual(I)&&(r(d,y),d=u.hasNext()?u.getNext():null),d?b.j(ag(d)):b.done()}).next(()=>{for(;d;)r(d,null),d=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),tg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return oo(e).W(IDBKeyRange.bound(i,s,!0)).next(u=>{let d=Bi();for(const p of u){const y=this.jn(Ze.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(y.key,y)}return d})}getAllFromCollectionGroup(e,t,r,i){let s=Bi();const u=e0(t,r),d=e0(t,Is.max());return oo(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,d,!0)},(p,y,b)=>{const I=this.jn(Ze.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(I.key,I),s.size===i&&b.done()}).next(()=>s)}newChangeBuffer(e){return new JD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Y_(e).get("remoteDocumentGlobalKey").next(t=>(Rt(!!t),t))}Qn(e,t){return Y_(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function pf(n,e){let t;if(e.document)t=U_(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ze.fromSegments(e.noDocument.path),i=ic(e.noDocument.readTime);t=kn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ut();{const r=Ze.fromSegments(e.unknownDocument.path),i=ic(e.unknownDocument.version);t=kn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Rn(r[0],r[1]);return Pt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Pt.min()))return r}return kn.newInvalidDocument(e)}}function XD(n){return new QD(n)}class JD extends YD{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Qu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new bn((s,u)=>Vt(s.canonicalString(),u.canonicalString()));return this.changes.forEach((s,u)=>{const d=this.Xn.get(s);if(t.push(this.Yn.removeEntry(e,s,d.readTime)),u.isValidDocument()){const p=$_(this.Yn.It,u);i=i.add(s.path.popLast()),r+=_f(p)-d.size,t.push(this.Yn.addEntry(e,s,p))}else if(r-=d.size,this.trackRemovals){const p=$_(this.Yn.It,u.convertToNoDocument(Pt.min()));t.push(this.Yn.addEntry(e,s,p))}}),i.forEach(s=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Yn.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((s,u)=>{this.Xn.set(s,{size:u,readTime:r.get(s).readTime})}),r))}}function Y_(n){return rr(n,"remoteDocumentGlobal")}function oo(n){return rr(n,"remoteDocumentsV14")}function ag(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function e0(n,e){const t=e.documentKey.path.toArray();return[n,tg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Q_(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Vt(t[s],r[s]),i)return i;return i=Vt(t.length,r.length),i||(i=Vt(t[t.length-2],r[r.length-2]),i||Vt(t[t.length-1],r[r.length-1]))}class rC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class X_{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Dd(r.mutation,i,es.empty(),Rn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Gt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Gt()){const i=so();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let u=Xm();return s.forEach((d,p)=>{u=u.insert(d,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=so();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Gt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,r,i){let s=Bi();const u=Gp(),d=Gp();return t.forEach((p,y)=>{const b=r.get(y.key);i.has(y.key)&&(void 0===b||b.mutation instanceof Vo)?s=s.insert(y.key,y):void 0!==b&&(u.set(y.key,b.mutation.getFieldMask()),Dd(b.mutation,y,b.mutation.getFieldMask(),Rn.now()))}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((y,b)=>u.set(y,b)),t.forEach((y,b)=>{var I;return d.set(y,new rC(b,null!==(I=u.get(y))&&void 0!==I?I:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Gp();let i=new ct((u,d)=>u-d),s=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(p=>{const y=t.get(p);if(null===y)return;let b=r.get(p)||es.empty();b=d.applyToLocalView(y,b),r.set(p,b);const I=(i.get(d.batchId)||Gt()).add(p);i=i.insert(d.batchId,I)})}).next(()=>{const u=[],d=i.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,b=p.value,I=N_();b.forEach(x=>{if(!s.has(x)){const P=Zm(t.get(x),r.get(x));null!==P&&I.set(x,P),s=s.add(x)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,I))}return oe.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):gD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const u=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):oe.resolve(so());let d=-1,p=s;return u.next(y=>oe.forEach(y,(b,I)=>(d<I.largestBatchId&&(d=I.largestBatchId),s.get(b)?oe.resolve():this.getBaseDocument(e,b,I).next(x=>{p=p.insert(b,x)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,p,y,Gt())).next(b=>({batchId:d,changes:SD(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next(r=>{let i=Xm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=Xm();return this.indexManager.getCollectionParents(e,i).next(u=>oe.forEach(u,d=>{const p=(y=t,b=d.child(i),new Il(b,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,b;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(y=>{y.forEach((b,I)=>{s=s.insert(b,I)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((d,p)=>{const y=p.getKey();null===i.get(y)&&(i=i.insert(y,kn.newInvalidDocument(y)))});let u=Xm();return i.forEach((d,p)=>{const y=s.get(d);void 0!==y&&Dd(y.mutation,p,es.empty(),Rn.now()),vD(t,p)&&(u=u.insert(d,p))}),u})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):oe.resolve(kn.newInvalidDocument(t))}}class ix{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return oe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Qr(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:uv(r.bundledQuery),readTime:Qr(r.readTime)}),oe.resolve();var r}}class J_{constructor(){this.overlays=new ct(Ze.comparator),this.es=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=so();return oe.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ue(e,t,s)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=so(),s=t.length+1,u=new Ze(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ct((y,b)=>y-b);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let b=s.get(y.largestBatchId);null===b&&(b=so(),s=s.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const d=so(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,b)=>d.set(y,b)),!(d.size()>=i)););return oe.resolve(d)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new nc(t,r));let s=this.es.get(t);void 0===s&&(s=Gt(),this.es.set(t,s)),this.es.set(t,s.add(r.key))}}class lg{constructor(){this.ns=new bn(xn.ss),this.rs=new bn(xn.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new xn(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new xn(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ze(new sn([])),r=new xn(t,e),i=new xn(t,e+1),s=[];return this.rs.forEachInRange([r,i],u=>{this.cs(u),s.push(u.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ze(new sn([])),r=new xn(t,e),i=new xn(t,e+1);let s=Gt();return this.rs.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new xn(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class xn{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ze.comparator(e.key,t.key)||Vt(e._s,t._s)}static os(e,t){return Vt(e._s,t._s)||Ze.comparator(e.key,t.key)}}class iC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new bn(xn.ss)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.ws;this.ws++;const u=new ec(s,t,r,i);this.mutationQueue.push(u);for(const d of i)this.gs=this.gs.add(new xn(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return oe.resolve(u)}lookupMutationBatch(e,t){return oe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),s=i<0?0:i;return oe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new xn(t,0),i=new xn(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],u=>{const d=this.ys(u._s);s.push(d)}),oe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bn(Vt);return t.forEach(i=>{const s=new xn(i,0),u=new xn(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,u],d=>{r=r.add(d._s)})}),oe.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Ze.isDocumentKey(s)||(s=s.child(""));const u=new xn(new Ze(s),0);let d=new bn(Vt);return this.gs.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(d=d.add(p._s)),!0)},u),oe.resolve(this.Is(d))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Rt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return oe.forEach(t.mutations,i=>{const s=new xn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new xn(t,0),i=this.gs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return oe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class t0{constructor(e){this.Es=e,this.docs=new ct(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():kn.newInvalidDocument(t))}getEntries(e,t){let r=Bi();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():kn.newInvalidDocument(i))}),oe.resolve(r)}getAllFromCollection(e,t,r){let i=Bi();const s=new Ze(t.child("")),u=this.docs.getIteratorFrom(s);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||f_(h_(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return oe.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ut()}As(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ca(this)}getSize(e){return oe.resolve(this.size)}}class Ca extends YD{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class Bo{constructor(e){this.persistence=e,this.Rs=new Qu(t=>Wu(t),Zu),this.lastRemoteSnapshotVersion=Pt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new lg,this.targetCount=0,this.vs=uc.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),oe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new uc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Dn(t),oe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Rs.forEach((u,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Rs.delete(u),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),oe.waitFor(s).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),oe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Ps.containsKey(t))}}class ao{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ui(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Bo(this),this.indexManager=new $D,this.remoteDocumentCache=new t0(r=>this.referenceDelegate.xs(r)),this.It=new Cd(t),this.Ns=new ix(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new J_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new iC(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const i=new n0(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ms(e,t){return oe.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class n0 extends km{constructor(e){super(),this.currentSequenceNumber=e}}class ug{constructor(e){this.persistence=e,this.Fs=new lg,this.$s=null}static Bs(e){return new ug(e)}get Ls(){if(this.$s)return this.$s;throw ut()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ls,r=>{const i=Ze.fromPath(r);return this.Us(e,i).next(s=>{s||t.removeEntry(i,Pt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return oe.or([()=>oe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class sC{constructor(e){this.It=e}$(e,t,r,i){const s=new Fm("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iv,{unique:!0}),d.createObjectStore("documentMutations"),r0(e),function(d){d.createObjectStore("remoteDocuments")}(e));let u=oe.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),r0(e)),u=u.next(()=>function(d){const p=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(s))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(d,p){return p.store("mutations").W().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iv,{unique:!0});const b=p.store("mutations"),I=y.map(x=>b.put(x));return oe.waitFor(I)})}(e,s))),u=u.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.qs(s))),r<6&&i>=6&&(u=u.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),r<7&&i>=7&&(u=u.next(()=>this.Gs(s))),r<8&&i>=8&&(u=u.next(()=>this.Qs(e,s))),r<9&&i>=9&&(u=u.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.js(s))),r<11&&i>=11&&(u=u.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:Ia});p.createIndex("collectionPathOverlayIndex",eg,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",Ii,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:WI});p.createIndex("documentKeyIndex",ZI),p.createIndex("collectionGroupIndex",KI)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.zs(e,s))),r<15&&i>=15&&(u=u.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:YI}).createIndex("sequenceNumberIndex",QI,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:j_}).createIndex("documentKeyIndex",XI,{unique:!1})}(e))),u}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=_f(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>oe.forEach(i,s=>{const u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",u).next(d=>oe.forEach(d,p=>{Rt(p.userId===s.userId);const y=sc(this.It,p);return W_(e,s.userId,y).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((u,d)=>{const p=new sn(u),y=[0,Hi(p)];s.push(t.get(y).next(b=>b?oe.resolve():t.put({targetId:0,path:Hi(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>oe.waitFor(s))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Jp});const r=t.store("collectionParents"),i=new rg,s=u=>{if(i.add(u)){const d=u.lastSegment(),p=u.popLast();return r.put({collectionId:d,parent:Hi(p)})}};return t.store("remoteDocuments").Z({X:!0},(u,d)=>{const p=new sn(u);return s(p.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([u,d,p],y)=>{const b=Ta(d);return s(b.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const s=gf(i),u=G_(this.It,s);return t.put(u)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((s,u)=>{const d=t.store("remoteDocumentsV14"),p=(y=u,y.document?new Ze(sn.fromString(y.document.name).popFirst(5)):y.noDocument?Ze.fromSegments(y.noDocument.path):y.unknownDocument?Ze.fromSegments(y.unknownDocument.path):ut()).path.toArray();var y;const b={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(d.put(b))}).next(()=>oe.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=XD(this.It),s=new ao(ug.Bs,this.It.re);return r.W().next(u=>{const d=new Map;return u.forEach(p=>{var y;let b=null!==(y=d.get(p.userId))&&void 0!==y?y:Gt();sc(this.It,p).keys().forEach(I=>b=b.add(I)),d.set(p.userId,b)}),oe.forEach(d,(p,y)=>{const b=new Zr(y),I=mf.oe(this.It,b),x=s.getIndexManager(b),P=og.oe(b,this.It,x,s.referenceDelegate);return new X_(i,P,I,x).recalculateAndSaveOverlaysForDocumentKeys(new Ju(t,Ui.at),p).next()})})}}function r0(n){n.createObjectStore("targetDocuments",{keyPath:Id}).createIndex("documentTargetsIndex",rx,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ov,{unique:!0}),n.createObjectStore("targetGlobal")}const eE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class tE{constructor(e,t,r,i,s,u,d,p,y,b,I=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=s,this.window=u,this.document=d,this.Js=y,this.Ys=b,this.Xs=I,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=x=>Promise.resolve(),!tE.C())throw new Pe(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new KD(this,i),this.ii=t+"main",this.It=new Cd(p),this.ri=new io(this.ii,this.Xs,new sC(this.It)),this.Cs=new qD(this.referenceDelegate,this.It),this.remoteDocumentCache=XD(this.It),this.Ns=new UD,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===b&&On("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(de.FAILED_PRECONDITION,eE);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ui(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,_e.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>dc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Kr(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Nd(e).get("owner").next(t=>oe.resolve(this.mi(t)))}gi(e){return dc(e).delete(this.clientId)}yi(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=rr(r,"clientMetadata");return i.W().next(s=>{const u=e.Ii(s,18e5),d=s.filter(p=>-1===u.indexOf(p));return oe.forEach(d,p=>i.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?oe.resolve(!0):Nd(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Pe(de.FAILED_PRECONDITION,eE);return!1}}return!(!this.networkEnabled||!this.inForeground)||dc(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Ju(t,Ui.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>dc(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return og.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new eC(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return mf.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Le("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(u=this.Xs)?ff:14===u?lv:13===u?Ns:12===u?av:11===u?Xu:void ut();var u;let d;return this.ri.runTransaction(e,i,s,p=>(d=new Ju(p,this.Ss?this.Ss.next():Ui.at),"readwrite-primary"===t?this.fi(d).next(y=>!!y||this.di(d)).next(y=>{if(!y)throw On(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Pe(de.FAILED_PRECONDITION,p_);return r(d)}).next(y=>this.wi(d).next(()=>y)):this.Vi(d).next(()=>r(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}Vi(e){return Nd(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(de.FAILED_PRECONDITION,eE)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Nd(e).put("owner",t)}static C(){return io.C()}_i(e){const t=Nd(e);return t.get("owner").next(r=>this.mi(r)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(On(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,qt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return On("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){On("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Nd(n){return rr(n,"owner")}function dc(n){return rr(n,"clientMetadata")}function nE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class gv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Gt(),i=Gt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new gv(e,t.fromCache,r,i)}}class s0{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(s=>s||this.Oi(e,t,i,r)).next(s=>s||this.Mi(e,t))}ki(e,t){if(b_(t))return oe.resolve(null);let r=Ti(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Wm(t,null,"F"),r=Ti(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const u=Gt(...s);return this.Ni.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const y=this.Fi(t,d);return this.$i(t,y,u,p.readTime)?this.ki(e,Wm(t,null,"F")):this.Bi(e,y,t,p)}))})))}Oi(e,t,r,i){return b_(t)||i.isEqual(Pt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(s=>{const u=this.Fi(t,s);return this.$i(t,u,r,i)?this.Mi(e,t):(Pp()<=Ei.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),mD(t)),this.Bi(e,u,t,Xb(i,-1)))})}Fi(e,t){let r=new bn(PI(e));return t.forEach((i,s)=>{vD(e,s)&&(r=r.add(s))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mi(e,t){return Pp()<=Ei.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",mD(t)),this.Ni.getDocumentsMatchingQuery(e,t,Is.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(u=>{s=s.insert(u.key,u)}),s))}}class o0{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new ct(Vt),this.qi=new Qu(s=>Wu(s),Zu),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new X_(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function rE(n,e,t,r){return new o0(n,e,t,r)}function cg(n,e){return iE.apply(this,arguments)}function iE(){return iE=(0,_e.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const u=[],d=[];let p=Gt();for(const y of i){u.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}for(const y of s){d.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}return t.localDocuments.getDocuments(r,p).next(y=>({ji:y,removedBatchIds:u,addedBatchIds:d}))})})}),iE.apply(this,arguments)}function a0(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(u,d,p,y){const b=p.batch,I=b.keys();let x=oe.resolve();return I.forEach(P=>{x=x.next(()=>y.getEntry(d,P)).next(k=>{const H=p.docVersions.get(P);Rt(null!==H),k.version.compareTo(H)<0&&(b.applyToRemoteDocument(k,p),k.isValidDocument()&&(k.setReadTime(p.commitVersion),y.addEntry(k)))})}),x.next(()=>u.mutationQueue.removeMutationBatch(d,b))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let d=Gt();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(d=d.add(u.batch.mutations[p].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function sE(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function oE(n,e){const t=Ye(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const d=[];e.targetChanges.forEach((b,I)=>{const x=i.get(I);if(!x)return;d.push(t.Cs.removeMatchingKeys(s,b.removedDocuments,I).next(()=>t.Cs.addMatchingKeys(s,b.addedDocuments,I)));let P=x.withSequenceNumber(s.currentSequenceNumber);var k,H,Y;e.targetMismatches.has(I)?P=P.withResumeToken(Nr.EMPTY_BYTE_STRING,Pt.min()).withLastLimboFreeSnapshotVersion(Pt.min()):b.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(b.resumeToken,r)),i=i.insert(I,P),H=P,Y=b,(0===(k=x).resumeToken.approximateByteSize()||H.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8||Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0)&&d.push(t.Cs.updateTargetData(s,P))});let p=Bi(),y=Gt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,b))}),d.push(dg(s,u,e.documentUpdates).next(b=>{p=b.Wi,y=b.zi})),!r.isEqual(Pt.min())){const b=t.Cs.getLastRemoteSnapshotVersion(s).next(I=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));d.push(b)}return oe.waitFor(d).next(()=>u.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,y)).next(()=>p)}).then(s=>(t.Ui=i,s))}function dg(n,e,t){let r=Gt(),i=Gt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=Bi();return t.forEach((d,p)=>{const y=s.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(d)),p.isNoDocument()&&p.version.isEqual(Pt.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):Le("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{Wi:u,zi:i}})}function l0(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Pd(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(s=>s?(i=s,oe.resolve(i)):t.Cs.allocateTargetId(r).next(u=>(i=new Ps(e,u,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Od(n,e,t){return mv.apply(this,arguments)}function mv(){return mv=(0,_e.Z)(function*(n,e,t){const r=Ye(n),i=r.Ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Kr(u))throw u;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),mv.apply(this,arguments)}function hg(n,e,t){const r=Ye(n);let i=Pt.min(),s=Gt();return r.persistence.runTransaction("Execute query","readonly",u=>function(d,p,y){const b=Ye(d),I=b.qi.get(y);return void 0!==I?oe.resolve(b.Ui.get(I)):b.Cs.getTargetData(p,y)}(r,u,Ti(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(u,d.targetId).next(p=>{s=p})}).next(()=>r.Li.getDocumentsMatchingQuery(u,e,t?i:Pt.min(),t?s:Gt())).next(d=>(uE(r,NI(e),d),{documents:d,Hi:s})))}function aE(n,e){const t=Ye(n),r=Ye(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.se(s,e).next(u=>u?u.target:null))}function lE(n,e){const t=Ye(n),r=t.Ki.get(e)||Pt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,Xb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(uE(t,e,i),i))}function uE(n,e,t){let r=n.Ki.get(e)||Pt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ki.set(e,r)}function cE(){return cE=(0,_e.Z)(function*(n,e,t,r){const i=Ye(n);let s=Gt(),u=Bi();for(const y of t){const b=e.Ji(y.metadata.name);y.document&&(s=s.add(b));const I=e.Yi(y);I.setReadTime(e.Xi(y.metadata.readTime)),u=u.insert(b,I)}const d=i.Gi.newChangeBuffer({trackRemovals:!0}),p=yield Pd(i,(y=r,Ti(af(sn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>dg(y,d,u).next(b=>(d.apply(y),b)).next(b=>i.Cs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>i.Cs.addMatchingKeys(y,s,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,b.Wi,b.zi)).next(()=>b.Wi)))}),cE.apply(this,arguments)}function aC(n,e){return dE.apply(this,arguments)}function dE(){return dE=(0,_e.Z)(function*(n,e,t=Gt()){const r=yield Pd(n,Ti(uv(e.bundledQuery))),i=Ye(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const u=Qr(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Ns.saveNamedQuery(s,e);const d=r.withResumeToken(Nr.EMPTY_BYTE_STRING,u);return i.Ui=i.Ui.insert(d.targetId,d),i.Cs.updateTargetData(s,d).next(()=>i.Cs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Cs.addMatchingKeys(s,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(s,e))})}),dE.apply(this,arguments)}function u0(n,e){return`firestore_clients_${n}_${e}`}function c0(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function hE(n,e){return`firestore_targets_${n}_${e}`}class vv{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let s,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(s=new Pe(i.error.code,i.error.message))),u?new vv(e,t,i.state,s):(On("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Pe(r.error.code,r.error.message))),s?new fg(e,r.state,i):(On("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=zp();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=CI(r.activeTargetIds[u]),s=s.add(r.activeTargetIds[u]);return i?new yv(e,s):(On("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class fE{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new fE(t.clientId,t.onlineState):(On("SharedClientState",`Failed to parse online state: ${e}`),null)}}class pE{constructor(){this.activeTargetIds=zp()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gE{constructor(e,t,r,i,s){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new ct(Vt),this.started=!1,this.cr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=u0(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new pE),this.lr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const s=e.getItem(u0(e.persistenceKey,i));if(s){const u=yv.Zi(i,s);u&&(e.ur=e.ur.insert(u.clientId,u))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(hE(this.persistenceKey,e));if(r){const i=fg.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hE(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void On("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(s){let u=Ui.at;if(null!=s)try{const d=JSON.parse(s);Rt("number"==typeof d),u=d}catch(d){On("SharedClientState","Failed to read sequence number from WebStorage",d)}return u}(r.newValue);i!==Ui.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Mr(s)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new vv(this.currentUser,e,t,r),s=c0(this.persistenceKey,this.currentUser,e);this.setItem(s,i.tr())}Er(e){const t=c0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=hE(this.persistenceKey,e),s=new fg(e,t,r);this.setItem(i,s.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return yv.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return vv.Zi(new Zr(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return fg.Zi(i,t)}yr(e){return fE.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),s=this.Ir(r),u=[],d=[];return s.forEach(p=>{i.has(p)||u.push(p)}),i.forEach(p=>{s.has(p)||d.push(p)}),this.syncEngine.Br(u,d).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=zp();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class d0{constructor(){this.Lr=new pE,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new pE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class lC{qr(e){}shutdown(){}}class h0{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const uC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cC{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class f0 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,s){const u=this.ho(e,t);Le("RestConnection","Sending: ",u,r);const d={};return this.lo(d,i,s),this.fo(e,u,d,r).then(p=>(Le("RestConnection","Received: ",p),p),p=>{throw bl("RestConnection",`${e} failed with error: `,p,"url: ",u,"request:",r),p})}_o(e,t,r,i,s,u){return this.ao(e,t,r,i,s)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Jh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,t){return`${this.oo}/v1/${t}:${uC[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((s,u)=>{const d=new mI;d.setWithCredentials(!0),d.listenOnce(wa.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Gb.NO_ERROR:const y=d.getResponseJson();Le("Connection","XHR received:",JSON.stringify(y)),s(y);break;case Gb.TIMEOUT:Le("Connection",'RPC "'+e+'" timed out'),u(new Pe(de.DEADLINE_EXCEEDED,"Request time out"));break;case Gb.HTTP_ERROR:const b=d.getStatus();if(Le("Connection",'RPC "'+e+'" failed with status:',b,"response text:",d.getResponseText()),b>0){const I=d.getResponseJson().error;if(I&&I.status&&I.message){const x=function(P){const k=P.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(k)>=0?k:de.UNKNOWN}(I.status);u(new Pe(x,I.message))}else u(new Pe(de.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Pe(de.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Le("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);d.send(t,"POST",p,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=QR(),u=$b(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new gI({})),this.lo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const p=i.join("");Le("Connection","Creating WebChannel: "+p,d);const y=s.createWebChannel(p,d);let b=!1,I=!1;const x=new cC({Hr:k=>{I?Le("Connection","Not sending because WebChannel is closed:",k):(b||(Le("Connection","Opening WebChannel transport."),y.open(),b=!0),Le("Connection","WebChannel sending:",k),y.send(k))},Jr:()=>y.close()}),P=(k,H,Y)=>{k.listen(H,me=>{try{Y(me)}catch(Ne){setTimeout(()=>{throw Ne},0)}})};return P(y,Np.EventType.OPEN,()=>{I||Le("Connection","WebChannel transport opened.")}),P(y,Np.EventType.CLOSE,()=>{I||(I=!0,Le("Connection","WebChannel transport closed"),x.io())}),P(y,Np.EventType.ERROR,k=>{I||(I=!0,bl("Connection","WebChannel transport errored:",k),x.io(new Pe(de.UNAVAILABLE,"The operation could not be completed")))}),P(y,Np.EventType.MESSAGE,k=>{var H;if(!I){const Y=k.data[0];Rt(!!Y);const me=Y,Ne=me.error||(null===(H=me[0])||void 0===H?void 0:H.error);if(Ne){Le("Connection","WebChannel received error:",Ne);const Oe=Ne.status;let ke=function(Je){const Et=Tr[Je];if(void 0!==Et)return x_(Et)}(Oe),et=Ne.message;void 0===ke&&(ke=de.INTERNAL,et="Unknown error status: "+Oe+" with message "+Ne.message),I=!0,x.io(new Pe(ke,et)),y.close()}else Le("Connection","WebChannel received:",Y),x.ro(Y)}}),P(u,o_.STAT_EVENT,k=>{k.stat===Pm.PROXY?Le("Connection","Detected buffering proxy"):k.stat===Pm.NOPROXY&&Le("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.so()},0),x}}function mE(){return typeof window<"u"?window:null}function pg(){return typeof document<"u"?document:null}function Ef(n){return new jI(n,!0)}class _v{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class vE{constructor(e,t,r,i,s,u,d,p){this.Hs=e,this.vo=r,this.Vo=i,this.So=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new _v(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,_e.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,_e.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(On(t.toString()),On("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Pe(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.No.Ro((0,_e.Z)(function*(){e.state=0,e.start()}))}jo(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class p0 extends vE{constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.It=s}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function B_(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:ut(),i=e.targetChange.targetIds||[],s=function(p,y){return p.gt?(Rt(void 0===y||"string"==typeof y),Nr.fromBase64String(y||"")):(Rt(void 0===y||y instanceof Uint8Array),Nr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(p){const y=void 0===p.code?de.UNKNOWN:x_(p.code);return new Pe(y,p.message||"")}(u);t=new TD(r,i,s,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Rs(n,r.document.name),s=Qr(r.document.updateTime),u=new Si({mapValue:{fields:r.document.fields}}),d=kn.newFoundDocument(i,s,u);t=new Zp(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=Rs(n,r.document),s=r.readTime?Qr(r.readTime):Pt.min(),u=kn.newNoDocument(i,s);t=new Zp([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Rs(n,r.document);t=new Zp([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ut();{const r=e.filter,s=new VI(r.count||0);t=new P_(r.targetId,s)}}var p;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Pt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Pt.min():s.readTime?Qr(s.readTime):Pt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=ev(this.It),t.addTarget=function(i,s){let u;const d=s.target;return u=ts(d)?{documents:df(i,d)}:{query:H_(i,d)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?u.resumeToken=MD(i,s.resumeToken):s.snapshotVersion.compareTo(Pt.min())>0&&(u.readTime=Kp(i,s.snapshotVersion.toTimestamp())),u}(this.It,e);const r=function ND(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ut()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=ev(this.It),t.removeTarget=e,this.Lo(t)}}class g0 extends vE{constructor(e,t,r,i,s,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.It=s,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function tv(n,e){return n&&n.length>0?(Rt(void 0!==e),n.map(t=>function(r,i){let s=Qr(r.updateTime?r.updateTime:i);return s.isEqual(Pt.min())&&(s=Qr(i)),new LI(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Qr(e.commitTime);return this.listener.tu(r,t)}return Rt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=ev(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>xs(this.It,r))};this.Lo(t)}}class m0 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.It=i,this.su=!1}iu(){if(this.su)throw new Pe(de.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.So.ao(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(de.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.So._o(e,t,r,s,u,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Pe(de.UNKNOWN,s.toString())})}terminate(){this.su=!0}}class kd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(On(t),this.uu=!1):Le("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class dC{constructor(e,t,r,i,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=s,this.gu.qr(d=>{r.enqueueAndForget((0,_e.Z)(function*(){var p;xl(u)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,_e.Z)(function*(y){const b=Ye(y);b.wu.add(4),yield vg(b),b.yu.set("Unknown"),b.wu.delete(4),yield mg(b)}),function(y){return p.apply(this,arguments)})(u))}))}),this.yu=new kd(r,i)}}function mg(n){return hc.apply(this,arguments)}function hc(){return hc=(0,_e.Z)(function*(n){if(xl(n))for(const e of n.mu)yield e(!0)}),hc.apply(this,arguments)}function vg(n){return yg.apply(this,arguments)}function yg(){return yg=(0,_e.Z)(function*(n){for(const e of n.mu)yield e(!1)}),yg.apply(this,arguments)}function yE(n,e){const t=Ye(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),_E(t)?Tt(t):Tf(t).Oo()&&Ev(t,e))}function wf(n,e){const t=Ye(n),r=Tf(t);t._u.delete(e),r.Oo()&&hC(t,e),0===t._u.size&&(r.Oo()?r.$o():xl(t)&&t.yu.set("Unknown"))}function Ev(n,e){n.pu.Mt(e.targetId),Tf(n).Ho(e)}function hC(n,e){n.pu.Mt(e),Tf(n).Jo(e)}function Tt(n){n.pu=new O_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n._u.get(e)||null}),Tf(n).start(),n.yu.cu()}function _E(n){return xl(n)&&!Tf(n).ko()&&n._u.size>0}function xl(n){return 0===Ye(n).wu.size}function y0(n){n.pu=void 0}function bf(n){return EE.apply(this,arguments)}function EE(){return EE=(0,_e.Z)(function*(n){n._u.forEach((e,t)=>{Ev(n,e)})}),EE.apply(this,arguments)}function wv(n,e){return Df.apply(this,arguments)}function Df(){return Df=(0,_e.Z)(function*(n,e){y0(n),_E(n)?(n.yu.lu(e),Tt(n)):n.yu.set("Unknown")}),Df.apply(this,arguments)}function mr(n,e,t){return _0.apply(this,arguments)}function _0(){return _0=(0,_e.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof TD&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(i,s){const u=s.cause;for(const d of s.targetIds)i._u.has(d)&&(yield i.remoteSyncer.rejectListen(d,u),i._u.delete(d),i.pu.removeTarget(d))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _g(n,r)}else if(e instanceof Zp?n.pu.Gt(e):e instanceof P_?n.pu.Yt(e):n.pu.Wt(e),!t.isEqual(Pt.min()))try{const r=yield sE(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const u=i.pu.te(s);return u.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=i._u.get(p);y&&i._u.set(p,y.withResumeToken(d.resumeToken,s))}}),u.targetMismatches.forEach(d=>{const p=i._u.get(d);if(!p)return;i._u.set(d,p.withResumeToken(Nr.EMPTY_BYTE_STRING,p.snapshotVersion)),hC(i,d);const y=new Ps(p.target,d,1,p.sequenceNumber);Ev(i,y)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield _g(n,r)}var r}),_0.apply(this,arguments)}function _g(n,e,t){return bv.apply(this,arguments)}function bv(){return bv=(0,_e.Z)(function*(n,e,t){if(!Kr(e))throw e;n.wu.add(1),yield vg(n),n.yu.set("Offline"),t||(t=()=>sE(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield mg(n)}))}),bv.apply(this,arguments)}function E0(n,e){return e().catch(t=>_g(n,t,e))}function Fd(n){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,_e.Z)(function*(n){const e=Ye(n),t=fc(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;w0(e);)try{const i=yield l0(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,b0(e,i)}catch(i){yield _g(e,i)}D0(e)&&S0(e)}),Dv.apply(this,arguments)}function w0(n){return xl(n)&&n.du.length<10}function b0(n,e){n.du.push(e);const t=fc(n);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function D0(n){return xl(n)&&!fc(n).ko()&&n.du.length>0}function S0(n){fc(n).start()}function fC(n){return Ld.apply(this,arguments)}function Ld(){return Ld=(0,_e.Z)(function*(n){fc(n).nu()}),Ld.apply(this,arguments)}function pC(n){return wE.apply(this,arguments)}function wE(){return wE=(0,_e.Z)(function*(n){const e=fc(n);for(const t of n.du)e.Zo(t.mutations)}),wE.apply(this,arguments)}function gC(n,e,t){return Sf.apply(this,arguments)}function Sf(){return Sf=(0,_e.Z)(function*(n,e,t){const r=n.du.shift(),i=tc.from(r,e,t);yield E0(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Fd(n)}),Sf.apply(this,arguments)}function T0(n,e){return Sv.apply(this,arguments)}function Sv(){return Sv=(0,_e.Z)(function*(n,e){var t;e&&fc(n).Xo&&(yield(t=(0,_e.Z)(function*(r,i){if(R_(s=i.code)&&s!==de.ABORTED){const u=r.du.shift();fc(r).Fo(),yield E0(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield Fd(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),D0(n)&&S0(n)}),Sv.apply(this,arguments)}function bE(n,e){return DE.apply(this,arguments)}function DE(){return DE=(0,_e.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const r=xl(t);t.wu.add(3),yield vg(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield mg(t)}),DE.apply(this,arguments)}function Vd(n,e){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,_e.Z)(function*(n,e){const t=Ye(n);e?(t.wu.delete(2),yield mg(t)):e||(t.wu.add(2),yield vg(t),t.yu.set("Unknown"))}),Ud.apply(this,arguments)}function Tf(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ye(e);return i.iu(),new p0(t,i.So,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:bf.bind(null,n),Zr:wv.bind(null,n),zo:mr.bind(null,n)}),n.mu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Iu.Fo(),_E(n)?Tt(n):n.yu.set("Unknown")):(yield n.Iu.stop(),y0(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function fc(n){return n.Tu||(n.Tu=function(e,t,r){const i=Ye(e);return i.iu(),new g0(t,i.So,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:fC.bind(null,n),Zr:T0.bind(null,n),eu:pC.bind(null,n),tu:gC.bind(null,n)}),n.mu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Tu.Fo(),yield Fd(n)):(yield n.Tu.stop(),n.du.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class SE{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,d=new SE(e,t,u,i,s);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bd(n,e){if(On("AsyncQueue",`${e}: ${n}`),Kr(n))return new Pe(de.UNAVAILABLE,`${e}: ${n}`);throw n}class Hd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=Xm(),this.sortedSet=new ct(this.comparator)}static emptySet(e){return new Hd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Hd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class TE{constructor(){this.Eu=new ct(Ze.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):ut():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class If{constructor(e,t,r,i,s,u,d,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,s){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new If(e,t,Hd.emptySet(t),u,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class I0{constructor(){this.Ru=void 0,this.listeners=[]}}class mC{constructor(){this.queries=new Qu(e=>xI(e),Ed),this.onlineState="Unknown",this.bu=new Set}}function IE(n,e){return C0.apply(this,arguments)}function C0(){return C0=(0,_e.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new I0),i)try{s.Ru=yield t.onListen(r)}catch(u){const d=Bd(u,`Initialization of query '${mD(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,s),s.listeners.push(e),e.Pu(t.onlineState),s.Ru&&e.vu(s.Ru)&&Cf(t)}),C0.apply(this,arguments)}function A0(n,e){return M0.apply(this,arguments)}function M0(){return M0=(0,_e.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const u=s.listeners.indexOf(e);u>=0&&(s.listeners.splice(u,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),M0.apply(this,arguments)}function sx(n,e){const t=Ye(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const d of u.listeners)d.vu(i)&&(r=!0);u.Ru=i}}r&&Cf(t)}function R0(n,e,t){const r=Ye(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function Cf(n){n.bu.forEach(e=>{e.next()})}class CE{constructor(e,t,r){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new If(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=If.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class vC{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class AE{constructor(e){this.It=e}Ji(e){return Rs(this.It,e)}Yi(e){return e.metadata.exists?U_(this.It,e.document,!1):kn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Qr(e)}}class Eg{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=x0(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=sn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new AE(this.It);for(const i of e)if(i.metadata.queries){const s=r.Ji(i.metadata.name);for(const u of i.metadata.queries){const d=(t.get(u)||Gt()).add(s);t.set(u,d)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function oC(n,e,t,r){return cE.apply(this,arguments)}(e.localStore,new AE(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield aC(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function x0(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class N0{constructor(e){this.key=e}}class P0{constructor(e){this.key=e}}class O0{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Gt(),this.mutatedKeys=Gt(),this.Gu=PI(e),this.Qu=new Hd(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new TE,i=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,d=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,I)=>{const x=i.get(b),P=vD(this.query,I)?I:null,k=!!x&&this.mutatedKeys.has(x.key),H=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let Y=!1;x&&P?x.data.isEqual(P.data)?k!==H&&(r.track({type:3,doc:P}),Y=!0):this.Hu(x,P)||(r.track({type:2,doc:P}),Y=!0,(p&&this.Gu(P,p)>0||y&&this.Gu(P,y)<0)&&(d=!0)):!x&&P?(r.track({type:0,doc:P}),Y=!0):x&&!P&&(r.track({type:1,doc:x}),Y=!0,(p||y)&&(d=!0)),Y&&(P?(u=u.add(P),s=H?s.add(b):s.delete(b)):(u=u.delete(b),s=s.delete(b)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const b="F"===this.query.limitType?u.last():u.first();u=u.delete(b.key),s=s.delete(b.key),r.track({type:1,doc:b})}return{Qu:u,zu:r,$i:d,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Au();s.sort((y,b)=>function(I,x){const P=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return P(I)-P(x)}(y.type,b.type)||this.Gu(y.doc,b.doc)),this.Ju(r);const u=t?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,p=d!==this.qu;return this.qu=d,0!==s.length||p?{snapshot:new If(this.query,e.Qu,i,s,e.mutatedKeys,0===d,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:u}:{Xu:u}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new TE,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Gt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new P0(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new N0(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Gt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return If.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class yC{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class k0{constructor(e){this.key=e,this.nc=!1}}class _C{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.sc={},this.ic=new Qu(d=>xI(d),Ed),this.rc=new Map,this.oc=new Set,this.uc=new ct(Ze.comparator),this.cc=new Map,this.ac=new lg,this.hc={},this.lc=new Map,this.fc=uc.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function EC(n,e){return jd.apply(this,arguments)}function jd(){return jd=(0,_e.Z)(function*(n,e){const t=q0(n);let r,i;const s=t.ic.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const u=yield Pd(t.localStore,Ti(e));t.isPrimaryClient&&yE(t.remoteStore,u);const d=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield ME(t,e,r,"current"===d,u.resumeToken)}return i}),jd.apply(this,arguments)}function ME(n,e,t,r,i){return Tv.apply(this,arguments)}function Tv(){return Tv=(0,_e.Z)(function*(n,e,t,r,i){n._c=(I,x,P)=>{return(k=(0,_e.Z)(function*(H,Y,me,Ne){let Oe=Y.view.Wu(me);Oe.$i&&(Oe=yield hg(H.localStore,Y.query,!1).then(({documents:Je})=>Y.view.Wu(Je,Oe)));const ke=Ne&&Ne.targetChanges.get(Y.targetId),et=Y.view.applyChanges(Oe,H.isPrimaryClient,ke);return PE(H,Y.targetId,et.Xu),et.snapshot}),function(H,Y,me,Ne){return k.apply(this,arguments)})(n,I,x,P);var k};const s=yield hg(n.localStore,e,!0),u=new O0(e,s.Hi),d=u.Wu(s.documents),p=Wp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=u.applyChanges(d,n.isPrimaryClient,p);PE(n,t,y.Xu);const b=new yC(e,t,u);return n.ic.set(e,b),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),y.snapshot}),Tv.apply(this,arguments)}function wC(n,e){return Iv.apply(this,arguments)}function Iv(){return Iv=(0,_e.Z)(function*(n,e){const t=Ye(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(s=>!Ed(s,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Od(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),wf(t.remoteStore,r.targetId),Af(t,r.targetId)}).catch(Sl))):(Af(t,r.targetId),yield Od(t.localStore,r.targetId,!0))}),Iv.apply(this,arguments)}function Cv(){return Cv=(0,_e.Z)(function*(n,e,t){const r=Nv(n);try{const i=yield function(s,u){const d=Ye(s),p=Rn.now(),y=u.reduce((x,P)=>x.add(P.key),Gt());let b,I;return d.persistence.runTransaction("Locally write mutations","readwrite",x=>{let P=Bi(),k=Gt();return d.Gi.getEntries(x,y).next(H=>{P=H,P.forEach((Y,me)=>{me.isValidDocument()||(k=k.add(Y))})}).next(()=>d.localDocuments.getOverlayedDocuments(x,P)).next(H=>{b=H;const Y=[];for(const me of u){const Ne=Km(me,b.get(me.key).overlayedDocument);null!=Ne&&Y.push(new Vo(me.key,Ne,$m(Ne.value.mapValue),Kn.exists(!0)))}return d.mutationQueue.addMutationBatch(x,p,Y,u)}).next(H=>{I=H;const Y=H.applyToLocalDocumentSet(b,k);return d.documentOverlayCache.saveOverlays(x,H.batchId,Y)})}).then(()=>({batchId:I.batchId,changes:SD(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,u,d){let p=s.hc[s.currentUser.toKey()];p||(p=new ct(Vt)),p=p.insert(u,d),s.hc[s.currentUser.toKey()]=p}(r,i.batchId,t),yield Nl(r,i.changes),yield Fd(r.remoteStore)}catch(i){const s=Bd(i,"Failed to persist write");t.reject(s)}}),Cv.apply(this,arguments)}function F0(n,e){return wg.apply(this,arguments)}function wg(){return wg=(0,_e.Z)(function*(n,e){const t=Ye(n);try{const r=yield oE(t.localStore,e);e.targetChanges.forEach((i,s)=>{const u=t.cc.get(s);u&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.nc=!0:i.modifiedDocuments.size>0?Rt(u.nc):i.removedDocuments.size>0&&(Rt(u.nc),u.nc=!1))}),yield Nl(t,r,e)}catch(r){yield Sl(r)}}),wg.apply(this,arguments)}function L0(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((s,u)=>{const d=u.view.Pu(e);d.snapshot&&i.push(d.snapshot)}),function(s,u){const d=Ye(s);d.onlineState=u;let p=!1;d.queries.forEach((y,b)=>{for(const I of b.listeners)I.Pu(u)&&(p=!0)}),p&&Cf(d)}(r.eventManager,e),i.length&&r.sc.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function V0(n,e,t){return Av.apply(this,arguments)}function Av(){return Av=(0,_e.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),s=i&&i.key;if(s){let u=new ct(Ze.comparator);u=u.insert(s,kn.newNoDocument(s,Pt.min()));const d=Gt().add(s),p=new qp(Pt.min(),new Map,new bn(Vt),u,d);yield F0(r,p),r.uc=r.uc.remove(s),r.cc.delete(e),OE(r)}else yield Od(r.localStore,e,!1).then(()=>Af(r,e,t)).catch(Sl)}),Av.apply(this,arguments)}function DC(n,e){return RE.apply(this,arguments)}function RE(){return RE=(0,_e.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const i=yield a0(t.localStore,e);NE(t,r,null),xE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Nl(t,i)}catch(i){yield Sl(i)}}),RE.apply(this,arguments)}function SC(n,e,t){return bg.apply(this,arguments)}function bg(){return bg=(0,_e.Z)(function*(n,e,t){const r=Ye(n);try{const i=yield function(s,u){const d=Ye(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.mutationQueue.lookupMutationBatch(p,u).next(b=>(Rt(null!==b),y=b.keys(),d.mutationQueue.removeMutationBatch(p,b))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>d.localDocuments.getDocuments(p,y))})}(r.localStore,e);NE(r,e,t),xE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Nl(r,i)}catch(i){yield Sl(i)}}),bg.apply(this,arguments)}function Mv(){return Mv=(0,_e.Z)(function*(n,e){const t=Ye(n);xl(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const u=Ye(s);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>u.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Bd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Mv.apply(this,arguments)}function xE(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function NE(n,e,t){const r=Ye(n);let i=r.hc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Af(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||U0(n,r)})}function U0(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(wf(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),OE(n))}function PE(n,e,t){for(const r of t)r instanceof N0?(n.ac.addReference(r.key,e),IC(n,r)):r instanceof P0?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||U0(n,r.key)):ut()}function IC(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.oc.add(r),OE(n))}function OE(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ze(sn.fromString(e)),r=n.fc.next();n.cc.set(r,new k0(t)),n.uc=n.uc.insert(t,r),yE(n.remoteStore,new Ps(Ti(af(t.path)),r,2,Ui.at))}}function Nl(n,e,t){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,_e.Z)(function*(n,e,t){const r=Ye(n),i=[],s=[],u=[];var d;r.ic.isEmpty()||(r.ic.forEach((d,p)=>{u.push(r._c(p,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const b=gv.Ci(p.targetId,y);s.push(b)}}))}),yield Promise.all(u),r.sc.zo(i),yield(d=(0,_e.Z)(function*(p,y){const b=Ye(p);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>oe.forEach(y,x=>oe.forEach(x.Si,P=>b.persistence.referenceDelegate.addReference(I,x.targetId,P)).next(()=>oe.forEach(x.Di,P=>b.persistence.referenceDelegate.removeReference(I,x.targetId,P)))))}catch(I){if(!Kr(I))throw I;Le("LocalStore","Failed to update sequence numbers: "+I)}for(const I of y){const x=I.targetId;if(!I.fromCache){const P=b.Ui.get(x),H=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);b.Ui=b.Ui.insert(x,H)}}}),function(p,y){return d.apply(this,arguments)})(r.localStore,s))}),Rv.apply(this,arguments)}function B0(n,e){return kE.apply(this,arguments)}function kE(){return kE=(0,_e.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield cg(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(u=>{u.forEach(d=>{d.reject(new Pe(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Nl(t,r.ji)}var i}),kE.apply(this,arguments)}function CC(n,e){const t=Ye(n),r=t.cc.get(e);if(r&&r.nc)return Gt().add(r.key);{let i=Gt();const s=t.rc.get(e);if(!s)return i;for(const u of s){const d=t.ic.get(u);i=i.unionWith(d.view.ju)}return i}}function H0(n,e){return FE.apply(this,arguments)}function FE(){return FE=(0,_e.Z)(function*(n,e){const t=Ye(n),r=yield hg(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&PE(t,e.targetId,i.Xu),i}),FE.apply(this,arguments)}function AC(n,e){return LE.apply(this,arguments)}function LE(){return LE=(0,_e.Z)(function*(n,e){const t=Ye(n);return lE(t.localStore,e).then(r=>Nl(t,r))}),LE.apply(this,arguments)}function VE(n,e,t,r){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,_e.Z)(function*(n,e,t,r){const i=Ye(n),s=yield function(u,d){const p=Ye(u),y=Ye(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",b=>y.Tn(b,d).next(I=>I?p.localDocuments.getDocuments(b,I):oe.resolve(null)))}(i.localStore,e);var d;null!==s?("pending"===t?yield Fd(i.remoteStore):"acknowledged"===t||"rejected"===t?(NE(i,e,r||null),xE(i,e),d=e,Ye(Ye(i.localStore).mutationQueue).An(d)):ut(),yield Nl(i,s)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)}),Dg.apply(this,arguments)}function Sg(){return Sg=(0,_e.Z)(function*(n,e){const t=Ye(n);if(q0(t),Nv(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield $0(t,r.toArray());t.dc=!0,yield Vd(t.remoteStore,!0);for(const s of i)yE(t.remoteStore,s)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((s,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(Af(t,u),Od(t.localStore,u,!0))),wf(t.remoteStore,u)}),yield i,yield $0(t,r),function(s){const u=Ye(s);u.cc.forEach((d,p)=>{wf(u.remoteStore,p)}),u.ac.fs(),u.cc=new Map,u.uc=new ct(Ze.comparator)}(t),t.dc=!1,yield Vd(t.remoteStore,!1)}}),Sg.apply(this,arguments)}function $0(n,e,t){return UE.apply(this,arguments)}function UE(){return UE=(0,_e.Z)(function*(n,e,t){const r=Ye(n),i=[],s=[];for(const u of e){let d;const p=r.rc.get(u);if(p&&0!==p.length){d=yield Pd(r.localStore,Ti(p[0]));for(const y of p){const b=r.ic.get(y),I=yield H0(r,b);I.snapshot&&s.push(I.snapshot)}}else{const y=yield aE(r.localStore,u);d=yield Pd(r.localStore,y),yield ME(r,xv(y),u,!1,d.resumeToken)}i.push(d)}return r.sc.zo(s),i}),UE.apply(this,arguments)}function xv(n){return fD(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function MC(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).vi()}function G0(n,e,t,r){return pc.apply(this,arguments)}function pc(){return pc=(0,_e.Z)(function*(n,e,t,r){const i=Ye(n);if(i.dc)return void Le("SyncEngine","Ignoring unexpected query state notification.");const s=i.rc.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const u=yield lE(i.localStore,NI(s[0])),d=qp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Nr.EMPTY_BYTE_STRING);yield Nl(i,u,d);break}case"rejected":yield Od(i.localStore,e,!0),Af(i,e,r);break;default:ut()}}),pc.apply(this,arguments)}function z0(n,e,t){return BE.apply(this,arguments)}function BE(){return BE=(0,_e.Z)(function*(n,e,t){const r=q0(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Le("SyncEngine","Adding an already active target "+i);continue}const s=yield aE(r.localStore,i),u=yield Pd(r.localStore,s);yield ME(r,xv(s),u.targetId,!1,u.resumeToken),yE(r.remoteStore,u)}for(const i of t)r.rc.has(i)&&(yield Od(r.localStore,i,!1).then(()=>{wf(r.remoteStore,i),Af(r,i)}).catch(Sl))}}),BE.apply(this,arguments)}function q0(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=F0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V0.bind(null,e),e.sc.zo=sx.bind(null,e.eventManager),e.sc.wc=R0.bind(null,e.eventManager),e}function Nv(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SC.bind(null,e),e}class W0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.It=Ef(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return rE(this.persistence,new s0,e.initialUser,this.It)}yc(e){return new ao(ug.Bs,this.It)}gc(e){return new d0}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Pv extends W0{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield Nv(r.Ac.syncEngine),yield Fd(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return rE(this.persistence,new s0,e.initialUser,this.It)}Tc(e,t){return new nC(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new SI(t,this.persistence);return new DI(e.asyncQueue,r)}yc(e){const t=nE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ns.withCacheSize(this.cacheSizeBytes):ns.DEFAULT;return new tE(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,mE(),pg(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new d0}}class RC extends Pv{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof gE&&(r.sharedClientState.syncEngine={Fr:VE.bind(null,i),$r:G0.bind(null,i),Br:z0.bind(null,i),vi:MC.bind(null,i),Mr:AC.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var s=(0,_e.Z)(function*(u){yield function j0(n,e){return Sg.apply(this,arguments)}(r.Ac.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return s.apply(this,arguments)}}())})()}gc(e){const t=mE();if(!gE.C(t))throw new Pe(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=nE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new gE(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ov{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>L0(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=B0.bind(null,r.syncEngine),yield Vd(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new mC}createDatastore(e){const t=Ef(e.databaseInfo.databaseId),r=new f0(e.databaseInfo);return new m0(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=d=>L0(this.syncEngine,d,0),u=h0.C()?new h0:new lC,new dC(t,r,i,s,u);var t,r,i,s,u}createSyncEngine(e,t){return function(r,i,s,u,d,p,y){const b=new _C(r,i,s,u,d,p);return y&&(b.dc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=Ye(t);Le("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield vg(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Tg(n,e,t){if(!t)throw new Pe(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function jE(n,e,t,r){if(!0===e&&!0===r)throw new Pe(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $E(n){if(!Ze.isDocumentKey(n))throw new Pe(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function GE(n){if(Ze.isDocumentKey(n))throw new Pe(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ig(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ut()}function en(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ig(n);throw new Pe(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Z0(n,e){if(e<=0)throw new Pe(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const K0=new Map;class Y0{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,jE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mf{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Y0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Pe(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Y0(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Wb;switch(t.type){case"gapi":return new yI(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Pe(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=K0.get(e);t&&(Le("ComponentProvider","Removing Datastore"),K0.delete(e),t.terminate())}(this),Promise.resolve()}}class Fn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Aa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fn(this.firestore,e,this._key)}}class Ci{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ci(this.firestore,e,this._query)}}class Aa extends Ci{constructor(e,t,r){super(e,t,af(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fn(this.firestore,null,new Ze(e))}withConverter(e){return new Aa(this.firestore,e,this._path)}}function NC(n,e,...t){if(n=(0,qt.m9)(n),Tg("collection","path",e),n instanceof Mf){const r=sn.fromString(e,...t);return GE(r),new Aa(n,null,r)}{if(!(n instanceof Fn||n instanceof Aa))throw new Pe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return GE(r),new Aa(n.firestore,null,r)}}function kv(n,e,...t){if(n=(0,qt.m9)(n),1===arguments.length&&(e=u_.R()),Tg("doc","path",e),n instanceof Mf){const r=sn.fromString(e,...t);return $E(r),new Fn(n,null,new Ze(r))}{if(!(n instanceof Fn||n instanceof Aa))throw new Pe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return $E(r),new Fn(n.firestore,n instanceof Aa?n.converter:null,new Ze(r))}}function Q0(n,e){return n=(0,qt.m9)(n),e=(0,qt.m9)(e),(n instanceof Fn||n instanceof Aa)&&(e instanceof Fn||e instanceof Aa)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function zE(n,e){return n=(0,qt.m9)(n),e=(0,qt.m9)(e),n instanceof Ci&&e instanceof Ci&&n.firestore===e.firestore&&Ed(n._query,e._query)&&n.converter===e.converter}function qE(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Fv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):On("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class PC{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Vr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const s=yield e.Cc(i);return new vC(JSON.parse(s),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,_e.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class FC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,_e.Z)(function*(s,u){const d=Ye(s),p=ev(d.It)+"/documents",y={documents:u.map(P=>Td(d.It,P))},b=yield d._o("BatchGetDocuments",p,y,u.length),I=new Map;b.forEach(P=>{const k=function xD(n,e){return"found"in e?function(t,r){Rt(!!r.found);const i=Rs(t,r.found.name),s=Qr(r.found.updateTime),u=new Si({mapValue:{fields:r.found.fields}});return kn.newFoundDocument(i,s,u)}(n,e):"missing"in e?function(t,r){Rt(!!r.missing),Rt(!!r.readTime);const i=Rs(t,r.missing),s=Qr(r.readTime);return kn.newNoDocument(i,s)}(n,e):ut()}(d.It,P);I.set(k.key.toString(),k)});const x=[];return u.forEach(P=>{const k=I.get(P.toString());Rt(!!k),x.push(k)}),x}),function(s,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new uf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Ze.fromPath(i);e.mutations.push(new bD(s,e.precondition(s)))}),yield(r=(0,_e.Z)(function*(i,s){const u=Ye(i),d=ev(u.It)+"/documents",p={writes:s.map(y=>xs(u.It,y))};yield u.ao("Commit",d,p)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ut();t=Pt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Pt.min())?Kn.exists(!1):Kn.updateTime(t):Kn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Pt.min()))throw new Pe(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kn.updateTime(t)}return Kn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class LC{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.kc=r.maxAttempts,this.No=new _v(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,_e.Z)(function*(){const t=new FC(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Fc(s)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Vp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!R_(t)}return!1}}class VC{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Zr.UNAUTHENTICATED,this.clientId=u_.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,_e.Z)(function*(d){Le("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Le("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Bd(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Rf(n,e){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,_e.Z)(function*(s){r.isEqual(s)||(yield cg(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Lv.apply(this,arguments)}function WE(n,e){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Uv(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>bE(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>bE(e.remoteStore,s)),n.onlineComponents=e}),Vv.apply(this,arguments)}function Uv(n){return Bv.apply(this,arguments)}function Bv(){return Bv=(0,_e.Z)(function*(n){return n.offlineComponents||(Le("FirestoreClient","Using default OfflineComponentProvider"),yield Rf(n,new W0)),n.offlineComponents}),Bv.apply(this,arguments)}function Hv(n){return ZE.apply(this,arguments)}function ZE(){return ZE=(0,_e.Z)(function*(n){return n.onlineComponents||(Le("FirestoreClient","Using default OnlineComponentProvider"),yield WE(n,new Ov)),n.onlineComponents}),ZE.apply(this,arguments)}function UC(n){return Uv(n).then(e=>e.persistence)}function jv(n){return Uv(n).then(e=>e.localStore)}function KE(n){return Hv(n).then(e=>e.remoteStore)}function YE(n){return Hv(n).then(e=>e.syncEngine)}function xf(n){return $d.apply(this,arguments)}function $d(){return $d=(0,_e.Z)(function*(n){const e=yield Hv(n),t=e.eventManager;return t.onListen=EC.bind(null,e.syncEngine),t.onUnlisten=wC.bind(null,e.syncEngine),t}),$d.apply(this,arguments)}function J0(n,e,t={}){const r=new Vr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,s,u,d,p){const y=new Fv({next:I=>{s.enqueueAndForget(()=>A0(i,b));const x=I.docs.has(u);!x&&I.fromCache?p.reject(new Pe(de.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&I.fromCache&&d&&"server"===d.source?p.reject(new Pe(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(I)},error:I=>p.reject(I)}),b=new CE(af(u.path),y,{includeMetadataChanges:!0,ku:!0});return IE(i,b)}(yield xf(n),n.asyncQueue,e,t,r)})),r.promise}function Nf(n,e,t={}){const r=new Vr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,s,u,d,p){const y=new Fv({next:I=>{s.enqueueAndForget(()=>A0(i,b)),I.fromCache&&"server"===d.source?p.reject(new Pe(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(I)},error:I=>p.reject(I)}),b=new CE(u,y,{includeMetadataChanges:!0,ku:!0});return IE(i,b)}(yield xf(n),n.asyncQueue,e,t,r)})),r.promise}class $v{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new _v(this,"async_queue_retry"),this.Wc=()=>{const t=pg();t&&Le("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=pg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=pg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Vr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,_e.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!Kr(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,On("INTERNAL UNHANDLED ERROR: ",function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),u}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=SE.createAndSchedule(this,e,t,r,s=>this.Yc(s));return this.qc.push(i),i}zc(){this.Kc&&ut()}verifyOperationInProgress(){}Xc(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function Pf(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class GC{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ln extends Mf{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new $v,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||tS(this),this._firestoreClient.terminate()}}function vr(n){return n._firestoreClient||tS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function tS(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new m_(n._databaseId,s,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new VC(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Gv(n,e,t){const r=new Vr;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield Rf(n,t),yield WE(n,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(u=s).name?u.code===de.FAILED_PRECONDITION||u.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw s;bl("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var u})).then(()=>r.promise)}function rS(n){if(n._initialized||n._terminated)throw new Pe(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ho{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ho(Nr.fromBase64String(e))}catch(t){throw new Pe(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ho(Nr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class jo{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gd{constructor(e){this._methodName=e}}class Cg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vt(this._lat,e._lat)||Vt(this._long,e._long)}}const iS=/^__.*__$/;class QC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Vo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sd(e,this.data,t,this.fieldTransforms)}}class nw{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Vo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function rw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class zv{constructor(e,t,r,i,s,u){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new zv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Ag(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(rw(this.sa)&&iS.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class sS{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Ef(e)}da(e,t,r,i=!1){return new zv({sa:e,methodName:t,fa:r,path:Zn.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function zd(n){const e=n._freezeSettings(),t=Ef(n._databaseId);return new sS(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Xr(n,e,t,r,i,s={}){const u=n.da(s.merge||s.mergeFields?2:0,e,t,i);ow("Data must be an object, but it was:",u,r);const d=uS(r,u);let p,y;if(s.merge)p=new es(u.fieldMask),y=u.fieldTransforms;else if(s.mergeFields){const b=[];for(const I of s.mergeFields){const x=aw(e,I,t);if(!u.contains(x))throw new Pe(de.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);lw(b,x)||b.push(x)}p=new es(b),y=u.fieldTransforms.filter(I=>p.covers(I.field))}else p=null,y=u.fieldTransforms;return new QC(new Si(d),p,y)}class Ra extends Gd{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ra}}function oS(n,e,t){return new zv({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class iw extends Gd{_toFieldTransform(e){return new $p(e.path,new wd)}isEqual(e){return e instanceof iw}}class cx extends Gd{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=oS(this,e,!0),r=this._a.map(s=>Pl(s,t)),i=new Cl(r);return new $p(e.path,i)}isEqual(e){return this===e}}class dx extends Gd{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=oS(this,e,!0),r=this._a.map(s=>Pl(s,t)),i=new Al(r);return new $p(e.path,i)}isEqual(e){return this===e}}class aS extends Gd{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new As(e.It,FI(e.It,this.wa));return new $p(e.path,t)}isEqual(e){return this===e}}function qv(n,e,t,r){const i=n.da(1,e,t);ow("Data must be an object, but it was:",i,r);const s=[],u=Si.empty();pd(r,(p,y)=>{const b=Of(e,p,t);y=(0,qt.m9)(y);const I=i.ca(b);if(y instanceof Ra)s.push(b);else{const x=Pl(y,I);null!=x&&(s.push(b),u.set(b,x))}});const d=new es(s);return new nw(u,d,i.fieldTransforms)}function qd(n,e,t,r,i,s){const u=n.da(1,e,t),d=[aw(e,r,t)],p=[i];if(s.length%2!=0)throw new Pe(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)d.push(aw(e,s[x])),p.push(s[x+1]);const y=[],b=Si.empty();for(let x=d.length-1;x>=0;--x)if(!lw(y,d[x])){const P=d[x];let k=p[x];k=(0,qt.m9)(k);const H=u.ca(P);if(k instanceof Ra)y.push(P);else{const Y=Pl(k,H);null!=Y&&(y.push(P),b.set(P,Y))}}const I=new es(y);return new nw(b,I,u.fieldTransforms)}function lS(n,e,t,r=!1){return Pl(t,n.da(r?4:3,e))}function Pl(n,e){if(sw(n=(0,qt.m9)(n)))return ow("Unsupported field value:",e,n),uS(n,e);if(n instanceof Gd)return function(t,r){if(!rw(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const u of t){let d=Pl(u,r.aa(s));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,qt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return FI(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Rn.fromDate(t);return{timestampValue:Kp(r.It,i)}}if(t instanceof Rn){const i=new Rn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Kp(r.It,i)}}if(t instanceof Cg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ho)return{bytesValue:MD(r.It,t._byteString)};if(t instanceof Fn){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:F_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${Ig(t)}`)}(n,e)}function uS(n,e){const t={};return nD(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pd(n,(r,i)=>{const s=Pl(i,e.ra(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function sw(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Rn||n instanceof Cg||n instanceof Ho||n instanceof Fn||n instanceof Gd)}function ow(n,e,t){if(!sw(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Ig(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function aw(n,e,t){if((e=(0,qt.m9)(e))instanceof jo)return e._internalPath;if("string"==typeof e)return Of(n,e);throw Ag("Field path arguments must be of type string or ",n,!1,void 0,t)}const XC=new RegExp("[~\\*/\\[\\]]");function Of(n,e,t){if(e.search(XC)>=0)throw Ag(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new jo(...e.split("."))._internalPath}catch{throw Ag(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ag(n,e,t,r,i){const s=r&&!r.isEmpty(),u=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||u)&&(p+=" (found",s&&(p+=` in field ${r}`),u&&(p+=` in document ${i}`),p+=")"),new Pe(de.INVALID_ARGUMENT,d+n+p)}function lw(n,e){return n.some(t=>t.isEqual(e))}class gc{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Fn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new uw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class uw extends gc{data(){return super.data()}}function cw(n,e){return"string"==typeof e?Of(n,e):e instanceof jo?e._internalPath:e._delegate._internalPath}function dw(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mg{}function Ol(n,...e){for(const t of e)n=t._apply(n);return n}class kf extends Mg{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=zd(e.firestore),r=function(i,s,u,d,p,y,b){let I;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Pe(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){fS(b,y);const P=[];for(const k of b)P.push(gw(d,i,k));I={arrayValue:{values:P}}}else I=gw(d,i,b)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||fS(b,y),I=lS(u,"where",b,"in"===y||"not-in"===y);const x=jn.create(p,y,I);return function(P,k){if(k.dt()){const Y=D_(P);if(null!==Y&&!Y.isEqual(k.field))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Y.toString()}' and '${k.field.toString()}'`);const me=pD(P);null!==me&&pS(0,k.field,me)}const H=function(Y,me){for(const Ne of Y.filters)if(me.indexOf(Ne.op)>=0)return Ne.op;return null}(P,function(Y){switch(Y){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(k.op));if(null!==H)throw new Pe(de.INVALID_ARGUMENT,H===k.op?`Invalid query. You cannot use more than one '${k.op.toString()}' filter.`:`Invalid query. You cannot use '${k.op.toString()}' filters with '${H.toString()}' filters.`)}(i,x),x}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Ci(e.firestore,e.converter,function(i,s){const u=i.filters.concat([s]);return new Il(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class cS extends Mg{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Pe(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new Ku(i,s);return function(d,p){if(null===pD(d)){const y=D_(d);null!==y&&pS(0,y,p.field)}}(r,u),u}(e._query,this.ma,this.pa);return new Ci(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Il(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class eA extends Mg{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Ci(e.firestore,e.converter,Wm(e._query,this.Ia,this.Ta))}}class dS extends Mg{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=pw(e,this.type,this.Ea,this.Aa);return new Ci(e.firestore,e.converter,(i=t,new Il((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class fw extends Mg{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=pw(e,this.type,this.Ea,this.Aa);return new Ci(e.firestore,e.converter,(i=t,new Il((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function pw(n,e,t,r){if(t[0]=(0,qt.m9)(t[0]),t[0]instanceof gc)return function(i,s,u,d,p){if(!d)throw new Pe(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const b of _d(i))if(b.field.isKeyField())y.push(vd(s,d.key));else{const I=d.data.field(b.field);if(Lm(I))throw new Pe(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===I){const x=b.field.canonicalString();throw new Pe(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}y.push(I)}return new Sa(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=zd(n.firestore);return function(s,u,d,p,y,b){const I=s.explicitOrderBy;if(y.length>I.length)throw new Pe(de.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let P=0;P<y.length;P++){const k=y[P];if(I[P].field.isKeyField()){if("string"!=typeof k)throw new Pe(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof k}`);if(!gD(s)&&-1!==k.indexOf("/"))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${k}' contains a slash.`);const H=s.path.child(sn.fromString(k));if(!Ze.isDocumentKey(H))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${H}' is not because it contains an odd number of segments.`);const Y=new Ze(H);x.push(vd(u,Y))}else{const H=lS(d,p,k);x.push(H)}}return new Sa(x,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function gw(n,e,t){if("string"==typeof(t=(0,qt.m9)(t))){if(""===t)throw new Pe(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gD(e)&&-1!==t.indexOf("/"))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(sn.fromString(t));if(!Ze.isDocumentKey(r))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vd(n,new Ze(r))}if(t instanceof Fn)return vd(n,t._key);throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ig(t)}.`)}function fS(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function pS(n,e,t){if(!t.isEqual(e))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Wv{convertValue(e,t="none"){switch(qu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ut()}}convertObject(e,t){const r={};return pd(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Cg(Sr(e.latitude),Sr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=zu(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Lp(e));default:return null}}convertTimestamp(e){const t=$u(e);return new Rn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=sn.fromString(e);Rt(OD(r));const i=new Da(r.get(1),r.get(3)),s=new Ze(r.popFirst(5));return i.isEqual(t)||On(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Zv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class gS extends Wv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ho(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,t)}}class mc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xa extends gc{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ff(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(cw("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ff extends xa{data(e={}){return super.data(e)}}class vc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new mc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ff(this._firestore,this._userDataWriter,r.key,r,new mc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new Ff(r._firestore,r._userDataWriter,u.doc.key,u.doc,new mc(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const d=new Ff(r._firestore,r._userDataWriter,u.doc.key,u.doc,new mc(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,y=-1;return 0!==u.type&&(p=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),1!==u.type&&(s=s.add(u.doc),y=s.indexOf(u.doc.key)),{type:sA(u.type),doc:d,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function sA(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function oA(n,e){return n instanceof xa&&e instanceof xa?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof vc&&e instanceof vc&&n._firestore===e._firestore&&zE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Wd extends Wv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ho(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,t)}}function aA(n,e,t){n=en(n,Fn);const r=en(n.firestore,Ln),i=Zv(n.converter,e,t);return Zd(r,[Xr(zd(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Kn.none())])}function lA(n,e,t,...r){n=en(n,Fn);const i=en(n.firestore,Ln),s=zd(i);let u;return u="string"==typeof(e=(0,qt.m9)(e))||e instanceof jo?qd(s,"updateDoc",n._key,e,t,r):qv(s,"updateDoc",n._key,e),Zd(i,[u.toMutation(n._key,Kn.exists(!0))])}function mw(n,...e){var t,r,i;n=(0,qt.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||Pf(e[u])||(s=e[u],u++);const d={includeMetadataChanges:s.includeMetadataChanges};if(Pf(e[u])){const I=e[u];e[u]=null===(t=I.next)||void 0===t?void 0:t.bind(I),e[u+1]=null===(r=I.error)||void 0===r?void 0:r.bind(I),e[u+2]=null===(i=I.complete)||void 0===i?void 0:i.bind(I)}let p,y,b;if(n instanceof Fn)y=en(n.firestore,Ln),b=af(n._key.path),p={next:I=>{e[u]&&e[u](Qv(y,n,I))},error:e[u+1],complete:e[u+2]};else{const I=en(n,Ci);y=en(I.firestore,Ln),b=I._query;const x=new Wd(y);p={next:P=>{e[u]&&e[u](new vc(y,x,I,P))},error:e[u+1],complete:e[u+2]},dw(n._query)}return function(I,x,P,k){const H=new Fv(k),Y=new CE(x,H,P);return I.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return IE(yield xf(I),Y)})),()=>{H.bc(),I.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return A0(yield xf(I),Y)}))}}(vr(y),b,d,p)}function Zd(n,e){return function(t,r){const i=new Vr;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function bC(n,e,t){return Cv.apply(this,arguments)}(yield YE(t),r,i)})),i.promise}(vr(n),e)}function Qv(n,e,t){const r=t.docs.get(e._key),i=new Wd(n);return new xa(n,i,e._key,r,new mc(t.hasPendingWrites,t.fromCache),e.converter)}const yS={maxAttempts:5};class _S{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=zd(e)}set(e,t,r){this._verifyNotCommitted();const i=kl(e,this._firestore),s=Zv(i.converter,t,r),u=Xr(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,Kn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=kl(e,this._firestore);let u;return u="string"==typeof(t=(0,qt.m9)(t))||t instanceof jo?qd(this._dataReader,"WriteBatch.update",s._key,t,r,i):qv(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(u.toMutation(s._key,Kn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=kl(e,this._firestore);return this._mutations=this._mutations.concat(new uf(t._key,Kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kl(n,e){if((n=(0,qt.m9)(n)).firestore!==e)throw new Pe(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class _x extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=zd(e)}get(e){const t=kl(e,this._firestore),r=new gS(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ut();const s=i[0];if(s.isFoundDocument())return new gc(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new gc(this._firestore,r,t._key,null,t.converter);throw ut()})}set(e,t,r){const i=kl(e,this._firestore),s=Zv(i.converter,t,r),u=Xr(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const s=kl(e,this._firestore);let u;return u="string"==typeof(t=(0,qt.m9)(t))||t instanceof jo?qd(this._dataReader,"Transaction.update",s._key,t,r,i):qv(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,u),this}delete(e){const t=kl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=kl(e,this._firestore),r=new Wd(this._firestore);return super.get(e).then(i=>new xa(this._firestore,r,t._key,i._document,new mc(!1,!1),t.converter))}}function wS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function bS(){if(typeof Uint8Array>"u")throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function vw(){if(!function TI(){return typeof atob<"u"}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Jh=to.SDK_VERSION,(0,to._registerComponent)(new Yc.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),u=new Ln(new Zb(t.getProvider("auth-internal")),new Yb(t.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Pe(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Da(d.options.projectId,p)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,to.registerVersion)(Xh,"3.7.1",n),(0,to.registerVersion)(Xh,"3.7.1","esm2017")}();class Lf{constructor(e){this._delegate=e}static fromBase64String(e){return vw(),new Lf(Ho.fromBase64String(e))}static fromUint8Array(e){return bS(),new Lf(Ho.fromUint8Array(e))}toBase64(){return vw(),this._delegate.toBase64()}toUint8Array(){return bS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function DS(n){return function $o(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class gA{enableIndexedDbPersistence(e,t){return function WC(n,e){rS(n=en(n,Ln));const t=vr(n),r=n._freezeSettings(),i=new Ov;return Gv(t,i,new Pv(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function lx(n){rS(n=en(n,Ln));const e=vr(n),t=n._freezeSettings(),r=new Ov;return Gv(e,r,new RC(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function JE(n){if(n._initialized&&!n._terminated)throw new Pe(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Vr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!io.C())return Promise.resolve();const i=r+"main";yield io.delete(i)}),function(r){return t.apply(this,arguments)})(nE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Jv{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Da||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&bl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function xC(n,e,t,r={}){var i;const s=(n=en(n,Mf))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&bl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,d;if("string"==typeof r.mockUserToken)u=r.mockUserToken,d=Zr.MOCK_USER;else{u=(0,qt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Pe(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Zr(p)}n._authCredentials=new a_(new qb(u,d))}}(this._delegate,e,t,r)}enableNetwork(){return function ew(n){return function BC(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield UC(n),t=yield KE(n);return e.setNetworkEnabled(!0),function(r){const i=Ye(r);return i.wu.delete(0),mg(i)}(t)}))}(vr(n=en(n,Ln)))}(this._delegate)}disableNetwork(){return function tw(n){return function QE(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield UC(n),t=yield KE(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(i){const s=Ye(i);s.wu.add(0),yield vg(s),s.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(vr(n=en(n,Ln)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,jE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function nS(n){return function(e){const t=new Vr;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function TC(n,e){return Mv.apply(this,arguments)}(yield YE(e),t)})),t.promise}(vr(n=en(n,Ln)))}(this._delegate)}onSnapshotsInSync(e){return function Yv(n,e){return function HC(n,e){const t=new Fv(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield xf(n),i=t,Ye(r).bu.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield xf(n),i=t,void Ye(r).bu.delete(i);var r,i}))}}(vr(n=en(n,Ln)),Pf(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Uf(this,NC(this._delegate,e))}catch(t){throw di(t,"collection()","Firestore.collection()")}}doc(e){try{return new uo(this,kv(this._delegate,e))}catch(t){throw di(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ai(this,function ox(n,e){if(n=en(n,Mf),Tg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ci(n,null,(t=e,new Il(sn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw di(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function uA(n,e,t){n=en(n,Ln);const r=Object.assign(Object.assign({},yS),t);return function(i){if(i.maxAttempts<1)throw new Pe(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,u){const d=new Vr;return i.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const p=yield function X0(n){return Hv(n).then(e=>e.datastore)}(i);new LC(i.asyncQueue,p,u,s,d).run()})),d.promise}(vr(n),i=>e(new _x(n,i)),r)}(this._delegate,t=>e(new SS(this,t)))}batch(){return vr(this._delegate),new ty(new _S(this._delegate,e=>Zd(this._delegate,e)))}loadBundle(e){return function ZC(n,e){const t=vr(n=en(n,Ln)),r=new GC;return function jC(n,e,t,r){const i=function(s,u){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return qE(p,y);if(p instanceof ArrayBuffer)return qE(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new PC(p,u);var p}(t,Ef(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function HE(n,e,t){const r=Ye(n);var i;(i=(0,_e.Z)(function*(s,u,d){try{const p=yield u.getMetadata();if(yield function(x,P){const k=Ye(x),H=Qr(P.createTime);return k.persistence.runTransaction("hasNewerBundle","readonly",Y=>k.Ns.getBundleMetadata(Y,P.id)).then(Y=>!!Y&&Y.createTime.compareTo(H)>=0)}(s.localStore,p))return yield u.close(),d._completeWith({taskState:"Success",documentsLoaded:(x=p).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);d._updateProgress(x0(p));const y=new Eg(p,s.localStore,u.It);let b=yield u.mc();for(;b;){const x=yield y.Fu(b);x&&d._updateProgress(x),b=yield u.mc()}const I=yield y.complete();return yield Nl(s,I.Lu,void 0),yield function(x,P){const k=Ye(x);return k.persistence.runTransaction("Save bundle","readwrite",H=>k.Ns.saveBundleMetadata(H,P))}(s.localStore,p),d._completeWith(I.progress),Promise.resolve(I.Bu)}catch(p){return bl("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var x}),function(s,u,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield YE(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function KC(n,e){return function $C(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const i=Ye(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ns.getNamedQuery(s,r))}(yield jv(n),e)}))}(vr(n=en(n,Ln)),e).then(t=>t?new Ci(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ai(this,t):null)}}class ey extends Wv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lf(new Ho(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return uo.forKey(t,this.firestore,null)}}class SS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ey(e)}get(e){const t=Fl(e);return this._delegate.get(t).then(r=>new Rg(this._firestore,new xa(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Fl(e);return r?(wS("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Fl(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Fl(e);return this._delegate.delete(t),this}}class ty{constructor(e){this._delegate=e}set(e,t,r){const i=Fl(e);return r?(wS("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Fl(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Fl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Kd{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Ff(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Vf(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Kd.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Kd(e,new ey(e),t),i.set(t,s)),s}}Kd.INSTANCES=new WeakMap;class uo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ey(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new uo(t,new Fn(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new uo(t,new Fn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Uf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Uf(this.firestore,NC(this._delegate,e))}catch(t){throw di(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,qt.m9)(e))instanceof Fn&&Q0(this._delegate,e)}set(e,t){t=wS("DocumentReference.set",t);try{return t?aA(this._delegate,e,t):aA(this._delegate,e)}catch(r){throw di(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?lA(this._delegate,e):lA(this._delegate,e,t,...r)}catch(i){throw di(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Kv(n){return Zd(en(n.firestore,Ln),[new uf(n._key,Kn.none())])}(this._delegate)}onSnapshot(...e){const t=yw(e),r=_w(e,i=>new Rg(this.firestore,new xa(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return mw(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function fx(n){n=en(n,Fn);const e=en(n.firestore,Ln),t=vr(e),r=new Wd(e);return function Ma(n,e){const t=new Vr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,s,u){try{const d=yield function(p,y){const b=Ye(p);return b.persistence.runTransaction("read document","readonly",I=>b.localDocuments.getDocument(I,y))}(i,s);d.isFoundDocument()?u.resolve(d):d.isNoDocument()?u.resolve(null):u.reject(new Pe(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=Bd(d,`Failed to get document '${s} from cache`);u.reject(p)}}),function(i,s,u){return r.apply(this,arguments)})(yield jv(n),e,t);var r})),t.promise}(t,n._key).then(i=>new xa(e,r,n._key,i,new mc(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function px(n){n=en(n,Fn);const e=en(n.firestore,Ln);return J0(vr(e),n._key,{source:"server"}).then(t=>Qv(e,n,t))}(this._delegate):function mS(n){n=en(n,Fn);const e=en(n.firestore,Ln);return J0(vr(e),n._key).then(t=>Qv(e,n,t))}(this._delegate),t.then(r=>new Rg(this.firestore,new xa(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new uo(this.firestore,this._delegate.withConverter(e?Kd.getInstance(this.firestore,e):null))}}function di(n,e,t){return n.message=n.message.replace(e,t),n}function yw(n){for(const e of n)if("object"==typeof e&&!DS(e))return e;return{}}function _w(n,e){var t,r;let i;return i=DS(n[0])?n[0]:DS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Rg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new uo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return oA(this._delegate,e._delegate)}}class Vf extends Rg{data(e){const t=this._delegate.data(e);return function vI(n,e){n||ut()}(void 0!==t),t}}class Ai{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ey(e)}where(e,t,r){try{return new Ai(this.firestore,Ol(this._delegate,function JC(n,e,t){const r=e,i=cw("where",n);return new kf(i,r,t)}(e,t,r)))}catch(i){throw di(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ai(this.firestore,Ol(this._delegate,function hw(n,e="asc"){const t=e,r=cw("orderBy",n);return new cS(r,t)}(e,t)))}catch(r){throw di(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ai(this.firestore,Ol(this._delegate,function tA(n){return Z0("limit",n),new eA("limit",n,"F")}(e)))}catch(t){throw di(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ai(this.firestore,Ol(this._delegate,function hx(n){return Z0("limitToLast",n),new eA("limitToLast",n,"L")}(e)))}catch(t){throw di(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ai(this.firestore,Ol(this._delegate,function nA(...n){return new dS("startAt",n,!0)}(...e)))}catch(t){throw di(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ai(this.firestore,Ol(this._delegate,function rA(...n){return new dS("startAfter",n,!1)}(...e)))}catch(t){throw di(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ai(this.firestore,Ol(this._delegate,function hS(...n){return new fw("endBefore",n,!1)}(...e)))}catch(t){throw di(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ai(this.firestore,Ol(this._delegate,function iA(...n){return new fw("endAt",n,!0)}(...e)))}catch(t){throw di(t,"endAt()","Query.endAt()")}}isEqual(e){return zE(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function mx(n){n=en(n,Ci);const e=en(n.firestore,Ln),t=vr(e),r=new Wd(e);return function XE(n,e){const t=new Vr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,s,u){try{const d=yield hg(i,s,!0),p=new O0(s,d.Hi),y=p.Wu(d.documents),b=p.applyChanges(y,!1);u.resolve(b.snapshot)}catch(d){const p=Bd(d,`Failed to execute query '${s} against cache`);u.reject(p)}}),function(i,s,u){return r.apply(this,arguments)})(yield jv(n),e,t);var r})),t.promise}(t,n._query).then(i=>new vc(e,r,n,i))}(this._delegate):"server"===e?.source?function vx(n){n=en(n,Ci);const e=en(n.firestore,Ln),t=vr(e),r=new Wd(e);return Nf(t,n._query,{source:"server"}).then(i=>new vc(e,r,n,i))}(this._delegate):function gx(n){n=en(n,Ci);const e=en(n.firestore,Ln),t=vr(e),r=new Wd(e);return dw(n._query),Nf(t,n._query).then(i=>new vc(e,r,n,i))}(this._delegate),t.then(r=>new ny(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=yw(e),r=_w(e,i=>new ny(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return mw(this._delegate,t,r)}withConverter(e){return new Ai(this.firestore,this._delegate.withConverter(e?Kd.getInstance(this.firestore,e):null))}}class mA{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Vf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ny{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ai(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Vf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new mA(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Vf(this._firestore,r))})}isEqual(e){return oA(this._delegate,e._delegate)}}class Uf extends Ai{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new uo(this.firestore,e):null}doc(e){try{return new uo(this.firestore,void 0===e?kv(this._delegate):kv(this._delegate,e))}catch(t){throw di(t,"doc()","CollectionReference.doc()")}}add(e){return function yx(n,e){const t=en(n.firestore,Ln),r=kv(n),i=Zv(n.converter,e);return Zd(t,[Xr(zd(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Kn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new uo(this.firestore,t))}isEqual(e){return Q0(this._delegate,e._delegate)}withConverter(e){return new Uf(this.firestore,this._delegate.withConverter(e?Kd.getInstance(this.firestore,e):null))}}function Fl(n){return en(n,Fn)}class Na{constructor(...e){this._delegate=new jo(...e)}static documentId(){return new Na(Zn.keyField().canonicalString())}isEqual(e){return(e=(0,qt.m9)(e))instanceof jo&&this._delegate._internalPath.isEqual(e._internalPath)}}class yc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function dA(){return new iw("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new yc(e)}static delete(){const e=function cA(){return new Ra("deleteField")}();return e._methodName="FieldValue.delete",new yc(e)}static arrayUnion(...e){const t=function Xv(...n){return new cx("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new yc(t)}static arrayRemove(...e){const t=function hA(...n){return new dx("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new yc(t)}static increment(e){const t=function Ex(n){return new aS("increment",n)}(e);return t._methodName="FieldValue.increment",new yc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ew={Firestore:Jv,GeoPoint:Cg,Timestamp:Rn,Blob:Lf,Transaction:SS,WriteBatch:ty,DocumentReference:uo,DocumentSnapshot:Rg,Query:Ai,QueryDocumentSnapshot:Vf,QuerySnapshot:ny,CollectionReference:Uf,FieldPath:Na,FieldValue:yc,setLogLevel:function lo(n){!function zb(n){ba.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function vA(n){(function Ll(n,e){n.INTERNAL.registerComponent(new Yc.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Ew)))})(n,(e,t)=>new Jv(e,t,new gA)),n.registerVersion("@firebase/firestore-compat","0.2.1")}(ll.Z);var ji=V(7579),yA=V(6451),ry=V(5363),iy=V(8421);function Jr(n,e){return(0,zr.e)((t,r)=>{let i=null,s=0,u=!1;const d=()=>u&&!i&&r.complete();t.subscribe((0,nr.x)(r,p=>{i?.unsubscribe();let y=0;const b=s++;(0,iy.Xf)(n(p,b)).subscribe(i=(0,nr.x)(r,I=>r.next(e?e(p,I,b,y++):I),()=>{i=null,d()}))},()=>{u=!0,d()}))})}var TS=V(6063);class wx extends ji.x{constructor(e=1/0,t=1/0,r=TS.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:u}=this;t||(r.push(e),!i&&r.push(s.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let u=0;u<s.length&&!e.closed;u+=r?1:2)e.next(s[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const u=t.now();let d=0;for(let p=1;p<r.length&&r[p]<=u;p+=2)d=p;d&&r.splice(0,d+1)}}}var IS=V(3099);function CS(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,IS.B)({connector:()=>new wx(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const ww=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Vl=V(515);function Bf(n){return n<=0?()=>Vl.E:(0,zr.e)((e,t)=>{let r=0;e.subscribe((0,nr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function xg(n){return(0,zr.e)((e,t)=>{let r=!1;e.subscribe((0,nr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function bw(n=MS){return(0,zr.e)((e,t)=>{let r=!1;e.subscribe((0,nr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function MS(){return new ww}function Pa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?li((i,s)=>n(i,s,r)):_i.y,Bf(1),t?xg(e):bw(()=>new ww))}var Hf=V(576);function Ng(n,e){return(0,Hf.m)(e)?Jr(()=>n,e):Jr(()=>n)}var sy=V(9468);V(5867);const PS=new Map,DA={activated:!1,tokenObservers:[]},OS={initialized:!1,enabled:!1};function Yn(n){return PS.get(n)||DA}function Os(n,e){PS.set(n,e)}function jf(){return OS}class Ix{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new qt.BH,yield function Cx(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new qt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Mi=new qt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function kS(n){if(!Yn(n).activated)throw Mi.create("use-before-activation",{appName:n.name})}function ly(n,e){return uy.apply(this,arguments)}function uy(){return uy=(0,_e.Z)(function*({url:n,body:e},t){var r,i;const s={"Content-Type":"application/json"},u=t.getImmediate({optional:!0});if(u){const P=yield u.getHeartbeatsHeader();P&&(s["X-Firebase-Client"]=P)}const d={method:"POST",body:JSON.stringify(e),headers:s};let p,y;try{p=yield fetch(n,d)}catch(P){throw Mi.create("fetch-network-error",{originalErrorMessage:null===(r=P)||void 0===r?void 0:r.message})}if(200!==p.status)throw Mi.create("fetch-status-error",{httpStatus:p.status});try{y=yield p.json()}catch(P){throw Mi.create("fetch-parse-error",{originalErrorMessage:null===(i=P)||void 0===i?void 0:i.message})}const b=y.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw Mi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const I=1e3*Number(b[1]),x=Date.now();return{token:y.token,expireTimeMillis:x+I,issuedAtTimeMillis:x}}),uy.apply(this,arguments)}function IA(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const cy="firebase-app-check-store";let $f=null;function VS(){return $f||($f=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var s;e(Mi.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(cy,{keyPath:"compositeKey"})}}catch(r){e(Mi.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),$f)}function Mw(){return Mw=(0,_e.Z)(function*(n,e){const r=(yield VS()).transaction(cy,"readwrite"),s=r.objectStore(cy).put({compositeKey:n,value:e});return new Promise((u,d)=>{s.onsuccess=p=>{u()},r.onerror=p=>{var y;d(Mi.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})}),Mw.apply(this,arguments)}const dy=new Ei.Yd("@firebase/app-check");function HS(n,e){return(0,qt.hl)()?function Mx(n,e){return function US(n,e){return Mw.apply(this,arguments)}(function RA(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{dy.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function xA(){return jf().enabled}function NA(){return $S.apply(this,arguments)}function $S(){return $S=(0,_e.Z)(function*(){const n=jf();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),$S.apply(this,arguments)}const a={error:"UNKNOWN_ERROR"};function l(n){return qt.US.encodeString(JSON.stringify(n),!1)}function c(n){return f.apply(this,arguments)}function f(){return f=(0,_e.Z)(function*(n,e=!1){const t=n.app;kS(t);const r=Yn(t);let s,i=r.token;if(i&&!N(i)&&(Os(t,Object.assign(Object.assign({},r),{token:void 0})),i=void 0),!i){const p=yield r.cachedTokenPromise;p&&(N(p)?i=p:yield HS(t,void 0))}if(!e&&i&&N(i))return{token:i.token};let d,u=!1;if(xA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ly(IA(t,yield NA()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const p=yield r.exchangeTokenPromise;return yield HS(t,p),Os(t,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield r.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?dy.warn(p.message):dy.error(p),s=p}return i?s?d=N(i)?{token:i.token,internalError:s}:L(s):(d={token:i.token},Os(t,Object.assign(Object.assign({},r),{token:i})),yield HS(t,i)):d=L(s),u&&A(t,d),d}),f.apply(this,arguments)}function E(n,e){const t=Yn(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Os(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function D(n){const{app:e}=n,t=Yn(e);let r=t.tokenRefresher;r||(r=function S(n){const{app:e}=n;return new Ix((0,_e.Z)(function*(){let r;if(r=Yn(e).token?yield c(n,!0):yield c(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Yn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Os(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function A(n,e){const t=Yn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function N(n){return n.expireTimeMillis-Date.now()>0}function L(n){return{token:l(a),error:n}}class q{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Yn(this.app);for(const t of e)E(this.app,t.next);return Promise.resolve()}}const Px="app-check-internal";!function bF(){(0,to._registerComponent)(new Yc.wA("app-check",n=>function ne(n,e){return new q(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Px).initialize()})),(0,to._registerComponent)(new Yc.wA(Px,n=>function we(n){return{getToken:e=>c(n,e),addTokenListener:e=>function m(n,e,t,r){const{app:i}=n,s=Yn(i),u={next:t,error:r,type:e};if(Os(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,u]})),s.token&&N(s.token)){const d=s.token;Promise.resolve().then(()=>{t({token:d.token}),D(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>D(n))}(n,"INTERNAL",e),removeTokenListener:e=>E(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,to.registerVersion)("@firebase/app-check","0.5.15")}();class kA{constructor(){return(0,dr.vb)("app-check")}}typeof window<"u"&&window;var CF=V(127);const kx=new h.OlP("angularfire2.auth.use-emulator"),Fx=new h.OlP("angularfire2.auth.settings"),Lx=new h.OlP("angularfire2.auth.tenant-id"),Vx=new h.OlP("angularfire2.auth.langugage-code"),Ux=new h.OlP("angularfire2.auth.use-device-language"),Bx=new h.OlP("angularfire.auth.persistence"),Hx=(n,e,t,r,i,s,u,d)=>(0,oi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),u)for(const[y,b]of Object.entries(u))p.settings[y]=b;return d&&p.setPersistence(d),p},[t,r,i,s,u,d]);let jx=(()=>{class n{constructor(t,r,i,s,u,d,p,y,b,I,x,P){const k=new ji.x,H=tt(void 0).pipe((0,ry.Q)(u.outsideAngular),Jr(()=>s.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,9545)))),(0,At.U)(()=>(0,oi.on)(t,s,r)),(0,At.U)(Y=>Hx(Y,s,d,y,b,I,p,x)),CS({bufferSize:1,refCount:!1}));if(Rr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=tt(null);else{H.pipe(Pa()).subscribe();const me=H.pipe(Jr(ke=>ke.getRedirectResult().then(et=>et,()=>null)),dr.iC,CS({bufferSize:1,refCount:!1})),Ne=H.pipe(Jr(ke=>new _s.y(et=>({unsubscribe:s.runOutsideAngular(()=>ke.onAuthStateChanged(Je=>et.next(Je),Je=>et.error(Je),()=>et.complete()))})))),Oe=H.pipe(Jr(ke=>new _s.y(et=>({unsubscribe:s.runOutsideAngular(()=>ke.onIdTokenChanged(Je=>et.next(Je),Je=>et.error(Je),()=>et.complete()))}))));this.authState=me.pipe(Ng(Ne),(0,sy.R)(u.outsideAngular),(0,ry.Q)(u.insideAngular)),this.user=me.pipe(Ng(Oe),(0,sy.R)(u.outsideAngular),(0,ry.Q)(u.insideAngular)),this.idToken=this.user.pipe(Jr(ke=>ke?(0,pn.D)(ke.getIdToken()):tt(null))),this.idTokenResult=this.user.pipe(Jr(ke=>ke?(0,pn.D)(ke.getIdTokenResult()):tt(null))),this.credential=(0,yA.T)(me,k,this.authState.pipe(li(ke=>!ke))).pipe((0,At.U)(ke=>ke?.user?ke:null),(0,sy.R)(u.outsideAngular),(0,ry.Q)(u.insideAngular))}return(0,oi.pX)(this,H,s,{spy:{apply:(Y,me,Ne)=>{(Y.startsWith("signIn")||Y.startsWith("createUser"))&&Ne.then(Oe=>k.next(Oe))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oi.Dh),h.LFG(oi.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(dr.HU),h.LFG(kx,8),h.LFG(Fx,8),h.LFG(Lx,8),h.LFG(Vx,8),h.LFG(Ux,8),h.LFG(Bx,8),h.LFG(kA,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function $x(n,e){return function MF(n,e=la.z){return new _s.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function LA(n,e){return $x(n,e).pipe((0,At.U)(t=>({payload:t,type:"query"})))}function GS(n,e){return LA(n,e).pipe(ca(void 0),eo(),(0,At.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,d)=>{const p=i.find(b=>b.doc.ref.isEqual(u.ref)),y=t?.payload.docs.find(b=>b.ref.isEqual(u.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(u.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:u}})}),s}))}function Gx(n,e,t){return GS(n,t).pipe(Es((r,i)=>function xF(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function NF(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return VA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return VA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return VA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),function Su(n,e=_i.y){return n=n??al,(0,zr.e)((t,r)=>{let i,s=!0;t.subscribe((0,nr.x)(r,u=>{const d=e(u);(s||!n(i,d))&&(s=!1,i=d,r.next(u))}))})}(),(0,At.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function VA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function zx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class qx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=GS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,At.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ca(void 0),eo(),li(([r,i])=>i.length>0||!r),(0,At.U)(([r,i])=>i),dr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Es((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=zx(e);return Gx(this.query,t,this.afs.schedulers.outsideAngular).pipe(dr.iC)}valueChanges(e={}){return LA(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),dr.iC)}get(e){return(0,pn.D)(this.query.get(e)).pipe(dr.iC)}add(e){return this.ref.add(e)}doc(e){return new Wx(this.ref.doc(e),this.afs)}}class Wx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=Yx(r,t);return new qx(i,s,this.afs)}snapshotChanges(){return function RF(n,e){return $x(n,e).pipe(ca(void 0),eo(),(0,At.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(dr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,At.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,pn.D)(this.ref.get(e)).pipe(dr.iC)}}class PF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?GS(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),li(t=>t.length>0),dr.iC):GS(this.query,this.afs.schedulers.outsideAngular).pipe(dr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Es((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=zx(e);return Gx(this.query,t,this.afs.schedulers.outsideAngular).pipe(dr.iC)}valueChanges(e={}){return LA(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),dr.iC)}get(e){return(0,pn.D)(this.query.get(e)).pipe(dr.iC)}}const Zx=new h.OlP("angularfire2.enableFirestorePersistence"),Kx=new h.OlP("angularfire2.firestore.persistenceSettings"),OF=new h.OlP("angularfire2.firestore.settings"),kF=new h.OlP("angularfire2.firestore.use-emulator");function Yx(n,e=(t=>t)){return{query:e(n),ref:n}}let UA=(()=>{class n{constructor(t,r,i,s,u,d,p,y,b,I,x,P,k,H,Y,me,Ne){this.schedulers=p;const Oe=(0,oi.on)(t,d,r),ke=b;I&&Hx(Oe,d,x,k,H,Y,P,me),[this.firestore,this.persistenceEnabled$]=(0,oi.cc)(`${Oe.name}.firestore`,"AngularFirestore",Oe.name,()=>{const et=d.runOutsideAngular(()=>Oe.firestore());if(s&&et.settings(s),ke&&et.useEmulator(...ke),i&&!Rr(u)){const Je=()=>{try{return(0,pn.D)(et.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Et){return typeof console<"u"&&console.warn(Et),tt(!1)}};return[et,d.runOutsideAngular(Je)]}return[et,tt(!1)]},[s,ke,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:u}=Yx(i,r),d=this.schedulers.ngZone.run(()=>s);return new qx(d,u,this)}collectionGroup(t,r){const i=r||(u=>u),s=this.firestore.collectionGroup(t);return new PF(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Wx(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oi.Dh),h.LFG(oi.xv,8),h.LFG(Zx,8),h.LFG(OF,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(dr.HU),h.LFG(Kx,8),h.LFG(kF,8),h.LFG(jx,8),h.LFG(kx,8),h.LFG(Fx,8),h.LFG(Lx,8),h.LFG(Vx,8),h.LFG(Ux,8),h.LFG(Bx,8),h.LFG(kA,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),FF=(()=>{class n{constructor(){CF.Z.registerVersion("angularfire",dr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Zx,useValue:!0},{provide:Kx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[UA]}),n})();class Ul extends ji.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:LF}=Array,{getPrototypeOf:VF,prototype:UF,keys:BF}=Object;function Qx(n){if(1===n.length){const e=n[0];if(LF(e))return{args:e,keys:null};if(function HF(n){return n&&"object"==typeof n&&VF(n)===UF}(e)){const t=BF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:jF}=Array;function Xx(n){return(0,At.U)(e=>function $F(n,e){return jF(e)?n(...e):n(e)}(n,e))}function Jx(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var GF=V(9672);function eN(...n){const e=(0,cr.yG)(n),t=(0,cr.jO)(n),{args:r,keys:i}=Qx(n);if(0===r.length)return(0,pn.D)([],e);const s=new _s.y(function zF(n,e,t=_i.y){return r=>{tN(e,()=>{const{length:i}=n,s=new Array(i);let u=i,d=i;for(let p=0;p<i;p++)tN(e,()=>{const y=(0,pn.D)(n[p],e);let b=!1;y.subscribe((0,nr.x)(r,I=>{s[p]=I,b||(b=!0,d--),d||r.next(t(s.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>Jx(i,u):_i.y));return t?s.pipe(Xx(t)):s}function tN(n,e,t){n?(0,GF.f)(t,n,e):e()}function nN(n){return new _s.y(e=>{(0,iy.Xf)(n()).subscribe(e)})}var qF=V(9635);function Ow(n,e){const t=(0,Hf.m)(n)?n:()=>n,r=i=>i.error(t());return new _s.y(e?i=>e.schedule(r,0,i):r)}var rN=V(727);function BA(){return(0,zr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,nr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class iN extends _s.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,zr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new rN.w0;const t=this.getSubject();e.add(this.source.subscribe((0,nr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=rN.w0.EMPTY)}return e}refCount(){return BA()(this)}}var ks=V(5577);function Lg(n,e){return(0,Hf.m)(e)?(0,ks.z)(n,e,1):(0,ks.z)(n,1)}var rs=V(8505);function Gf(n){return(0,zr.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,nr.x)(t,void 0,void 0,u=>{s=(0,iy.Xf)(n(u,Gf(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function HA(n){return n<=0?()=>Vl.E:(0,zr.e)((e,t)=>{let r=[];e.subscribe((0,nr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function sN(n,e){const t=arguments.length>=2;return r=>r.pipe(n?li((i,s)=>n(i,s,r)):_i.y,HA(1),t?xg(e):bw(()=>new ww))}function jA(n){return(0,zr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Qt="primary",kw=Symbol("RouteTitle");class KF{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function vy(n){return new KF(n)}function YF(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const u=r[s],d=n[s];if(u.startsWith(":"))i[u.substring(1)]=d;else if(u!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ec(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!oN(n[i],e[i]))return!1;return!0}function oN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function aN(n){return Array.prototype.concat.apply([],n)}function lN(n){return n.length>0?n[n.length-1]:null}function $i(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function zf(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,pn.D)(Promise.resolve(n)):tt(n)}const JF={exact:function dN(n,e,t){if(!Ug(n.segments,e.segments)||!zS(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!dN(n.children[r],e.children[r],t))return!1;return!0},subset:hN},uN={exact:function eL(n,e){return Ec(n,e)},subset:function tL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>oN(n[t],e[t]))},ignored:()=>!0};function cN(n,e,t){return JF[t.paths](n.root,e.root,t.matrixParams)&&uN[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function hN(n,e,t){return fN(n,e,e.segments,t)}function fN(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ug(i,t)||e.hasChildren()||!zS(i,t,r))}if(n.segments.length===t.length){if(!Ug(n.segments,t)||!zS(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!hN(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Ug(n.segments,i)&&zS(n.segments,i,r)&&n.children[Qt])&&fN(n.children[Qt],e,s,r)}}function zS(n,e,t){return e.every((r,i)=>uN[t](n[i].parameters,r.parameters))}class Vg{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vy(this.queryParams)),this._queryParamMap}toString(){return iL.serialize(this)}}class tn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,$i(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qS(this)}}class Fw{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=vy(this.parameters)),this._parameterMap}toString(){return vN(this)}}function Ug(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let pN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new GA},providedIn:"root"}),n})();class GA{parse(e){const t=new fL(e);return new Vg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Lw(e.root,!0)}`,r=function aL(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${WS(t)}=${WS(i)}`).join("&"):`${WS(t)}=${WS(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function sL(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const iL=new GA;function qS(n){return n.segments.map(e=>vN(e)).join("/")}function Lw(n,e){if(!n.hasChildren())return qS(n);if(e){const t=n.children[Qt]?Lw(n.children[Qt],!1):"",r=[];return $i(n.children,(i,s)=>{s!==Qt&&r.push(`${s}:${Lw(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function rL(n,e){let t=[];return $i(n.children,(r,i)=>{i===Qt&&(t=t.concat(e(r,i)))}),$i(n.children,(r,i)=>{i!==Qt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Qt?[Lw(n.children[Qt],!1)]:[`${i}:${Lw(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Qt]?`${qS(n)}/${t[0]}`:`${qS(n)}/(${t.join("//")})`}}function gN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function WS(n){return gN(n).replace(/%3B/gi,";")}function zA(n){return gN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ZS(n){return decodeURIComponent(n)}function mN(n){return ZS(n.replace(/\+/g,"%20"))}function vN(n){return`${zA(n.path)}${function oL(n){return Object.keys(n).map(e=>`;${zA(e)}=${zA(n[e])}`).join("")}(n.parameters)}`}const lL=/^[^\/()?;=#]+/;function KS(n){const e=n.match(lL);return e?e[0]:""}const uL=/^[^=?&#]+/,dL=/^[^&#]+/;class fL{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tn([],{}):new tn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Qt]=new tn(e,t)),r}parseSegment(){const e=KS(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new Fw(ZS(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=KS(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=KS(this.remaining);i&&(r=i,this.capture(r))}e[ZS(t)]=ZS(r)}parseQueryParam(e){const t=function cL(n){const e=n.match(uL);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function hL(n){const e=n.match(dL);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=mN(t),s=mN(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=KS(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new h.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Qt);const u=this.parseChildren();t[s]=1===Object.keys(u).length?u[Qt]:new tn([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function qA(n){return n.segments.length>0?new tn([],{[Qt]:n}):n}function YS(n){const e={};for(const r of Object.keys(n.children)){const s=YS(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function pL(n){if(1===n.numberOfChildren&&n.children[Qt]){const e=n.children[Qt];return new tn(n.segments.concat(e.segments),e.children)}return n}(new tn(n.segments,e))}function Bg(n){return n instanceof Vg}function vL(n,e,t,r,i){if(0===t.length)return yy(e.root,e.root,e.root,r,i);const s=function EN(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new _N(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return $i(s.outlets,(p,y)=>{d[y]="string"==typeof p?p.split("/"):p}),[...i,{outlets:d}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===u?(s.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,s]},[]);return new _N(t,e,r)}(t);return s.toRoot()?yy(e.root,e.root,new tn([],{}),r,i):function u(p){const y=function _L(n,e,t,r){if(n.isAbsolute)return new _y(e.root,!0,0);if(-1===r)return new _y(t,t===e.root,0);return function wN(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new h.vHH(4005,!1);i=r.segments.length}return new _y(r,!1,i-s)}(t,r+(Vw(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,p),b=y.processChildren?Bw(y.segmentGroup,y.index,s.commands):ZA(y.segmentGroup,y.index,s.commands);return yy(e.root,y.segmentGroup,b,r,i)}(n.snapshot?._lastPathIndex)}function Vw(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Uw(n){return"object"==typeof n&&null!=n&&n.outlets}function yy(n,e,t,r,i){let u,s={};r&&$i(r,(p,y)=>{s[y]=Array.isArray(p)?p.map(b=>`${b}`):`${p}`}),u=n===e?t:yN(n,e,t);const d=qA(YS(u));return new Vg(d,s,i)}function yN(n,e,t){const r={};return $i(n.children,(i,s)=>{r[s]=i===e?t:yN(i,e,t)}),new tn(n.segments,r)}class _N{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Vw(r[0]))throw new h.vHH(4003,!1);const i=r.find(Uw);if(i&&i!==lN(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class _y{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ZA(n,e,t){if(n||(n=new tn([],{})),0===n.segments.length&&n.hasChildren())return Bw(n,e,t);const r=function wL(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const u=n.segments[i],d=t[r];if(Uw(d))break;const p=`${d}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!DN(p,y,u))return s;r+=2}else{if(!DN(p,{},u))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new tn(n.segments.slice(0,r.pathIndex),{});return s.children[Qt]=new tn(n.segments.slice(r.pathIndex),n.children),Bw(s,0,i)}return r.match&&0===i.length?new tn(n.segments,{}):r.match&&!n.hasChildren()?KA(n,e,t):r.match?Bw(n,0,i):KA(n,e,t)}function Bw(n,e,t){if(0===t.length)return new tn(n.segments,{});{const r=function EL(n){return Uw(n[0])?n[0].outlets:{[Qt]:n}}(t),i={};return $i(r,(s,u)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[u]=ZA(n.children[u],e,s))}),$i(n.children,(s,u)=>{void 0===r[u]&&(i[u]=s)}),new tn(n.segments,i)}}function KA(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Uw(s)){const p=bL(s.outlets);return new tn(r,p)}if(0===i&&Vw(t[0])){r.push(new Fw(n.segments[e].path,bN(t[0]))),i++;continue}const u=Uw(s)?s.outlets[Qt]:`${s}`,d=i<t.length-1?t[i+1]:null;u&&d&&Vw(d)?(r.push(new Fw(u,bN(d))),i+=2):(r.push(new Fw(u,{})),i++)}return new tn(r,{})}function bL(n){const e={};return $i(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=KA(new tn([],{}),0,t))}),e}function bN(n){const e={};return $i(n,(t,r)=>e[r]=`${t}`),e}function DN(n,e,t){return n==t.path&&Ec(e,t.parameters)}class Yd{constructor(e,t){this.id=e,this.url=t}}class YA extends Yd{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Hg extends Yd{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class QS extends Yd{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class SN extends Yd{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class DL extends Yd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class SL extends Yd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TL extends Yd{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class IL extends Yd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CL extends Yd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class AL{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ML{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class RL{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xL{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class NL{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PL{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class TN{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class IN{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=QA(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=QA(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=XA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return XA(e,this._root).map(t=>t.value)}}function QA(n,e){if(n===e.value)return e;for(const t of e.children){const r=QA(n,t);if(r)return r}return null}function XA(n,e){if(n===e.value)return[e];for(const t of e.children){const r=XA(n,t);if(r.length)return r.unshift(e),r}return[]}class Qd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ey(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class CN extends IN{constructor(e,t){super(e),this.snapshot=t,JA(this,e)}toString(){return this.snapshot.toString()}}function AN(n,e){const t=function kL(n,e){const u=new XS([],{},{},"",{},Qt,e,null,n.root,-1,{});return new RN("",new Qd(u,[]))}(n,e),r=new Ul([new Fw("",{})]),i=new Ul({}),s=new Ul({}),u=new Ul({}),d=new Ul(""),p=new Xd(r,i,u,d,s,Qt,e,t.root);return p.snapshot=t.root,new CN(new Qd(p,[]),t)}class Xd{constructor(e,t,r,i,s,u,d,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=d,this.title=this.data?.pipe((0,At.U)(y=>y[kw]))??tt(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,At.U)(e=>vy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,At.U)(e=>vy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function MN(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function FL(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class XS{constructor(e,t,r,i,s,u,d,p,y,b,I,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=d,this.title=this.data?.[kw],this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=b,this._correctedLastPathIndex=x??b,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class RN extends IN{constructor(e,t){super(t),this.url=e,JA(this,t)}toString(){return xN(this._root)}}function JA(n,e){e.value._routerState=n,e.children.forEach(t=>JA(n,t))}function xN(n){const e=n.children.length>0?` { ${n.children.map(xN).join(", ")} } `:"";return`${n.value}${e}`}function eM(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ec(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ec(e.params,t.params)||n.params.next(t.params),function QF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ec(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ec(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function tM(n,e){const t=Ec(n.params,e.params)&&function nL(n,e){return Ug(n,e)&&n.every((t,r)=>Ec(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||tM(n.parent,e.parent))}function Hw(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function VL(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Hw(n,r,i);return Hw(n,r)})}(n,e,t);return new Qd(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(d=>Hw(n,d)),u}}const r=function UL(n){return new Xd(new Ul(n.url),new Ul(n.params),new Ul(n.queryParams),new Ul(n.fragment),new Ul(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Hw(n,s));return new Qd(r,i)}}const nM="ngNavigationCancelingError";function NN(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Bg(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=PN(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function PN(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[nM]=!0,r.cancellationCode=e,t&&(r.url=t),r}function ON(n){return kN(n)&&Bg(n.url)}function kN(n){return n&&n[nM]}class BL{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new jw,this.attachRef=null}}let jw=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new BL,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const JS=!1;let rM=(()=>{class n{constructor(t,r,i,s,u){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=i||Qt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,JS);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,JS);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,JS);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,JS);this._activatedRoute=t;const i=this.location,u=t._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,p=new HL(t,d,i.injector);if(r&&function jL(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(u);this.activated=i.createComponent(y,i.length,p)}else this.activated=i.createComponent(u,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(jw),h.Y36(h.s_b),h.$8M("name"),h.Y36(h.sBO),h.Y36(h.lqb))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class HL{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Xd?this.route:e===jw?this.childContexts:this.parent.get(e,t)}}let iM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[rM],encapsulation:2}),n})();function FN(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function oM(n){const e=n.children&&n.children.map(oM),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Qt&&(t.component=iM),t}function Oa(n){return n.outlet||Qt}function LN(n,e){const t=n.filter(r=>Oa(r)===e);return t.push(...n.filter(r=>Oa(r)!==e)),t}function $w(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class WL{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),eM(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ey(t);e.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,i[u],r),delete i[u]}),$i(i,(s,u)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ey(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);if(r&&r.outlet){const u=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ey(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ey(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new PL(s.value.snapshot))}),e.children.length&&this.forwardEvent(new xL(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(eM(i),i===s)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(d.contexts),u.attachRef=d.componentRef,u.route=d.route.value,u.outlet&&u.outlet.attach(d.componentRef,d.route.value),eM(d.route.value),this.activateChildRoutes(e,null,u.children)}else{const d=$w(i.snapshot),p=d?.get(h._Vd)??null;u.attachRef=null,u.route=i,u.resolver=p,u.injector=d,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class VN{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class eT{constructor(e,t){this.component=e,this.route=t}}function ZL(n,e,t){const r=n._root;return Gw(r,e?e._root:null,t,[r.value])}function wy(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function Gw(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ey(e);return n.children.forEach(u=>{(function YL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const p=function QL(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ug(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ug(n.url,e.url)||!Ec(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tM(n,e)||!Ec(n.queryParams,e.queryParams);default:return!tM(n,e)}}(u,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new VN(r)):(s.data=u.data,s._resolvedData=u._resolvedData),Gw(n,e,s.component?d?d.children:null:t,r,i),p&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new eT(d.outlet.component,u))}else u&&zw(e,d,i),i.canActivateChecks.push(new VN(r)),Gw(n,null,s.component?d?d.children:null:t,r,i)})(u,s[u.value.outlet],t,r.concat([u.value]),i),delete s[u.value.outlet]}),$i(s,(u,d)=>zw(u,t.getContext(d),i)),i}function zw(n,e,t){const r=Ey(n),i=n.value;$i(r,(s,u)=>{zw(s,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new eT(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function qw(n){return"function"==typeof n}function aM(n){return n instanceof ww||"EmptyError"===n?.name}const tT=Symbol("INITIAL_VALUE");function by(){return Jr(n=>eN(n.map(e=>e.pipe(Bf(1),ca(tT)))).pipe((0,At.U)(e=>{for(const t of e)if(!0!==t){if(t===tT)return tT;if(!1===t||t instanceof Vg)return t}return!0}),li(e=>e!==tT),Bf(1)))}function UN(n){return(0,qF.z)((0,rs.b)(e=>{if(Bg(e))throw NN(0,e)}),(0,At.U)(e=>!0===e))}const lM={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function BN(n,e,t,r,i){const s=uM(n,e,t);return s.matched?function pV(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?tt(i.map(u=>{const d=wy(u,n);return zf(function rV(n){return n&&qw(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))})).pipe(by(),UN()):tt(!0)}(r=FN(e,r),e,t).pipe((0,At.U)(u=>!0===u?s:{...lM})):tt(s)}function uM(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...lM}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||YF)(t,n,e);if(!i)return{...lM};const s={};$i(i.posParams,(d,p)=>{s[p]=d.path});const u=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function nT(n,e,t,r,i="corrected"){if(t.length>0&&function vV(n,e,t){return t.some(r=>rT(n,e,r)&&Oa(r)!==Qt)}(n,t,r)){const u=new tn(e,function mV(n,e,t,r){const i={};i[Qt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Oa(s)!==Qt){const u=new tn([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[Oa(s)]=u}return i}(n,e,r,new tn(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function yV(n,e,t){return t.some(r=>rT(n,e,r))}(n,t,r)){const u=new tn(n.segments,function gV(n,e,t,r,i,s){const u={};for(const d of r)if(rT(n,t,d)&&!i[Oa(d)]){const p=new tn([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,u[Oa(d)]=p}return{...i,...u}}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new tn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function rT(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function HN(n,e,t,r){return!!(Oa(n)===r||r!==Qt&&rT(e,t,n))&&("**"===n.path||uM(e,n,t).matched)}function jN(n,e,t){return 0===e.length&&!n.children[t]}const iT=!1;class sT{constructor(e){this.segmentGroup=e||null}}class $N{constructor(e){this.urlTree=e}}function Ww(n){return Ow(new sT(n))}function GN(n){return Ow(new $N(n))}class bV{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=nT(this.urlTree.root,[],[],this.config).segmentGroup,t=new tn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Qt).pipe((0,At.U)(s=>this.createUrlTree(YS(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Gf(s=>{if(s instanceof $N)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof sT?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Qt).pipe((0,At.U)(i=>this.createUrlTree(YS(i),e.queryParams,e.fragment))).pipe(Gf(i=>{throw i instanceof sT?this.noMatchError(i):i}))}noMatchError(e){return new h.vHH(4002,iT)}createUrlTree(e,t,r){const i=qA(e);return new Vg(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,At.U)(s=>new tn([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,pn.D)(i).pipe(Lg(s=>{const u=r.children[s],d=LN(t,s);return this.expandSegmentGroup(e,d,u,s).pipe((0,At.U)(p=>({segment:p,outlet:s})))}),Es((s,u)=>(s[u.outlet]=u.segment,s),{}),sN())}expandSegment(e,t,r,i,s,u){return(0,pn.D)(r).pipe(Lg(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,s,u).pipe(Gf(y=>{if(y instanceof sT)return tt(null);throw y}))),Pa(d=>!!d),Gf((d,p)=>{if(aM(d))return jN(t,i,s)?tt(new tn([],{})):Ww(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,s,u,d){return HN(i,t,s,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,u):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u):Ww(t):Ww(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?GN(s):this.lineralizeSegments(r,s).pipe((0,ks.z)(u=>{const d=new tn(u,{});return this.expandSegment(e,d,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){const{matched:d,consumedSegments:p,remainingSegments:y,positionalParamSegments:b}=uM(t,i,s);if(!d)return Ww(t);const I=this.applyRedirectCommands(p,i.redirectTo,b);return i.redirectTo.startsWith("/")?GN(I):this.lineralizeSegments(i,I).pipe((0,ks.z)(x=>this.expandSegment(e,t,r,x.concat(y),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=FN(r,e),r.loadChildren?(r._loadedRoutes?tt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,At.U)(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new tn(i,{})))):tt(new tn(i,{}))):BN(t,r,i,e).pipe(Jr(({matched:u,consumedSegments:d,remainingSegments:p})=>u?this.getChildConfig(e=r._injector??e,r,i).pipe((0,ks.z)(b=>{const I=b.injector??e,x=b.routes,{segmentGroup:P,slicedSegments:k}=nT(t,d,p,x),H=new tn(P.segments,P.children);if(0===k.length&&H.hasChildren())return this.expandChildren(I,x,H).pipe((0,At.U)(Oe=>new tn(d,Oe)));if(0===x.length&&0===k.length)return tt(new tn(d,{}));const Y=Oa(r)===s;return this.expandSegment(I,H,x,k,Y?Qt:s,!0).pipe((0,At.U)(Ne=>new tn(d.concat(Ne.segments),Ne.children)))})):Ww(t)))}getChildConfig(e,t,r){return t.children?tt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?tt({routes:t._loadedRoutes,injector:t._loadedInjector}):function fV(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?tt(!0):tt(i.map(u=>{const d=wy(u,n);return zf(function JL(n){return n&&qw(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))})).pipe(by(),UN())}(e,t,r).pipe((0,ks.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,rs.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function EV(n){return Ow(PN(iT,3))}())):tt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return tt(r);if(i.numberOfChildren>1||!i.children[Qt])return Ow(new h.vHH(4e3,iT));i=i.children[Qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Vg(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return $i(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[s]=t[d]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let u={};return $i(t.children,(d,p)=>{u[p]=this.createSegmentGroup(e,d,r,i)}),new tn(s,u)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new h.vHH(4001,iT);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class SV{}class CV{constructor(e,t,r,i,s,u,d,p){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d,this.urlSerializer=p}recognize(){const e=nT(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Qt).pipe((0,At.U)(t=>{if(null===t)return null;const r=new XS([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Qt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Qd(r,t),s=new RN(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=MN(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,pn.D)(Object.keys(r.children)).pipe(Lg(i=>{const s=r.children[i],u=LN(t,i);return this.processSegmentGroup(e,u,s,i)}),Es((i,s)=>i&&s?(i.push(...s),i):null),function WF(n,e=!1){return(0,zr.e)((t,r)=>{let i=0;t.subscribe((0,nr.x)(r,s=>{const u=n(s,i++);(u||e)&&r.next(s),!u&&r.complete()}))})}(i=>null!==i),xg(null),sN(),(0,At.U)(i=>{if(null===i)return null;const s=zN(i);return function AV(n){n.sort((e,t)=>e.value.outlet===Qt?-1:t.value.outlet===Qt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,pn.D)(t).pipe(Lg(u=>this.processSegmentAgainstRoute(u._injector??e,u,r,i,s)),Pa(u=>!!u),Gf(u=>{if(aM(u))return jN(r,i,s)?tt([]):tt(null);throw u}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!HN(t,r,i,s))return tt(null);let u;if("**"===t.path){const d=i.length>0?lN(i).parameters:{},p=WN(r)+i.length;u=tt({snapshot:new XS(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,KN(t),Oa(t),t.component??t._loadedComponent??null,t,qN(r),p,YN(t),p),consumedSegments:[],remainingSegments:[]})}else u=BN(r,t,i,e).pipe((0,At.U)(({matched:d,consumedSegments:p,remainingSegments:y,parameters:b})=>{if(!d)return null;const I=WN(r)+p.length;return{snapshot:new XS(p,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,KN(t),Oa(t),t.component??t._loadedComponent??null,t,qN(r),I,YN(t),I),consumedSegments:p,remainingSegments:y}}));return u.pipe(Jr(d=>{if(null===d)return tt(null);const{snapshot:p,consumedSegments:y,remainingSegments:b}=d;e=t._injector??e;const I=t._loadedInjector??e,x=function MV(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:P,slicedSegments:k}=nT(r,y,b,x.filter(Y=>void 0===Y.redirectTo),this.relativeLinkResolution);if(0===k.length&&P.hasChildren())return this.processChildren(I,x,P).pipe((0,At.U)(Y=>null===Y?null:[new Qd(p,Y)]));if(0===x.length&&0===k.length)return tt([new Qd(p,[])]);const H=Oa(t)===s;return this.processSegment(I,x,P,k,H?Qt:s).pipe((0,At.U)(Y=>null===Y?null:[new Qd(p,Y)]))}))}}function RV(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function zN(n){const e=[],t=new Set;for(const r of n){if(!RV(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=zN(r.children);e.push(new Qd(r.value,i))}return e.filter(r=>!t.has(r))}function qN(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function WN(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function KN(n){return n.data||{}}function YN(n){return n.resolve||{}}function QN(n){return"string"==typeof n.title||null===n.title}function cM(n){return Jr(e=>{const t=n(e);return t?(0,pn.D)(t).pipe((0,At.U)(()=>e)):tt(e)})}let XN=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Qt);return r}getResolvedTitleForRoute(t){return t.data[kw]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(JN)},providedIn:"root"}),n})(),JN=(()=>{class n extends XN{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(vs))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class VV{}class BV extends class UV{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const aT=new h.OlP("",{providedIn:"root",factory:()=>({})}),dM=new h.OlP("ROUTES");let hM=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return tt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=zf(t.loadComponent()).pipe((0,rs.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),jA(()=>{this.componentLoaders.delete(t)})),i=new iN(r,()=>new ji.x).pipe(BA());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return tt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,At.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let p,y,b=!1;Array.isArray(d)?y=d:(p=d.create(t).injector,y=aN(p.get(dM,[],h.XFs.Self|h.XFs.Optional)));return{routes:y.map(oM),injector:p}}),jA(()=>{this.childrenLoaders.delete(r)})),u=new iN(s,()=>new ji.x).pipe(BA());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return zf(t()).pipe((0,ks.z)(r=>r instanceof h.YKP||Array.isArray(r)?tt(r):(0,pn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(h.Sil))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class jV{}class $V{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function GV(n){throw n}function zV(n,e,t){return e.parse("/")}const qV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},WV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function tP(){const n=(0,h.f3M)(pN),e=(0,h.f3M)(jw),t=(0,h.f3M)(Me),r=(0,h.f3M)(h.zs3),i=(0,h.f3M)(h.Sil),s=(0,h.f3M)(dM,{optional:!0})??[],u=(0,h.f3M)(aT,{optional:!0})??{},d=(0,h.f3M)(JN),p=(0,h.f3M)(XN,{optional:!0}),y=(0,h.f3M)(jV,{optional:!0}),b=(0,h.f3M)(VV,{optional:!0}),I=new hi(null,n,e,t,r,i,aN(s));return y&&(I.urlHandlingStrategy=y),b&&(I.routeReuseStrategy=b),I.titleStrategy=p??d,function ZV(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,I),I}let hi=(()=>{class n{constructor(t,r,i,s,u,d,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ji.x,this.errorHandler=GV,this.malformedUriErrorHandler=zV,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>tt(void 0),this.urlHandlingStrategy=new $V,this.routeReuseStrategy=new BV,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(hM),this.configLoader.onLoadEndListener=x=>this.triggerEvent(new ML(x)),this.configLoader.onLoadStartListener=x=>this.triggerEvent(new AL(x)),this.ngModule=u.get(h.h0i),this.console=u.get(h.c2e);const I=u.get(h.R0b);this.isNgZoneEnabled=I instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function XF(){return new Vg(new tn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=AN(this.currentUrlTree,this.rootComponentType),this.transitions=new Ul({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(li(i=>0!==i.id),(0,At.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Jr(i=>{let s=!1,u=!1;return tt(i).pipe((0,rs.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Jr(d=>{const p=this.browserUrlTree.toString(),y=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return nP(d.source)&&(this.browserUrlTree=d.extractedUrl),tt(d).pipe(Jr(I=>{const x=this.transitions.getValue();return r.next(new YA(I.id,this.serializeUrl(I.extractedUrl),I.source,I.restoredState)),x!==this.transitions.getValue()?Vl.E:Promise.resolve(I)}),function DV(n,e,t,r){return Jr(i=>function wV(n,e,t,r,i){return new bV(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,At.U)(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,rs.b)(I=>{this.currentNavigation={...this.currentNavigation,finalUrl:I.urlAfterRedirects},i.urlAfterRedirects=I.urlAfterRedirects}),function NV(n,e,t,r,i,s){return(0,ks.z)(u=>function IV(n,e,t,r,i,s,u="emptyOnly",d="legacy"){return new CV(n,e,t,r,i,u,d,s).recognize().pipe(Jr(p=>null===p?function TV(n){return new _s.y(e=>e.error(n))}(new SV):tt(p)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i,s).pipe((0,At.U)(d=>({...u,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,rs.b)(I=>{if(i.targetSnapshot=I.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!I.extras.skipLocationChange){const P=this.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);this.setBrowserUrl(P,I)}this.browserUrlTree=I.urlAfterRedirects}const x=new DL(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);r.next(x)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:P,source:k,restoredState:H,extras:Y}=d,me=new YA(x,this.serializeUrl(P),k,H);r.next(me);const Ne=AN(P,this.rootComponentType).snapshot;return tt(i={...d,targetSnapshot:Ne,urlAfterRedirects:P,extras:{...Y,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),Vl.E}),(0,rs.b)(d=>{const p=new SL(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,At.U)(d=>i={...d,guards:ZL(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function sV(n,e){return(0,ks.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:u}}=t;return 0===u.length&&0===s.length?tt({...t,guardsResult:!0}):function oV(n,e,t,r){return(0,pn.D)(n).pipe((0,ks.z)(i=>function hV(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?tt(s.map(d=>{const p=$w(e)??i,y=wy(d,p);return zf(function nV(n){return n&&qw(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):p.runInContext(()=>y(n,e,t,r))).pipe(Pa())})).pipe(by()):tt(!0)}(i.component,i.route,t,e,r)),Pa(i=>!0!==i,!0))}(u,r,i,n).pipe((0,ks.z)(d=>d&&function XL(n){return"boolean"==typeof n}(d)?function aV(n,e,t,r){return(0,pn.D)(e).pipe(Lg(i=>ua(function uV(n,e){return null!==n&&e&&e(new RL(n)),tt(!0)}(i.route.parent,r),function lV(n,e){return null!==n&&e&&e(new NL(n)),tt(!0)}(i.route,r),function dV(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(u=>function KL(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>nN(()=>tt(u.guards.map(p=>{const y=$w(u.node)??t,b=wy(p,y);return zf(function tV(n){return n&&qw(n.canActivateChild)}(b)?b.canActivateChild(r,n):y.runInContext(()=>b(r,n))).pipe(Pa())})).pipe(by())));return tt(s).pipe(by())}(n,i.path,t),function cV(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return tt(!0);const i=r.map(s=>nN(()=>{const u=$w(e)??t,d=wy(s,u);return zf(function eV(n){return n&&qw(n.canActivate)}(d)?d.canActivate(e,n):u.runInContext(()=>d(e,n))).pipe(Pa())}));return tt(i).pipe(by())}(n,i.route,t))),Pa(i=>!0!==i,!0))}(r,s,n,e):tt(d)),(0,At.U)(d=>({...t,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,rs.b)(d=>{if(i.guardsResult=d.guardsResult,Bg(d.guardsResult))throw NN(0,d.guardsResult);const p=new TL(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),li(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),cM(d=>{if(d.guards.canActivateChecks.length)return tt(d).pipe((0,rs.b)(p=>{const y=new IL(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),Jr(p=>{let y=!1;return tt(p).pipe(function PV(n,e){return(0,ks.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return tt(t);let s=0;return(0,pn.D)(i).pipe(Lg(u=>function OV(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!QN(i)&&(s[kw]=i.title),function kV(n,e,t,r){const i=function FV(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return tt({});const s={};return(0,pn.D)(i).pipe((0,ks.z)(u=>function LV(n,e,t,r){const i=$w(e)??r,s=wy(n,i);return zf(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[u],e,t,r).pipe(Pa(),(0,rs.b)(d=>{s[u]=d}))),HA(1),function ZF(n){return(0,At.U)(()=>n)}(s),Gf(u=>aM(u)?Vl.E:Ow(u)))}(s,n,e,r).pipe((0,At.U)(u=>(n._resolvedData=u,n.data=MN(n,t).resolve,i&&QN(i)&&(n.data[kw]=i.title),null)))}(u.route,r,n,e)),(0,rs.b)(()=>s++),HA(1),(0,ks.z)(u=>s===i.length?tt(t):Vl.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,rs.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",2))}}))}),(0,rs.b)(p=>{const y=new CL(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),cM(d=>{const p=y=>{const b=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,rs.b)(I=>{y.component=I}),(0,At.U)(()=>{})));for(const I of y.children)b.push(...p(I));return b};return eN(p(d.targetSnapshot.root)).pipe(xg(),Bf(1))}),cM(()=>this.afterPreactivation()),(0,At.U)(d=>{const p=function LL(n,e,t){const r=Hw(n,e._root,t?t._root:void 0);return new CN(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:p}}),(0,rs.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,At.U)(r=>(new WL(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,rs.b)({next(){s=!0},complete(){s=!0}}),jA(()=>{s||u||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Gf(d=>{if(u=!0,kN(d)){ON(d)||(this.navigated=!0,this.restoreHistory(i,!0));const p=new QS(i.id,this.serializeUrl(i.extractedUrl),d.message,d.cancellationCode);if(r.next(p),ON(d)){const y=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),b={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||nP(i.source)};this.scheduleNavigation(y,"imperative",null,b,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new SN(i.id,this.serializeUrl(i.extractedUrl),d,i.targetSnapshot??void 0);r.next(p);try{i.resolve(this.errorHandler(d))}catch(y){i.reject(y)}}return Vl.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const d={...s};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(i.state=d)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(oM),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:u,queryParamsHandling:d,preserveFragment:p}=r,y=i||this.routerState.root,b=p?this.currentUrlTree.fragment:u;let I=null;switch(d){case"merge":I={...this.currentUrlTree.queryParams,...s};break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=s||null}return null!==I&&(I=this.removeEmptyProps(I)),vL(y,this.currentUrlTree,t,I,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Bg(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function KV(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...qV}:!1===r?{...WV}:r,Bg(t))return cN(this.currentUrlTree,t,i);const s=this.parseUrl(t);return cN(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Hg(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,u){if(this.disposed)return Promise.resolve(!1);let d,p,y;u?(d=u.resolve,p=u.reject,y=u.promise):y=new Promise((x,P)=>{d=x,p=P});const b=++this.navigationId;let I;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),I=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):I=0,this.setTransition({id:b,targetPageId:I,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:d,reject:p,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(x=>Promise.reject(x))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const s=new QS(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:function(){return tP()},providedIn:"root"}),n})();function nP(n){return"imperative"!==n}let jg=(()=>{class n{constructor(t,r,i,s,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=u,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new ji.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(hi),h.Y36(Xd),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})(),uT=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new ji.x,this.subscription=t.events.subscribe(s=>{s instanceof Hg&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,u){return!!(0!==t||r||i||s||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(hi),h.Y36(Xd),h.Y36(ye))},n.\u0275dir=h.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&h.uIk("target",r.target)("href",r.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})();class rP{}let XV=(()=>{class n{constructor(t,r,i,s,u){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(li(t=>t instanceof Hg),Lg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,h.MMx)(s.providers,t,`Route: ${s.path}`));const u=s._injector??t,d=s._loadedInjector??u;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(u,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(d,s.children??s._loadedRoutes))}return(0,pn.D)(i).pipe((0,Qi.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):tt(null);const s=i.pipe((0,ks.z)(u=>null===u?tt(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,pn.D)([s,u]).pipe((0,Qi.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(hi),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(rP),h.LFG(hM))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fM=new h.OlP("");let iP=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof YA?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Hg&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof TN&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new TN(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Dy(n,e){return{\u0275kind:n,\u0275providers:e}}function pM(n){return[{provide:dM,multi:!0,useValue:n}]}function oP(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(hi),i=n.get(aP);1===n.get(gM)&&r.initialNavigation(),n.get(lP,null,h.XFs.Optional)?.setUpPreloading(),n.get(fM,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const aP=new h.OlP("",{factory:()=>new ji.x}),gM=new h.OlP("",{providedIn:"root",factory:()=>1});const lP=new h.OlP("");function nU(n){return Dy(0,[{provide:lP,useExisting:XV},{provide:rP,useExisting:n}])}const uP=new h.OlP("ROUTER_FORROOT_GUARD"),rU=[Me,{provide:pN,useClass:GA},{provide:hi,useFactory:tP},jw,{provide:Xd,useFactory:function sP(n){return n.routerState.root},deps:[hi]},hM];function iU(){return new h.PXZ("Router",hi)}let cP=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[rU,[],pM(t),{provide:uP,useFactory:lU,deps:[[hi,new h.FiY,new h.tp0]]},{provide:aT,useValue:r||{}},r?.useHash?{provide:ye,useClass:ht}:{provide:ye,useClass:rt},{provide:fM,useFactory:()=>{const n=(0,h.f3M)(hi),e=(0,h.f3M)(Kl),t=(0,h.f3M)(aT);return t.scrollOffset&&e.setOffset(t.scrollOffset),new iP(n,e,t)}},r?.preloadingStrategy?nU(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:iU},r?.initialNavigation?uU(r):[],[{provide:dP,useFactory:oP},{provide:h.tb,multi:!0,useExisting:dP}]]}}static forChild(t){return{ngModule:n,providers:[pM(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(uP,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[iM]}),n})();function lU(n){return"guarded"}function uU(n){return["disabled"===n.initialNavigation?Dy(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(hi);return()=>{e.setUpLocationChangeListener()}}},{provide:gM,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Dy(2,[{provide:gM,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get($,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(s=>{const u=e.get(hi),d=e.get(aP);(function i(s){e.get(hi).events.pipe(li(d=>d instanceof Hg||d instanceof QS||d instanceof SN),(0,At.U)(d=>d instanceof Hg||d instanceof QS&&(0===d.code||1===d.code)&&null),li(d=>null!==d),Bf(1)).subscribe(()=>{s()})})(()=>{s(!0),r=!0}),u.afterPreactivation=()=>(s(!0),r||d.closed?tt(void 0):d),u.initialNavigation()}))}}]).\u0275providers:[]]}const dP=new h.OlP("");let $g=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-nadvar"]],decls:25,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-success"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["src","/assets/logo.png",2,"height","50px"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarColor01","aria-controls","navbarColor01","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarColor01",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto"],[1,"nav-item"],["href","#",1,"nav-link"],[1,"visually-hidden"],["routerLink","/list-sala",1,"nav-link"],["routerLink","/list-usuario",1,"nav-link"],["routerLink","/reservar-sala",1,"nav-link"],["routerLink","/acerca",1,"nav-link"]],template:function(t,r){1&t&&(h.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),h._UZ(3,"img",3),h.qZA(),h.TgZ(4,"button",4),h._UZ(5,"span",5),h.qZA(),h.TgZ(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),h._uU(10,"Inicio "),h.TgZ(11,"span",10),h._uU(12,"(current)"),h.qZA()()(),h.TgZ(13,"li",8)(14,"a",11),h._uU(15,"Registro de sala"),h.qZA()(),h.TgZ(16,"li",8)(17,"a",12),h._uU(18,"Registro usuarios"),h.qZA()(),h.TgZ(19,"li",8)(20,"a",13),h._uU(21,"Reservar sala"),h.qZA()(),h.TgZ(22,"li",8)(23,"a",14),h._uU(24,"Acerca"),h.qZA()()()()()())},dependencies:[uT]}),n})(),Sy=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-footer"]],decls:5,vars:0,consts:[[1,"text-center","pie","text-lg-start","text-dark",2,"background-color","#ECEFF1"],[1,"text-center","p-3","bg-success","text-white"],[1,"text-white"]],template:function(t,r){1&t&&(h.TgZ(0,"footer",0)(1,"div",1),h._uU(2," \xa9 2022 Copyright: "),h.TgZ(3,"a",2),h._uU(4,"Equipo CUT"),h.qZA()()())},styles:[".pie[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;height:40px}"]}),n})(),dU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-acerca"]],decls:36,vars:0,consts:[[1,"container","mt-4"],[1,"card"],[1,"card-body"],[1,"container-xxl","py-5"],[1,"container"],[1,"row","g-20","align-items-end"],["data-wow-delay","0.90s",1,"col-lg-3","col-md-11","wow","fadeInUp"],["data-wow-delay","0.20s","src","/assets/foto.jpg",1,"img-fluid","img-thumbnail","rounded",2,"max-width","100%","height","280px"],["data-wow-delay","0.3s",1,"col-lg-6","col-md-7","wow","fadeInUp"],[1,"fa-solid","fa-school-flag","mb-3","fa-3x"],[1,"mb-4"],[1,"display-5","mb-4"],["href","https://www.linkedin.com/in/martin-pe%C3%B1a-285192238/",1,"btn","btn-primary","py-3","px-4"],["data-wow-delay","0.5s",1,"col-lg-3","col-md-12","wow","fadeInUp"],[1,"row","g-5"],[1,"col-12","col-sm-6","col-lg-12"],[1,"border-start","ps-4"],[1,"fa","fa-award","fa-3x","mb-3"],[1,"mb-3"],[1,"fa-brands","fa-3x","fa-angular"]],template:function(t,r){1&t&&(h._UZ(0,"app-nadvar"),h.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6),h._UZ(8,"img",7),h.qZA(),h.TgZ(9,"div",8),h._UZ(10,"i",9),h.TgZ(11,"p",10),h._uU(12,"Universidad Tecnol\xf3gica de Nezahualc\xf3yotl"),h.qZA(),h.TgZ(13,"h1",11),h._uU(14,"Ingenier\xeda en desarrollo y gesti\xf3n de software"),h.qZA(),h.TgZ(15,"p",10),h._uU(16,"Desarrolladores: Pe\xf1a Anzaldo Martin, Alanis Martinez Nelly Pualina, Cedillo Martinez Ana Gabriela, Robles Salas Frida, Vallejo Ceja Berenice (CUT). "),h.qZA(),h.TgZ(17,"a",12),h._uU(18,"Mas informacion"),h.qZA()(),h.TgZ(19,"div",13)(20,"div",14)(21,"div",15)(22,"div",16),h._UZ(23,"i",17),h.TgZ(24,"h4",18),h._uU(25,"Titulos"),h.qZA(),h.TgZ(26,"span"),h._uU(27,"TSU en desarrollo de software multiplataforma."),h.qZA()()(),h.TgZ(28,"div",15)(29,"div",16),h._UZ(30,"i",19),h.TgZ(31,"h4",18),h._uU(32,"Herramientas utilizadas"),h.qZA(),h.TgZ(33,"span"),h._uU(34,"Angular 14 y Firebase"),h.qZA()()()()()()()()()()(),h._UZ(35,"app-footer"))},dependencies:[$g,Sy]}),n})(),hP=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Gg=(()=>{class n extends hP{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const wc=new h.OlP("NgValueAccessor"),pU={provide:wc,useExisting:(0,h.Gpc)(()=>Zw),multi:!0},mU=new h.OlP("CompositionEventMode");let Zw=(()=>{class n extends hP{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function gU(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(mU,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[h._Bn([pU]),h.qOj]}),n})();function qf(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function pP(n){return null!=n&&"number"==typeof n.length}const is=new h.OlP("NgValidators"),Wf=new h.OlP("NgAsyncValidators"),yU=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Bl{static min(e){return function gP(n){return e=>{if(qf(e.value)||qf(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function mP(n){return e=>{if(qf(e.value)||qf(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function vP(n){return qf(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function yP(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function _P(n){return qf(n.value)||yU.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function EP(n){return e=>qf(e.value)||!pP(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function wP(n){return e=>pP(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function bP(n){if(!n)return hT;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(qf(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return AP(e)}static composeAsync(e){return MP(e)}}function hT(n){return null}function DP(n){return null!=n}function SP(n){return(0,h.QGY)(n)?(0,pn.D)(n):n}function TP(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function IP(n,e){return e.map(t=>t(n))}function CP(n){return n.map(e=>function _U(n){return!n.validate}(e)?e:t=>e.validate(t))}function AP(n){if(!n)return null;const e=n.filter(DP);return 0==e.length?null:function(t){return TP(IP(t,e))}}function mM(n){return null!=n?AP(CP(n)):null}function MP(n){if(!n)return null;const e=n.filter(DP);return 0==e.length?null:function(t){return function hU(...n){const e=(0,cr.jO)(n),{args:t,keys:r}=Qx(n),i=new _s.y(s=>{const{length:u}=t;if(!u)return void s.complete();const d=new Array(u);let p=u,y=u;for(let b=0;b<u;b++){let I=!1;(0,iy.Xf)(t[b]).subscribe((0,nr.x)(s,x=>{I||(I=!0,y--),d[b]=x},()=>p--,void 0,()=>{(!p||!I)&&(y||s.next(r?Jx(r,d):d),s.complete())}))}});return e?i.pipe(Xx(e)):i}(IP(t,e).map(SP)).pipe((0,At.U)(TP))}}function vM(n){return null!=n?MP(CP(n)):null}function RP(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function xP(n){return n._rawValidators}function NP(n){return n._rawAsyncValidators}function yM(n){return n?Array.isArray(n)?n:[n]:[]}function fT(n,e){return Array.isArray(n)?n.includes(e):n===e}function PP(n,e){const t=yM(e);return yM(n).forEach(i=>{fT(t,i)||t.push(i)}),t}function OP(n,e){return yM(e).filter(t=>!fT(n,t))}class kP{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=mM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Fs extends kP{get formDirective(){return null}get path(){return null}}class Zf extends kP{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class FP{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let _M=(()=>{class n extends FP{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Zf,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),EM=(()=>{class n extends FP{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Fs,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();const Kw="VALID",gT="INVALID",Ty="PENDING",Yw="DISABLED";function SM(n){return(mT(n)?n.validators:n)||null}function VP(n){return Array.isArray(n)?mM(n):n||null}function TM(n,e){return(mT(e)?e.asyncValidators:n)||null}function UP(n){return Array.isArray(n)?vM(n):n||null}function mT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function BP(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")}function HP(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new h.vHH(1002,"")})}class vT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=VP(this._rawValidators),this._composedAsyncValidatorFn=UP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Kw}get invalid(){return this.status===gT}get pending(){return this.status==Ty}get disabled(){return this.status===Yw}get enabled(){return this.status!==Yw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=VP(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=UP(e)}addValidators(e){this.setValidators(PP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(PP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(OP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(OP(e,this._rawAsyncValidators))}hasValidator(e){return fT(this._rawValidators,e)}hasAsyncValidator(e){return fT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ty,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Yw,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Kw,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Kw||this.status===Ty)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Yw:Kw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ty,this._hasOwnPendingAsyncValidator=!0;const t=SP(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Yw:this.errors?gT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ty)?Ty:this._anyControlsHaveStatus(gT)?gT:Kw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){mT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Qw extends vT{constructor(e,t,r){super(SM(t),TM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){HP(this,0,e),Object.keys(e).forEach(r=>{BP(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class jP extends Qw{}function Xw(n,e){IM(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function CU(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&$P(n,e)})}(n,e),function MU(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function AU(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&$P(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function IU(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function _T(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),wT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ET(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function IM(n,e){const t=xP(n);null!==e.validator?n.setValidators(RP(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=NP(n);null!==e.asyncValidator?n.setAsyncValidators(RP(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();ET(e._rawValidators,i),ET(e._rawAsyncValidators,i)}function wT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=xP(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=NP(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return ET(e._rawValidators,r),ET(e._rawAsyncValidators,r),t}function $P(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function WP(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function ZP(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const eb=class extends vT{constructor(e=null,t,r){super(SM(t),TM(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),mT(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=ZP(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){WP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){WP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){ZP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let RM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const VU={provide:wc,useExisting:(0,h.Gpc)(()=>xM),multi:!0};let xM=(()=>{class n extends Gg{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[h._Bn([VU]),h.qOj]}),n})(),JP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const NM=new h.OlP("NgModelWithFormControlWarning"),$U={provide:Fs,useExisting:(0,h.Gpc)(()=>tb)};let tb=(()=>{class n extends Fs{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(wT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Xw(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){_T(t.control||null,t,!1),function PU(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function qP(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(_T(r||null,t),(n=>n instanceof eb)(i)&&(Xw(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function GP(n,e){IM(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function RU(n,e){return wT(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){IM(this.form,this),this._oldForm&&wT(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(is,10),h.Y36(Wf,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([$U]),h.qOj,h.TTD]}),n})();const qU={provide:Zf,useExisting:(0,h.Gpc)(()=>bT)};let bT=(()=>{class n extends Zf{constructor(t,r,i,s,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function AM(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Zw?t=s:function NU(n){return Object.getPrototypeOf(n.constructor)===Gg}(s)?r=s:i=s}),i||r||t||null}(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function CM(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function yT(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(Fs,13),h.Y36(is,10),h.Y36(Wf,10),h.Y36(wc,10),h.Y36(NM,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([qU]),h.qOj,h.TTD]}),n})();const WU={provide:wc,useExisting:(0,h.Gpc)(()=>nb),multi:!0};function iO(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let nb=(()=>{class n extends Gg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=iO(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function ZU(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&h.NdJ("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([WU]),h.qOj]}),n})(),kM=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(iO(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(nb,9))},n.\u0275dir=h.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const KU={provide:wc,useExisting:(0,h.Gpc)(()=>FM),multi:!0};function sO(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let FM=(()=>{class n extends Gg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,u)=>{s._setSelected(i.indexOf(u.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const u=s;for(let d=0;d<u.length;d++){const y=this._getOptionValue(u[d].value);i.push(y)}}else{const u=r.options;for(let d=0;d<u.length;d++){const p=u[d];if(p.selected){const y=this._getOptionValue(p.value);i.push(y)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function YU(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([KU]),h.qOj]}),n})(),LM=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(sO(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(sO(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(FM,9))},n.\u0275dir=h.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),sB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[JP]}),n})(),gO=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:NM,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[sB]}),n})();class mO extends vT{constructor(e,t,r){super(SM(t),TM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){HP(this,0,e),e.forEach((r,i)=>{BP(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function vO(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let yO=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return vO(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Qw(i,s)}record(t,r=null){const i=this._reduceControls(t);return new jP(i,r)}control(t,r,i){let s={};return this.useNonNullable?(vO(r)?s=r:(s.validators=r,s.asyncValidators=i),new eb(t,{...s,nonNullable:!0})):new eb(t,r,i)}array(t,r,i){const s=t.map(u=>this._createControl(u));return new mO(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof eb||t instanceof vT?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:gO}),n})(),_O=(()=>{class n{constructor(t){this.firestore=t}agregarSala(t){return this.firestore.collection("salas").add(t)}getSala(){return this.firestore.collection("salas",t=>t.orderBy("fechaCreacion","asc")).snapshotChanges()}eliminarSalas(t){return this.firestore.collection("salas").doc(t).delete()}getSalas(t){return this.firestore.collection("salas").doc(t).snapshotChanges()}actualizarSala(t,r){return this.firestore.collection("salas").doc(t).update(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(UA))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class EO{}const Jd="*";function aB(n,e){return{type:7,name:n,definitions:e,options:{}}}function wO(n,e=null){return{type:4,styles:e,timings:n}}function bO(n,e=null){return{type:2,steps:n,options:e}}function rb(n){return{type:6,styles:n,offset:null}}function UM(n,e,t){return{type:0,name:n,styles:e,options:t}}function DO(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function SO(n){Promise.resolve().then(n)}class ib{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){SO(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class TO{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?SO(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==s&&this._onFinish()}),u.onDestroy(()=>{++r==s&&this._onDestroy()}),u.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((u,d)=>Math.max(u,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const IO=["toast-component",""];function lB(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",5),h.NdJ("click",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.remove())}),h.TgZ(1,"span",6),h._uU(2,"\xd7"),h.qZA()()}}function uB(n,e){if(1&n&&(h.ynx(0),h._uU(1),h.BQk()),2&n){const t=h.oxw(2);h.xp6(1),h.hij("[",t.duplicatesCount+1,"]")}}function cB(n,e){if(1&n&&(h.TgZ(0,"div"),h._uU(1),h.YNc(2,uB,2,1,"ng-container",4),h.qZA()),2&n){const t=h.oxw();h.Tol(t.options.titleClass),h.uIk("aria-label",t.title),h.xp6(1),h.hij(" ",t.title," "),h.xp6(1),h.Q6J("ngIf",t.duplicatesCount)}}function dB(n,e){if(1&n&&h._UZ(0,"div",7),2&n){const t=h.oxw();h.Tol(t.options.messageClass),h.Q6J("innerHTML",t.message,h.oJD)}}function hB(n,e){if(1&n&&(h.TgZ(0,"div",8),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.Tol(t.options.messageClass),h.uIk("aria-label",t.message),h.xp6(1),h.hij(" ",t.message," ")}}function fB(n,e){if(1&n&&(h.TgZ(0,"div"),h._UZ(1,"div",9),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Udp("width",t.width+"%")}}class EB{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class bB{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new ji.x,this._activate=new ji.x,this._manualClose=new ji.x,this._resetTimeout=new ji.x,this._countDuplicate=new ji.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class DT{constructor(e,t,r,i,s,u){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=s,this.toastRef=u,this._onTap=new ji.x,this._onAction=new ji.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const AO=new h.OlP("ToastConfig");class DB extends class wB{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class SB{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let TB=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IB=(()=>{class n{constructor(t,r,i,s){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=i,this._document=s,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new DB(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new SB(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(TB),h.LFG(h._Vd),h.LFG(h.z2F),h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Iy=(()=>{class n{constructor(t,r,i,s,u){this.overlay=r,this._injector=i,this.sanitizer=s,this.ngZone=u,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},s=""){return this._preBuildNotification(s,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,s){const{includeTitleDuplicates:u}=this.toastrConfig;for(const d of this.toasts){const p=u&&d.title===t;if((!u||p)&&d.message===r)return d.toastRef.onDuplicate(i,s),d}return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,s)):this._buildNotification(t,r,i,s)}_buildNotification(t,r,i,s){if(!s.toastComponent)throw new Error("toastComponent required");const u=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==u)return u;this.previousToastMessage=r;let d=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(d=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const p=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let y=r;r&&s.enableHtml&&(y=this.sanitizer.sanitize(h.q3G.HTML,r));const b=new bB(p),I=new DT(this.index,s,y,i,t,b),P=h.zs3.create({providers:[{provide:DT,useValue:I}],parent:this._injector}),k=new EB(s.toastComponent,P),H=p.attach(k,s.newestOnTop);b.componentInstance=H.instance;const Y={toastId:this.index,title:i||"",message:r||"",toastRef:b,onShown:b.afterActivate(),onHidden:b.afterClosed(),onTap:I.onTap(),onAction:I.onAction(),portal:H};return d||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Y.toastRef.activate()})),this.toasts.push(Y),Y}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(AO),h.LFG(IB),h.LFG(h.zs3),h.LFG(ol),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const CB={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null,toastComponent:(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Iy),h.Y36(DT),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(h.d8E("@flyInOut",r.state),h.Tol(r.toastClasses),h.Udp("display",r.displayStyle))},attrs:IO,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(h.YNc(0,lB,3,0,"button",0),h.YNc(1,cB,3,5,"div",1),h.YNc(2,dB,1,3,"div",2),h.YNc(3,hB,2,4,"div",3),h.YNc(4,fB,2,2,"div",4)),2&t&&(h.Q6J("ngIf",r.options.closeButton),h.xp6(1),h.Q6J("ngIf",r.title),h.xp6(1),h.Q6J("ngIf",r.message&&r.options.enableHtml),h.xp6(1),h.Q6J("ngIf",r.message&&!r.options.enableHtml),h.xp6(1),h.Q6J("ngIf",r.options.progressBar))},dependencies:[Nn],encapsulation:2,data:{animation:[aB("flyInOut",[UM("inactive",rb({opacity:0})),UM("active",rb({opacity:1})),UM("removed",rb({opacity:0})),DO("inactive => active",wO("{{ easeTime }}ms {{ easing }}")),DO("active => removed",wO("{{ easeTime }}ms {{ easing }}"))])]}}),n})()};let AB=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:AO,useValue:{default:CB,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[yo]}),n})();function MB(n,e){1&n&&h._UZ(0,"div",16)}function RB(n,e){1&n&&(h.TgZ(0,"span",17),h._uU(1,"*Todos los campos son obligatorios."),h.qZA())}let MO=(()=>{class n{constructor(t,r,i,s,u){this.fb=t,this._salaService=r,this.router=i,this.toastr=s,this.aRoute=u,this.submitted=!1,this.loading=!1,this.titulo="Agregar sala",this.createSala=this.fb.group({nombre:["",Bl.required],horario:["",Bl.required],division:["",Bl.required],diasDisponibles:["",Bl.required]}),this.id=this.aRoute.snapshot.paramMap.get("id"),console.log(this.id)}ngOnInit(){this.esEditar()}agregarEditarSala(){this.submitted=!0,!this.createSala.invalid&&(null==this.id?this.agregarSala():this.editarSala(this.id))}agregarSala(){const t={nombre:this.createSala.value.nombre,horario:this.createSala.value.horario,division:this.createSala.value.division,diasDisponibles:this.createSala.value.diasDisponibles,fechaActualizacion:new Date,fechaCreacion:new Date};this.loading=!0,this._salaService.agregarSala(t).then(()=>{this.toastr.success("La sala fue registrado con exito!","Sala registrado",{positionClass:"toast-bottom-right"}),this.loading=!1,console.log("sala registrado con exito!"),this.router.navigate(["/list-sala"])}).catch(r=>{console.log("error de registro"),this.loading=!1})}editarSala(t){const r={nombre:this.createSala.value.nombre,horario:this.createSala.value.horario,division:this.createSala.value.division,diasDisponibles:this.createSala.value.diasDisponibles,fechaActualizacion:new Date};this.loading=!0,this._salaService.actualizarSala(t,r).then(()=>{this.loading=!1,this.toastr.info("La sala fue modificado con exito!","Sala modificado",{positionClass:"toast-bottom-right"}),this.router.navigate(["/list-sala"])})}esEditar(){null!==this.id&&(this.loading=!0,this.titulo="Editar Sala",this._salaService.getSalas(this.id).subscribe(t=>{this.loading=!1,console.log(t.payload.data().nombre),this.createSala.setValue({nombre:t.payload.data().nombre,horario:t.payload.data().horario,division:t.payload.data().division,diasDisponibles:t.payload.data().diasDisponibles})}))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(yO),h.Y36(_O),h.Y36(hi),h.Y36(Iy),h.Y36(Xd))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-create-sala"]],decls:28,vars:3,consts:[[1,"container"],[1,"row"],[1,"col-lg-6","offset-lg-3","p-4"],[1,"card"],[1,"card-body","text-center"],["class","spinner-border text-success float-end",4,"ngIf"],["class","badge bg-danger",4,"ngIf"],[1,"mt-4",3,"formGroup","ngSubmit"],[1,"col"],["type","text","formControlName","nombre","placeholder","Nombre",1,"form-control","form-control-lg"],["type","text","formControlName","horario","placeholder","Horario",1,"form-control","form-control-lg"],["formControlName","division","id","exampleSelect1",1,"form-select","mt-3"],["type","number","formControlName","diasDisponibles","placeholder","Dias disponibles",1,"form-control","form-control-lg","mt-3"],[1,"mt-3"],["type","text","routerLink","/list-sala",1,"btn","btn-secondary","btn-lg","me-3"],["type","submit",1,"btn","btn-success","btn-lg"],[1,"spinner-border","text-success","float-end"],[1,"badge","bg-danger"]],template:function(t,r){1&t&&(h._UZ(0,"app-nadvar"),h.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3"),h._uU(7,"Registrar sala "),h.YNc(8,MB,1,0,"div",5),h.qZA(),h.YNc(9,RB,2,0,"span",6),h.TgZ(10,"form",7),h.NdJ("ngSubmit",function(){return r.agregarEditarSala()}),h.TgZ(11,"div",1)(12,"div",8),h._UZ(13,"input",9),h.qZA(),h.TgZ(14,"div",8),h._UZ(15,"input",10),h.qZA()(),h.TgZ(16,"select",11)(17,"option"),h._uU(18,"Divis\xf3n de inform\xe1tica"),h.qZA(),h.TgZ(19,"option"),h._uU(20,"Divis\xf3n de procesos"),h.qZA()(),h._UZ(21,"input",12),h.TgZ(22,"div",13)(23,"button",14),h._uU(24," Volver "),h.qZA(),h.TgZ(25,"button",15),h._uU(26," Guardar "),h.qZA()()()()()()()(),h._UZ(27,"app-footer")),2&t&&(h.xp6(8),h.Q6J("ngIf",r.loading),h.xp6(1),h.Q6J("ngIf",r.submitted&&r.createSala.invalid),h.xp6(1),h.Q6J("formGroup",r.createSala))},dependencies:[Nn,jg,RM,kM,LM,Zw,xM,nb,_M,EM,tb,bT,$g,Sy]}),n})(),RO=(()=>{class n{constructor(t){this.firestore=t}agregarUsuario(t){return this.firestore.collection("usuarios").add(t)}getUsuario(){return this.firestore.collection("usuarios",t=>t.orderBy("fechaCreacion","asc")).snapshotChanges()}eliminarUsuario(t){return this.firestore.collection("usuario").doc(t).delete()}getUsuarios(t){return this.firestore.collection("usuarios").doc(t).snapshotChanges()}actualizarUsuario(t,r){return this.firestore.collection("usuarios").doc(t).update(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(UA))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xB(n,e){1&n&&h._UZ(0,"div",19)}function NB(n,e){1&n&&(h.TgZ(0,"span",20),h._uU(1,"*Todos los campos son obligatorios."),h.qZA())}let xO=(()=>{class n{constructor(t,r,i,s,u){this.fb=t,this._usuarioService=r,this.router=i,this.toastr=s,this.aRoute=u,this.submitted=!1,this.loading=!1,this.titulo="Agregar usuario",this.createUsuario=this.fb.group({matricula:["",Bl.required],division:["",Bl.required],nombre:["",Bl.required],apellido:["",Bl.required],rol:["",Bl.required],email:["",Bl.required],password:["",Bl.required]}),this.id=this.aRoute.snapshot.paramMap.get("id"),console.log(this.id)}ngOnInit(){this.esEditar()}agregarEditarUsuario(){this.submitted=!0,!this.createUsuario.invalid&&(null==this.id?this.agregarUsuario():this.editarUsuario(this.id))}agregarUsuario(){const t={division:this.createUsuario.value.division,matricula:this.createUsuario.value.matricula,nombre:this.createUsuario.value.nombre,apellido:this.createUsuario.value.apellido,rol:this.createUsuario.value.rol,email:this.createUsuario.value.email,password:this.createUsuario.value.password,fechaActualizacion:new Date,fechaCreacion:new Date};this.loading=!0,this._usuarioService.agregarUsuario(t).then(()=>{this.toastr.success("El usuario fue registrado con exito!","Usuario registrado",{positionClass:"toast-bottom-right"}),this.loading=!1,console.log("usuario registrado con exito!"),this.router.navigate(["/list-usuario"])}).catch(r=>{console.log("error de registro"),this.loading=!1})}editarUsuario(t){const r={division:this.createUsuario.value.division,matricula:this.createUsuario.value.matricula,nombre:this.createUsuario.value.nombre,apellido:this.createUsuario.value.apellido,rol:this.createUsuario.value.rol,email:this.createUsuario.value.email,password:this.createUsuario.value.password,fechaActualizacion:new Date};this.loading=!0,this._usuarioService.actualizarUsuario(t,r).then(()=>{this.loading=!1,this.toastr.info("El usuario fue modificado con exito!","Usuario modificado",{positionClass:"toast-bottom-right"}),this.router.navigate(["/list-usuario"])})}esEditar(){null!==this.id&&(this.loading=!0,this.titulo="Editar Sala",this._usuarioService.getUsuarios(this.id).subscribe(t=>{this.loading=!1,console.log(t.payload.data().nombre),this.createUsuario.setValue({division:t.payload.data().division,matricula:t.payload.data().matricula,nombre:t.payload.data().nombre,apellido:t.payload.data().apellido,rol:t.payload.data().rol,email:t.payload.data().email,password:t.payload.data().password})}))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(yO),h.Y36(RO),h.Y36(hi),h.Y36(Iy),h.Y36(Xd))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-create-usuario"]],decls:36,vars:3,consts:[[1,"container"],[1,"row"],[1,"col-lg-6","offset-lg-3","p-4"],[1,"card"],[1,"card-body","text-center"],["class","spinner-border text-success float-end",4,"ngIf"],["class","badge bg-danger",4,"ngIf"],[1,"mt-4",3,"formGroup","ngSubmit"],[1,"col"],["type","text","formControlName","nombre","placeholder","Nombre",1,"form-control","form-control-lg"],["type","text","formControlName","apellido","placeholder","Apellidos",1,"form-control","form-control-lg"],["formControlName","division","id","exampleSelect1",1,"form-select","mt-3"],["type","texto","formControlName","matricula","placeholder","Matricula",1,"form-control","form-control-lg","mt-3"],["formControlName","rol","id","exampleSelect1",1,"form-select","mt-3"],["type","text","formControlName","email","placeholder","Email",1,"form-control","form-control-lg","mt-3"],["type","text","formControlName","password","placeholder","Password",1,"form-control","form-control-lg","mt-3"],[1,"mt-3"],["type","text","routerLink","/list-usuario",1,"btn","btn-secondary","btn-lg","me-3"],["type","submit",1,"btn","btn-success","btn-lg"],[1,"spinner-border","text-success","float-end"],[1,"badge","bg-danger"]],template:function(t,r){1&t&&(h._UZ(0,"app-nadvar"),h.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3"),h._uU(7,"Registrar usuario "),h.YNc(8,xB,1,0,"div",5),h.qZA(),h.YNc(9,NB,2,0,"span",6),h.TgZ(10,"form",7),h.NdJ("ngSubmit",function(){return r.agregarEditarUsuario()}),h.TgZ(11,"div",1)(12,"div",8),h._UZ(13,"input",9),h.qZA(),h.TgZ(14,"div",8),h._UZ(15,"input",10),h.qZA()(),h.TgZ(16,"select",11)(17,"option"),h._uU(18,"Divis\xf3n de inform\xe1tica"),h.qZA(),h.TgZ(19,"option"),h._uU(20,"Divis\xf3n de procesos"),h.qZA()(),h._UZ(21,"input",12),h.TgZ(22,"select",13)(23,"option"),h._uU(24,"Directivo"),h.qZA(),h.TgZ(25,"option"),h._uU(26,"Profesor"),h.qZA(),h.TgZ(27,"option"),h._uU(28,"Administrativo"),h.qZA()(),h._UZ(29,"input",14)(30,"input",15),h.TgZ(31,"div",16)(32,"button",17),h._uU(33," Volver "),h.qZA(),h.TgZ(34,"button",18),h._uU(35," Guardar "),h.qZA()()()()()()()()),2&t&&(h.xp6(8),h.Q6J("ngIf",r.loading),h.xp6(1),h.Q6J("ngIf",r.submitted&&r.createUsuario.invalid),h.xp6(1),h.Q6J("formGroup",r.createUsuario))},dependencies:[Nn,jg,RM,kM,LM,Zw,nb,_M,EM,tb,bT,$g]}),n})(),PB=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-inicio"]],decls:8,vars:0,consts:[[1,"container","mt-4"],[1,"card"],[1,"card-body","body-dark"],[1,"text-center","text-success"],["src","assets/tec.png",1,"max-width:100%","img-fluid","rounded-circle","mx-auto","d-block","mt-3"]],template:function(t,r){1&t&&(h._UZ(0,"app-nadvar"),h.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1",3),h._uU(5,"Bienvenido al proyecto TecRooms"),h.qZA(),h._UZ(6,"img",4),h.qZA()()(),h._UZ(7,"app-footer"))},dependencies:[$g,Sy]}),n})();function OB(n,e){1&n&&(h.TgZ(0,"h5",8),h._uU(1,"No hay datos para mostrar"),h.qZA())}const kB=function(n){return["/editSala/",n]};function FB(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"tr",9)(1,"td"),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td"),h._uU(6),h.qZA(),h.TgZ(7,"td"),h._uU(8),h.qZA(),h.TgZ(9,"td"),h._UZ(10,"i",10),h.TgZ(11,"i",11),h.NdJ("click",function(){const s=h.CHM(t).$implicit,u=h.oxw();return h.KtG(u.eliminarSalas(s.id))}),h.qZA()()()}if(2&n){const t=e.$implicit;h.xp6(2),h.Oqu(t.division),h.xp6(2),h.Oqu(t.nombre),h.xp6(2),h.Oqu(t.horario),h.xp6(2),h.Oqu(t.diasDisponibles),h.xp6(2),h.Q6J("routerLink",h.VKq(5,kB,t.id))}}let LB=(()=>{class n{constructor(t,r){this._salaService=t,this.toastr=r,this.salas=[]}ngOnInit(){this.getSala()}getSala(){this._salaService.getSala().subscribe(t=>{this.salas=[],t.forEach(r=>{this.salas.push({id:r.payload.doc.id,...r.payload.doc.data()})}),console.log(this.salas)})}eliminarSalas(t){this._salaService.eliminarSalas(t).then(()=>{console.log("sala eliminado con exito"),this.toastr.error("La sala fue eliminado con exito!","Sala eliminado",{positionClass:"toast-bottom-right"})}).catch(r=>{console.log(r)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_O),h.Y36(Iy))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-list-sala"]],decls:25,vars:2,consts:[[1,"container","mt-4"],[1,"card"],[1,"card-body"],[1,"h3"],["type","button","routerLink","/create-sala",1,"btn","float-end","btn-success","btno.lg"],["style","margin-top: 30px;",4,"ngIf"],[1,"table","table-dark","mt-5","table-striped","table-responsive"],["class","center",4,"ngFor","ngForOf"],[2,"margin-top","30px"],[1,"center"],[1,"fa-solid","fa-user-pen","fa-lg","text-info","p-3",3,"routerLink"],[1,"fa-solid","fa-trash","fa-lg","text-danger",3,"click"]],template:function(t,r){1&t&&(h._UZ(0,"app-nadvar"),h.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"span",3),h._uU(5,"Listado de salas "),h.qZA(),h.TgZ(6,"button",4),h._uU(7,"Agregar"),h.qZA(),h.YNc(8,OB,2,0,"h5",5),h.TgZ(9,"table",6)(10,"thead")(11,"tr")(12,"th"),h._uU(13,"Divisi\xf3n"),h.qZA(),h.TgZ(14,"th"),h._uU(15,"Nombre"),h.qZA(),h.TgZ(16,"th"),h._uU(17,"Horario"),h.qZA(),h.TgZ(18,"th"),h._uU(19,"Dias disponibles"),h.qZA(),h.TgZ(20,"th"),h._uU(21,"Funci\xf3n"),h.qZA()()(),h.TgZ(22,"tbody"),h.YNc(23,FB,12,7,"tr",7),h.qZA()()()()(),h._UZ(24,"app-footer")),2&t&&(h.xp6(8),h.Q6J("ngIf",0==r.salas.length),h.xp6(15),h.Q6J("ngForOf",r.salas))},dependencies:[Gs,Nn,jg,$g,Sy]}),n})();function VB(n,e){1&n&&(h.TgZ(0,"h5",8),h._uU(1,"No hay datos para mostrar"),h.qZA())}const UB=function(n){return["/editUsuario/",n]};function BB(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"tr",9)(1,"td"),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td"),h._uU(6),h.qZA(),h.TgZ(7,"td"),h._uU(8),h.qZA(),h.TgZ(9,"td"),h._uU(10),h.qZA(),h.TgZ(11,"td"),h._uU(12),h.qZA(),h.TgZ(13,"td"),h._UZ(14,"i",10),h.TgZ(15,"i",11),h.NdJ("click",function(){const s=h.CHM(t).$implicit,u=h.oxw();return h.KtG(u.eliminarUsuario(s.id))}),h.qZA()()()}if(2&n){const t=e.$implicit;h.xp6(2),h.Oqu(t.division),h.xp6(2),h.Oqu(t.matricula),h.xp6(2),h.Oqu(t.nombre),h.xp6(2),h.Oqu(t.apellido),h.xp6(2),h.Oqu(t.rol),h.xp6(2),h.Oqu(t.email),h.xp6(2),h.Q6J("routerLink",h.VKq(7,UB,t.id))}}let HB=(()=>{class n{constructor(t,r){this._UsuarioService=t,this.toastr=r,this.usuarios=[]}ngOnInit(){this.getUsuario()}getUsuario(){this._UsuarioService.getUsuario().subscribe(t=>{this.usuarios=[],t.forEach(r=>{this.usuarios.push({id:r.payload.doc.id,...r.payload.doc.data()})}),console.log(this.usuarios)})}eliminarUsuario(t){this._UsuarioService.eliminarUsuario(t).then(()=>{console.log("Usuario eliminado con exito"),this.toastr.error("El usuario fue eliminado con exito!","Usuario eliminado",{positionClass:"toast-bottom-right"})}).catch(r=>{console.log(r)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(RO),h.Y36(Iy))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-list-usuario"]],decls:29,vars:2,consts:[[1,"container","mt-4"],[1,"card"],[1,"card-body"],[1,"h3"],["type","button","routerLink","/create-usuario",1,"btn","float-end","btn-success","btno.lg"],["style","margin-top: 30px;",4,"ngIf"],[1,"table","table-dark","mt-5","table-striped","table-responsive"],["class","center",4,"ngFor","ngForOf"],[2,"margin-top","30px"],[1,"center"],[1,"fa-solid","fa-user-pen","fa-lg","text-info","p-3",3,"routerLink"],[1,"fa-solid","fa-trash","fa-lg","text-danger",3,"click"]],template:function(t,r){1&t&&(h._UZ(0,"app-nadvar"),h.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"span",3),h._uU(5,"Listado de usuarios "),h.qZA(),h.TgZ(6,"button",4),h._uU(7,"Agregar"),h.qZA(),h.YNc(8,VB,2,0,"h5",5),h.TgZ(9,"table",6)(10,"thead")(11,"tr")(12,"th"),h._uU(13,"Divisi\xf3n"),h.qZA(),h.TgZ(14,"th"),h._uU(15,"Matricula"),h.qZA(),h.TgZ(16,"th"),h._uU(17,"Nombre"),h.qZA(),h.TgZ(18,"th"),h._uU(19,"Apellido"),h.qZA(),h.TgZ(20,"th"),h._uU(21,"Rol"),h.qZA(),h.TgZ(22,"th"),h._uU(23,"Email"),h.qZA(),h.TgZ(24,"th"),h._uU(25,"funcion"),h.qZA()()(),h.TgZ(26,"tbody"),h.YNc(27,BB,16,9,"tr",7),h.qZA()()()()(),h._UZ(28,"app-footer")),2&t&&(h.xp6(8),h.Q6J("ngIf",0==r.usuarios.length),h.xp6(19),h.Q6J("ngForOf",r.usuarios))},dependencies:[Gs,Nn,jg,$g,Sy]}),n})();var jB={className:!0,colSpan:!0,rowSpan:!0},$B={"<tr":"tbody","<td":"tr"};function ss(n,e,t){var r=document.createElement(n);if(e)for(var i in e)"style"===i?Ri(r,e[i]):jB[i]?r[i]=e[i]:r.setAttribute(i,e[i]);return"string"==typeof t?r.innerHTML=t:null!=t&&Hl(r,t),r}function Cy(n){n=n.trim();var e=document.createElement(NO(n));return e.innerHTML=n,e.firstChild}function HM(n){return Array.prototype.slice.call(function GB(n){n=n.trim();var e=document.createElement(NO(n));return e.innerHTML=n,e.childNodes}(n))}function NO(n){return $B[n.substr(0,3)]||"div"}function Hl(n,e){for(var t=jM(e),r=0;r<t.length;r++)n.appendChild(t[r])}function ST(n,e){for(var t=jM(e),r=n.firstChild||null,i=0;i<t.length;i++)n.insertBefore(t[i],r)}function zB(n,e){for(var t=jM(e),r=n.nextSibling||null,i=0;i<t.length;i++)n.parentNode.insertBefore(t[i],r)}function jM(n){return"string"==typeof n?HM(n):n instanceof Node?[n]:Array.prototype.slice.call(n)}function Ls(n){n.parentNode&&n.parentNode.removeChild(n)}var qB=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.msMatchesSelector,WB=Element.prototype.closest||function(n){var e=this;if(!document.documentElement.contains(e))return null;do{if(TT(e,n))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null};function Go(n,e){return WB.call(n,e)}function TT(n,e){return qB.call(n,e)}function os(n,e){for(var t=n instanceof HTMLElement?[n]:n,r=[],i=0;i<t.length;i++)for(var s=t[i].querySelectorAll(e),u=0;u<s.length;u++)r.push(s[u]);return r}function PO(n,e){for(var t=n instanceof HTMLElement?[n]:n,r=[],i=0;i<t.length;i++)for(var s=t[i].children,u=0;u<s.length;u++){var d=s[u];(!e||TT(d,e))&&r.push(d)}return r}var ZB=/(top|left|right|bottom|width|height)$/i;function Ri(n,e){for(var t in e)OO(n,t,e[t])}function OO(n,e,t){n.style[e]=null==t?"":"number"==typeof t&&ZB.test(e)?t+"px":t}function KB(n,e){return n.left>=e.left&&n.left<e.right&&n.top>=e.top&&n.top<e.bottom}function kO(n,e){var t={left:Math.max(n.left,e.left),right:Math.min(n.right,e.right),top:Math.max(n.top,e.top),bottom:Math.min(n.bottom,e.bottom)};return t.left<t.right&&t.top<t.bottom&&t}var $M=null;function FO(n){return n=Math.max(0,n),Math.round(n)}function LO(n,e){void 0===e&&(e=!1);var t=window.getComputedStyle(n),r=parseInt(t.borderLeftWidth,10)||0,i=parseInt(t.borderRightWidth,10)||0,s=parseInt(t.borderTopWidth,10)||0,u=parseInt(t.borderBottomWidth,10)||0,d=FO(n.offsetWidth-n.clientWidth-r-i),y={borderLeft:r,borderRight:i,borderTop:s,borderBottom:u,scrollbarBottom:FO(n.offsetHeight-n.clientHeight-s-u),scrollbarLeft:0,scrollbarRight:0};return function JB(){return null===$M&&($M=function e2(){var n=ss("div",{style:{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}},"<div></div>");document.body.appendChild(n);var t=n.firstChild.getBoundingClientRect().left>n.getBoundingClientRect().left;return Ls(n),t}()),$M}()&&"rtl"===t.direction?y.scrollbarLeft=d:y.scrollbarRight=d,e&&(y.paddingLeft=parseInt(t.paddingLeft,10)||0,y.paddingRight=parseInt(t.paddingRight,10)||0,y.paddingTop=parseInt(t.paddingTop,10)||0,y.paddingBottom=parseInt(t.paddingBottom,10)||0),y}function VO(n,e){void 0===e&&(e=!1);var t=qg(n),r=LO(n,e),i={left:t.left+r.borderLeft+r.scrollbarLeft,right:t.right-r.borderRight-r.scrollbarRight,top:t.top+r.borderTop,bottom:t.bottom-r.borderBottom-r.scrollbarBottom};return e&&(i.left+=r.paddingLeft,i.right-=r.paddingRight,i.top+=r.paddingTop,i.bottom-=r.paddingBottom),i}function qg(n){var e=n.getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,right:e.right+window.pageXOffset,bottom:e.bottom+window.pageYOffset}}function UO(n){return n.getBoundingClientRect().height+BO(n)}function BO(n){var e=window.getComputedStyle(n);return parseInt(e.marginTop,10)+parseInt(e.marginBottom,10)}function HO(n){for(var e=[];n instanceof HTMLElement;){var t=window.getComputedStyle(n);if("fixed"===t.position)break;/(auto|scroll)/.test(t.overflow+t.overflowY+t.overflowX)&&e.push(n),n=n.parentNode}return e}function IT(n){n.preventDefault()}function CT(n,e,t,r){function i(s){var u=Go(s.target,t);u&&r.call(u,s,u)}return n.addEventListener(e,i),function(){n.removeEventListener(e,i)}}var jO=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"],$O=["sun","mon","tue","wed","thu","fri","sat"];function GO(n,e){var t=Yf(n);return t[2]+=7*e,co(t)}function zo(n,e){var t=Yf(n);return t[2]+=e,co(t)}function sb(n,e){var t=Yf(n);return t[6]+=e,co(t)}function Kf(n,e){return(e.valueOf()-n.valueOf())/864e5}function AT(n,e){return Qf(n)===Qf(e)?Math.round(Kf(n,e)):null}function Pr(n){return co([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()])}function GM(n,e,t,r){var i=co([e,0,1+g2(e,t,r)]),s=Pr(n),u=Math.round(Kf(i,s));return Math.floor(u/7)+1}function g2(n,e,t){var r=7+e-t;return-(7+co([n,0,r]).getUTCDay()-e)%7+r-1}function zO(n){return[n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()]}function qO(n){return new Date(n[0],n[1]||0,n[2]??1,n[3]||0,n[4]||0,n[5]||0)}function Yf(n){return[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()]}function co(n){return 1===n.length&&(n=n.concat([0])),new Date(Date.UTC.apply(Date,n))}function WO(n){return!isNaN(n.valueOf())}function Qf(n){return 1e3*n.getUTCHours()*60*60+1e3*n.getUTCMinutes()*60+1e3*n.getUTCSeconds()+n.getUTCMilliseconds()}var ZO=["years","months","days","milliseconds"],m2=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function hn(n,e){var t;return"string"==typeof n?function v2(n){var e=m2.exec(n);if(e){var t=e[1]?-1:1;return{years:0,months:0,days:t*(e[2]?parseInt(e[2],10):0),milliseconds:t*(60*(e[3]?parseInt(e[3],10):0)*60*1e3+60*(e[4]?parseInt(e[4],10):0)*1e3+1e3*(e[5]?parseInt(e[5],10):0)+(e[6]?parseInt(e[6],10):0))}}return null}(n):"object"==typeof n&&n?KO(n):"number"==typeof n?KO(((t={})[e||"milliseconds"]=n,t)):null}function KO(n){return{years:n.years||n.year||0,months:n.months||n.month||0,days:(n.days||n.day||0)+7*zM(n),milliseconds:60*(n.hours||n.hour||0)*60*1e3+60*(n.minutes||n.minute||0)*1e3+1e3*(n.seconds||n.second||0)+(n.milliseconds||n.millisecond||n.ms||0)}}function zM(n){return n.weeks||n.week||0}function qM(n,e){return n.years===e.years&&n.months===e.months&&n.days===e.days&&n.milliseconds===e.milliseconds}function WM(n,e){return{years:n.years+e.years,months:n.months+e.months,days:n.days+e.days,milliseconds:n.milliseconds+e.milliseconds}}function Ay(n){return jl(n)/864e5}function jl(n){return 31536e6*n.years+2592e6*n.months+864e5*n.days+n.milliseconds}function ZM(n,e){for(var t=null,r=0;r<ZO.length;r++){var i=ZO[r];if(e[i]){var s=n[i]/e[i];if(!xT(s)||null!==t&&t!==s)return null;t=s}else if(n[i])return null}return t}function KM(n,e){var t=n.milliseconds;if(t){if(t%1e3!=0)return{unit:"millisecond",value:t};if(t%6e4!=0)return{unit:"second",value:t/1e3};if(t%36e5!=0)return{unit:"minute",value:t/6e4};if(t)return{unit:"hour",value:t/36e5}}return n.days?e||n.days%7!=0?{unit:"day",value:n.days}:{unit:"week",value:n.days/7}:n.months?{unit:"month",value:n.months}:n.years?{unit:"year",value:n.years}:{unit:"millisecond",value:0}}function YO(n,e){e.left&&Ri(n,{borderLeftWidth:1,marginLeft:e.left-1}),e.right&&Ri(n,{borderRightWidth:1,marginRight:e.right-1})}function QO(n){Ri(n,{marginLeft:"",marginRight:"",borderLeftWidth:"",borderRightWidth:""})}function MT(){document.body.classList.add("fc-not-allowed")}function RT(){document.body.classList.remove("fc-not-allowed")}function XO(n,e,t){var r=Math.floor(e/n.length),i=Math.floor(e-r*(n.length-1)),s=[],u=[],d=[],p=0;JO(n),n.forEach(function(y,b){var I=b===n.length-1?i:r,x=y.getBoundingClientRect().height,P=x+BO(y);P<I?(s.push(y),u.push(P),d.push(x)):p+=P}),t&&(e-=p,r=Math.floor(e/s.length),i=Math.floor(e-r*(s.length-1))),s.forEach(function(y,b){var I=b===s.length-1?i:r,x=u[b];x<I&&(y.style.height=I-(x-d[b])+"px")})}function JO(n){n.forEach(function(e){e.style.height=""})}function ek(n){var e=0;return n.forEach(function(t){var r=t.firstChild;if(r instanceof HTMLElement){var i=r.getBoundingClientRect().width;i>e&&(e=i)}}),e++,n.forEach(function(t){t.style.width=e+"px"}),e}function tk(n,e){var t={position:"relative",left:-1};Ri(n,t),Ri(e,t);var r=n.getBoundingClientRect().height-e.getBoundingClientRect().height,i={position:"",left:""};return Ri(n,i),Ri(e,i),r}function nk(n,e,t){var r,i;for(r=0;r<t.length;r++)if(i=C2(n,e,t[r]))return i;return 0}function C2(n,e,t){return t.func?t.func(n,e):function A2(n,e){return n||e?null==e?-1:null==n?1:"string"==typeof n||"string"==typeof e?String(n).localeCompare(String(e)):n-e:0}(n[t.field],e[t.field])*(t.order||1)}function YM(n){return n.charAt(0).toUpperCase()+n.slice(1)}function My(n,e){var t=String(n);return"000".substr(0,e-t.length)+t}function M2(n,e){return n-e}function xT(n){return n%1==0}function rk(n,e,t){if("function"==typeof n&&(n=[n]),n){var r=void 0,i=void 0;for(r=0;r<n.length;r++)i=n[r].apply(e,t)||i;return i}}function QM(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=0;t<n.length;t++)if(void 0!==n[t])return n[t]}function ik(n,e){var t,r,i,s,u,d=function(){var p=(new Date).valueOf()-s;p<e?t=setTimeout(d,e-p):(t=null,u=n.apply(i,r),i=r=null)};return function(){return i=this,r=arguments,s=(new Date).valueOf(),t||(t=setTimeout(d,e)),u}}function Xf(n,e,t,r){void 0===t&&(t={});var i={};for(var s in e){var u=e[s];i[s]=void 0!==n[s]?u===Function?"function"==typeof n[s]?n[s]:null:u?u(n[s]):n[s]:void 0!==t[s]?t[s]:u===String?"":u&&u!==Number&&u!==Boolean&&u!==Function?u(null):null}if(r)for(var s in n)void 0===e[s]&&(r[s]=n[s]);return i}function sk(n){var e=Math.floor(Kf(n.start,n.end))||1,t=Pr(n.start);return{start:t,end:zo(t,e)}}function XM(n,e){void 0===e&&(e=hn(0));var t=null,r=null;if(n.end){r=Pr(n.end);var i=n.end.valueOf()-r.valueOf();i&&i>=jl(e)&&(r=zo(r,1))}return n.start&&(t=Pr(n.start),r&&r<=t&&(r=zo(t,1))),{start:t,end:r}}function Ry(n,e,t,r){return"year"===r?hn(t.diffWholeYears(n,e),"year"):"month"===r?hn(t.diffWholeMonths(n,e),"month"):function u2(n,e){var t=Pr(n),r=Pr(e);return{years:0,months:0,days:Math.round(Kf(t,r)),milliseconds:e.valueOf()-r.valueOf()-(n.valueOf()-t.valueOf())}}(n,e)}var JM=function(n,e){return(JM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function ka(n,e){function t(){this.constructor=n}JM(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var kt=function(){return kt=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},kt.apply(this,arguments)};function N2(n,e,t,r,i){var u=i[n.recurringDef.typeId].expand(n.recurringDef.typeData,{start:r.subtract(t.start,e),end:t.end},r);return n.allDay&&(u=u.map(Pr)),u}var ok=Object.prototype.hasOwnProperty;function eR(n,e){var r,i,s,u,d,p,t={};if(e)for(r=0;r<e.length;r++){for(i=e[r],s=[],u=n.length-1;u>=0;u--)if("object"==typeof(d=n[u][i])&&d)s.unshift(d);else if(void 0!==d){t[i]=d;break}s.length&&(t[i]=eR(s))}for(r=n.length-1;r>=0;r--)for(i in p=n[r])i in t||(t[i]=p[i]);return t}function Wg(n,e){var t={};for(var r in n)e(n[r],r)&&(t[r]=n[r]);return t}function bc(n,e){var t={};for(var r in n)t[r]=e(n[r],r);return t}function ak(n){for(var e={},t=0,r=n;t<r.length;t++)e[r[t]]=!0;return e}function lk(n){var e=[];for(var t in n)e.push(n[t]);return e}function P2(n,e){for(var t in n)if(ok.call(n,t)&&!(t in e))return!1;for(var t in e)if(ok.call(e,t)&&n[t]!==e[t])return!1;return!0}function NT(n,e,t,r){for(var i={defs:{},instances:{}},s=0,u=n;s<u.length;s++){var p=Nk(u[s],e,t,r);p&&ob(p,i)}return i}function ob(n,e){return void 0===e&&(e={defs:{},instances:{}}),e.defs[n.def.defId]=n.def,n.instance&&(e.instances[n.instance.instanceId]=n.instance),e}function xy(n,e,t){var r=t.dateEnv,i=n.defs,s=n.instances;for(var u in s=Wg(s,function(k){return!i[k.defId].recurringDef}),i){var d=i[u];if(d.recurringDef){var p=d.recurringDef.duration;p||(p=d.allDay?t.defaultAllDayEventDuration:t.defaultTimedEventDuration);for(var b=0,I=N2(d,p,e,t.dateEnv,t.pluginSystem.hooks.recurringTypes);b<I.length;b++){var x=I[b],P=jT(u,{start:x,end:r.add(x,p)});s[P.instanceId]=P}}}return{defs:i,instances:s}}function tR(n,e){var t=n.instances[e];if(t){var r=n.defs[t.defId],i=ab(n,function(s){return function O2(n,e){return Boolean(n.groupId&&n.groupId===e.groupId)}(r,s)});return i.defs[r.defId]=r,i.instances[t.instanceId]=t,i}return{defs:{},instances:{}}}function uk(n,e){var t;if(e){t=[];for(var r=0,i=n;r<i.length;r++){var s=i[r],u=e(s);u?t.push(u):null==u&&t.push(s)}}else t=n;return t}function PT(n,e){return{defs:kt({},n.defs,e.defs),instances:kt({},n.instances,e.instances)}}function ab(n,e){var t=Wg(n.defs,e),r=Wg(n.instances,function(i){return t[i.defId]});return{defs:t,instances:r}}function F2(n,e){var t=null,r=null;return n.start&&(t=e.createMarker(n.start)),n.end&&(r=e.createMarker(n.end)),!t&&!r||t&&r&&r<t?null:{start:t,end:r}}function ck(n,e){var i,s,t=[],r=e.start;for(n.sort(L2),i=0;i<n.length;i++)(s=n[i]).start>r&&t.push({start:r,end:s.start}),s.end>r&&(r=s.end);return r<e.end&&t.push({start:r,end:e.end}),t}function L2(n,e){return n.start.valueOf()-e.start.valueOf()}function Ny(n,e){var t=n.start,r=n.end,i=null;return null!==e.start&&(t=null===t?e.start:new Date(Math.max(t.valueOf(),e.start.valueOf()))),null!=e.end&&(r=null===r?e.end:new Date(Math.min(r.valueOf(),e.end.valueOf()))),(null===t||null===r||t<r)&&(i={start:t,end:r}),i}function OT(n,e){return(null===n.start?null:n.start.valueOf())===(null===e.start?null:e.start.valueOf())&&(null===n.end?null:n.end.valueOf())===(null===e.end?null:e.end.valueOf())}function nR(n,e){return(null===n.end||null===e.start||n.end>e.start)&&(null===n.start||null===e.end||n.start<e.end)}function kT(n,e){return(null===n.start||null!==e.start&&e.start>=n.start)&&(null===n.end||null!==e.end&&e.end<=n.end)}function Jf(n,e){return(null===n.start||e>=n.start)&&(null===n.end||e<n.end)}function dk(n,e){var r,t=n.length;if(t!==e.length)return!1;for(r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function Dn(n){var e,t;return function(){return(!e||!dk(e,arguments))&&(e=arguments,t=n.apply(this,arguments)),t}}var hk={week:3,separator:0,omitZeroMinute:0,meridiem:0,omitCommas:0},FT={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},LT=/\s*([ap])\.?m\.?/i,B2=/,/g,H2=/\s+/g,j2=/\u200e/g,$2=/UTC|GMT/,G2=function(){function n(e){var t={},r={},i=0;for(var s in e)s in hk?(r[s]=e[s],i=Math.max(hk[s],i)):(t[s]=e[s],s in FT&&(i=Math.max(FT[s],i)));this.standardDateProps=t,this.extendedSettings=r,this.severity=i,this.buildFormattingFunc=Dn(fk)}return n.prototype.format=function(e,t){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,t)(e)},n.prototype.formatRange=function(e,t,r){var s=this.standardDateProps,u=this.extendedSettings,d=function Y2(n,e,t){return t.getMarkerYear(n)!==t.getMarkerYear(e)?5:t.getMarkerMonth(n)!==t.getMarkerMonth(e)?4:t.getMarkerDay(n)!==t.getMarkerDay(e)?2:Qf(n)!==Qf(e)?1:0}(e.marker,t.marker,r.calendarSystem);if(!d)return this.format(e,r);var p=d;p>1&&("numeric"===s.year||"2-digit"===s.year)&&("numeric"===s.month||"2-digit"===s.month)&&("numeric"===s.day||"2-digit"===s.day)&&(p=1);var y=this.format(e,r),b=this.format(t,r);if(y===b)return y;var I=function Q2(n,e){var t={};for(var r in n)(!(r in FT)||FT[r]<=e)&&(t[r]=n[r]);return t}(s,p),x=fk(I,u,r),P=x(e),k=x(t),H=function X2(n,e,t,r){for(var i=0;i<n.length;){var s=n.indexOf(e,i);if(-1===s)break;for(var u=n.substr(0,s),d=n.substr(i=s+e.length),p=0;p<t.length;){var y=t.indexOf(r,p);if(-1===y)break;var b=t.substr(0,y),I=t.substr(p=y+r.length);if(u===b&&d===I)return{before:u,after:d}}}return null}(y,P,b,k),Y=u.separator||"";return H?H.before+P+Y+k+H.after:y+Y+b},n.prototype.getLargestUnit=function(){switch(this.severity){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";default:return"day"}},n}();function fk(n,e,t){var r=Object.keys(n).length;return 1===r&&"short"===n.timeZoneName?function(i){return rR(i.timeZoneOffset)}:0===r&&e.week?function(i){return function K2(n,e,t,r){var i=[];return"narrow"===r?i.push(e):"short"===r&&i.push(e," "),i.push(t.simpleNumberFormat.format(n)),t.options.isRtl&&i.reverse(),i.join("")}(t.computeWeekNumber(i.marker),t.weekLabel,t.locale,e.week)}:function z2(n,e,t){n=kt({},n),e=kt({},e),function q2(n,e){n.timeZoneName&&(n.hour||(n.hour="2-digit"),n.minute||(n.minute="2-digit")),"long"===n.timeZoneName&&(n.timeZoneName="short"),e.omitZeroMinute&&(n.second||n.millisecond)&&delete e.omitZeroMinute}(n,e),n.timeZone="UTC";var i,r=new Intl.DateTimeFormat(t.locale.codes,n);if(e.omitZeroMinute){var s=kt({},n);delete s.minute,i=new Intl.DateTimeFormat(t.locale.codes,s)}return function(u){var d=u.marker;return function W2(n,e,t,r,i){return n=n.replace(j2,""),"short"===t.timeZoneName&&(n=function Z2(n,e){var t=!1;return n=n.replace($2,function(){return t=!0,e}),t||(n+=" "+e),n}(n,"UTC"===i.timeZone||null==e.timeZoneOffset?"UTC":rR(e.timeZoneOffset))),r.omitCommas&&(n=n.replace(B2,"").trim()),r.omitZeroMinute&&(n=n.replace(":00","")),!1===r.meridiem?n=n.replace(LT,"").trim():"narrow"===r.meridiem?n=n.replace(LT,function(s,u){return u.toLocaleLowerCase()}):"short"===r.meridiem?n=n.replace(LT,function(s,u){return u.toLocaleLowerCase()+"m"}):"lowercase"===r.meridiem&&(n=n.replace(LT,function(s){return s.toLocaleLowerCase()})),(n=n.replace(H2," ")).trim()}((i&&!d.getUTCMinutes()?i:r).format(d),u,n,e,t)}}(n,e,t)}var J2=function(){function n(e,t){this.cmdStr=e,this.separator=t}return n.prototype.format=function(e,t){return t.cmdFormatter(this.cmdStr,VT(e,null,t,this.separator))},n.prototype.formatRange=function(e,t,r){return r.cmdFormatter(this.cmdStr,VT(e,t,r,this.separator))},n}(),eH=function(){function n(e){this.func=e}return n.prototype.format=function(e,t){return this.func(VT(e,null,t))},n.prototype.formatRange=function(e,t,r){return this.func(VT(e,t,r))},n}();function Vs(n,e){return"object"==typeof n&&n?("string"==typeof e&&(n=kt({separator:e},n)),new G2(n)):"string"==typeof n?new J2(n,e):"function"==typeof n?new eH(n):void 0}function nH(n){return My(n.getUTCHours(),2)+":"+My(n.getUTCMinutes(),2)+":"+My(n.getUTCSeconds(),2)}function rR(n,e){void 0===e&&(e=!1);var t=n<0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),s=Math.round(r%60);return e?t+My(i,2)+":"+My(s,2):"GMT"+t+i+(s?":"+My(s,2):"")}function VT(n,e,t,r){var i=pk(n,t.calendarSystem);return{date:i,start:i,end:e?pk(e,t.calendarSystem):null,timeZone:t.timeZone,localeCodes:t.locale.codes,separator:r}}function pk(n,e){var t=e.markerToArray(n.marker);return{marker:n.marker,timeZoneOffset:n.timeZoneOffset,array:t,year:t[0],month:t[1],day:t[2],hour:t[3],minute:t[4],second:t[5],millisecond:t[6]}}var Py=function(){function n(e,t){this.calendar=e,this.internalEventSource=t}return n.prototype.remove=function(){this.calendar.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})},n.prototype.refetch=function(){this.calendar.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId]})},Object.defineProperty(n.prototype,"id",{get:function(){return this.internalEventSource.publicId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this.internalEventSource.meta.url},enumerable:!0,configurable:!0}),n}(),Ir=function(){function n(e,t,r){this._calendar=e,this._def=t,this._instance=r||null}return n.prototype.setProp=function(e,t){var r,i;if(!(e in Rk))if(e in BT)"function"==typeof BT[e]&&(t=BT[e](t)),this.mutate({standardProps:(r={},r[e]=t,r)});else if(e in ub){var s=void 0;"function"==typeof ub[e]&&(t=ub[e](t)),"color"===e?s={backgroundColor:t,borderColor:t}:"editable"===e?s={startEditable:t,durationEditable:t}:((i={})[e]=t,s=i),this.mutate({standardProps:{ui:s}})}},n.prototype.setExtendedProp=function(e,t){var r;this.mutate({extendedProps:(r={},r[e]=t,r)})},n.prototype.setStart=function(e,t){void 0===t&&(t={});var r=this._calendar.dateEnv,i=r.createMarker(e);if(i&&this._instance){var u=Ry(this._instance.range.start,i,r,t.granularity);this.mutate(t.maintainDuration?{datesDelta:u}:{startDelta:u})}},n.prototype.setEnd=function(e,t){void 0===t&&(t={});var i,r=this._calendar.dateEnv;if((null==e||(i=r.createMarker(e)))&&this._instance)if(i){var s=Ry(this._instance.range.end,i,r,t.granularity);this.mutate({endDelta:s})}else this.mutate({standardProps:{hasEnd:!1}})},n.prototype.setDates=function(e,t,r){void 0===r&&(r={});var d,i=this._calendar.dateEnv,s={allDay:r.allDay},u=i.createMarker(e);if(u&&(null==t||(d=i.createMarker(t)))&&this._instance){var p=this._instance.range;!0===r.allDay&&(p=sk(p));var y=Ry(p.start,u,i,r.granularity);if(d){var b=Ry(p.end,d,i,r.granularity);qM(y,b)?this.mutate({datesDelta:y,standardProps:s}):this.mutate({startDelta:y,endDelta:b,standardProps:s})}else s.hasEnd=!1,this.mutate({datesDelta:y,standardProps:s})}},n.prototype.moveStart=function(e){var t=hn(e);t&&this.mutate({startDelta:t})},n.prototype.moveEnd=function(e){var t=hn(e);t&&this.mutate({endDelta:t})},n.prototype.moveDates=function(e){var t=hn(e);t&&this.mutate({datesDelta:t})},n.prototype.setAllDay=function(e,t){void 0===t&&(t={});var r={allDay:e},i=t.maintainDuration;null==i&&(i=this._calendar.opt("allDayMaintainDuration")),this._def.allDay!==e&&(r.hasEnd=i),this.mutate({standardProps:r})},n.prototype.formatRange=function(e){var t=this._calendar.dateEnv,r=this._instance,i=Vs(e,this._calendar.opt("defaultRangeSeparator"));return this._def.hasEnd?t.formatRange(r.range.start,r.range.end,i,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):t.format(r.range.start,i,{forcedTzo:r.forcedStartTzo})},n.prototype.mutate=function(e){var t=this._def,r=this._instance;if(r){this._calendar.dispatch({type:"MUTATE_EVENTS",instanceId:r.instanceId,mutation:e,fromApi:!0});var i=this._calendar.state.eventStore;this._def=i.defs[t.defId],this._instance=i.instances[r.instanceId]}},n.prototype.remove=function(){this._calendar.dispatch({type:"REMOVE_EVENT_DEF",defId:this._def.defId})},Object.defineProperty(n.prototype,"source",{get:function(){var e=this._def.sourceId;return e?new Py(this._calendar,this._calendar.state.eventSources[e]):null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"start",{get:function(){return this._instance?this._calendar.dateEnv.toDate(this._instance.range.start):null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"end",{get:function(){return this._instance&&this._def.hasEnd?this._calendar.dateEnv.toDate(this._instance.range.end):null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this._def.publicId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"groupId",{get:function(){return this._def.groupId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"allDay",{get:function(){return this._def.allDay},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this._def.title},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._def.url},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rendering",{get:function(){return this._def.rendering},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"startEditable",{get:function(){return this._def.ui.startEditable},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"durationEditable",{get:function(){return this._def.ui.durationEditable},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"constraint",{get:function(){return this._def.ui.constraints[0]||null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"overlap",{get:function(){return this._def.ui.overlap},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"allow",{get:function(){return this._def.ui.allows[0]||null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"backgroundColor",{get:function(){return this._def.ui.backgroundColor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"borderColor",{get:function(){return this._def.ui.borderColor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textColor",{get:function(){return this._def.ui.textColor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"classNames",{get:function(){return this._def.ui.classNames},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extendedProps",{get:function(){return this._def.extendedProps},enumerable:!0,configurable:!0}),n}();function iR(n,e,t,r){var i={},s={},u={},d=[],p=[],y=UT(n.defs,e);for(var b in n.defs)"inverse-background"===(I=n.defs[b]).rendering&&(I.groupId?(i[I.groupId]=[],u[I.groupId]||(u[I.groupId]=I)):s[b]=[]);for(var x in n.instances){var P=n.instances[x],k=y[(I=n.defs[P.defId]).defId],H=P.range,Y=!I.allDay&&r?XM(H,r):H,me=Ny(Y,t);me&&("inverse-background"===I.rendering?I.groupId?i[I.groupId].push(me):s[P.defId].push(me):("background"===I.rendering?d:p).push({def:I,ui:k,instance:P,range:me,isStart:Y.start&&Y.start.valueOf()===me.start.valueOf(),isEnd:Y.end&&Y.end.valueOf()===me.end.valueOf()}))}for(var Ne in i)for(var et=0,Je=ck(i[Ne],t);et<Je.length;et++){var I;d.push({def:I=u[Ne],ui:k=y[I.defId],instance:null,range:Je[et],isStart:!1,isEnd:!1})}for(var b in s)for(var on=0,Qn=ck(s[b],t);on<Qn.length;on++)d.push({def:n.defs[b],ui:y[b],instance:null,range:Qn[on],isStart:!1,isEnd:!1});return{bg:d,fg:p}}function gk(n,e,t){var r=n.calendar,i=n.view;r.hasPublicHandlers("eventRender")&&(e=e.filter(function(p){var y=r.publiclyTrigger("eventRender",[{event:new Ir(r,p.eventRange.def,p.eventRange.instance),isMirror:t,isStart:p.isStart,isEnd:p.isEnd,el:p.el,view:i}]);return!1!==y&&(y&&!0!==y&&(p.el=y),!0)}));for(var s=0,u=e;s<u.length;s++){var d=u[s];iH(d.el,d)}return e}function iH(n,e){n.fcSeg=e}function lb(n){return n.fcSeg||null}function UT(n,e){return bc(n,function(t){return mk(t,e)})}function mk(n,e){var t=[];return e[""]&&t.push(e[""]),e[n.defId]&&t.push(e[n.defId]),t.push(n.ui),Mk(t)}function vk(n,e,t){var r=n.calendar,i=n.view;if(r.hasPublicHandlers("eventPositioned"))for(var s=0,u=e;s<u.length;s++){var d=u[s];r.publiclyTriggerAfterSizing("eventPositioned",[{event:new Ir(r,d.eventRange.def,d.eventRange.instance),isMirror:t,isStart:d.isStart,isEnd:d.isEnd,el:d.el,view:i}])}r.state.eventSourceLoadingLevel||(r.afterSizingTriggers._eventsPositioned=[null])}function yk(n,e,t){for(var r=n.calendar,i=n.view,s=0,u=e;s<u.length;s++)r.trigger("eventElRemove",(d=u[s]).el);if(r.hasPublicHandlers("eventDestroy"))for(var p=0,y=e;p<y.length;p++){var d;r.publiclyTrigger("eventDestroy",[{event:new Ir(r,(d=y[p]).eventRange.def,d.eventRange.instance),isMirror:t,el:d.el,view:i}])}}function _k(n,e,t){for(var i=n.view,u=t.startEditable,d=0,p=n.calendar.pluginSystem.hooks.isDraggableTransformers;d<p.length;d++)u=(0,p[d])(u,e,t,i);return u}function Ek(n,e,t){return t.durationEditable&&n.options.eventResizableFromStart}function wk(n,e,t){return t.durationEditable}function sR(n,e,t,r){var i=UT(n.defs,e),s={defs:{},instances:{}};for(var u in n.defs)s.defs[u]=sH(n.defs[u],i[u],t,r.pluginSystem.hooks.eventDefMutationAppliers,r);for(var p in n.instances){var y=n.instances[p];s.instances[p]=oH(y,s.defs[y.defId],i[y.defId],t,r)}return s}function sH(n,e,t,r,i){var s=t.standardProps||{};null==s.hasEnd&&e.durationEditable&&(t.startDelta||t.endDelta)&&(s.hasEnd=!0);var u=kt({},n,s,{ui:kt({},n.ui,s.ui)});t.extendedProps&&(u.extendedProps=kt({},u.extendedProps,t.extendedProps));for(var d=0,p=r;d<p.length;d++)(0,p[d])(u,t,i);return!u.hasEnd&&i.opt("forceEventDuration")&&(u.hasEnd=!0),u}function oH(n,e,t,r,i){var s=i.dateEnv,u=r.standardProps&&!0===r.standardProps.allDay,d=r.standardProps&&!1===r.standardProps.hasEnd,p=kt({},n);return u&&(p.range=sk(p.range)),r.datesDelta&&t.startEditable&&(p.range={start:s.add(p.range.start,r.datesDelta),end:s.add(p.range.end,r.datesDelta)}),r.startDelta&&t.durationEditable&&(p.range={start:s.add(p.range.start,r.startDelta),end:p.range.end}),r.endDelta&&t.durationEditable&&(p.range={start:p.range.start,end:s.add(p.range.end,r.endDelta)}),d&&(p.range={start:p.range.start,end:i.getDefaultEventEnd(e.allDay,p.range.start)}),e.allDay&&(p.range={start:Pr(p.range.start),end:Pr(p.range.end)}),p.range.end<p.range.start&&(p.range.end=i.getDefaultEventEnd(e.allDay,p.range.start)),p}function aH(n,e,t,r,i){switch(e.type){case"RECEIVE_EVENTS":return function lH(n,e,t,r,i,s){if(e&&t===e.latestFetchId){var u=NT(function k2(n,e,t){var r=t.opt("eventDataTransform"),i=e?e.eventDataTransform:null;return i&&(n=uk(n,i)),r&&(n=uk(n,r)),n}(i,e,s),e.sourceId,s);return r&&(u=xy(u,r,s)),PT(bk(n,e.sourceId),u)}return n}(n,t[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,i);case"ADD_EVENTS":return function uH(n,e,t,r){return t&&(e=xy(e,t,r)),PT(n,e)}(n,e.eventStore,r?r.activeRange:null,i);case"MERGE_EVENTS":return PT(n,e.eventStore);case"PREV":case"NEXT":case"SET_DATE":case"SET_VIEW_TYPE":return r?xy(n,r.activeRange,i):n;case"CHANGE_TIMEZONE":return function cH(n,e,t){var r=n.defs,i=bc(n.instances,function(s){var u=r[s.defId];return u.allDay||u.recurringDef?s:kt({},s,{range:{start:t.createMarker(e.toDate(s.range.start,s.forcedStartTzo)),end:t.createMarker(e.toDate(s.range.end,s.forcedEndTzo))},forcedStartTzo:t.canComputeOffset?null:s.forcedStartTzo,forcedEndTzo:t.canComputeOffset?null:s.forcedEndTzo})});return{defs:r,instances:i}}(n,e.oldDateEnv,i.dateEnv);case"MUTATE_EVENTS":return function dH(n,e,t,r,i){var s=tR(n,e);return PT(n,s=sR(s,r?{"":{startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}}:i.eventUiBases,t,i))}(n,e.instanceId,e.mutation,e.fromApi,i);case"REMOVE_EVENT_INSTANCES":return Dk(n,e.instances);case"REMOVE_EVENT_DEF":return ab(n,function(s){return s.defId!==e.defId});case"REMOVE_EVENT_SOURCE":return bk(n,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return ab(n,function(s){return!s.sourceId});case"REMOVE_ALL_EVENTS":return{defs:{},instances:{}};case"RESET_EVENTS":return{defs:n.defs,instances:n.instances};default:return n}}function bk(n,e){return ab(n,function(t){return t.sourceId!==e})}function Dk(n,e){return{defs:n.defs,instances:Wg(n.instances,function(t){return!e[t.instanceId]})}}function Sk(n,e){return Tk({eventDrag:n},e)}function Tk(n,e){var t=e.view,r=kt({businessHours:t?t.props.businessHours:{defs:{},instances:{}},dateSelection:"",eventStore:e.state.eventStore,eventUiBases:e.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},n);return(e.pluginSystem.hooks.isPropsValid||fH)(r,e)}function fH(n,e,t,r){return void 0===t&&(t={}),!(n.eventDrag&&!function pH(n,e,t,r){var i=n.eventDrag,s=i.mutatedEvents,u=s.defs,d=s.instances,p=UT(u,i.isEvent?n.eventUiBases:{"":e.selectionConfig});r&&(p=bc(p,r));var y=Dk(n.eventStore,i.affectedEvents.instances),b=y.defs,I=y.instances,x=UT(b,n.eventUiBases);for(var P in d){var k=d[P],H=k.range,Y=p[k.defId],me=u[k.defId];if(!Ik(Y.constraints,H,y,n.businessHours,e))return!1;var Ne=e.opt("eventOverlap");for(var Oe in"function"!=typeof Ne&&(Ne=null),I){var ke=I[Oe];if(nR(H,ke.range)&&(!1===x[ke.defId].overlap&&i.isEvent||!1===Y.overlap||Ne&&!Ne(new Ir(e,b[ke.defId],ke),new Ir(e,me,k))))return!1}for(var Je=e.state.eventStore,Et=0,on=Y.allows;Et<on.length;Et++){var as,Qn=on[Et],ir=kt({},t,{range:k.range,allDay:me.allDay}),$l=Je.defs[me.defId];if(as=$l?new Ir(e,$l,Je.instances[P]):new Ir(e,me),!Qn(e.buildDateSpanApi(ir),as))return!1}}return!0}(n,e,t,r)||n.dateSelection&&!function gH(n,e,t,r){var i=n.eventStore,s=i.defs,u=i.instances,d=n.dateSelection,p=d.range,y=e.selectionConfig;if(r&&(y=r(y)),!Ik(y.constraints,p,i,n.businessHours,e))return!1;var b=e.opt("selectOverlap");for(var I in"function"!=typeof b&&(b=null),u){var x=u[I];if(nR(p,x.range)&&(!1===y.overlap||b&&!b(new Ir(e,s[x.defId],x))))return!1}for(var P=0,k=y.allows;P<k.length;P++){var H=k[P],Y=kt({},t,d);if(!H(e.buildDateSpanApi(Y),null))return!1}return!0}(n,e,t,r))}function Ik(n,e,t,r,i){for(var s=0,u=n;s<u.length;s++)if(!vH(mH(u[s],e,t,r,i),e))return!1;return!0}function mH(n,e,t,r,i){return"businessHours"===n?oR(xy(r,e,i)):"string"==typeof n?oR(ab(t,function(s){return s.groupId===n})):"object"==typeof n&&n?oR(xy(n,e,i)):[]}function oR(n){var e=n.instances,t=[];for(var r in e)t.push(e[r].range);return t}function vH(n,e){for(var t=0,r=n;t<r.length;t++)if(kT(r[t],e))return!0;return!1}function xi(n){return(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function aR(n){var e=[];for(var t in n){var r=n[t];null!=r&&""!==r&&e.push(t+":"+r)}return e.join(";")}function Ck(n){return Array.isArray(n)?n:"string"==typeof n?n.split(/\s+/):[]}var ub={editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:null,overlap:null,allow:null,className:Ck,classNames:Ck,color:String,backgroundColor:String,borderColor:String,textColor:String};function lR(n,e,t){var r=Xf(n,ub,{},t),i=function yH(n,e){return Array.isArray(n)?NT(n,"",e,!0):"object"==typeof n&&n?NT([n],"",e,!0):null!=n?String(n):null}(r.constraint,e);return{startEditable:null!=r.startEditable?r.startEditable:r.editable,durationEditable:null!=r.durationEditable?r.durationEditable:r.editable,constraints:null!=i?[i]:[],overlap:r.overlap,allows:null!=r.allow?[r.allow]:[],backgroundColor:r.backgroundColor||r.color,borderColor:r.borderColor||r.color,textColor:r.textColor,classNames:r.classNames.concat(r.className)}}function Ak(n,e,t,r){var i={},s={};for(var u in ub){var d=n+YM(u);i[u]=e[d],s[d]=!0}if("event"===n&&(i.editable=e.editable),r)for(var u in e)s[u]||(r[u]=e[u]);return lR(i,t)}var EH={startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function Mk(n){return n.reduce(wH,EH)}function wH(n,e){return{startEditable:null!=e.startEditable?e.startEditable:n.startEditable,durationEditable:null!=e.durationEditable?e.durationEditable:n.durationEditable,constraints:n.constraints.concat(e.constraints),overlap:"boolean"==typeof e.overlap?e.overlap:n.overlap,allows:n.allows.concat(e.allows),backgroundColor:e.backgroundColor||n.backgroundColor,borderColor:e.borderColor||n.borderColor,textColor:e.textColor||n.textColor,classNames:n.classNames.concat(e.classNames)}}var BT={id:String,groupId:String,title:String,url:String,rendering:String,extendedProps:null},Rk={start:null,date:null,end:null,allDay:null},xk=0;function Nk(n,e,t,r){var i=function TH(n,e){var t=null;return n&&(t=e.state.eventSources[n].allDayDefault),null==t&&(t=e.opt("allDayDefault")),t}(e,t),s={},u=function x2(n,e,t,r,i){for(var s=0;s<r.length;s++){var u={},d=r[s].parse(n,u,t);if(d){var p=u.allDay;return delete u.allDay,null==p&&null==(p=e)&&null==(p=d.allDayGuess)&&(p=!1),kt(i,u),{allDay:p,duration:d.duration,typeData:d.typeData,typeId:s}}}return null}(n,i,t.dateEnv,t.pluginSystem.hooks.recurringTypes,s);if(u)return(d=HT(s,e,u.allDay,Boolean(u.duration),t)).recurringDef={typeId:u.typeId,typeData:u.typeData,duration:u.duration},{def:d,instance:null};var d,p={},y=function bH(n,e,t,r,i){var d,b,s=function DH(n,e){var t=Xf(n,Rk,{},e);return t.start=null!==t.start?t.start:t.date,delete t.date,t}(n,r),u=s.allDay,p=null,y=!1,I=null;if(d=t.dateEnv.createMarkerMeta(s.start))p=d.marker;else if(!i)return null;return null!=s.end&&(b=t.dateEnv.createMarkerMeta(s.end)),null==u&&(u=null!=e?e:(!d||d.isTimeUnspecified)&&(!b||b.isTimeUnspecified)),u&&p&&(p=Pr(p)),b&&(I=b.marker,u&&(I=Pr(I)),p&&I<=p&&(I=null)),I?y=!0:i||(y=t.opt("forceEventDuration")||!1,I=t.dateEnv.add(p,u?t.defaultAllDayEventDuration:t.defaultTimedEventDuration)),{allDay:u,hasEnd:y,range:{start:p,end:I},forcedStartTzo:d?d.forcedTzo:null,forcedEndTzo:b?b.forcedTzo:null}}(n,i,t,p,r);return y?{def:d=HT(p,e,y.allDay,y.hasEnd,t),instance:jT(d.defId,y.range,y.forcedStartTzo,y.forcedEndTzo)}:null}function HT(n,e,t,r,i){var s={},u=function SH(n,e,t){var r={},i=Xf(n,BT,{},r),s=lR(r,e,t);return i.publicId=i.id,delete i.id,i.ui=s,i}(n,i,s);u.defId=String(xk++),u.sourceId=e,u.allDay=t,u.hasEnd=r;for(var d=0,p=i.pluginSystem.hooks.eventDefParsers;d<p.length;d++){var b={};(0,p[d])(u,s,b),s=b}return u.extendedProps=kt(s,u.extendedProps||{}),Object.freeze(u.ui.classNames),Object.freeze(u.extendedProps),u}function jT(n,e,t,r){return{instanceId:String(xk++),defId:n,range:e,forcedStartTzo:t??null,forcedEndTzo:r??null}}var IH={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],rendering:"inverse-background",classNames:"fc-nonbusiness",groupId:"_businessHours"};function Zt(n,e,t){void 0===t&&(t=[]);var i,s,r=[];function u(){if(s){for(var I=0,x=r;I<x.length;I++)x[I].unrender();e&&e.apply(i,s),s=null}}function d(){(!s||!dk(s,arguments))&&(u(),i=this,s=arguments,n.apply(this,arguments))}d.dependents=r,d.unrender=u;for(var p=0,y=t;p<y.length;p++)y[p].dependents.push(d);return d}var uR={defs:{},instances:{}},MH=function(){function n(){this.getKeysForEventDefs=Dn(this._getKeysForEventDefs),this.splitDateSelection=Dn(this._splitDateSpan),this.splitEventStore=Dn(this._splitEventStore),this.splitIndividualUi=Dn(this._splitIndividualUi),this.splitEventDrag=Dn(this._splitInteraction),this.splitEventResize=Dn(this._splitInteraction),this.eventUiBuilders={}}return n.prototype.splitProps=function(e){var t=this,r=this.getKeyInfo(e),i=this.getKeysForEventDefs(e.eventStore),s=this.splitDateSelection(e.dateSelection),u=this.splitIndividualUi(e.eventUiBases,i),d=this.splitEventStore(e.eventStore,i),p=this.splitEventDrag(e.eventDrag),y=this.splitEventResize(e.eventResize),b={};for(var I in this.eventUiBuilders=bc(r,function(H,Y){return t.eventUiBuilders[Y]||Dn(RH)}),r){var x=r[I],P=d[I]||uR;b[I]={businessHours:x.businessHours||e.businessHours,dateSelection:s[I]||null,eventStore:P,eventUiBases:(0,this.eventUiBuilders[I])(e.eventUiBases[""],x.ui,u[I]),eventSelection:P.instances[e.eventSelection]?e.eventSelection:"",eventDrag:p[I]||null,eventResize:y[I]||null}}return b},n.prototype._splitDateSpan=function(e){var t={};if(e)for(var i=0,s=this.getKeysForDateSpan(e);i<s.length;i++)t[s[i]]=e;return t},n.prototype._getKeysForEventDefs=function(e){var t=this;return bc(e.defs,function(r){return t.getKeysForEventDef(r)})},n.prototype._splitEventStore=function(e,t){var r=e.defs,i=e.instances,s={};for(var u in r)for(var d=0,p=t[u];d<p.length;d++)s[y=p[d]]||(s[y]={defs:{},instances:{}}),s[y].defs[u]=r[u];for(var b in i)for(var I=i[b],x=0,P=t[I.defId];x<P.length;x++){var y;s[y=P[x]]&&(s[y].instances[b]=I)}return s},n.prototype._splitIndividualUi=function(e,t){var r={};for(var i in e)if(i)for(var s=0,u=t[i];s<u.length;s++){var d=u[s];r[d]||(r[d]={}),r[d][i]=e[i]}return r},n.prototype._splitInteraction=function(e){var t={};if(e){var r=this._splitEventStore(e.affectedEvents,this._getKeysForEventDefs(e.affectedEvents)),i=this._getKeysForEventDefs(e.mutatedEvents),s=this._splitEventStore(e.mutatedEvents,i),u=function(p){t[p]||(t[p]={affectedEvents:r[p]||uR,mutatedEvents:s[p]||uR,isEvent:e.isEvent,origSeg:e.origSeg})};for(var d in r)u(d);for(var d in s)u(d)}return t},n}();function RH(n,e,t){var r=[];n&&r.push(n),e&&r.push(e);var i={"":Mk(r)};return t&&kt(i,t),i}function cb(n,e,t,r,i){var s,u,d,p;return t instanceof Date?s=t:(s=t.date,u=t.type,d=t.forceOff),p={date:e.formatIso(s,{omitTime:!0}),type:u||"day"},"string"==typeof r&&(i=r,r=null),r=r?" "+function _H(n){var e=[];for(var t in n){var r=n[t];null!=r&&e.push(t+'="'+xi(r)+'"')}return e.join(" ")}(r):"",i=i||"",!d&&n.navLinks?"<a"+r+' data-goto="'+xi(JSON.stringify(p))+'">'+i+"</a>":"<span"+r+">"+i+"</span>"}function xH(n){return n.allDayHtml||xi(n.allDayText)}function cR(n,e,t,r){var y,b,i=t.calendar,s=t.options,u=t.theme,d=t.dateEnv,p=[];return Jf(e.activeRange,n)?(p.push("fc-"+$O[n.getUTCDay()]),s.monthMode&&d.getMonth(n)!==d.getMonth(e.currentRange.start)&&p.push("fc-other-month"),b=zo(y=Pr(i.getNow()),1),n<y?p.push("fc-past"):n>=b?p.push("fc-future"):(p.push("fc-today"),!0!==r&&p.push(u.getClass("today")))):p.push("fc-disabled-day"),p}var PH=function(){function n(){}return n.mixInto=function(e){this.mixIntoObj(e.prototype)},n.mixIntoObj=function(e){var t=this;Object.getOwnPropertyNames(this.prototype).forEach(function(r){e[r]||(e[r]=t.prototype[r])})},n.mixOver=function(e){var t=this;Object.getOwnPropertyNames(this.prototype).forEach(function(r){e.prototype[r]=t.prototype[r]})},n}(),db=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return ka(e,n),e.prototype.on=function(t,r){return Pk(this._handlers||(this._handlers={}),t,r),this},e.prototype.one=function(t,r){return Pk(this._oneHandlers||(this._oneHandlers={}),t,r),this},e.prototype.off=function(t,r){return this._handlers&&Ok(this._handlers,t,r),this._oneHandlers&&Ok(this._oneHandlers,t,r),this},e.prototype.trigger=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return this.triggerWith(t,this,r),this},e.prototype.triggerWith=function(t,r,i){return this._handlers&&rk(this._handlers[t],r,i),this._oneHandlers&&(rk(this._oneHandlers[t],r,i),delete this._oneHandlers[t]),this},e.prototype.hasHandlers=function(t){return this._handlers&&this._handlers[t]&&this._handlers[t].length||this._oneHandlers&&this._oneHandlers[t]&&this._oneHandlers[t].length},e}(PH);function Pk(n,e,t){(n[e]||(n[e]=[])).push(t)}function Ok(n,e,t){t?n[e]&&(n[e]=n[e].filter(function(r){return r!==t})):delete n[e]}var $T=function(){function n(e,t,r,i){this.originEl=e,this.els=t,this.isHorizontal=r,this.isVertical=i}return n.prototype.build=function(){var t=this.originClientRect=this.originEl.getBoundingClientRect();this.isHorizontal&&this.buildElHorizontals(t.left),this.isVertical&&this.buildElVerticals(t.top)},n.prototype.buildElHorizontals=function(e){for(var t=[],r=[],i=0,s=this.els;i<s.length;i++){var d=s[i].getBoundingClientRect();t.push(d.left-e),r.push(d.right-e)}this.lefts=t,this.rights=r},n.prototype.buildElVerticals=function(e){for(var t=[],r=[],i=0,s=this.els;i<s.length;i++){var d=s[i].getBoundingClientRect();t.push(d.top-e),r.push(d.bottom-e)}this.tops=t,this.bottoms=r},n.prototype.leftToIndex=function(e){var s,t=this.lefts,r=this.rights,i=t.length;for(s=0;s<i;s++)if(e>=t[s]&&e<r[s])return s},n.prototype.topToIndex=function(e){var s,t=this.tops,r=this.bottoms,i=t.length;for(s=0;s<i;s++)if(e>=t[s]&&e<r[s])return s},n.prototype.getWidth=function(e){return this.rights[e]-this.lefts[e]},n.prototype.getHeight=function(e){return this.bottoms[e]-this.tops[e]},n}(),dR=function(){function n(){}return n.prototype.getMaxScrollTop=function(){return this.getScrollHeight()-this.getClientHeight()},n.prototype.getMaxScrollLeft=function(){return this.getScrollWidth()-this.getClientWidth()},n.prototype.canScrollVertically=function(){return this.getMaxScrollTop()>0},n.prototype.canScrollHorizontally=function(){return this.getMaxScrollLeft()>0},n.prototype.canScrollUp=function(){return this.getScrollTop()>0},n.prototype.canScrollDown=function(){return this.getScrollTop()<this.getMaxScrollTop()},n.prototype.canScrollLeft=function(){return this.getScrollLeft()>0},n.prototype.canScrollRight=function(){return this.getScrollLeft()<this.getMaxScrollLeft()},n}(),kk=function(n){function e(t){var r=n.call(this)||this;return r.el=t,r}return ka(e,n),e.prototype.getScrollTop=function(){return this.el.scrollTop},e.prototype.getScrollLeft=function(){return this.el.scrollLeft},e.prototype.setScrollTop=function(t){this.el.scrollTop=t},e.prototype.setScrollLeft=function(t){this.el.scrollLeft=t},e.prototype.getScrollWidth=function(){return this.el.scrollWidth},e.prototype.getScrollHeight=function(){return this.el.scrollHeight},e.prototype.getClientHeight=function(){return this.el.clientHeight},e.prototype.getClientWidth=function(){return this.el.clientWidth},e}(dR),OH=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return ka(e,n),e.prototype.getScrollTop=function(){return window.pageYOffset},e.prototype.getScrollLeft=function(){return window.pageXOffset},e.prototype.setScrollTop=function(t){window.scroll(window.pageXOffset,t)},e.prototype.setScrollLeft=function(t){window.scroll(t,window.pageYOffset)},e.prototype.getScrollWidth=function(){return document.documentElement.scrollWidth},e.prototype.getScrollHeight=function(){return document.documentElement.scrollHeight},e.prototype.getClientHeight=function(){return document.documentElement.clientHeight},e.prototype.getClientWidth=function(){return document.documentElement.clientWidth},e}(dR),Fk=function(n){function e(t,r){var i=n.call(this,ss("div",{className:"fc-scroller"}))||this;return i.overflowX=t,i.overflowY=r,i.applyOverflow(),i}return ka(e,n),e.prototype.clear=function(){this.setHeight("auto"),this.applyOverflow()},e.prototype.destroy=function(){Ls(this.el)},e.prototype.applyOverflow=function(){Ri(this.el,{overflowX:this.overflowX,overflowY:this.overflowY})},e.prototype.lockOverflow=function(t){var r=this.overflowX,i=this.overflowY;t=t||this.getScrollbarWidths(),"auto"===r&&(r=t.bottom||this.canScrollHorizontally()?"scroll":"hidden"),"auto"===i&&(i=t.left||t.right||this.canScrollVertically()?"scroll":"hidden"),Ri(this.el,{overflowX:r,overflowY:i})},e.prototype.setHeight=function(t){OO(this.el,"height",t)},e.prototype.getScrollbarWidths=function(){var t=LO(this.el);return{left:t.scrollbarLeft,right:t.scrollbarRight,bottom:t.scrollbarBottom}},e}(kk),hb=function(){function n(e){this.calendarOptions=e,this.processIconOverride()}return n.prototype.processIconOverride=function(){this.iconOverrideOption&&this.setIconOverride(this.calendarOptions[this.iconOverrideOption])},n.prototype.setIconOverride=function(e){var t,r;if("object"==typeof e&&e){for(r in t=kt({},this.iconClasses),e)t[r]=this.applyIconOverridePrefix(e[r]);this.iconClasses=t}else!1===e&&(this.iconClasses={})},n.prototype.applyIconOverridePrefix=function(e){var t=this.iconOverridePrefix;return t&&0!==e.indexOf(t)&&(e=t+e),e},n.prototype.getClass=function(e){return this.classes[e]||""},n.prototype.getIconClass=function(e){var t=this.iconClasses[e];return t?this.baseIconClass+" "+t:""},n.prototype.getCustomButtonIconClass=function(e){var t;return this.iconOverrideCustomButtonOption&&(t=e[this.iconOverrideCustomButtonOption])?this.baseIconClass+" "+this.applyIconOverridePrefix(t):""},n}();hb.prototype.classes={},hb.prototype.iconClasses={},hb.prototype.baseIconClass="",hb.prototype.iconOverridePrefix="";var kH=0,FH=function(){function n(e,t,r,i,s){this.calendar=e,this.theme=t,this.dateEnv=r,this.options=i,this.view=s,this.isRtl="rtl"===i.dir,this.eventOrderSpecs=function I2(n){var r,i,e=[],t=[];for("string"==typeof n?t=n.split(/\s*,\s*/):"function"==typeof n?t=[n]:Array.isArray(n)&&(t=n),r=0;r<t.length;r++)"string"==typeof(i=t[r])?e.push("-"===i.charAt(0)?{field:i.substring(1),order:-1}:{field:i,order:1}):"function"==typeof i&&e.push({func:i});return e}(i.eventOrder),this.nextDayThreshold=hn(i.nextDayThreshold)}return n.prototype.extend=function(e,t){return new n(this.calendar,this.theme,this.dateEnv,e||this.options,t||this.view)},n}(),fb=function(){function n(){this.everRendered=!1,this.uid=String(kH++)}return n.addEqualityFuncs=function(e){this.prototype.equalityFuncs=kt({},this.prototype.equalityFuncs,e)},n.prototype.receiveProps=function(e,t){this.receiveContext(t);var r=function LH(n,e,t){var r={},i=!1;for(var s in e)s in n&&(n[s]===e[s]||t[s]&&t[s](n[s],e[s]))?r[s]=n[s]:(r[s]=e[s],i=!0);for(var s in n)if(!(s in e)){i=!0;break}return{anyChanges:i,comboProps:r}}(this.props||{},e,this.equalityFuncs),i=r.anyChanges,s=r.comboProps;this.props=s,i&&(this.everRendered&&this.beforeUpdate(),this.render(s,t),this.everRendered&&this.afterUpdate()),this.everRendered=!0},n.prototype.receiveContext=function(e){var t=this.context;this.context=e,t||this.firstContext(e)},n.prototype.render=function(e,t){},n.prototype.firstContext=function(e){},n.prototype.beforeUpdate=function(){},n.prototype.afterUpdate=function(){},n.prototype.destroy=function(){},n}();fb.prototype.equalityFuncs={};var ep=function(n){function e(t){var r=n.call(this)||this;return r.el=t,r}return ka(e,n),e.prototype.destroy=function(){n.prototype.destroy.call(this),Ls(this.el)},e.prototype.buildPositionCaches=function(){},e.prototype.queryHit=function(t,r,i,s){return null},e.prototype.isInteractionValid=function(t){var r=this.context.calendar,i=this.props.dateProfile,s=t.mutatedEvents.instances;if(i)for(var u in s)if(!kT(i.validRange,s[u].range))return!1;return Sk(t,r)},e.prototype.isDateSelectionValid=function(t){var r=this.context.calendar,i=this.props.dateProfile;return!(i&&!kT(i.validRange,t.range))&&function hH(n,e){return Tk({dateSelection:n},e)}(t,r)},e.prototype.isValidSegDownEl=function(t){return!this.props.eventDrag&&!this.props.eventResize&&!Go(t,".fc-mirror")&&(this.isPopover()||!this.isInPopover(t))},e.prototype.isValidDateDownEl=function(t){var r=Go(t,this.fgSegSelector);return(!r||r.classList.contains("fc-mirror"))&&!Go(t,".fc-more")&&!Go(t,"a[data-goto]")&&!this.isInPopover(t)},e.prototype.isPopover=function(){return this.el.classList.contains("fc-popover")},e.prototype.isInPopover=function(t){return Boolean(Go(t,".fc-popover"))},e}(fb);ep.prototype.fgSegSelector=".fc-event-container > *",ep.prototype.bgSegSelector=".fc-bgevent:not(.fc-nonbusiness)";var VH=0;function tp(n){return{id:String(VH++),deps:n.deps||[],reducers:n.reducers||[],eventDefParsers:n.eventDefParsers||[],isDraggableTransformers:n.isDraggableTransformers||[],eventDragMutationMassagers:n.eventDragMutationMassagers||[],eventDefMutationAppliers:n.eventDefMutationAppliers||[],dateSelectionTransformers:n.dateSelectionTransformers||[],datePointTransforms:n.datePointTransforms||[],dateSpanTransforms:n.dateSpanTransforms||[],views:n.views||{},viewPropsTransformers:n.viewPropsTransformers||[],isPropsValid:n.isPropsValid||null,externalDefTransforms:n.externalDefTransforms||[],eventResizeJoinTransforms:n.eventResizeJoinTransforms||[],viewContainerModifiers:n.viewContainerModifiers||[],eventDropTransformers:n.eventDropTransformers||[],componentInteractions:n.componentInteractions||[],calendarInteractions:n.calendarInteractions||[],themeClasses:n.themeClasses||{},eventSourceDefs:n.eventSourceDefs||[],cmdFormatter:n.cmdFormatter,recurringTypes:n.recurringTypes||[],namedTimeZonedImpl:n.namedTimeZonedImpl,defaultView:n.defaultView||"",elementDraggingImpl:n.elementDraggingImpl,optionChangeHandlers:n.optionChangeHandlers||{}}}var UH=function(){function n(){this.hooks={reducers:[],eventDefParsers:[],isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],eventResizeJoinTransforms:[],viewContainerModifiers:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,defaultView:"",elementDraggingImpl:null,optionChangeHandlers:{}},this.addedHash={}}return n.prototype.add=function(e){if(!this.addedHash[e.id]){this.addedHash[e.id]=!0;for(var t=0,r=e.deps;t<r.length;t++)this.add(r[t]);this.hooks=function BH(n,e){return{reducers:n.reducers.concat(e.reducers),eventDefParsers:n.eventDefParsers.concat(e.eventDefParsers),isDraggableTransformers:n.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:n.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:n.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:n.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:n.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:n.dateSpanTransforms.concat(e.dateSpanTransforms),views:kt({},n.views,e.views),viewPropsTransformers:n.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||n.isPropsValid,externalDefTransforms:n.externalDefTransforms.concat(e.externalDefTransforms),eventResizeJoinTransforms:n.eventResizeJoinTransforms.concat(e.eventResizeJoinTransforms),viewContainerModifiers:n.viewContainerModifiers.concat(e.viewContainerModifiers),eventDropTransformers:n.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:n.calendarInteractions.concat(e.calendarInteractions),componentInteractions:n.componentInteractions.concat(e.componentInteractions),themeClasses:kt({},n.themeClasses,e.themeClasses),eventSourceDefs:n.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||n.cmdFormatter,recurringTypes:n.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||n.namedTimeZonedImpl,defaultView:n.defaultView||e.defaultView,elementDraggingImpl:n.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:kt({},n.optionChangeHandlers,e.optionChangeHandlers)}}(this.hooks,e)}},n}(),HH={ignoreRange:!0,parseMeta:function(n){return Array.isArray(n)?n:Array.isArray(n.events)?n.events:null},fetch:function(n,e){e({rawEvents:n.eventSource.meta})}},jH=tp({eventSourceDefs:[HH]}),GH=tp({eventSourceDefs:[{parseMeta:function(n){return"function"==typeof n?n:"function"==typeof n.events?n.events:null},fetch:function(n,e,t){var r=n.calendar.dateEnv;!function NH(n,e,t){var r=!1,i=function(){r||(r=!0,e.apply(this,arguments))},s=function(){r||(r=!0,t&&t.apply(this,arguments))},u=n(i,s);u&&"function"==typeof u.then&&u.then(i,s)}(n.eventSource.meta.bind(null,{start:r.toDate(n.range.start),end:r.toDate(n.range.end),startStr:r.formatIso(n.range.start),endStr:r.formatIso(n.range.end),timeZone:r.timeZone}),function(s){e({rawEvents:s})},t)}}]});function Lk(n){var e=[];for(var t in n)e.push(encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e.join("&")}var WH={parseMeta:function(n){if("string"==typeof n)n={url:n};else if(!n||"object"!=typeof n||!n.url)return null;return{url:n.url,method:(n.method||"GET").toUpperCase(),extraParams:n.extraParams,startParam:n.startParam,endParam:n.endParam,timeZoneParam:n.timeZoneParam}},fetch:function(n,e,t){var r=n.eventSource.meta,i=function KH(n,e,t){var i,s,u,d,r=t.dateEnv,p={};return null==(i=n.startParam)&&(i=t.opt("startParam")),null==(s=n.endParam)&&(s=t.opt("endParam")),null==(u=n.timeZoneParam)&&(u=t.opt("timeZoneParam")),d="function"==typeof n.extraParams?n.extraParams():n.extraParams||{},kt(p,d),p[i]=r.formatIso(e.start),p[s]=r.formatIso(e.end),"local"!==r.timeZone&&(p[u]=r.timeZone),p}(r,n.range,n.calendar);!function zH(n,e,t,r,i){var s=null;"GET"===(n=n.toUpperCase())?e=function qH(n,e){return n+(-1===n.indexOf("?")?"?":"&")+Lk(e)}(e,t):s=Lk(t);var u=new XMLHttpRequest;u.open(n,e,!0),"GET"!==n&&u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.onload=function(){if(u.status>=200&&u.status<400)try{var d=JSON.parse(u.responseText);r(d,u)}catch{i("Failure parsing JSON",u)}else i("Request failed",u)},u.onerror=function(){i("Request failed",u)},u.send(s)}(r.method,r.url,i,function(s,u){e({rawEvents:s,xhr:u})},function(s,u){t({message:s,xhr:u})})}},ZH=tp({eventSourceDefs:[WH]}),YH={parse:function(n,e,t){var r=t.createMarker.bind(t),s=Xf(n,{daysOfWeek:null,startTime:hn,endTime:hn,startRecur:r,endRecur:r},{},e),u=!1;for(var d in s)if(null!=s[d]){u=!0;break}if(u){var p=null;return"duration"in e&&(p=hn(e.duration),delete e.duration),!p&&s.startTime&&s.endTime&&(p=function y2(n,e){return{years:n.years-e.years,months:n.months-e.months,days:n.days-e.days,milliseconds:n.milliseconds-e.milliseconds}}(s.endTime,s.startTime)),{allDayGuess:Boolean(!s.startTime&&!s.endTime),duration:p,typeData:s}}return null},expand:function(n,e,t){var r=Ny(e,{start:n.startRecur,end:n.endRecur});return r?function XH(n,e,t,r){for(var i=n?ak(n):null,s=Pr(t.start),u=t.end,d=[];s<u;){var p=void 0;(!i||i[s.getUTCDay()])&&(p=e?r.add(s,e):s,d.push(p)),s=zo(s,1)}return d}(n.daysOfWeek,n.startTime,r,t):[]}},QH=tp({recurringTypes:[YH]}),JH=tp({optionChangeHandlers:{events:function(n,e,t){Vk([n],e,t)},eventSources:Vk,plugins:function ej(n,e){e.addPluginInputs(n)}}});function Vk(n,e,t){for(var r=lk(e.state.eventSources),i=[],s=0,u=n;s<u.length;s++){for(var d=u[s],p=!1,y=0;y<r.length;y++)if(t(r[y]._raw,d)){r.splice(y,1),p=!0;break}p||i.push(d)}for(var b=0,I=r;b<I.length;b++)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:I[b].sourceId});for(var P=0,k=i;P<k.length;P++)e.addEventSource(k[P])}var GT={},eh={defaultRangeSeparator:" - ",titleRangeSeparator:" \u2013 ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",columnHeader:!0,defaultView:"",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,scrollTime:"06:00:00",minTime:"00:00:00",maxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",timeGridEventMinHeight:0,themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",eventLimit:!1,eventLimitClick:"popover",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5},tj={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"}},nj=["header","footer","buttonText","buttonIcons"],ij=[jH,GH,ZH,QH,JH],hR={code:"en",week:{dow:0,doy:4},dir:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekLabel:"W",allDayText:"all-day",eventLimitText:"more",noEventsMessage:"No events to display"};function fR(n){for(var e=n.length>0?n[0].code:"en",t=window.FullCalendarLocalesAll||[],r=window.FullCalendarLocales||{},i=t.concat(lk(r),n),s={en:hR},u=0,d=i;u<d.length;u++){var p=d[u];s[p.code]=p}return{map:s,defaultCode:e}}function pR(n,e){return"object"!=typeof n||Array.isArray(n)?function oj(n,e){var t=[].concat(n||[]),r=function aj(n,e){for(var t=0;t<n.length;t++)for(var r=n[t].toLocaleLowerCase().split("-"),i=r.length;i>0;i--){var s=r.slice(0,i).join("-");if(e[s])return e[s]}return null}(t,e)||hR;return Uk(n,t,r)}(n,e):Uk(n.code,[n.code],n)}function Uk(n,e,t){var r=eR([hR,t],["buttonText"]);delete r.code;var i=r.week;return delete r.week,{codeArg:n,codes:e,week:i,simpleNumberFormat:new Intl.NumberFormat(n),options:r}}var lj=function(){function n(e){this.overrides=kt({},e),this.dynamicOverrides={},this.compute()}return n.prototype.mutate=function(e,t,r){if(Object.keys(e).length||t.length){var i=r?this.dynamicOverrides:this.overrides;kt(i,e);for(var s=0,u=t;s<u.length;s++)delete i[u[s]];this.compute()}},n.prototype.compute=function(){var e=QM(this.dynamicOverrides.locales,this.overrides.locales,eh.locales),t=QM(this.dynamicOverrides.locale,this.overrides.locale,eh.locale),r=fR(e),i=pR(t||r.defaultCode,r.map).options,u="rtl"===QM(this.dynamicOverrides.dir,this.overrides.dir,i.dir)?tj:{};this.dirDefaults=u,this.localeDefaults=i,this.computed=function rj(n){return eR(n,nj)}([eh,u,i,this.overrides,this.dynamicOverrides])},n}(),Bk={},dj=function(){function n(){}return n.prototype.getMarkerYear=function(e){return e.getUTCFullYear()},n.prototype.getMarkerMonth=function(e){return e.getUTCMonth()},n.prototype.getMarkerDay=function(e){return e.getUTCDate()},n.prototype.arrayToMarker=function(e){return co(e)},n.prototype.markerToArray=function(e){return Yf(e)},n}();!function uj(n,e){Bk[n]=e}("gregory",dj);var hj=/^\s*(\d{4})(-(\d{2})(-(\d{2})([T ](\d{2}):(\d{2})(:(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/,Hk=function(){function n(e){var t=this.timeZone=e.timeZone,r="local"!==t&&"UTC"!==t;e.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(t)),this.canComputeOffset=Boolean(!r||this.namedTimeZoneImpl),this.calendarSystem=function cj(n){return new Bk[n]}(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,"ISO"===e.weekNumberCalculation&&(this.weekDow=1,this.weekDoy=4),"number"==typeof e.firstDay&&(this.weekDow=e.firstDay),"function"==typeof e.weekNumberCalculation&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekLabel=null!=e.weekLabel?e.weekLabel:e.locale.options.weekLabel,this.cmdFormatter=e.cmdFormatter}return n.prototype.createMarker=function(e){var t=this.createMarkerMeta(e);return null===t?null:t.marker},n.prototype.createNowMarker=function(){return this.canComputeOffset?this.timestampToMarker((new Date).valueOf()):co(zO(new Date))},n.prototype.createMarkerMeta=function(e){if("string"==typeof e)return this.parse(e);var t=null;return"number"==typeof e?t=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(t=this.timestampToMarker(e))):Array.isArray(e)&&(t=co(e)),null!==t&&WO(t)?{marker:t,isTimeUnspecified:!1,forcedTzo:null}:null},n.prototype.parse=function(e){var t=function fj(n){var e=hj.exec(n);if(e){var t=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?1e3*Number("0."+e[12]):0));if(WO(t)){var r=null;return e[13]&&(r=("-"===e[15]?-1:1)*(60*Number(e[16]||0)+Number(e[18]||0))),{marker:t,isTimeUnspecified:!e[6],timeZoneOffset:r}}}return null}(e);if(null===t)return null;var r=t.marker,i=null;return null!==t.timeZoneOffset&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-60*t.timeZoneOffset*1e3):i=t.timeZoneOffset),{marker:r,isTimeUnspecified:t.isTimeUnspecified,forcedTzo:i}},n.prototype.getYear=function(e){return this.calendarSystem.getMarkerYear(e)},n.prototype.getMonth=function(e){return this.calendarSystem.getMarkerMonth(e)},n.prototype.add=function(e,t){var r=this.calendarSystem.markerToArray(e);return r[0]+=t.years,r[1]+=t.months,r[2]+=t.days,r[6]+=t.milliseconds,this.calendarSystem.arrayToMarker(r)},n.prototype.subtract=function(e,t){var r=this.calendarSystem.markerToArray(e);return r[0]-=t.years,r[1]-=t.months,r[2]-=t.days,r[6]-=t.milliseconds,this.calendarSystem.arrayToMarker(r)},n.prototype.addYears=function(e,t){var r=this.calendarSystem.markerToArray(e);return r[0]+=t,this.calendarSystem.arrayToMarker(r)},n.prototype.addMonths=function(e,t){var r=this.calendarSystem.markerToArray(e);return r[1]+=t,this.calendarSystem.arrayToMarker(r)},n.prototype.diffWholeYears=function(e,t){var r=this.calendarSystem;return Qf(e)===Qf(t)&&r.getMarkerDay(e)===r.getMarkerDay(t)&&r.getMarkerMonth(e)===r.getMarkerMonth(t)?r.getMarkerYear(t)-r.getMarkerYear(e):null},n.prototype.diffWholeMonths=function(e,t){var r=this.calendarSystem;return Qf(e)===Qf(t)&&r.getMarkerDay(e)===r.getMarkerDay(t)?r.getMarkerMonth(t)-r.getMarkerMonth(e)+12*(r.getMarkerYear(t)-r.getMarkerYear(e)):null},n.prototype.greatestWholeUnit=function(e,t){var r=this.diffWholeYears(e,t);return null!==r?{unit:"year",value:r}:null!==(r=this.diffWholeMonths(e,t))?{unit:"month",value:r}:(r=function c2(n,e){var t=AT(n,e);return null!==t&&t%7==0?t/7:null}(e,t),null!==r?{unit:"week",value:r}:null!==(r=AT(e,t))?{unit:"day",value:r}:(r=function o2(n,e){return(e.valueOf()-n.valueOf())/36e5}(e,t),xT(r)?{unit:"hour",value:r}:(r=function a2(n,e){return(e.valueOf()-n.valueOf())/6e4}(e,t),xT(r)?{unit:"minute",value:r}:(r=function l2(n,e){return(e.valueOf()-n.valueOf())/1e3}(e,t),xT(r)?{unit:"second",value:r}:{unit:"millisecond",value:t.valueOf()-e.valueOf()}))))},n.prototype.countDurationsBetween=function(e,t,r){var i;return r.years&&null!==(i=this.diffWholeYears(e,t))?i/function E2(n){return Ay(n)/365}(r):r.months&&null!==(i=this.diffWholeMonths(e,t))?i/function w2(n){return Ay(n)/30}(r):r.days&&null!==(i=AT(e,t))?i/Ay(r):(t.valueOf()-e.valueOf())/jl(r)},n.prototype.startOf=function(e,t){return"year"===t?this.startOfYear(e):"month"===t?this.startOfMonth(e):"week"===t?this.startOfWeek(e):"day"===t?Pr(e):"hour"===t?function d2(n){return co([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours()])}(e):"minute"===t?function h2(n){return co([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes()])}(e):"second"===t?function f2(n){return co([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds()])}(e):void 0},n.prototype.startOfYear=function(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])},n.prototype.startOfMonth=function(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])},n.prototype.startOfWeek=function(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])},n.prototype.computeWeekNumber=function(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):function p2(n,e,t){var r=n.getUTCFullYear(),i=GM(n,r,e,t);if(i<1)return GM(n,r-1,e,t);var s=GM(n,r+1,e,t);return s>=1?Math.min(i,s):i}(e,this.weekDow,this.weekDoy)},n.prototype.format=function(e,t,r){return void 0===r&&(r={}),t.format({marker:e,timeZoneOffset:null!=r.forcedTzo?r.forcedTzo:this.offsetForMarker(e)},this)},n.prototype.formatRange=function(e,t,r,i){return void 0===i&&(i={}),i.isEndExclusive&&(t=sb(t,-1)),r.formatRange({marker:e,timeZoneOffset:null!=i.forcedStartTzo?i.forcedStartTzo:this.offsetForMarker(e)},{marker:t,timeZoneOffset:null!=i.forcedEndTzo?i.forcedEndTzo:this.offsetForMarker(t)},this)},n.prototype.formatIso=function(e,t){void 0===t&&(t={});var r=null;return t.omitTimeZoneOffset||(r=null!=t.forcedTzo?t.forcedTzo:this.offsetForMarker(e)),function tH(n,e,t){void 0===t&&(t=!1);var r=n.toISOString();return r=r.replace(".000",""),t&&(r=r.replace("T00:00:00Z","")),r.length>10&&(null==e?r=r.replace("Z",""):0!==e&&(r=r.replace("Z",rR(e,!0)))),r}(e,r,t.omitTime)},n.prototype.timestampToMarker=function(e){return"local"===this.timeZone?co(zO(new Date(e))):"UTC"!==this.timeZone&&this.namedTimeZoneImpl?co(this.namedTimeZoneImpl.timestampToArray(e)):new Date(e)},n.prototype.offsetForMarker=function(e){return"local"===this.timeZone?-qO(Yf(e)).getTimezoneOffset():"UTC"===this.timeZone?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Yf(e)):null},n.prototype.toDate=function(e,t){return"local"===this.timeZone?qO(Yf(e)):"UTC"===this.timeZone?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-1e3*this.namedTimeZoneImpl.offsetForArray(Yf(e))*60):new Date(e.valueOf()-(t||0))},n}(),pj={id:String,allDayDefault:Boolean,eventDataTransform:Function,success:Function,failure:Function},gj=0;function jk(n,e){return!e.pluginSystem.hooks.eventSourceDefs[n.sourceDefId].ignoreRange}function $k(n,e){for(var t=e.pluginSystem.hooks.eventSourceDefs,r=t.length-1;r>=0;r--){var s=t[r].parseMeta(n);if(s){var u=mj("object"==typeof n?n:{},s,r,e);return u._raw=n,u}}return null}function mj(n,e,t,r){var i={},s=Xf(n,pj,{},i),u={},d=lR(i,r,u);return s.isFetching=!1,s.latestFetchId="",s.fetchRange=null,s.publicId=String(n.id||""),s.sourceId=String(gj++),s.sourceDefId=t,s.meta=e,s.ui=d,s.extendedProps=u,s}var yj=0;function Gk(n,e,t){return zk(n,Wg(n,function(r){return function wj(n,e,t){return jk(n,t)?!t.opt("lazyFetching")||!n.fetchRange||n.isFetching||e.start<n.fetchRange.start||e.end>n.fetchRange.end:!n.latestFetchId}(r,e,t)}),e,t)}function zk(n,e,t,r){var i={};for(var s in n){var u=n[s];i[s]=e[s]?bj(u,t,r):u}return i}function bj(n,e,t){var r=t.pluginSystem.hooks.eventSourceDefs[n.sourceDefId],i=String(yj++);return r.fetch({eventSource:n,calendar:t,range:e},function(s){var p,y,u=s.rawEvents,d=t.opt("eventSourceSuccess");n.success&&(y=n.success(u,s.xhr)),d&&(p=d(u,s.xhr)),t.dispatch({type:"RECEIVE_EVENTS",sourceId:n.sourceId,fetchId:i,fetchRange:e,rawEvents:u=y||p||u})},function(s){var u=t.opt("eventSourceFailure");console.warn(s.message,s),n.failure&&n.failure(s),u&&u(s),t.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:n.sourceId,fetchId:i,fetchRange:e,error:s})}),kt({},n,{isFetching:!0,latestFetchId:i})}var qk=function(){function n(e,t){this.viewSpec=e,this.options=e.options,this.dateEnv=t.dateEnv,this.calendar=t,this.initHiddenDays()}return n.prototype.buildPrev=function(e,t){var r=this.dateEnv,i=r.subtract(r.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(i,-1)},n.prototype.buildNext=function(e,t){var r=this.dateEnv,i=r.add(r.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(i,1)},n.prototype.build=function(e,t,r){var i,s,u,d,p,y,b,I;return void 0===r&&(r=!1),i=this.buildValidRange(),i=this.trimHiddenDays(i),r&&(e=function V2(n,e){return null!=e.start&&n<e.start?e.start:null!=e.end&&n>=e.end?new Date(e.end.valueOf()-1):n}(e,i)),d=this.buildCurrentRangeInfo(e,t),p=/^(year|month|week|day)$/.test(d.unit),y=this.buildRenderRange(this.trimHiddenDays(d.range),d.unit,p),b=y=this.trimHiddenDays(y),this.options.showNonCurrentDates||(b=Ny(b,d.range)),s=hn(this.options.minTime),u=hn(this.options.maxTime),b=Ny(b=this.adjustActiveRange(b,s,u),i),I=nR(d.range,i),{validRange:i,currentRange:d.range,currentRangeUnit:d.unit,isRangeAllDay:p,activeRange:b,renderRange:y,minTime:s,maxTime:u,isValid:I,dateIncrement:this.buildDateIncrement(d.duration)}},n.prototype.buildValidRange=function(){return this.getRangeOption("validRange",this.calendar.getNow())||{start:null,end:null}},n.prototype.buildCurrentRangeInfo=function(e,t){var y,i=this.viewSpec,s=this.dateEnv,u=null,d=null,p=null;return i.duration?p=this.buildRangeFromDuration(e,t,u=i.duration,d=i.durationUnit):(y=this.options.dayCount)?(d="day",p=this.buildRangeFromDayCount(e,t,y)):(p=this.buildCustomVisibleRange(e))?d=s.greatestWholeUnit(p.start,p.end).unit:(d=KM(u=this.getFallbackDuration()).unit,p=this.buildRangeFromDuration(e,t,u,d)),{duration:u,unit:d,range:p}},n.prototype.getFallbackDuration=function(){return hn({day:1})},n.prototype.adjustActiveRange=function(e,t,r){var i=this.dateEnv,s=e.start,u=e.end;return this.viewSpec.class.prototype.usesMinMaxTime&&(Ay(t)<0&&(s=Pr(s),s=i.add(s,t)),Ay(r)>1&&(u=zo(u=Pr(u),-1),u=i.add(u,r))),{start:s,end:u}},n.prototype.buildRangeFromDuration=function(e,t,r,i){var d,p,y,b,I,s=this.dateEnv,u=this.options.dateAlignment;function x(){y=s.startOf(e,u),b=s.add(y,r),I={start:y,end:b}}return u||((d=this.options.dateIncrement)?(p=hn(d),u=jl(p)<jl(r)?KM(p,!zM(d)).unit:i):u=i),Ay(r)<=1&&this.isHiddenDay(y)&&(y=Pr(y=this.skipHiddenDays(y,t))),x(),this.trimHiddenDays(I)||(e=this.skipHiddenDays(e,t),x()),I},n.prototype.buildRangeFromDayCount=function(e,t,r){var p,s=this.options.dateAlignment,u=0,d=e;s&&(d=this.dateEnv.startOf(d,s)),d=Pr(d),p=d=this.skipHiddenDays(d,t);do{p=zo(p,1),this.isHiddenDay(p)||u++}while(u<r);return{start:d,end:p}},n.prototype.buildCustomVisibleRange=function(e){var r=this.getRangeOption("visibleRange",this.dateEnv.toDate(e));return!r||null!=r.start&&null!=r.end?r:null},n.prototype.buildRenderRange=function(e,t,r){return e},n.prototype.buildDateIncrement=function(e){var r,t=this.options.dateIncrement;return t?hn(t):(r=this.options.dateAlignment)?hn(1,r):e||hn({days:1})},n.prototype.getRangeOption=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=this.options[e];return"function"==typeof i&&(i=i.apply(null,t)),i&&(i=F2(i,this.dateEnv)),i&&(i=XM(i)),i},n.prototype.initHiddenDays=function(){var i,e=this.options.hiddenDays||[],t=[],r=0;for(!1===this.options.weekends&&e.push(0,6),i=0;i<7;i++)(t[i]=-1!==e.indexOf(i))||r++;if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=t},n.prototype.trimHiddenDays=function(e){var t=e.start,r=e.end;return t&&(t=this.skipHiddenDays(t)),r&&(r=this.skipHiddenDays(r,-1,!0)),null==t||null==r||t<r?{start:t,end:r}:null},n.prototype.isHiddenDay=function(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]},n.prototype.skipHiddenDays=function(e,t,r){for(void 0===t&&(t=1),void 0===r&&(r=!1);this.isHiddenDayHash[(e.getUTCDay()+(r?t:0)+7)%7];)e=zo(e,t);return e},n}();function Ij(n,e,t){for(var r=function Cj(n,e){return"SET_VIEW_TYPE"===e.type?e.viewType:n}(n.viewType,e),i=function Aj(n,e,t,r,i){var s;switch(e.type){case"PREV":s=i.dateProfileGenerators[r].buildPrev(n,t);break;case"NEXT":s=i.dateProfileGenerators[r].buildNext(n,t);break;case"SET_DATE":(!n.activeRange||!Jf(n.currentRange,e.dateMarker))&&(s=i.dateProfileGenerators[r].build(e.dateMarker,void 0,!0));break;case"SET_VIEW_TYPE":var u=i.dateProfileGenerators[r];if(!u)throw new Error(r?'The FullCalendar view "'+r+'" does not exist. Make sure your plugins are loaded correctly.':"No available FullCalendar view plugins.");s=u.build(e.dateMarker||t,void 0,!0)}return!s||!s.isValid||n&&function Tj(n,e){return OT(n.validRange,e.validRange)&&OT(n.activeRange,e.activeRange)&&OT(n.renderRange,e.renderRange)&&qM(n.minTime,e.minTime)&&qM(n.maxTime,e.maxTime)}(n,s)?n:s}(n.dateProfile,e,n.currentDate,r,t),s=function vj(n,e,t,r){switch(e.type){case"ADD_EVENT_SOURCES":return function _j(n,e,t,r){for(var i={},s=0,u=e;s<u.length;s++){var d=u[s];i[d.sourceId]=d}return t&&(i=Gk(i,t,r)),kt({},n,i)}(n,e.sources,t?t.activeRange:null,r);case"REMOVE_EVENT_SOURCE":return function Ej(n,e){return Wg(n,function(t){return t.sourceId!==e})}(n,e.sourceId);case"PREV":case"NEXT":case"SET_DATE":case"SET_VIEW_TYPE":return t?Gk(n,t.activeRange,r):n;case"FETCH_EVENT_SOURCES":case"CHANGE_TIMEZONE":return zk(n,e.sourceIds?ak(e.sourceIds):function Sj(n,e){return Wg(n,function(t){return jk(t,e)})}(n,r),t?t.activeRange:null,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return function Dj(n,e,t,r){var i,s=n[e];return s&&t===s.latestFetchId?kt({},n,((i={})[e]=kt({},s,{isFetching:!1,fetchRange:r}),i)):n}(n,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return n}}(n.eventSources,e,i,t),u=kt({},n,{viewType:r,dateProfile:i,currentDate:Mj(n.currentDate,e,i),eventSources:s,eventStore:aH(n.eventStore,e,s,i,t),dateSelection:Rj(n.dateSelection,e),eventSelection:xj(n.eventSelection,e),eventDrag:Nj(n.eventDrag,e),eventResize:Pj(n.eventResize,e),eventSourceLoadingLevel:Wk(s),loadingLevel:Wk(s)}),d=0,p=t.pluginSystem.hooks.reducers;d<p.length;d++)u=(0,p[d])(u,e,t);return u}function Mj(n,e,t){switch(e.type){case"PREV":case"NEXT":return Jf(t.currentRange,n)?n:t.currentRange.start;case"SET_DATE":case"SET_VIEW_TYPE":var r=e.dateMarker||n;return t.activeRange&&!Jf(t.activeRange,r)?t.currentRange.start:r;default:return n}}function Rj(n,e,t){switch(e.type){case"SELECT_DATES":return e.selection;case"UNSELECT_DATES":return null;default:return n}}function xj(n,e){switch(e.type){case"SELECT_EVENT":return e.eventInstanceId;case"UNSELECT_EVENT":return"";default:return n}}function Nj(n,e,t,r){switch(e.type){case"SET_EVENT_DRAG":var i=e.state;return{affectedEvents:i.affectedEvents,mutatedEvents:i.mutatedEvents,isEvent:i.isEvent,origSeg:i.origSeg};case"UNSET_EVENT_DRAG":return null;default:return n}}function Pj(n,e,t,r){switch(e.type){case"SET_EVENT_RESIZE":var i=e.state;return{affectedEvents:i.affectedEvents,mutatedEvents:i.mutatedEvents,isEvent:i.isEvent,origSeg:i.origSeg};case"UNSET_EVENT_RESIZE":return null;default:return n}}function Wk(n){var e=0;for(var t in n)n[t].isFetching&&e++;return e}var Oj={start:null,end:null,allDay:Boolean};function Hj(n,e,t){var r=HT({editable:!1},"",n.allDay,!0,t);return{def:r,ui:mk(r,e),instance:jT(r.defId,n.range),range:n.range,isStart:!0,isEnd:!0}}function gR(n,e,t,r){if(e[n])return e[n];var i=function $j(n,e,t,r){var i=t[n],s=r[n],u=function(b){return i&&null!==i[b]?i[b]:s&&null!==s[b]?s[b]:null},d=u("class"),p=u("superType");!p&&d&&(p=Zk(d,r)||Zk(d,t));var y=null;if(p){if(p===n)throw new Error("Can't have a custom view type that references itself");y=gR(p,e,t,r)}return!d&&y&&(d=y.class),d?{type:n,class:d,defaults:kt({},y?y.defaults:{},i?i.options:{}),overrides:kt({},y?y.overrides:{},s?s.options:{})}:null}(n,e,t,r);return i&&(e[n]=i),i}function Zk(n,e){var t=Object.getPrototypeOf(n.prototype);for(var r in e){var i=e[r];if(i.class&&i.class.prototype===t)return r}return""}function Kk(n){return bc(n,zj)}var Gj={type:String,class:null};function zj(n){"function"==typeof n&&(n={class:n});var e={},t=Xf(n,Gj,{},e);return{superType:t.type,class:t.class,options:e}}var Yk=function(n){function e(t){var r=n.call(this)||this;return r._renderLayout=Zt(r.renderLayout,r.unrenderLayout),r._updateTitle=Zt(r.updateTitle,null,[r._renderLayout]),r._updateActiveButton=Zt(r.updateActiveButton,null,[r._renderLayout]),r._updateToday=Zt(r.updateToday,null,[r._renderLayout]),r._updatePrev=Zt(r.updatePrev,null,[r._renderLayout]),r._updateNext=Zt(r.updateNext,null,[r._renderLayout]),r.el=ss("div",{className:"fc-toolbar "+t}),r}return ka(e,n),e.prototype.destroy=function(){n.prototype.destroy.call(this),this._renderLayout.unrender(),Ls(this.el)},e.prototype.render=function(t){this._renderLayout(t.layout),this._updateTitle(t.title),this._updateActiveButton(t.activeButton),this._updateToday(t.isTodayEnabled),this._updatePrev(t.isPrevEnabled),this._updateNext(t.isNextEnabled)},e.prototype.renderLayout=function(t){var r=this.el;this.viewsWithButtons=[],Hl(r,this.renderSection("left",t.left)),Hl(r,this.renderSection("center",t.center)),Hl(r,this.renderSection("right",t.right))},e.prototype.unrenderLayout=function(){this.el.innerHTML=""},e.prototype.renderSection=function(t,r){var i=this,s=this.context,u=s.theme,d=s.calendar,p=d.optionsManager,y=d.viewSpecs,b=ss("div",{className:"fc-"+t}),I=p.computed.customButtons||{},x=p.overrides.buttonText||{},P=p.computed.buttonText||{};return r&&r.split(" ").forEach(function(k,H){var Ne,Y=[],me=!0;if(k.split(",").forEach(function(ke,et){var Je,Et,on,Qn,ir,$l,ho,as,Ly;"title"===ke?(Y.push(Cy("<h2>&nbsp;</h2>")),me=!1):((Je=I[ke])?(on=function(uI){Je.click&&Je.click.call(as,uI)},(Qn=u.getCustomButtonIconClass(Je))||(Qn=u.getIconClass(ke))||(ir=Je.text)):(Et=y[ke])?(i.viewsWithButtons.push(ke),on=function(){d.changeView(ke)},(ir=Et.buttonTextOverride)||(Qn=u.getIconClass(ke))||(ir=Et.buttonTextDefault)):d[ke]&&(on=function(){d[ke]()},(ir=x[ke])||(Qn=u.getIconClass(ke))||(ir=P[ke])),on&&(ho=["fc-"+ke+"-button",u.getClass("button")],ir?($l=xi(ir),Ly=""):Qn&&($l="<span class='"+Qn+"'></span>",Ly=' aria-label="'+ke+'"'),(as=Cy('<button type="button" class="'+ho.join(" ")+'"'+Ly+">"+$l+"</button>")).addEventListener("click",on),Y.push(as)))}),Y.length>1){Ne=document.createElement("div");var Oe=u.getClass("buttonGroup");me&&Oe&&Ne.classList.add(Oe),Hl(Ne,Y),b.appendChild(Ne)}else Hl(b,Y)}),b},e.prototype.updateToday=function(t){this.toggleButtonEnabled("today",t)},e.prototype.updatePrev=function(t){this.toggleButtonEnabled("prev",t)},e.prototype.updateNext=function(t){this.toggleButtonEnabled("next",t)},e.prototype.updateTitle=function(t){os(this.el,"h2").forEach(function(r){r.innerText=t})},e.prototype.updateActiveButton=function(t){var i=this.context.theme.getClass("buttonActive");os(this.el,"button").forEach(function(s){t&&s.classList.contains("fc-"+t+"-button")?s.classList.add(i):s.classList.remove(i)})},e.prototype.toggleButtonEnabled=function(t,r){os(this.el,".fc-"+t+"-button").forEach(function(i){i.disabled=!r})},e}(fb),Zj=function(n){function e(t){var r=n.call(this)||this;return r.elClassNames=[],r.renderSkeleton=Zt(r._renderSkeleton,r._unrenderSkeleton),r.renderToolbars=Zt(r._renderToolbars,r._unrenderToolbars,[r.renderSkeleton]),r.buildComponentContext=Dn(Qj),r.buildViewPropTransformers=Dn(Xj),r.el=t,r.computeTitle=Dn(Kj),r.parseBusinessHours=Dn(function(i){return function CH(n,e){return NT(function AH(n){return(!0===n?[{}]:Array.isArray(n)?n.filter(function(t){return t.daysOfWeek}):"object"==typeof n&&n?[n]:[]).map(function(t){return kt({},IH,t)})}(n),"",e)}(i,r.context.calendar)}),r}return ka(e,n),e.prototype.render=function(t,r){this.freezeHeight();var i=this.computeTitle(t.dateProfile,t.viewSpec.options);this.renderSkeleton(r),this.renderToolbars(t.viewSpec,t.dateProfile,t.currentDate,i),this.renderView(t,i),this.updateSize(),this.thawHeight()},e.prototype.destroy=function(){this.header&&this.header.destroy(),this.footer&&this.footer.destroy(),this.renderSkeleton.unrender(),n.prototype.destroy.call(this)},e.prototype._renderSkeleton=function(t){this.updateElClassNames(t),ST(this.el,this.contentEl=ss("div",{className:"fc-view-container"}));for(var r=t.calendar,i=0,s=r.pluginSystem.hooks.viewContainerModifiers;i<s.length;i++)(0,s[i])(this.contentEl,r)},e.prototype._unrenderSkeleton=function(){this.view&&(this.savedScroll=this.view.queryScroll(),this.view.destroy(),this.view=null),Ls(this.contentEl),this.removeElClassNames()},e.prototype.removeElClassNames=function(){for(var t=this.el.classList,r=0,i=this.elClassNames;r<i.length;r++)t.remove(i[r]);this.elClassNames=[]},e.prototype.updateElClassNames=function(t){this.removeElClassNames(),this.elClassNames=["fc","fc-"+t.options.dir,t.theme.getClass("widget")];for(var s=this.el.classList,u=0,d=this.elClassNames;u<d.length;u++)s.add(d[u])},e.prototype._renderToolbars=function(t,r,i,s){var u=this,d=u.context,p=u.header,y=u.footer,b=d.options,x=b.header,P=b.footer,k=this.props.dateProfileGenerator,H=d.calendar.getNow(),Y=k.build(H),me=k.buildPrev(r,i),Ne=k.buildNext(r,i),Oe={title:s,activeButton:t.type,isTodayEnabled:Y.isValid&&!Jf(r.currentRange,H),isPrevEnabled:me.isValid,isNextEnabled:Ne.isValid};x?(p||(p=this.header=new Yk("fc-header-toolbar"),ST(this.el,p.el)),p.receiveProps(kt({layout:x},Oe),d)):p&&(p.destroy(),p=this.header=null),P?(y||(y=this.footer=new Yk("fc-footer-toolbar"),Hl(this.el,y.el)),y.receiveProps(kt({layout:P},Oe),d)):y&&(y.destroy(),y=this.footer=null)},e.prototype._unrenderToolbars=function(){this.header&&(this.header.destroy(),this.header=null),this.footer&&(this.footer.destroy(),this.footer=null)},e.prototype.renderView=function(t,r){var i=this.view,s=this.context,u=s.calendar,d=s.options,p=t.viewSpec,y=t.dateProfileGenerator;(!i||i.viewSpec!==p)&&(i&&i.destroy(),i=this.view=new p.class(p,this.contentEl),this.savedScroll&&(i.addScroll(this.savedScroll,!0),this.savedScroll=null)),i.title=r;for(var b={dateProfileGenerator:y,dateProfile:t.dateProfile,businessHours:this.parseBusinessHours(p.options.businessHours),eventStore:t.eventStore,eventUiBases:t.eventUiBases,dateSelection:t.dateSelection,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize},x=0,P=this.buildViewPropTransformers(u.pluginSystem.hooks.viewPropsTransformers);x<P.length;x++)kt(b,P[x].transform(b,p,t,d));i.receiveProps(b,this.buildComponentContext(this.context,p,i))},e.prototype.updateSize=function(t){void 0===t&&(t=!1);var r=this.view;!r||((t||null==this.isHeightAuto)&&this.computeHeightVars(),r.updateSize(t,this.viewHeight,this.isHeightAuto),r.updateNowIndicator(),r.popScroll(t))},e.prototype.computeHeightVars=function(){var t=this.context.calendar,r=t.opt("height"),i=t.opt("contentHeight");this.isHeightAuto="auto"===r||"auto"===i,this.viewHeight="number"==typeof i?i:"function"==typeof i?i():"number"==typeof r?r-this.queryToolbarsHeight():"function"==typeof r?r()-this.queryToolbarsHeight():"parent"===r?this.el.parentNode.getBoundingClientRect().height-this.queryToolbarsHeight():Math.round(this.contentEl.getBoundingClientRect().width/Math.max(t.opt("aspectRatio"),.5))},e.prototype.queryToolbarsHeight=function(){var t=0;return this.header&&(t+=UO(this.header.el)),this.footer&&(t+=UO(this.footer.el)),t},e.prototype.freezeHeight=function(){Ri(this.el,{height:this.el.getBoundingClientRect().height,overflow:"hidden"})},e.prototype.thawHeight=function(){Ri(this.el,{height:"",overflow:""})},e}(fb);function Kj(n,e){var t;return t=/^(year|month)$/.test(n.currentRangeUnit)?n.currentRange:n.activeRange,this.context.dateEnv.formatRange(t.start,t.end,Vs(e.titleFormat||function Yj(n){var e=n.currentRangeUnit;if("year"===e)return{year:"numeric"};if("month"===e)return{year:"numeric",month:"long"};var t=AT(n.currentRange.start,n.currentRange.end);return null!==t&&t>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}(n),e.titleRangeSeparator),{isEndExclusive:n.isRangeAllDay})}function Qj(n,e,t){return n.extend(e.options,t)}function Xj(n){return n.map(function(e){return new e})}var Oy=function(){function n(e){this.component=e.component}return n.prototype.destroy=function(){},n}();function mR(n){var e;return(e={})[n.component.uid]=n,e}var zT={},e$=function(n){function e(t){var r=n.call(this,t)||this;r.handleSegClick=function(s,u){var d=r.component,p=d.context,y=p.calendar,b=p.view,I=lb(u);if(I&&d.isValidSegDownEl(s.target)){var x=Go(s.target,".fc-has-url"),P=x?x.querySelector("a[href]").href:"";y.publiclyTrigger("eventClick",[{el:u,event:new Ir(d.context.calendar,I.eventRange.def,I.eventRange.instance),jsEvent:s,view:b}]),P&&!s.defaultPrevented&&(window.location.href=P)}};var i=t.component;return r.destroy=CT(i.el,"click",i.fgSegSelector+","+i.bgSegSelector,r.handleSegClick),r}return ka(e,n),e}(Oy),t$=function(n){function e(t){var r=n.call(this,t)||this;r.handleEventElRemove=function(s){s===r.currentSegEl&&r.handleSegLeave(null,r.currentSegEl)},r.handleSegEnter=function(s,u){lb(u)&&(u.classList.add("fc-allow-mouse-resize"),r.currentSegEl=u,r.triggerEvent("eventMouseEnter",s,u))},r.handleSegLeave=function(s,u){r.currentSegEl&&(u.classList.remove("fc-allow-mouse-resize"),r.currentSegEl=null,r.triggerEvent("eventMouseLeave",s,u))};var i=t.component;return r.removeHoverListeners=function r2(n,e,t,r){var i;return CT(n,"mouseover",e,function(s,u){if(u!==i){i=u,t(s,u);var d=function(p){i=null,r(p,u),u.removeEventListener("mouseleave",d)};u.addEventListener("mouseleave",d)}})}(i.el,i.fgSegSelector+","+i.bgSegSelector,r.handleSegEnter,r.handleSegLeave),i.context.calendar.on("eventElRemove",r.handleEventElRemove),r}return ka(e,n),e.prototype.destroy=function(){this.removeHoverListeners(),this.component.context.calendar.off("eventElRemove",this.handleEventElRemove)},e.prototype.triggerEvent=function(t,r,i){var s=this.component,u=s.context,d=u.calendar,p=u.view,y=lb(i);(!r||s.isValidSegDownEl(r.target))&&d.publiclyTrigger(t,[{el:i,event:new Ir(d,y.eventRange.def,y.eventRange.instance),jsEvent:r,view:p}])},e}(Oy),Zg=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return ka(e,n),e}(hb);Zg.prototype.classes={widget:"fc-unthemed",widgetHeader:"fc-widget-header",widgetContent:"fc-widget-content",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active",popoverHeader:"fc-widget-header",popoverContent:"fc-widget-content",headerRow:"fc-widget-header",dayRow:"fc-widget-content",listView:"fc-widget-content"},Zg.prototype.baseIconClass="fc-icon",Zg.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"},Zg.prototype.iconOverrideOption="buttonIcons",Zg.prototype.iconOverrideCustomButtonOption="icon",Zg.prototype.iconOverridePrefix="fc-icon-";var Qk=function(){function n(e,t){var r=this;this.buildComponentContext=Dn(n$),this.parseRawLocales=Dn(fR),this.buildLocale=Dn(pR),this.buildDateEnv=Dn(r$),this.buildTheme=Dn(i$),this.buildEventUiSingleBase=Dn(this._buildEventUiSingleBase),this.buildSelectionConfig=Dn(this._buildSelectionConfig),this.buildEventUiBySource=function U2(n,e){var t=null;return function(){var r=n.apply(this,arguments);return(null===t||!(t===r||e(t,r)))&&(t=r),t}}(o$,P2),this.buildEventUiBases=Dn(a$),this.interactionsStore={},this.actionQueue=[],this.isReducing=!1,this.needsRerender=!1,this.isRendering=!1,this.renderingPauseDepth=0,this.buildDelayedRerender=Dn(s$),this.afterSizingTriggers={},this.isViewUpdated=!1,this.isDatesUpdated=!1,this.isEventsUpdated=!1,this.el=e,this.optionsManager=new lj(t||{}),this.pluginSystem=new UH,this.addPluginInputs(this.optionsManager.computed.plugins||[]),this.handleOptions(this.optionsManager.computed),this.publiclyTrigger("_init"),this.hydrate(),this.calendarInteractions=this.pluginSystem.hooks.calendarInteractions.map(function(i){return new i(r)})}return n.prototype.addPluginInputs=function(e){for(var t=function sj(n){for(var e=[],t=0,r=n;t<r.length;t++){var i=r[t];if("string"==typeof i){var s="FullCalendar"+YM(i);window[s]?e.push(window[s].default):console.warn("Plugin file not loaded for "+i)}else e.push(i)}return ij.concat(e)}(e),r=0,i=t;r<i.length;r++)this.pluginSystem.add(i[r])},Object.defineProperty(n.prototype,"view",{get:function(){return this.component?this.component.view:null},enumerable:!0,configurable:!0}),n.prototype.render=function(){this.component?this.requestRerender():(this.component=new Zj(this.el),this.renderableEventStore={defs:{},instances:{}},this.bindHandlers(),this.executeRender())},n.prototype.destroy=function(){if(this.component){this.unbindHandlers(),this.component.destroy(),this.component=null;for(var e=0,t=this.calendarInteractions;e<t.length;e++)t[e].destroy();this.publiclyTrigger("_destroyed")}},n.prototype.bindHandlers=function(){var e=this;this.removeNavLinkListener=CT(this.el,"click","a[data-goto]",function(t,r){var i=r.getAttribute("data-goto");i=i?JSON.parse(i):{};var s=e.dateEnv,u=s.createMarker(i.date),d=i.type,p=e.viewOpt("navLink"+YM(d)+"Click");"function"==typeof p?p(s.toDate(u),t):("string"==typeof p&&(d=p),e.zoomTo(u,d))}),this.opt("handleWindowResize")&&window.addEventListener("resize",this.windowResizeProxy=ik(this.windowResize.bind(this),this.opt("windowResizeDelay")))},n.prototype.unbindHandlers=function(){this.removeNavLinkListener(),this.windowResizeProxy&&(window.removeEventListener("resize",this.windowResizeProxy),this.windowResizeProxy=null)},n.prototype.hydrate=function(){var e=this;this.state=this.buildInitialState();var t=this.opt("eventSources")||[],r=this.opt("events"),i=[];r&&t.unshift(r);for(var s=0,u=t;s<u.length;s++){var p=$k(u[s],this);p&&i.push(p)}this.batchRendering(function(){e.dispatch({type:"INIT"}),e.dispatch({type:"ADD_EVENT_SOURCES",sources:i}),e.dispatch({type:"SET_VIEW_TYPE",viewType:e.opt("defaultView")||e.pluginSystem.hooks.defaultView})})},n.prototype.buildInitialState=function(){return{viewType:null,loadingLevel:0,eventSourceLoadingLevel:0,currentDate:this.getInitialDate(),dateProfile:null,eventSources:{},eventStore:{defs:{},instances:{}},dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null}},n.prototype.dispatch=function(e){if(this.actionQueue.push(e),!this.isReducing){this.isReducing=!0;for(var t=this.state;this.actionQueue.length;)this.state=this.reduce(this.state,this.actionQueue.shift(),this);var r=this.state;this.isReducing=!1,!t.loadingLevel&&r.loadingLevel?this.publiclyTrigger("loading",[!0]):t.loadingLevel&&!r.loadingLevel&&this.publiclyTrigger("loading",[!1]);var i=this.component&&this.component.view;t.eventStore!==r.eventStore&&t.eventStore&&(this.isEventsUpdated=!0),t.dateProfile!==r.dateProfile&&(t.dateProfile&&i&&this.publiclyTrigger("datesDestroy",[{view:i,el:i.el}]),this.isDatesUpdated=!0),t.viewType!==r.viewType&&(t.viewType&&i&&this.publiclyTrigger("viewSkeletonDestroy",[{view:i,el:i.el}]),this.isViewUpdated=!0),this.requestRerender()}},n.prototype.reduce=function(e,t,r){return Ij(e,t,r)},n.prototype.requestRerender=function(){this.needsRerender=!0,this.delayedRerender()},n.prototype.tryRerender=function(){this.component&&this.needsRerender&&!this.renderingPauseDepth&&!this.isRendering&&this.executeRender()},n.prototype.batchRendering=function(e){this.renderingPauseDepth++,e(),this.renderingPauseDepth--,this.needsRerender&&this.requestRerender()},n.prototype.executeRender=function(){this.needsRerender=!1,this.isRendering=!0,this.renderComponent(),this.isRendering=!1,this.needsRerender&&this.delayedRerender()},n.prototype.renderComponent=function(){var t=this.state,r=this.component,i=t.viewType,s=this.viewSpecs[i];if(!s)throw new Error('View type "'+i+'" is not valid');var u=this.renderableEventStore=t.eventSourceLoadingLevel&&!this.opt("progressiveEventRendering")?this.renderableEventStore:t.eventStore,d=this.buildEventUiSingleBase(s.options),p=this.buildEventUiBySource(t.eventSources),y=this.eventUiBases=this.buildEventUiBases(u.defs,d,p);r.receiveProps(kt({},t,{viewSpec:s,dateProfileGenerator:this.dateProfileGenerators[i],dateProfile:t.dateProfile,eventStore:u,eventUiBases:y,dateSelection:t.dateSelection,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize}),this.buildComponentContext(this.theme,this.dateEnv,this.optionsManager.computed)),this.isViewUpdated&&(this.isViewUpdated=!1,this.publiclyTrigger("viewSkeletonRender",[{view:r.view,el:r.view.el}])),this.isDatesUpdated&&(this.isDatesUpdated=!1,this.publiclyTrigger("datesRender",[{view:r.view,el:r.view.el}])),this.isEventsUpdated&&(this.isEventsUpdated=!1),this.releaseAfterSizingTriggers()},n.prototype.setOption=function(e,t){var r;this.mutateOptions(((r={})[e]=t,r),[],!0)},n.prototype.getOption=function(e){return this.optionsManager.computed[e]},n.prototype.opt=function(e){return this.optionsManager.computed[e]},n.prototype.viewOpt=function(e){return this.viewOpts()[e]},n.prototype.viewOpts=function(){return this.viewSpecs[this.state.viewType].options},n.prototype.mutateOptions=function(e,t,r,i){var s=this,u=this.pluginSystem.hooks.optionChangeHandlers,d={},p={},y=this.dateEnv,b=!1,I=!1,x=Boolean(t.length);for(var P in e)u[P]?p[P]=e[P]:d[P]=e[P];for(var k in d)/^(height|contentHeight|aspectRatio)$/.test(k)?I=!0:/^(defaultDate|defaultView)$/.test(k)||(x=!0,"timeZone"===k&&(b=!0));this.optionsManager.mutate(d,t,r),x&&this.handleOptions(this.optionsManager.computed),this.batchRendering(function(){if(x?(b&&s.dispatch({type:"CHANGE_TIMEZONE",oldDateEnv:y}),s.dispatch({type:"SET_VIEW_TYPE",viewType:s.state.viewType})):I&&s.updateSize(),i)for(var H in p)u[H](p[H],s,i)})},n.prototype.handleOptions=function(e){var t=this,r=this.pluginSystem.hooks;this.defaultAllDayEventDuration=hn(e.defaultAllDayEventDuration),this.defaultTimedEventDuration=hn(e.defaultTimedEventDuration),this.delayedRerender=this.buildDelayedRerender(e.rerenderDelay),this.theme=this.buildTheme(e);var i=this.parseRawLocales(e.locales);this.availableRawLocales=i.map;var s=this.buildLocale(e.locale||i.defaultCode,i.map);this.dateEnv=this.buildDateEnv(s,e.timeZone,r.namedTimeZonedImpl,e.firstDay,e.weekNumberCalculation,e.weekLabel,r.cmdFormatter),this.selectionConfig=this.buildSelectionConfig(e),this.viewSpecs=function qj(n,e){var t=Kk(n),r=Kk(e.overrides.views),i=function jj(n,e){var r,t={};for(r in n)gR(r,t,n,e);for(r in e)gR(r,t,n,e);return t}(t,r);return bc(i,function(s){return function Wj(n,e,t){var r=n.overrides.duration||n.defaults.duration||t.dynamicOverrides.duration||t.overrides.duration,i=null,s="",u="",d={};if(r&&(i=hn(r))){var p=KM(i,!zM(r));s=p.unit,1===p.value&&(u=s,d=e[s]?e[s].options:{})}var y=function(b){var I=b.buttonText||{},x=n.defaults.buttonTextKey;return null!=x&&null!=I[x]?I[x]:null!=I[n.type]?I[n.type]:null!=I[u]?I[u]:void 0};return{type:n.type,class:n.class,duration:i,durationUnit:s,singleUnit:u,options:kt({},eh,n.defaults,t.dirDefaults,t.localeDefaults,t.overrides,d,n.overrides,t.dynamicOverrides),buttonTextOverride:y(t.dynamicOverrides)||y(t.overrides)||n.overrides.buttonText,buttonTextDefault:y(t.localeDefaults)||y(t.dirDefaults)||n.defaults.buttonText||y(eh)||n.type}}(s,r,e)})}(r.views,this.optionsManager),this.dateProfileGenerators=bc(this.viewSpecs,function(u){return new u.class.prototype.dateProfileGeneratorClass(u,t)})},n.prototype.getAvailableLocaleCodes=function(){return Object.keys(this.availableRawLocales)},n.prototype._buildSelectionConfig=function(e){return Ak("select",e,this)},n.prototype._buildEventUiSingleBase=function(e){return e.editable&&(e=kt({},e,{eventEditable:!0})),Ak("event",e,this)},n.prototype.hasPublicHandlers=function(e){return this.hasHandlers(e)||this.opt(e)},n.prototype.publiclyTrigger=function(e,t){var r=this.opt(e);if(this.triggerWith(e,this,t),r)return r.apply(this,t)},n.prototype.publiclyTriggerAfterSizing=function(e,t){var r=this.afterSizingTriggers;(r[e]||(r[e]=[])).push(t)},n.prototype.releaseAfterSizingTriggers=function(){var e=this.afterSizingTriggers;for(var t in e)for(var r=0,i=e[t];r<i.length;r++)this.publiclyTrigger(t,i[r]);this.afterSizingTriggers={}},n.prototype.isValidViewType=function(e){return Boolean(this.viewSpecs[e])},n.prototype.changeView=function(e,t){var r=null;t&&(t.start&&t.end?(this.optionsManager.mutate({visibleRange:t},[]),this.handleOptions(this.optionsManager.computed)):r=this.dateEnv.createMarker(t)),this.unselect(),this.dispatch({type:"SET_VIEW_TYPE",viewType:e,dateMarker:r})},n.prototype.zoomTo=function(e,t){var r;r=this.viewSpecs[t=t||"day"]||this.getUnitViewSpec(t),this.unselect(),this.dispatch(r?{type:"SET_VIEW_TYPE",viewType:r.type,dateMarker:e}:{type:"SET_DATE",dateMarker:e})},n.prototype.getUnitViewSpec=function(e){var i,s,t=this.component,r=[];for(var u in t.header&&r.push.apply(r,t.header.viewsWithButtons),t.footer&&r.push.apply(r,t.footer.viewsWithButtons),this.viewSpecs)r.push(u);for(i=0;i<r.length;i++)if((s=this.viewSpecs[r[i]])&&s.singleUnit===e)return s},n.prototype.getInitialDate=function(){var e=this.opt("defaultDate");return null!=e?this.dateEnv.createMarker(e):this.getNow()},n.prototype.prev=function(){this.unselect(),this.dispatch({type:"PREV"})},n.prototype.next=function(){this.unselect(),this.dispatch({type:"NEXT"})},n.prototype.prevYear=function(){this.unselect(),this.dispatch({type:"SET_DATE",dateMarker:this.dateEnv.addYears(this.state.currentDate,-1)})},n.prototype.nextYear=function(){this.unselect(),this.dispatch({type:"SET_DATE",dateMarker:this.dateEnv.addYears(this.state.currentDate,1)})},n.prototype.today=function(){this.unselect(),this.dispatch({type:"SET_DATE",dateMarker:this.getNow()})},n.prototype.gotoDate=function(e){this.unselect(),this.dispatch({type:"SET_DATE",dateMarker:this.dateEnv.createMarker(e)})},n.prototype.incrementDate=function(e){var t=hn(e);t&&(this.unselect(),this.dispatch({type:"SET_DATE",dateMarker:this.dateEnv.add(this.state.currentDate,t)}))},n.prototype.getDate=function(){return this.dateEnv.toDate(this.state.currentDate)},n.prototype.formatDate=function(e,t){var r=this.dateEnv;return r.format(r.createMarker(e),Vs(t))},n.prototype.formatRange=function(e,t,r){var i=this.dateEnv;return i.formatRange(i.createMarker(e),i.createMarker(t),Vs(r,this.opt("defaultRangeSeparator")),r)},n.prototype.formatIso=function(e,t){var r=this.dateEnv;return r.formatIso(r.createMarker(e),{omitTime:t})},n.prototype.windowResize=function(e){!this.isHandlingWindowResize&&this.component&&e.target===window&&(this.isHandlingWindowResize=!0,this.updateSize(),this.publiclyTrigger("windowResize",[this.view]),this.isHandlingWindowResize=!1)},n.prototype.updateSize=function(){this.component&&this.component.updateSize(!0)},n.prototype.registerInteractiveComponent=function(e,t){var r=function Jj(n,e){return{component:n,el:e.el,useEventCenter:null==e.useEventCenter||e.useEventCenter}}(e,t),u=[e$,t$].concat(this.pluginSystem.hooks.componentInteractions).map(function(d){return new d(r)});this.interactionsStore[e.uid]=u,zT[e.uid]=r},n.prototype.unregisterInteractiveComponent=function(e){for(var t=0,r=this.interactionsStore[e.uid];t<r.length;t++)r[t].destroy();delete this.interactionsStore[e.uid],delete zT[e.uid]},n.prototype.select=function(e,t){var i=function kj(n,e,t){var r=function Fj(n,e){var t={},r=Xf(n,Oj,{},t),i=r.start?e.createMarkerMeta(r.start):null,s=r.end?e.createMarkerMeta(r.end):null,u=r.allDay;return null==u&&(u=i&&i.isTimeUnspecified&&(!s||s.isTimeUnspecified)),t.range={start:i?i.marker:null,end:s?s.marker:null},t.allDay=u,t}(n,e),i=r.range;if(!i.start)return null;if(!i.end){if(null==t)return null;i.end=e.add(i.start,t)}return r}(null==t?null!=e.start?e:{start:e,end:null}:{start:e,end:t},this.dateEnv,hn({days:1}));i&&(this.dispatch({type:"SELECT_DATES",selection:i}),this.triggerDateSelect(i))},n.prototype.unselect=function(e){this.state.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),this.triggerDateUnselect(e))},n.prototype.triggerDateSelect=function(e,t){var r=kt({},this.buildDateSpanApi(e),{jsEvent:t?t.origEvent:null,view:this.view});this.publiclyTrigger("select",[r])},n.prototype.triggerDateUnselect=function(e){this.publiclyTrigger("unselect",[{jsEvent:e?e.origEvent:null,view:this.view}])},n.prototype.triggerDateClick=function(e,t,r,i){var s=kt({},this.buildDatePointApi(e),{dayEl:t,jsEvent:i,view:r});this.publiclyTrigger("dateClick",[s])},n.prototype.buildDatePointApi=function(e){for(var t={},r=0,i=this.pluginSystem.hooks.datePointTransforms;r<i.length;r++)kt(t,(0,i[r])(e,this));return kt(t,function Bj(n,e){return{date:e.toDate(n.range.start),dateStr:e.formatIso(n.range.start,{omitTime:n.allDay}),allDay:n.allDay}}(e,this.dateEnv)),t},n.prototype.buildDateSpanApi=function(e){for(var t={},r=0,i=this.pluginSystem.hooks.dateSpanTransforms;r<i.length;r++)kt(t,(0,i[r])(e,this));return kt(t,function Uj(n,e){return{start:e.toDate(n.range.start),end:e.toDate(n.range.end),startStr:e.formatIso(n.range.start,{omitTime:n.allDay}),endStr:e.formatIso(n.range.end,{omitTime:n.allDay}),allDay:n.allDay}}(e,this.dateEnv)),t},n.prototype.getNow=function(){var e=this.opt("now");return"function"==typeof e&&(e=e()),null==e?this.dateEnv.createNowMarker():this.dateEnv.createMarker(e)},n.prototype.getDefaultEventEnd=function(e,t){var r=t;return e?(r=Pr(r),r=this.dateEnv.add(r,this.defaultAllDayEventDuration)):r=this.dateEnv.add(r,this.defaultTimedEventDuration),r},n.prototype.addEvent=function(e,t){if(e instanceof Ir){var r=e._def;return this.state.eventStore.defs[r.defId]||this.dispatch({type:"ADD_EVENTS",eventStore:ob({def:r,instance:e._instance})}),e}var s;if(t instanceof Py)s=t.internalEventSource.sourceId;else if(null!=t){var u=this.getEventSourceById(t);if(!u)return console.warn('Could not find an event source with ID "'+t+'"'),null;s=u.internalEventSource.sourceId}var d=Nk(e,s,this);return d?(this.dispatch({type:"ADD_EVENTS",eventStore:ob(d)}),new Ir(this,d.def,d.def.recurringDef?null:d.instance)):null},n.prototype.getEventById=function(e){var t=this.state.eventStore,r=t.defs,i=t.instances;for(var s in e=String(e),r){var u=r[s];if(u.publicId===e){if(u.recurringDef)return new Ir(this,u,null);for(var d in i){var p=i[d];if(p.defId===u.defId)return new Ir(this,u,p)}}}return null},n.prototype.getEvents=function(){var e=this.state.eventStore,t=e.defs,r=e.instances,i=[];for(var s in r){var u=r[s];i.push(new Ir(this,t[u.defId],u))}return i},n.prototype.removeAllEvents=function(){this.dispatch({type:"REMOVE_ALL_EVENTS"})},n.prototype.rerenderEvents=function(){this.dispatch({type:"RESET_EVENTS"})},n.prototype.getEventSources=function(){var e=this.state.eventSources,t=[];for(var r in e)t.push(new Py(this,e[r]));return t},n.prototype.getEventSourceById=function(e){var t=this.state.eventSources;for(var r in e=String(e),t)if(t[r].publicId===e)return new Py(this,t[r]);return null},n.prototype.addEventSource=function(e){if(e instanceof Py)return this.state.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;var t=$k(e,this);return t?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[t]}),new Py(this,t)):null},n.prototype.removeAllEventSources=function(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})},n.prototype.refetchEvents=function(){this.dispatch({type:"FETCH_EVENT_SOURCES"})},n.prototype.scrollToTime=function(e){var t=hn(e);t&&this.component.view.scrollToDuration(t)},n}();function n$(n,e,t){return new FH(this,n,e,t,null)}function r$(n,e,t,r,i,s,u){return new Hk({calendarSystem:"gregory",timeZone:e,namedTimeZoneImpl:t,locale:n,weekNumberCalculation:i,firstDay:r,weekLabel:s,cmdFormatter:u})}function i$(n){return new(this.pluginSystem.hooks.themeClasses[n.themeSystem]||Zg)(n)}function s$(n){var e=this.tryRerender.bind(this);return null!=n&&(e=ik(e,n)),e}function o$(n){return bc(n,function(e){return e.ui})}function a$(n,e,t){var r={"":e};for(var i in n){var s=n[i];s.sourceId&&t[s.sourceId]&&(r[i]=t[s.sourceId])}return r}db.mixInto(Qk);var pb=function(n){function e(t,r){var i=n.call(this,ss("div",{className:"fc-view fc-"+t.type+"-view"}))||this;return i.renderDatesMem=Zt(i.renderDatesWrap,i.unrenderDatesWrap),i.renderBusinessHoursMem=Zt(i.renderBusinessHours,i.unrenderBusinessHours,[i.renderDatesMem]),i.renderDateSelectionMem=Zt(i.renderDateSelectionWrap,i.unrenderDateSelectionWrap,[i.renderDatesMem]),i.renderEventsMem=Zt(i.renderEvents,i.unrenderEvents,[i.renderDatesMem]),i.renderEventSelectionMem=Zt(i.renderEventSelectionWrap,i.unrenderEventSelectionWrap,[i.renderEventsMem]),i.renderEventDragMem=Zt(i.renderEventDragWrap,i.unrenderEventDragWrap,[i.renderDatesMem]),i.renderEventResizeMem=Zt(i.renderEventResizeWrap,i.unrenderEventResizeWrap,[i.renderDatesMem]),i.viewSpec=t,i.type=t.type,r.appendChild(i.el),i.initialize(),i}return ka(e,n),e.prototype.initialize=function(){},Object.defineProperty(e.prototype,"activeStart",{get:function(){return this.context.dateEnv.toDate(this.props.dateProfile.activeRange.start)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeEnd",{get:function(){return this.context.dateEnv.toDate(this.props.dateProfile.activeRange.end)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentStart",{get:function(){return this.context.dateEnv.toDate(this.props.dateProfile.currentRange.start)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentEnd",{get:function(){return this.context.dateEnv.toDate(this.props.dateProfile.currentRange.end)},enumerable:!0,configurable:!0}),e.prototype.render=function(t,r){this.renderDatesMem(t.dateProfile),this.renderBusinessHoursMem(t.businessHours),this.renderDateSelectionMem(t.dateSelection),this.renderEventsMem(t.eventStore),this.renderEventSelectionMem(t.eventSelection),this.renderEventDragMem(t.eventDrag),this.renderEventResizeMem(t.eventResize)},e.prototype.beforeUpdate=function(){this.addScroll(this.queryScroll())},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.renderDatesMem.unrender()},e.prototype.updateSize=function(t,r,i){var s=this.context.calendar;t&&this.addScroll(this.queryScroll()),(t||s.isViewUpdated||s.isDatesUpdated||s.isEventsUpdated)&&this.updateBaseSize(t,r,i)},e.prototype.updateBaseSize=function(t,r,i){},e.prototype.renderDatesWrap=function(t){this.renderDates(t),this.addScroll({duration:hn(this.context.options.scrollTime)})},e.prototype.unrenderDatesWrap=function(){this.stopNowIndicator(),this.unrenderDates()},e.prototype.renderDates=function(t){},e.prototype.unrenderDates=function(){},e.prototype.renderBusinessHours=function(t){},e.prototype.unrenderBusinessHours=function(){},e.prototype.renderDateSelectionWrap=function(t){t&&this.renderDateSelection(t)},e.prototype.unrenderDateSelectionWrap=function(t){t&&this.unrenderDateSelection(t)},e.prototype.renderDateSelection=function(t){},e.prototype.unrenderDateSelection=function(t){},e.prototype.renderEvents=function(t){},e.prototype.unrenderEvents=function(){},e.prototype.sliceEvents=function(t,r){var i=this.props;return iR(t,i.eventUiBases,i.dateProfile.activeRange,r?this.context.nextDayThreshold:null).fg},e.prototype.renderEventSelectionWrap=function(t){t&&this.renderEventSelection(t)},e.prototype.unrenderEventSelectionWrap=function(t){t&&this.unrenderEventSelection(t)},e.prototype.renderEventSelection=function(t){},e.prototype.unrenderEventSelection=function(t){},e.prototype.renderEventDragWrap=function(t){t&&this.renderEventDrag(t)},e.prototype.unrenderEventDragWrap=function(t){t&&this.unrenderEventDrag(t)},e.prototype.renderEventDrag=function(t){},e.prototype.unrenderEventDrag=function(t){},e.prototype.renderEventResizeWrap=function(t){t&&this.renderEventResize(t)},e.prototype.unrenderEventResizeWrap=function(t){t&&this.unrenderEventResize(t)},e.prototype.renderEventResize=function(t){},e.prototype.unrenderEventResize=function(t){},e.prototype.startNowIndicator=function(t,r){var y,b,I,i=this,s=this.context,u=s.calendar,d=s.dateEnv;s.options.nowIndicator&&!this.initialNowDate&&(y=this.getNowIndicatorUnit(t,r))&&(b=this.updateNowIndicator.bind(this),this.initialNowDate=u.getNow(),this.initialNowQueriedMs=(new Date).valueOf(),I=d.add(d.startOf(this.initialNowDate,y),hn(1,y)).valueOf()-this.initialNowDate.valueOf(),this.nowIndicatorTimeoutID=setTimeout(function(){i.nowIndicatorTimeoutID=null,b(),I="second"===y?1e3:6e4,i.nowIndicatorIntervalID=setInterval(b,I)},I))},e.prototype.updateNowIndicator=function(){this.props.dateProfile&&this.initialNowDate&&(this.unrenderNowIndicator(),this.renderNowIndicator(sb(this.initialNowDate,(new Date).valueOf()-this.initialNowQueriedMs)),this.isNowIndicatorRendered=!0)},e.prototype.stopNowIndicator=function(){this.nowIndicatorTimeoutID&&(clearTimeout(this.nowIndicatorTimeoutID),this.nowIndicatorTimeoutID=null),this.nowIndicatorIntervalID&&(clearInterval(this.nowIndicatorIntervalID),this.nowIndicatorIntervalID=null),this.isNowIndicatorRendered&&(this.unrenderNowIndicator(),this.isNowIndicatorRendered=!1)},e.prototype.getNowIndicatorUnit=function(t,r){},e.prototype.renderNowIndicator=function(t){},e.prototype.unrenderNowIndicator=function(){},e.prototype.addScroll=function(t,r){r&&(t.isForced=r),kt(this.queuedScroll||(this.queuedScroll={}),t)},e.prototype.popScroll=function(t){this.applyQueuedScroll(t),this.queuedScroll=null},e.prototype.applyQueuedScroll=function(t){this.queuedScroll&&this.applyScroll(this.queuedScroll,t)},e.prototype.queryScroll=function(){var t={};return this.props.dateProfile&&kt(t,this.queryDateScroll()),t},e.prototype.applyScroll=function(t,r){var i=t.duration;null!=i&&!t.isForced&&(delete t.duration,this.props.dateProfile&&kt(t,this.computeDateScroll(i))),this.props.dateProfile&&this.applyDateScroll(t)},e.prototype.computeDateScroll=function(t){return{}},e.prototype.queryDateScroll=function(){return{}},e.prototype.applyDateScroll=function(t){},e.prototype.scrollToDuration=function(t){this.applyScroll({duration:t},!1)},e}(ep);db.mixInto(pb),pb.prototype.usesMinMaxTime=!1,pb.prototype.dateProfileGeneratorClass=qk;var Xk=function(){function n(){this.segs=[],this.isSizeDirty=!1}return n.prototype.renderSegs=function(e,t,r){this.context=e,this.rangeUpdated(),t=this.renderSegEls(t,r),this.segs=t,this.attachSegs(t,r),this.isSizeDirty=!0,vk(this.context,this.segs,Boolean(r))},n.prototype.unrender=function(e,t,r){yk(this.context,this.segs,Boolean(r)),this.detachSegs(this.segs),this.segs=[]},n.prototype.rangeUpdated=function(){var t,r,e=this.context.options;this.eventTimeFormat=Vs(e.eventTimeFormat||this.computeEventTimeFormat(),e.defaultRangeSeparator),null==(t=e.displayEventTime)&&(t=this.computeDisplayEventTime()),null==(r=e.displayEventEnd)&&(r=this.computeDisplayEventEnd()),this.displayEventTime=t,this.displayEventEnd=r},n.prototype.renderSegEls=function(e,t){var i,r="";if(e.length){for(i=0;i<e.length;i++)r+=this.renderSegHtml(e[i],t);HM(r).forEach(function(s,u){s&&(e[u].el=s)}),e=gk(this.context,e,Boolean(t))}return e},n.prototype.getSegClasses=function(e,t,r,i){var s=["fc-event",e.isStart?"fc-start":"fc-not-start",e.isEnd?"fc-end":"fc-not-end"].concat(e.eventRange.ui.classNames);return t&&s.push("fc-draggable"),r&&s.push("fc-resizable"),i&&(s.push("fc-mirror"),i.isDragging&&s.push("fc-dragging"),i.isResizing&&s.push("fc-resizing")),s},n.prototype.getTimeText=function(e,t,r){var i=e.def,s=e.instance;return this._getTimeText(s.range.start,i.hasEnd?s.range.end:null,i.allDay,t,r,s.forcedStartTzo,s.forcedEndTzo)},n.prototype._getTimeText=function(e,t,r,i,s,u,d){var p=this.context.dateEnv;return null==i&&(i=this.eventTimeFormat),null==s&&(s=this.displayEventEnd),this.displayEventTime&&!r?s&&t?p.formatRange(e,t,i,{forcedStartTzo:u,forcedEndTzo:d}):p.format(e,i,{forcedTzo:u}):""},n.prototype.computeEventTimeFormat=function(){return{hour:"numeric",minute:"2-digit",omitZeroMinute:!0}},n.prototype.computeDisplayEventTime=function(){return!0},n.prototype.computeDisplayEventEnd=function(){return!0},n.prototype.getSkinCss=function(e){return{"background-color":e.backgroundColor,"border-color":e.borderColor,color:e.textColor}},n.prototype.sortEventSegs=function(e){var t=this.context.eventOrderSpecs,r=e.map(Jk);return r.sort(function(i,s){return nk(i,s,t)}),r.map(function(i){return i._seg})},n.prototype.computeSizes=function(e){(e||this.isSizeDirty)&&this.computeSegSizes(this.segs)},n.prototype.assignSizes=function(e){(e||this.isSizeDirty)&&(this.assignSegSizes(this.segs),this.isSizeDirty=!1)},n.prototype.computeSegSizes=function(e){},n.prototype.assignSegSizes=function(e){},n.prototype.hideByHash=function(e){if(e)for(var t=0,r=this.segs;t<r.length;t++){var i=r[t];e[i.eventRange.instance.instanceId]&&(i.el.style.visibility="hidden")}},n.prototype.showByHash=function(e){if(e)for(var t=0,r=this.segs;t<r.length;t++){var i=r[t];e[i.eventRange.instance.instanceId]&&(i.el.style.visibility="")}},n.prototype.selectByInstanceId=function(e){if(e)for(var t=0,r=this.segs;t<r.length;t++){var i=r[t],s=i.eventRange.instance;s&&s.instanceId===e&&i.el&&i.el.classList.add("fc-selected")}},n.prototype.unselectByInstanceId=function(e){if(e)for(var t=0,r=this.segs;t<r.length;t++){var i=r[t];i.el&&i.el.classList.remove("fc-selected")}},n}();function Jk(n){var e=n.eventRange.def,t=n.eventRange.instance.range,r=t.start?t.start.valueOf():0,i=t.end?t.end.valueOf():0;return kt({},e.extendedProps,e,{id:e.publicId,start:r,end:i,duration:i-r,allDay:Number(e.allDay),_seg:n})}var e1=function(){function n(){this.fillSegTag="div",this.dirtySizeFlags={},this.containerElsByType={},this.segsByType={}}return n.prototype.getSegsByType=function(e){return this.segsByType[e]||[]},n.prototype.renderSegs=function(e,t,r){var i;this.context=t;var s=this.renderSegEls(e,r),u=this.attachSegs(e,s);u&&(i=this.containerElsByType[e]||(this.containerElsByType[e]=[])).push.apply(i,u),this.segsByType[e]=s,"bgEvent"===e&&vk(t,s,!1),this.dirtySizeFlags[e]=!0},n.prototype.unrender=function(e,t){var r=this.segsByType[e];r&&("bgEvent"===e&&yk(t,r,!1),this.detachSegs(e,r))},n.prototype.renderSegEls=function(e,t){var s,r=this,i="";if(t.length){for(s=0;s<t.length;s++)i+=this.renderSegHtml(e,t[s]);HM(i).forEach(function(u,d){u&&(t[d].el=u)}),"bgEvent"===e&&(t=gk(this.context,t,!1)),t=t.filter(function(u){return TT(u.el,r.fillSegTag)})}return t},n.prototype.renderSegHtml=function(e,t){var r=null,i=[];return"highlight"!==e&&"businessHours"!==e&&(r={"background-color":t.eventRange.ui.backgroundColor}),"highlight"!==e&&(i=i.concat(t.eventRange.ui.classNames)),i.push("businessHours"===e?"fc-bgevent":"fc-"+e.toLowerCase()),"<"+this.fillSegTag+(i.length?' class="'+i.join(" ")+'"':"")+(r?' style="'+aR(r)+'"':"")+"></"+this.fillSegTag+">"},n.prototype.detachSegs=function(e,t){var r=this.containerElsByType[e];r&&(r.forEach(Ls),delete this.containerElsByType[e])},n.prototype.computeSizes=function(e){for(var t in this.segsByType)(e||this.dirtySizeFlags[t])&&this.computeSegSizes(this.segsByType[t])},n.prototype.assignSizes=function(e){for(var t in this.segsByType)(e||this.dirtySizeFlags[t])&&this.assignSegSizes(this.segsByType[t]);this.dirtySizeFlags={}},n.prototype.computeSegSizes=function(e){},n.prototype.assignSegSizes=function(e){},n}(),t1=function(){function n(e){this.emitter=new db}return n.prototype.destroy=function(){},n.prototype.setMirrorIsVisible=function(e){},n.prototype.setMirrorNeedsRevert=function(e){},n.prototype.setAutoScrollEnabled=function(e){},n}(),l$={startTime:hn,duration:hn,create:Boolean,sourceId:String},u$={create:!0};function vR(n){var e={},t=Xf(n,l$,u$,e);return t.leftoverProps=e,t}function d$(n,e,t,r,i,s,u,d){var P,p=s.dateEnv,y=s.theme,b=s.options,I=Jf(e.activeRange,n),x=["fc-day-header",y.getClass("widgetHeader")];return P="function"==typeof b.columnHeaderHtml?b.columnHeaderHtml(p.toDate(n)):xi("function"==typeof b.columnHeaderText?b.columnHeaderText(p.toDate(n)):p.format(n,i)),t?x=x.concat(cR(n,e,s,!0)):x.push("fc-"+$O[n.getUTCDay()]),'<th class="'+x.join(" ")+'"'+(I&&t?' data-date="'+p.formatIso(n,{omitTime:!0})+'"':"")+(u>1?' colspan="'+u+'"':"")+(d?" "+d:"")+">"+(I?cb(b,p,{date:n,forceOff:!t||1===r},P):P)+"</th>"}var r1=function(n){function e(t){var r=n.call(this)||this;return r.renderSkeleton=Zt(r._renderSkeleton,r._unrenderSkeleton),r.parentEl=t,r}return ka(e,n),e.prototype.render=function(t,r){var i=t.dates,s=t.datesRepDistinctDays,u=[];this.renderSkeleton(r),t.renderIntroHtml&&u.push(t.renderIntroHtml());for(var d=Vs(r.options.columnHeaderFormat||function c$(n,e){return!n||e>10?{weekday:"short"}:e>1?{weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}:{weekday:"long"}}(s,i.length)),p=0,y=i;p<y.length;p++)u.push(d$(y[p],t.dateProfile,s,i.length,d,r));r.isRtl&&u.reverse(),this.thead.innerHTML="<tr>"+u.join("")+"</tr>"},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.renderSkeleton.unrender()},e.prototype._renderSkeleton=function(t){var r=t.theme,i=this.parentEl;i.innerHTML="",i.appendChild(this.el=Cy('<div class="fc-row '+r.getClass("headerRow")+'"><table class="'+r.getClass("tableGrid")+'"><thead></thead></table></div>')),this.thead=this.el.querySelector("thead")},e.prototype._unrenderSkeleton=function(){Ls(this.el)},e}(fb),i1=function(){function n(e,t){for(var r=e.start,i=e.end,s=[],u=[],d=-1;r<i;)t.isHiddenDay(r)?s.push(d+.5):(d++,s.push(d),u.push(r)),r=zo(r,1);this.dates=u,this.indices=s,this.cnt=u.length}return n.prototype.sliceRange=function(e){var t=this.getDateDayIndex(e.start),r=this.getDateDayIndex(zo(e.end,-1)),i=Math.max(0,t),s=Math.min(this.cnt-1,r);return(i=Math.ceil(i))<=(s=Math.floor(s))?{firstIndex:i,lastIndex:s,isStart:t===i,isEnd:r===s}:null},n.prototype.getDateDayIndex=function(e){var t=this.indices,r=Math.floor(Kf(this.dates[0],e));return r<0?t[0]-1:r>=t.length?t[t.length-1]+1:t[r]},n}(),s1=function(){function n(e,t){var i,s,u,r=e.dates;if(t){for(s=r[0].getUTCDay(),i=1;i<r.length&&r[i].getUTCDay()!==s;i++);u=Math.ceil(r.length/i)}else u=1,i=r.length;this.rowCnt=u,this.colCnt=i,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}return n.prototype.buildCells=function(){for(var e=[],t=0;t<this.rowCnt;t++){for(var r=[],i=0;i<this.colCnt;i++)r.push(this.buildCell(t,i));e.push(r)}return e},n.prototype.buildCell=function(e,t){return{date:this.daySeries.dates[e*this.colCnt+t]}},n.prototype.buildHeaderDates=function(){for(var e=[],t=0;t<this.colCnt;t++)e.push(this.cells[0][t].date);return e},n.prototype.sliceRange=function(e){var t=this.colCnt,r=this.daySeries.sliceRange(e),i=[];if(r)for(var s=r.firstIndex,u=r.lastIndex,d=s;d<=u;){var p=Math.floor(d/t),y=Math.min((p+1)*t,u+1);i.push({row:p,firstCol:d%t,lastCol:(y-1)%t,isStart:r.isStart&&d===s,isEnd:r.isEnd&&y-1===u}),d=y}return i},n}(),o1=function(){function n(){this.sliceBusinessHours=Dn(this._sliceBusinessHours),this.sliceDateSelection=Dn(this._sliceDateSpan),this.sliceEventStore=Dn(this._sliceEventStore),this.sliceEventDrag=Dn(this._sliceInteraction),this.sliceEventResize=Dn(this._sliceInteraction)}return n.prototype.sliceProps=function(e,t,r,i,s){for(var u=[],d=5;d<arguments.length;d++)u[d-5]=arguments[d];var p=e.eventUiBases,y=this.sliceEventStore.apply(this,[e.eventStore,p,t,r,s].concat(u));return{dateSelectionSegs:this.sliceDateSelection.apply(this,[e.dateSelection,p,s].concat(u)),businessHourSegs:this.sliceBusinessHours.apply(this,[e.businessHours,t,r,i,s].concat(u)),fgEventSegs:y.fg,bgEventSegs:y.bg,eventDrag:this.sliceEventDrag.apply(this,[e.eventDrag,p,t,r,s].concat(u)),eventResize:this.sliceEventResize.apply(this,[e.eventResize,p,t,r,s].concat(u)),eventSelection:e.eventSelection}},n.prototype.sliceNowDate=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return this._sliceDateSpan.apply(this,[{range:{start:e,end:sb(e,1)},allDay:!1},{},t].concat(r))},n.prototype._sliceBusinessHours=function(e,t,r,i,s){for(var u=[],d=5;d<arguments.length;d++)u[d-5]=arguments[d];return e?this._sliceEventStore.apply(this,[xy(e,yR(t,Boolean(r)),i),{},t,r,s].concat(u)).bg:[]},n.prototype._sliceEventStore=function(e,t,r,i,s){for(var u=[],d=5;d<arguments.length;d++)u[d-5]=arguments[d];if(e){var p=iR(e,t,yR(r,Boolean(i)),i);return{bg:this.sliceEventRanges(p.bg,s,u),fg:this.sliceEventRanges(p.fg,s,u)}}return{bg:[],fg:[]}},n.prototype._sliceInteraction=function(e,t,r,i,s){for(var u=[],d=5;d<arguments.length;d++)u[d-5]=arguments[d];if(!e)return null;var p=iR(e.mutatedEvents,t,yR(r,Boolean(i)),i);return{segs:this.sliceEventRanges(p.fg,s,u),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent,sourceSeg:e.origSeg}},n.prototype._sliceDateSpan=function(e,t,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];if(!e)return[];for(var u=Hj(e,t,r.context.calendar),d=this.sliceRange.apply(this,[e.range].concat(i)),p=0,y=d;p<y.length;p++){var b=y[p];b.component=r,b.eventRange=u}return d},n.prototype.sliceEventRanges=function(e,t,r){for(var i=[],s=0,u=e;s<u.length;s++)i.push.apply(i,this.sliceEventRange(u[s],t,r));return i},n.prototype.sliceEventRange=function(e,t,r){for(var i=this.sliceRange.apply(this,[e.range].concat(r)),s=0,u=i;s<u.length;s++){var d=u[s];d.component=t,d.eventRange=e,d.isStart=e.isStart&&d.isStart,d.isEnd=e.isEnd&&d.isEnd}return i},n}();function yR(n,e){var t=n.activeRange;return e?t:{start:sb(t.start,n.minTime.milliseconds),end:sb(t.end,n.maxTime.milliseconds-864e5)}}var _R=function(n,e){return(_R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function Fa(n,e){function t(){this.constructor=n}_R(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var gb=function(){return gb=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},gb.apply(this,arguments)},h$=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Fa(e,n),e.prototype.buildRenderRange=function(t,r,i){var y,s=this.dateEnv,u=n.prototype.buildRenderRange.call(this,t,r,i),d=u.start,p=u.end;if(/^(year|month)$/.test(r)&&(d=s.startOfWeek(d),(y=s.startOfWeek(p)).valueOf()!==p.valueOf()&&(p=GO(y,1))),this.options.monthMode&&this.options.fixedWeekCount){var b=Math.ceil(function s2(n,e){return Kf(n,e)/7}(d,p));p=GO(p,6-b)}return{start:d,end:p}},e}(qk),f$=function(){function n(e){var t=this;this.isHidden=!0,this.margin=10,this.documentMousedown=function(r){t.el&&!t.el.contains(r.target)&&t.hide()},this.options=e}return n.prototype.show=function(){this.isHidden&&(this.el||this.render(),this.el.style.display="",this.position(),this.isHidden=!1,this.trigger("show"))},n.prototype.hide=function(){this.isHidden||(this.el.style.display="none",this.isHidden=!0,this.trigger("hide"))},n.prototype.render=function(){var e=this,t=this.options,r=this.el=ss("div",{className:"fc-popover "+(t.className||""),style:{top:"0",left:"0"}});"function"==typeof t.content&&t.content(r),t.parentEl.appendChild(r),CT(r,"click",".fc-close",function(i){e.hide()}),t.autoHide&&document.addEventListener("mousedown",this.documentMousedown)},n.prototype.destroy=function(){this.hide(),this.el&&(Ls(this.el),this.el=null),document.removeEventListener("mousedown",this.documentMousedown)},n.prototype.position=function(){var u,d,e=this.options,t=this.el,r=t.getBoundingClientRect(),i=qg(t.offsetParent),s=function n2(n){return HO(n).map(function(e){return VO(e)}).concat(function t2(){return{left:window.pageXOffset,right:window.pageXOffset+document.documentElement.clientWidth,top:window.pageYOffset,bottom:window.pageYOffset+document.documentElement.clientHeight}}()).reduce(function(e,t){return kO(e,t)||t})}(e.parentEl);u=e.top||0,d=void 0!==e.left?e.left:void 0!==e.right?e.right-r.width:0,u=Math.min(u,s.bottom-r.height-this.margin),u=Math.max(u,s.top+this.margin),d=Math.min(d,s.right-r.width-this.margin),d=Math.max(d,s.left+this.margin),Ri(t,{top:u-i.top,left:d-i.left})},n.prototype.trigger=function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1))},n}(),a1=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Fa(e,n),e.prototype.renderSegHtml=function(t,r){var H,Y,i=this.context,s=t.eventRange,u=s.def,d=s.ui,p=u.allDay,y=_k(i,u,d),b=p&&t.isStart&&Ek(i,0,d),I=p&&t.isEnd&&wk(0,0,d),x=this.getSegClasses(t,y,b||I,r),P=aR(this.getSkinCss(d)),k="";return x.unshift("fc-day-grid-event","fc-h-event"),t.isStart&&(H=this.getTimeText(s))&&(k='<span class="fc-time">'+xi(H)+"</span>"),Y='<span class="fc-title">'+(xi(u.title||"")||"&nbsp;")+"</span>",'<a class="'+x.join(" ")+'"'+(u.url?' href="'+xi(u.url)+'"':"")+(P?' style="'+P+'"':"")+'><div class="fc-content">'+("rtl"===i.options.dir?Y+" "+k:k+" "+Y)+"</div>"+(b?'<div class="fc-resizer fc-start-resizer"></div>':"")+(I?'<div class="fc-resizer fc-end-resizer"></div>':"")+"</a>"},e.prototype.computeEventTimeFormat=function(){return{hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"}},e.prototype.computeDisplayEventEnd=function(){return!1},e}(Xk),l1=function(n){function e(t){var r=n.call(this)||this;return r.dayGrid=t,r}return Fa(e,n),e.prototype.attachSegs=function(t,r){var i=this.rowStructs=this.renderSegRows(t);this.dayGrid.rowEls.forEach(function(s,u){s.querySelector(".fc-content-skeleton > table").appendChild(i[u].tbodyEl)}),r||this.dayGrid.removeSegPopover()},e.prototype.detachSegs=function(){for(var r,t=this.rowStructs||[];r=t.pop();)Ls(r.tbodyEl);this.rowStructs=null},e.prototype.renderSegRows=function(t){var i,s,r=[];for(i=this.groupSegRows(t),s=0;s<i.length;s++)r.push(this.renderSegRow(s,i[s]));return r},e.prototype.renderSegRow=function(t,r){var P,k,H,Y,me,Ne,Oe,i=this.context.isRtl,s=this.dayGrid,u=s.colCnt,d=this.buildSegLevels(r),p=Math.max(1,d.length),y=document.createElement("tbody"),b=[],I=[],x=[];function ke(on){for(;H<on;)(Oe=(x[P-1]||[])[H])?Oe.rowSpan=(Oe.rowSpan||1)+1:(Oe=document.createElement("td"),Y.appendChild(Oe)),I[P][H]=Oe,x[P][H]=Oe,H++}for(P=0;P<p;P++){if(k=d[P],H=0,Y=document.createElement("tr"),b.push([]),I.push([]),x.push([]),k)for(me=0;me<k.length;me++){Ne=k[me];var et=i?u-1-Ne.lastCol:Ne.firstCol,Je=i?u-1-Ne.firstCol:Ne.lastCol;for(ke(et),Oe=ss("td",{className:"fc-event-container"},Ne.el),et!==Je?Oe.colSpan=Je-et+1:x[P][H]=Oe;H<=Je;)I[P][H]=Oe,b[P][H]=Ne,H++;Y.appendChild(Oe)}ke(u);var Et=s.renderProps.renderIntroHtml();Et&&(i?Hl(Y,Et):ST(Y,Et)),y.appendChild(Y)}return{row:t,tbodyEl:y,cellMatrix:I,segMatrix:b,segLevels:d,segs:r}},e.prototype.buildSegLevels=function(t){var u,d,p,r=this.context.isRtl,i=this.dayGrid.colCnt,s=[];for(t=this.sortEventSegs(t),u=0;u<t.length;u++){for(d=t[u],p=0;p<s.length&&p$(d,s[p]);p++);d.level=p,d.leftCol=r?i-1-d.lastCol:d.firstCol,d.rightCol=r?i-1-d.firstCol:d.lastCol,(s[p]||(s[p]=[])).push(d)}for(p=0;p<s.length;p++)s[p].sort(g$);return s},e.prototype.groupSegRows=function(t){var i,r=[];for(i=0;i<this.dayGrid.rowCnt;i++)r.push([]);for(i=0;i<t.length;i++)r[t[i].row].push(t[i]);return r},e.prototype.computeDisplayEventEnd=function(){return 1===this.dayGrid.colCnt},e}(a1);function p$(n,e){var t,r;for(t=0;t<e.length;t++)if((r=e[t]).firstCol<=n.lastCol&&r.lastCol>=n.firstCol)return!0;return!1}function g$(n,e){return n.leftCol-e.leftCol}var m$=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Fa(e,n),e.prototype.attachSegs=function(t,r){var i=r.sourceSeg,s=this.rowStructs=this.renderSegRows(t);this.dayGrid.rowEls.forEach(function(u,d){var y,b,p=Cy('<div class="fc-mirror-skeleton"><table></table></div>');i&&i.row===d?y=i.el:(y=u.querySelector(".fc-content-skeleton tbody"))||(y=u.querySelector(".fc-content-skeleton table")),b=y.getBoundingClientRect().top-u.getBoundingClientRect().top,p.style.top=b+"px",p.querySelector("table").appendChild(s[d].tbodyEl),u.appendChild(p)})},e}(l1),u1='<td style="pointer-events:none"></td>',v$=function(n){function e(t){var r=n.call(this)||this;return r.fillSegTag="td",r.dayGrid=t,r}return Fa(e,n),e.prototype.renderSegs=function(t,r,i){"bgEvent"===t&&(i=i.filter(function(s){return s.eventRange.def.allDay})),n.prototype.renderSegs.call(this,t,r,i)},e.prototype.attachSegs=function(t,r){var s,u,d,i=[];for(s=0;s<r.length;s++)d=this.renderFillRow(t,u=r[s]),this.dayGrid.rowEls[u.row].appendChild(d),i.push(d);return i},e.prototype.renderFillRow=function(t,r){var x,P,i=this.dayGrid,s=this.context.isRtl,u=i.colCnt,y=s?u-1-r.lastCol:r.firstCol,b=(s?u-1-r.firstCol:r.lastCol)+1;P=(x=Cy('<div class="fc-'+("businessHours"===t?"bgevent":t.toLowerCase())+'-skeleton"><table><tr></tr></table></div>')).getElementsByTagName("tr")[0],y>0&&Hl(P,new Array(y+1).join(u1)),r.el.colSpan=b-y,P.appendChild(r.el),b<u&&Hl(P,new Array(u-b+1).join(u1));var k=i.renderProps.renderIntroHtml();return k&&(s?Hl(P,k):ST(P,k)),x},e}(e1),y$=function(n){function e(t){var r=n.call(this,t)||this,i=r.eventRenderer=new _$(r),s=r.renderFrame=Zt(r._renderFrame);return r.renderFgEvents=Zt(i.renderSegs.bind(i),i.unrender.bind(i),[s]),r.renderEventSelection=Zt(i.selectByInstanceId.bind(i),i.unselectByInstanceId.bind(i),[r.renderFgEvents]),r.renderEventDrag=Zt(i.hideByHash.bind(i),i.showByHash.bind(i),[s]),r.renderEventResize=Zt(i.hideByHash.bind(i),i.showByHash.bind(i),[s]),r}return Fa(e,n),e.prototype.firstContext=function(t){t.calendar.registerInteractiveComponent(this,{el:this.el,useEventCenter:!1})},e.prototype.render=function(t,r){this.renderFrame(t.date),this.renderFgEvents(r,t.fgSegs),this.renderEventSelection(t.eventSelection),this.renderEventDrag(t.eventDragInstances),this.renderEventResize(t.eventResizeInstances)},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.renderFrame.unrender(),this.context.calendar.unregisterInteractiveComponent(this)},e.prototype._renderFrame=function(t){var r=this.context,i=r.theme,d=r.dateEnv.format(t,Vs(r.options.dayPopoverFormat));this.el.innerHTML='<div class="fc-header '+i.getClass("popoverHeader")+'"><span class="fc-title">'+xi(d)+'</span><span class="fc-close '+i.getIconClass("close")+'"></span></div><div class="fc-body '+i.getClass("popoverContent")+'"><div class="fc-event-container"></div></div>',this.segContainerEl=this.el.querySelector(".fc-event-container")},e.prototype.queryHit=function(t,r,i,s){var u=this.props.date;if(t<i&&r<s)return{component:this,dateSpan:{allDay:!0,range:{start:u,end:zo(u,1)}},dayEl:this.el,rect:{left:0,top:0,right:i,bottom:s},layer:1}},e}(ep),_$=function(n){function e(t){var r=n.call(this)||this;return r.dayTile=t,r}return Fa(e,n),e.prototype.attachSegs=function(t){for(var r=0,i=t;r<i.length;r++)this.dayTile.segContainerEl.appendChild(i[r].el)},e.prototype.detachSegs=function(t){for(var r=0,i=t;r<i.length;r++)Ls(i[r].el)},e}(a1),c1=function(){function n(e){this.context=e}return n.prototype.renderHtml=function(e){var t=[];e.renderIntroHtml&&t.push(e.renderIntroHtml());for(var r=0,i=e.cells;r<i.length;r++){var s=i[r];t.push(E$(s.date,e.dateProfile,this.context,s.htmlAttrs))}return e.cells.length||t.push('<td class="fc-day '+this.context.theme.getClass("widgetContent")+'"></td>'),"rtl"===this.context.options.dir&&t.reverse(),"<tr>"+t.join("")+"</tr>"},n}();function E$(n,e,t,r){var i=t.dateEnv,s=t.theme,u=Jf(e.activeRange,n),d=cR(n,e,t);return d.unshift("fc-day",s.getClass("widgetContent")),'<td class="'+d.join(" ")+'"'+(u?' data-date="'+i.formatIso(n,{omitTime:!0})+'"':"")+(r?" "+r:"")+"></td>"}var w$=Vs({day:"numeric"}),b$=Vs({week:"numeric"}),d1=function(n){function e(t,r){var i=n.call(this,t)||this;i.bottomCoordPadding=0,i.isCellSizesDirty=!1,i.renderProps=r;var s=i.eventRenderer=new l1(i),u=i.fillRenderer=new v$(i);i.mirrorRenderer=new m$(i);var d=i.renderCells=Zt(i._renderCells,i._unrenderCells);return i.renderBusinessHours=Zt(u.renderSegs.bind(u,"businessHours"),u.unrender.bind(u,"businessHours"),[d]),i.renderDateSelection=Zt(u.renderSegs.bind(u,"highlight"),u.unrender.bind(u,"highlight"),[d]),i.renderBgEvents=Zt(u.renderSegs.bind(u,"bgEvent"),u.unrender.bind(u,"bgEvent"),[d]),i.renderFgEvents=Zt(s.renderSegs.bind(s),s.unrender.bind(s),[d]),i.renderEventSelection=Zt(s.selectByInstanceId.bind(s),s.unselectByInstanceId.bind(s),[i.renderFgEvents]),i.renderEventDrag=Zt(i._renderEventDrag,i._unrenderEventDrag,[d]),i.renderEventResize=Zt(i._renderEventResize,i._unrenderEventResize,[d]),i}return Fa(e,n),e.prototype.render=function(t,r){var i=t.cells;this.rowCnt=i.length,this.colCnt=i[0].length,this.renderCells(i,t.isRigid),this.renderBusinessHours(r,t.businessHourSegs),this.renderDateSelection(r,t.dateSelectionSegs),this.renderBgEvents(r,t.bgEventSegs),this.renderFgEvents(r,t.fgEventSegs),this.renderEventSelection(t.eventSelection),this.renderEventDrag(t.eventDrag),this.renderEventResize(t.eventResize),this.segPopoverTile&&this.updateSegPopoverTile()},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.renderCells.unrender()},e.prototype.getCellRange=function(t,r){var i=this.props.cells[t][r].date;return{start:i,end:zo(i,1)}},e.prototype.updateSegPopoverTile=function(t,r){var i=this.props;this.segPopoverTile.receiveProps({date:t||this.segPopoverTile.props.date,fgSegs:r||this.segPopoverTile.props.fgSegs,eventSelection:i.eventSelection,eventDragInstances:i.eventDrag?i.eventDrag.affectedInstances:null,eventResizeInstances:i.eventResize?i.eventResize.affectedInstances:null},this.context)},e.prototype._renderCells=function(t,r){var P,k,i=this.context,s=i.calendar,u=i.view,d=i.isRtl,p=i.dateEnv,b=this.rowCnt,I=this.colCnt,x="";for(P=0;P<b;P++)x+=this.renderDayRowHtml(P,r);for(this.el.innerHTML=x,this.rowEls=os(this.el,".fc-row"),this.cellEls=os(this.el,".fc-day, .fc-disabled-day"),d&&this.cellEls.reverse(),this.rowPositions=new $T(this.el,this.rowEls,!1,!0),this.colPositions=new $T(this.el,this.cellEls.slice(0,I),!0,!1),P=0;P<b;P++)for(k=0;k<I;k++)s.publiclyTrigger("dayRender",[{date:p.toDate(t[P][k].date),el:this.getCellEl(P,k),view:u}]);this.isCellSizesDirty=!0},e.prototype._unrenderCells=function(){this.removeSegPopover()},e.prototype.renderDayRowHtml=function(t,r){var i=this.context.theme,s=["fc-row","fc-week",i.getClass("dayRow")];r&&s.push("fc-rigid");var u=new c1(this.context);return'<div class="'+s.join(" ")+'"><div class="fc-bg"><table class="'+i.getClass("tableGrid")+'">'+u.renderHtml({cells:this.props.cells[t],dateProfile:this.props.dateProfile,renderIntroHtml:this.renderProps.renderBgIntroHtml})+'</table></div><div class="fc-content-skeleton"><table>'+(this.getIsNumbersVisible()?"<thead>"+this.renderNumberTrHtml(t)+"</thead>":"")+"</table></div></div>"},e.prototype.getIsNumbersVisible=function(){return this.getIsDayNumbersVisible()||this.renderProps.cellWeekNumbersVisible||this.renderProps.colWeekNumbersVisible},e.prototype.getIsDayNumbersVisible=function(){return this.rowCnt>1},e.prototype.renderNumberTrHtml=function(t){var r=this.context.isRtl,i=this.renderProps.renderNumberIntroHtml(t,this);return"<tr>"+(r?"":i)+this.renderNumberCellsHtml(t)+(r?i:"")+"</tr>"},e.prototype.renderNumberCellsHtml=function(t){var i,r=[];for(i=0;i<this.colCnt;i++)r.push(this.renderNumberCellHtml(this.props.cells[t][i].date));return this.context.isRtl&&r.reverse(),r.join("")},e.prototype.renderNumberCellHtml=function(t){var y,b,r=this.context,i=r.dateEnv,s=r.options,u="",d=Jf(this.props.dateProfile.activeRange,t),p=this.getIsDayNumbersVisible()&&d;return p||this.renderProps.cellWeekNumbersVisible?((y=cR(t,this.props.dateProfile,this.context)).unshift("fc-day-top"),this.renderProps.cellWeekNumbersVisible&&(b=i.weekDow),u+='<td class="'+y.join(" ")+'"'+(d?' data-date="'+i.formatIso(t,{omitTime:!0})+'"':"")+">",this.renderProps.cellWeekNumbersVisible&&t.getUTCDay()===b&&(u+=cb(s,i,{date:t,type:"week"},{class:"fc-week-number"},i.format(t,b$))),p&&(u+=cb(s,i,t,{class:"fc-day-number"},i.format(t,w$))),u+="</td>"):"<td></td>"},e.prototype.updateSize=function(t){var i=this,s=i.fillRenderer,u=i.eventRenderer,d=i.mirrorRenderer;(t||this.isCellSizesDirty||this.context.calendar.isEventsUpdated)&&(this.buildPositionCaches(),this.isCellSizesDirty=!1),s.computeSizes(t),u.computeSizes(t),d.computeSizes(t),s.assignSizes(t),u.assignSizes(t),d.assignSizes(t)},e.prototype.buildPositionCaches=function(){this.buildColPositions(),this.buildRowPositions()},e.prototype.buildColPositions=function(){this.colPositions.build()},e.prototype.buildRowPositions=function(){this.rowPositions.build(),this.rowPositions.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},e.prototype.positionToHit=function(t,r){var s=this.colPositions,u=this.rowPositions,d=s.leftToIndex(t),p=u.topToIndex(r);if(null!=p&&null!=d)return{row:p,col:d,dateSpan:{range:this.getCellRange(p,d),allDay:!0},dayEl:this.getCellEl(p,d),relativeRect:{left:s.lefts[d],right:s.rights[d],top:u.tops[p],bottom:u.bottoms[p]}}},e.prototype.getCellEl=function(t,r){return this.cellEls[t*this.colCnt+r]},e.prototype._renderEventDrag=function(t){t&&(this.eventRenderer.hideByHash(t.affectedInstances),this.fillRenderer.renderSegs("highlight",this.context,t.segs))},e.prototype._unrenderEventDrag=function(t){t&&(this.eventRenderer.showByHash(t.affectedInstances),this.fillRenderer.unrender("highlight",this.context))},e.prototype._renderEventResize=function(t){t&&(this.eventRenderer.hideByHash(t.affectedInstances),this.fillRenderer.renderSegs("highlight",this.context,t.segs),this.mirrorRenderer.renderSegs(this.context,t.segs,{isResizing:!0,sourceSeg:t.sourceSeg}))},e.prototype._unrenderEventResize=function(t){t&&(this.eventRenderer.showByHash(t.affectedInstances),this.fillRenderer.unrender("highlight",this.context),this.mirrorRenderer.unrender(this.context,t.segs,{isResizing:!0,sourceSeg:t.sourceSeg}))},e.prototype.removeSegPopover=function(){this.segPopover&&this.segPopover.hide()},e.prototype.limitRows=function(t){var i,s,r=this.eventRenderer.rowStructs||[];for(i=0;i<r.length;i++)this.unlimitRow(i),!1!==(s=!!t&&("number"==typeof t?t:this.computeRowLevelLimit(i)))&&this.limitRow(i,s)},e.prototype.computeRowLevelLimit=function(t){var u,d,i=this.rowEls[t].getBoundingClientRect().bottom,s=PO(this.eventRenderer.rowStructs[t].tbodyEl);for(u=0;u<s.length;u++)if((d=s[u]).classList.remove("fc-limited"),d.getBoundingClientRect().bottom>i)return u;return!1},e.prototype.limitRow=function(t,r){var b,I,x,P,k,H,Y,me,Ne,Oe,ke,et,Je,Et,on,i=this,s=this.colCnt,u=this.context.isRtl,d=this.eventRenderer.rowStructs[t],p=[],y=0,Qn=function(ho){for(;y<ho;)(H=i.getCellSegs(t,y,r)).length&&(Ne=I[r-1][y],on=i.renderMoreLink(t,y,H),Et=ss("div",null,on),Ne.appendChild(Et),p.push(Et)),y++};if(r&&r<d.segLevels.length){for(b=d.segLevels[r-1],I=d.cellMatrix,(x=PO(d.tbodyEl).slice(r)).forEach(function(ho){ho.classList.add("fc-limited")}),P=0;P<b.length;P++){k=b[P];var ir=u?s-1-k.lastCol:k.firstCol,$l=u?s-1-k.firstCol:k.lastCol;for(Qn(ir),me=[],Y=0;y<=$l;)H=this.getCellSegs(t,y,r),me.push(H),Y+=H.length,y++;if(Y){for(Oe=(Ne=I[r-1][ir]).rowSpan||1,ke=[],et=0;et<me.length;et++)Je=ss("td",{className:"fc-more-cell",rowSpan:Oe}),on=this.renderMoreLink(t,ir+et,[k].concat(H=me[et])),Et=ss("div",null,on),Je.appendChild(Et),ke.push(Je),p.push(Je);Ne.classList.add("fc-limited"),zB(Ne,ke),x.push(Ne)}}Qn(this.colCnt),d.moreEls=p,d.limitedEls=x}},e.prototype.unlimitRow=function(t){var r=this.eventRenderer.rowStructs[t];r.moreEls&&(r.moreEls.forEach(Ls),r.moreEls=null),r.limitedEls&&(r.limitedEls.forEach(function(i){i.classList.remove("fc-limited")}),r.limitedEls=null)},e.prototype.renderMoreLink=function(t,r,i){var s=this,u=this.context,d=u.calendar,p=u.view,y=u.dateEnv,b=u.options,I=u.isRtl,x=ss("a",{className:"fc-more"});return x.innerText=this.getMoreLinkText(i.length),x.addEventListener("click",function(P){var k=b.eventLimitClick,Y=s.props.cells[t][I?s.colCnt-r-1:r].date,me=P.currentTarget,Ne=s.getCellEl(t,r),Oe=s.getCellSegs(t,r),ke=s.resliceDaySegs(Oe,Y),et=s.resliceDaySegs(i,Y);"function"==typeof k&&(k=d.publiclyTrigger("eventLimitClick",[{date:y.toDate(Y),allDay:!0,dayEl:Ne,moreEl:me,segs:ke,hiddenSegs:et,jsEvent:P,view:p}])),"popover"===k?s.showSegPopover(t,r,me,ke):"string"==typeof k&&d.zoomTo(Y,k)}),x},e.prototype.showSegPopover=function(t,r,i,s){var k,H,u=this,d=this.context,p=d.calendar,y=d.view,I=d.isRtl,x=I?this.colCnt-r-1:r,P=i.parentNode;k=1===this.rowCnt?y.el:this.rowEls[t],H={className:"fc-more-popover "+d.theme.getClass("popover"),parentEl:y.el,top:qg(k).top,autoHide:!0,content:function(Y){u.segPopoverTile=new y$(Y),u.updateSegPopoverTile(u.props.cells[t][x].date,s)},hide:function(){u.segPopoverTile.destroy(),u.segPopoverTile=null,u.segPopover.destroy(),u.segPopover=null}},I?H.right=qg(P).right+1:H.left=qg(P).left-1,this.segPopover=new f$(H),this.segPopover.show(),p.releaseAfterSizingTriggers()},e.prototype.resliceDaySegs=function(t,r){for(var u={start:r,end:zo(r,1)},d=[],p=0,y=t;p<y.length;p++){var b=y[p],I=b.eventRange,x=I.range,P=Ny(x,u);P&&d.push(gb({},b,{eventRange:{def:I.def,ui:gb({},I.ui,{durationEditable:!1}),instance:I.instance,range:P},isStart:b.isStart&&P.start.valueOf()===x.start.valueOf(),isEnd:b.isEnd&&P.end.valueOf()===x.end.valueOf()}))}return d},e.prototype.getMoreLinkText=function(t){var r=this.context.options.eventLimitText;return"function"==typeof r?r(t):"+"+t+" "+r},e.prototype.getCellSegs=function(t,r,i){for(var p,s=this.eventRenderer.rowStructs[t].segMatrix,u=i||0,d=[];u<s.length;)(p=s[u][r])&&d.push(p),u++;return d},e}(ep),D$=Vs({week:"numeric"}),h1=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.processOptions=Dn(t._processOptions),t.renderSkeleton=Zt(t._renderSkeleton,t._unrenderSkeleton),t.renderHeadIntroHtml=function(){var r=t.context,s=r.options;return t.colWeekNumbersVisible?'<th class="fc-week-number '+r.theme.getClass("widgetHeader")+'" '+t.weekNumberStyleAttr()+"><span>"+xi(s.weekLabel)+"</span></th>":""},t.renderDayGridNumberIntroHtml=function(r,i){var s=t.context,u=s.options,d=s.dateEnv,p=i.props.cells[r][0].date;return t.colWeekNumbersVisible?'<td class="fc-week-number" '+t.weekNumberStyleAttr()+">"+cb(u,d,{date:p,type:"week",forceOff:1===i.colCnt},d.format(p,D$))+"</td>":""},t.renderDayGridBgIntroHtml=function(){return t.colWeekNumbersVisible?'<td class="fc-week-number '+t.context.theme.getClass("widgetContent")+'" '+t.weekNumberStyleAttr()+"></td>":""},t.renderDayGridIntroHtml=function(){return t.colWeekNumbersVisible?'<td class="fc-week-number" '+t.weekNumberStyleAttr()+"></td>":""},t}return Fa(e,n),e.prototype._processOptions=function(t){t.weekNumbers?t.weekNumbersWithinDays?(this.cellWeekNumbersVisible=!0,this.colWeekNumbersVisible=!1):(this.cellWeekNumbersVisible=!1,this.colWeekNumbersVisible=!0):(this.colWeekNumbersVisible=!1,this.cellWeekNumbersVisible=!1)},e.prototype.render=function(t,r){n.prototype.render.call(this,t,r),this.processOptions(r.options),this.renderSkeleton(r)},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.renderSkeleton.unrender()},e.prototype._renderSkeleton=function(t){this.el.classList.add("fc-dayGrid-view"),this.el.innerHTML=this.renderSkeletonHtml(),this.scroller=new Fk("hidden","auto");var r=this.scroller.el;this.el.querySelector(".fc-body > tr > td").appendChild(r),r.classList.add("fc-day-grid-container");var i=ss("div",{className:"fc-day-grid"});r.appendChild(i),this.dayGrid=new d1(i,{renderNumberIntroHtml:this.renderDayGridNumberIntroHtml,renderBgIntroHtml:this.renderDayGridBgIntroHtml,renderIntroHtml:this.renderDayGridIntroHtml,colWeekNumbersVisible:this.colWeekNumbersVisible,cellWeekNumbersVisible:this.cellWeekNumbersVisible})},e.prototype._unrenderSkeleton=function(){this.el.classList.remove("fc-dayGrid-view"),this.dayGrid.destroy(),this.scroller.destroy()},e.prototype.renderSkeletonHtml=function(){var t=this.context,r=t.theme,i=t.options;return'<table class="'+r.getClass("tableGrid")+'">'+(i.columnHeader?'<thead class="fc-head"><tr><td class="fc-head-container '+r.getClass("widgetHeader")+'">&nbsp;</td></tr></thead>':"")+'<tbody class="fc-body"><tr><td class="'+r.getClass("widgetContent")+'"></td></tr></tbody></table>'},e.prototype.weekNumberStyleAttr=function(){return null!=this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},e.prototype.hasRigidRows=function(){var t=this.context.options.eventLimit;return t&&"number"!=typeof t},e.prototype.updateSize=function(t,r,i){n.prototype.updateSize.call(this,t,r,i),this.dayGrid.updateSize(t)},e.prototype.updateBaseSize=function(t,r,i){var p,y,s=this.dayGrid,u=this.context.options.eventLimit,d=this.header?this.header.el:null;s.rowEls?(this.colWeekNumbersVisible&&(this.weekNumberWidth=ek(os(this.el,".fc-week-number"))),this.scroller.clear(),d&&QO(d),s.removeSegPopover(),u&&"number"==typeof u&&s.limitRows(u),p=this.computeScrollerHeight(r),this.setGridHeight(p,i),u&&"number"!=typeof u&&s.limitRows(u),i||(this.scroller.setHeight(p),((y=this.scroller.getScrollbarWidths()).left||y.right)&&(d&&YO(d,y),p=this.computeScrollerHeight(r),this.scroller.setHeight(p)),this.scroller.lockOverflow(y))):i||(p=this.computeScrollerHeight(r),this.scroller.setHeight(p))},e.prototype.computeScrollerHeight=function(t){return t-tk(this.el,this.scroller.el)},e.prototype.setGridHeight=function(t,r){this.context.options.monthMode?(r&&(t*=this.dayGrid.rowCnt/6),XO(this.dayGrid.rowEls,t,!r)):r?JO(this.dayGrid.rowEls):XO(this.dayGrid.rowEls,t,!0)},e.prototype.computeDateScroll=function(t){return{top:0}},e.prototype.queryDateScroll=function(){return{top:this.scroller.getScrollTop()}},e.prototype.applyDateScroll=function(t){void 0!==t.top&&this.scroller.setScrollTop(t.top)},e}(pb);h1.prototype.dateProfileGeneratorClass=h$;var f1=function(n){function e(t){var r=n.call(this,t.el)||this;return r.slicer=new S$,r.dayGrid=t,r}return Fa(e,n),e.prototype.firstContext=function(t){t.calendar.registerInteractiveComponent(this,{el:this.dayGrid.el})},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.context.calendar.unregisterInteractiveComponent(this)},e.prototype.render=function(t,r){var i=this.dayGrid,s=t.dateProfile,u=t.dayTable;i.receiveContext(r),i.receiveProps(gb({},this.slicer.sliceProps(t,s,t.nextDayThreshold,r.calendar,i,u),{dateProfile:s,cells:u.cells,isRigid:t.isRigid}),r)},e.prototype.buildPositionCaches=function(){this.dayGrid.buildPositionCaches()},e.prototype.queryHit=function(t,r){var i=this.dayGrid.positionToHit(t,r);if(i)return{component:this.dayGrid,dateSpan:i.dateSpan,dayEl:i.dayEl,rect:{left:i.relativeRect.left,right:i.relativeRect.right,top:i.relativeRect.top,bottom:i.relativeRect.bottom},layer:0}},e}(ep),S$=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Fa(e,n),e.prototype.sliceRange=function(t,r){return r.sliceRange(t)},e}(o1),T$=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.buildDayTable=Dn(I$),t}return Fa(e,n),e.prototype.render=function(t,r){n.prototype.render.call(this,t,r);var i=this.props.dateProfile,s=this.dayTable=this.buildDayTable(i,t.dateProfileGenerator);this.header&&this.header.receiveProps({dateProfile:i,dates:s.headerDates,datesRepDistinctDays:1===s.rowCnt,renderIntroHtml:this.renderHeadIntroHtml},r),this.simpleDayGrid.receiveProps({dateProfile:i,dayTable:s,businessHours:t.businessHours,dateSelection:t.dateSelection,eventStore:t.eventStore,eventUiBases:t.eventUiBases,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,isRigid:this.hasRigidRows(),nextDayThreshold:this.context.nextDayThreshold},r)},e.prototype._renderSkeleton=function(t){n.prototype._renderSkeleton.call(this,t),t.options.columnHeader&&(this.header=new r1(this.el.querySelector(".fc-head-container"))),this.simpleDayGrid=new f1(this.dayGrid)},e.prototype._unrenderSkeleton=function(){n.prototype._unrenderSkeleton.call(this),this.header&&this.header.destroy(),this.simpleDayGrid.destroy()},e}(h1);function I$(n,e){var t=new i1(n.renderRange,e);return new s1(t,/year|month|week/.test(n.currentRangeUnit))}const A$=tp({defaultView:"dayGridMonth",views:{dayGrid:T$,dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},monthMode:!0,fixedWeekCount:!0}}});var ER=function(n,e){return(ER=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function th(n,e){function t(){this.constructor=n}ER(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var mb=function(){return mb=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},mb.apply(this,arguments)},p1=function(n){function e(t){var r=n.call(this)||this;return r.timeGrid=t,r}return th(e,n),e.prototype.renderSegs=function(t,r,i){n.prototype.renderSegs.call(this,t,r,i),this.fullTimeFormat=Vs({hour:"numeric",minute:"2-digit",separator:this.context.options.defaultRangeSeparator})},e.prototype.attachSegs=function(t,r){for(var i=this.timeGrid.groupSegsByCol(t),s=0;s<i.length;s++)i[s]=this.sortEventSegs(i[s]);this.segsByCol=i,this.timeGrid.attachSegsByCol(i,this.timeGrid.fgContainerEls)},e.prototype.detachSegs=function(t){t.forEach(function(r){Ls(r.el)}),this.segsByCol=null},e.prototype.computeSegSizes=function(t){var i=this.timeGrid,s=this.segsByCol,u=i.colCnt;if(i.computeSegVerticals(t),s)for(var d=0;d<u;d++)this.computeSegHorizontals(s[d])},e.prototype.assignSegSizes=function(t){var i=this.timeGrid,s=this.segsByCol,u=i.colCnt;if(i.assignSegVerticals(t),s)for(var d=0;d<u;d++)this.assignSegCss(s[d])},e.prototype.computeEventTimeFormat=function(){return{hour:"numeric",minute:"2-digit",meridiem:!1}},e.prototype.computeDisplayEventEnd=function(){return!0},e.prototype.renderSegHtml=function(t,r){var P,k,H,i=t.eventRange,s=i.def,u=i.ui,d=s.allDay,p=_k(this.context,s,u),y=t.isStart&&Ek(this.context,0,u),b=t.isEnd&&wk(0,0,u),I=this.getSegClasses(t,p,y||b,r),x=aR(this.getSkinCss(u));if(I.unshift("fc-time-grid-event"),function R2(n){var e=XM(n);return Kf(e.start,e.end)>1}(i.range)){if(t.isStart||t.isEnd){var Y=t.start,me=t.end;P=this._getTimeText(Y,me,d),k=this._getTimeText(Y,me,d,this.fullTimeFormat),H=this._getTimeText(Y,me,d,null,!1)}}else P=this.getTimeText(i),k=this.getTimeText(i,this.fullTimeFormat),H=this.getTimeText(i,null,!1);return'<a class="'+I.join(" ")+'"'+(s.url?' href="'+xi(s.url)+'"':"")+(x?' style="'+x+'"':"")+'><div class="fc-content">'+(P?'<div class="fc-time" data-start="'+xi(H)+'" data-full="'+xi(k)+'"><span>'+xi(P)+"</span></div>":"")+(s.title?'<div class="fc-title">'+xi(s.title)+"</div>":"")+"</div>"+(b?'<div class="fc-resizer fc-end-resizer"></div>':"")+"</a>"},e.prototype.computeSegHorizontals=function(t){var r,i,s;if(r=function M$(n){var t,r,i,e=[];for(t=0;t<n.length;t++){for(r=n[t],i=0;i<e.length&&m1(r,e[i]).length;i++);r.level=i,(e[i]||(e[i]=[])).push(r)}return e}(t),function R$(n){var e,t,r,i,s;for(e=0;e<n.length;e++)for(t=n[e],r=0;r<t.length;r++)for((i=t[r]).forwardSegs=[],s=e+1;s<n.length;s++)m1(i,n[s],i.forwardSegs)}(r),i=r[0]){for(s=0;s<i.length;s++)g1(i[s]);for(s=0;s<i.length;s++)this.computeSegForwardBack(i[s],0,0)}},e.prototype.computeSegForwardBack=function(t,r,i){var u,s=t.forwardSegs;if(void 0===t.forwardCoord)for(s.length?(this.sortForwardSegs(s),this.computeSegForwardBack(s[0],r+1,i),t.forwardCoord=s[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-i)/(r+1),u=0;u<s.length;u++)this.computeSegForwardBack(s[u],0,t.forwardCoord)},e.prototype.sortForwardSegs=function(t){var r=t.map(N$),i=[{field:"forwardPressure",order:-1},{field:"backwardCoord",order:1}].concat(this.context.eventOrderSpecs);return r.sort(function(s,u){return nk(s,u,i)}),r.map(function(s){return s._seg})},e.prototype.assignSegCss=function(t){for(var r=0,i=t;r<i.length;r++){var s=i[r];Ri(s.el,this.generateSegCss(s)),s.level>0&&s.el.classList.add("fc-time-grid-event-inset"),s.eventRange.def.title&&s.bottom-s.top<30&&s.el.classList.add("fc-short")}},e.prototype.generateSegCss=function(t){var p,y,r=this.context.options.slotEventOverlap,i=t.backwardCoord,s=t.forwardCoord,u=this.timeGrid.generateSegVerticalCss(t),d=this.context.isRtl;return r&&(s=Math.min(1,i+2*(s-i))),d?(p=1-s,y=i):(p=i,y=1-s),u.zIndex=t.level+1,u.left=100*p+"%",u.right=100*y+"%",r&&t.forwardPressure&&(u[d?"marginLeft":"marginRight"]=20),u},e}(Xk);function g1(n){var r,i,e=n.forwardSegs,t=0;if(void 0===n.forwardPressure){for(r=0;r<e.length;r++)g1(i=e[r]),t=Math.max(t,1+i.forwardPressure);n.forwardPressure=t}}function m1(n,e,t){void 0===t&&(t=[]);for(var r=0;r<e.length;r++)x$(n,e[r])&&t.push(e[r]);return t}function x$(n,e){return n.bottom>e.top&&n.top<e.bottom}function N$(n){var e=Jk(n);return e.forwardPressure=n.forwardPressure,e.backwardCoord=n.backwardCoord,e}var P$=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return th(e,n),e.prototype.attachSegs=function(t,r){this.segsByCol=this.timeGrid.groupSegsByCol(t),this.timeGrid.attachSegsByCol(this.segsByCol,this.timeGrid.mirrorContainerEls),this.sourceSeg=r.sourceSeg},e.prototype.generateSegCss=function(t){var r=n.prototype.generateSegCss.call(this,t),i=this.sourceSeg;if(i&&i.col===t.col){var s=n.prototype.generateSegCss.call(this,i);r.left=s.left,r.right=s.right,r.marginLeft=s.marginLeft,r.marginRight=s.marginRight}return r},e}(p1),O$=function(n){function e(t){var r=n.call(this)||this;return r.timeGrid=t,r}return th(e,n),e.prototype.attachSegs=function(t,r){var s,i=this.timeGrid;return"bgEvent"===t?s=i.bgContainerEls:"businessHours"===t?s=i.businessContainerEls:"highlight"===t&&(s=i.highlightContainerEls),i.attachSegsByCol(i.groupSegsByCol(r),s),r.map(function(u){return u.el})},e.prototype.computeSegSizes=function(t){this.timeGrid.computeSegVerticals(t)},e.prototype.assignSegSizes=function(t){this.timeGrid.assignSegVerticals(t)},e}(e1),v1=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}],k$=function(n){function e(t,r){var i=n.call(this,t)||this;i.isSlatSizesDirty=!1,i.isColSizesDirty=!1,i.processOptions=Dn(i._processOptions),i.renderSkeleton=Zt(i._renderSkeleton),i.renderSlats=Zt(i._renderSlats,null,[i.renderSkeleton]),i.renderColumns=Zt(i._renderColumns,i._unrenderColumns,[i.renderSkeleton]),i.renderProps=r;var s=i.renderColumns,u=i.eventRenderer=new p1(i),d=i.fillRenderer=new O$(i);return i.mirrorRenderer=new P$(i),i.renderBusinessHours=Zt(d.renderSegs.bind(d,"businessHours"),d.unrender.bind(d,"businessHours"),[s]),i.renderDateSelection=Zt(i._renderDateSelection,i._unrenderDateSelection,[s]),i.renderFgEvents=Zt(u.renderSegs.bind(u),u.unrender.bind(u),[s]),i.renderBgEvents=Zt(d.renderSegs.bind(d,"bgEvent"),d.unrender.bind(d,"bgEvent"),[s]),i.renderEventSelection=Zt(u.selectByInstanceId.bind(u),u.unselectByInstanceId.bind(u),[i.renderFgEvents]),i.renderEventDrag=Zt(i._renderEventDrag,i._unrenderEventDrag,[s]),i.renderEventResize=Zt(i._renderEventResize,i._unrenderEventResize,[s]),i}return th(e,n),e.prototype._processOptions=function(t){var s,u,r=t.slotDuration,i=t.snapDuration;null===(s=ZM(r=hn(r),i=i?hn(i):r))&&(i=r,s=1),this.slotDuration=r,this.snapDuration=i,this.snapsPerSlot=s,u=t.slotLabelFormat,Array.isArray(u)&&(u=u[u.length-1]),this.labelFormat=Vs(u||{hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"}),this.labelInterval=(u=t.slotLabelInterval)?hn(u):this.computeLabelInterval(r)},e.prototype.computeLabelInterval=function(t){var r,i,s;for(r=v1.length-1;r>=0;r--)if(null!==(s=ZM(i=hn(v1[r]),t))&&s>1)return i;return t},e.prototype.render=function(t,r){this.processOptions(r.options),this.colCnt=t.cells.length,this.renderSkeleton(r.theme),this.renderSlats(t.dateProfile),this.renderColumns(t.cells,t.dateProfile),this.renderBusinessHours(r,t.businessHourSegs),this.renderDateSelection(t.dateSelectionSegs),this.renderFgEvents(r,t.fgEventSegs),this.renderBgEvents(r,t.bgEventSegs),this.renderEventSelection(t.eventSelection),this.renderEventDrag(t.eventDrag),this.renderEventResize(t.eventResize)},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.renderSlats.unrender(),this.renderColumns.unrender(),this.renderSkeleton.unrender()},e.prototype.updateSize=function(t){var r=this,i=r.fillRenderer,s=r.eventRenderer,u=r.mirrorRenderer;(t||this.isSlatSizesDirty)&&(this.buildSlatPositions(),this.isSlatSizesDirty=!1),(t||this.isColSizesDirty)&&(this.buildColPositions(),this.isColSizesDirty=!1),i.computeSizes(t),s.computeSizes(t),u.computeSizes(t),i.assignSizes(t),s.assignSizes(t),u.assignSizes(t)},e.prototype._renderSkeleton=function(t){var r=this.el;r.innerHTML='<div class="fc-bg"></div><div class="fc-slats"></div><hr class="fc-divider '+t.getClass("widgetHeader")+'" style="display:none" />',this.rootBgContainerEl=r.querySelector(".fc-bg"),this.slatContainerEl=r.querySelector(".fc-slats"),this.bottomRuleEl=r.querySelector(".fc-divider")},e.prototype._renderSlats=function(t){this.slatContainerEl.innerHTML='<table class="'+this.context.theme.getClass("tableGrid")+'">'+this.renderSlatRowHtml(t)+"</table>",this.slatEls=os(this.slatContainerEl,"tr"),this.slatPositions=new $T(this.el,this.slatEls,!1,!0),this.isSlatSizesDirty=!0},e.prototype.renderSlatRowHtml=function(t){for(var I,x,P,r=this.context,i=r.dateEnv,s=r.theme,u=r.isRtl,d="",p=Pr(t.renderRange.start),y=t.minTime,b=hn(0);jl(y)<jl(t.maxTime);)I=i.add(p,y),x=null!==ZM(b,this.labelInterval),P='<td class="fc-axis fc-time '+s.getClass("widgetContent")+'">'+(x?"<span>"+xi(i.format(I,this.labelFormat))+"</span>":"")+"</td>",d+='<tr data-time="'+nH(I)+'"'+(x?"":' class="fc-minor"')+">"+(u?"":P)+'<td class="'+s.getClass("widgetContent")+'"></td>'+(u?P:"")+"</tr>",y=WM(y,this.slotDuration),b=WM(b,this.slotDuration);return d},e.prototype._renderColumns=function(t,r){var i=this.context,s=i.calendar,u=i.view,d=i.isRtl,p=i.theme,y=i.dateEnv,b=new c1(this.context);this.rootBgContainerEl.innerHTML='<table class="'+p.getClass("tableGrid")+'">'+b.renderHtml({cells:t,dateProfile:r,renderIntroHtml:this.renderProps.renderBgIntroHtml})+"</table>",this.colEls=os(this.el,".fc-day, .fc-disabled-day");for(var I=0;I<this.colCnt;I++)s.publiclyTrigger("dayRender",[{date:y.toDate(t[I].date),el:this.colEls[I],view:u}]);d&&this.colEls.reverse(),this.colPositions=new $T(this.el,this.colEls,!0,!1),this.renderContentSkeleton(),this.isColSizesDirty=!0},e.prototype._unrenderColumns=function(){this.unrenderContentSkeleton()},e.prototype.renderContentSkeleton=function(){var i,t=this.context.isRtl,r=[];r.push(this.renderProps.renderIntroHtml());for(var s=0;s<this.colCnt;s++)r.push('<td><div class="fc-content-col"><div class="fc-event-container fc-mirror-container"></div><div class="fc-event-container"></div><div class="fc-highlight-container"></div><div class="fc-bgevent-container"></div><div class="fc-business-container"></div></div></td>');t&&r.reverse(),i=this.contentSkeletonEl=Cy('<div class="fc-content-skeleton"><table><tr>'+r.join("")+"</tr></table></div>"),this.colContainerEls=os(i,".fc-content-col"),this.mirrorContainerEls=os(i,".fc-mirror-container"),this.fgContainerEls=os(i,".fc-event-container:not(.fc-mirror-container)"),this.bgContainerEls=os(i,".fc-bgevent-container"),this.highlightContainerEls=os(i,".fc-highlight-container"),this.businessContainerEls=os(i,".fc-business-container"),t&&(this.colContainerEls.reverse(),this.mirrorContainerEls.reverse(),this.fgContainerEls.reverse(),this.bgContainerEls.reverse(),this.highlightContainerEls.reverse(),this.businessContainerEls.reverse()),this.el.appendChild(i)},e.prototype.unrenderContentSkeleton=function(){Ls(this.contentSkeletonEl)},e.prototype.groupSegsByCol=function(t){var i,r=[];for(i=0;i<this.colCnt;i++)r.push([]);for(i=0;i<t.length;i++)r[t[i].col].push(t[i]);return r},e.prototype.attachSegsByCol=function(t,r){var i,s,u;for(i=0;i<this.colCnt;i++)for(s=t[i],u=0;u<s.length;u++)r[i].appendChild(s[u].el)},e.prototype.getNowIndicatorUnit=function(){return"minute"},e.prototype.renderNowIndicator=function(t,r){if(this.colContainerEls){var u,i=this.computeDateTop(r),s=[];for(u=0;u<t.length;u++){var d=ss("div",{className:"fc-now-indicator fc-now-indicator-line"});d.style.top=i+"px",this.colContainerEls[t[u].col].appendChild(d),s.push(d)}if(t.length>0){var p=ss("div",{className:"fc-now-indicator fc-now-indicator-arrow"});p.style.top=i+"px",this.contentSkeletonEl.appendChild(p),s.push(p)}this.nowIndicatorEls=s}},e.prototype.unrenderNowIndicator=function(){this.nowIndicatorEls&&(this.nowIndicatorEls.forEach(Ls),this.nowIndicatorEls=null)},e.prototype.getTotalSlatHeight=function(){return this.slatContainerEl.getBoundingClientRect().height},e.prototype.computeDateTop=function(t,r){return r||(r=Pr(t)),this.computeTimeTop(hn(t.valueOf()-r.valueOf()))},e.prototype.computeTimeTop=function(t){var u,d,r=this.slatEls.length,s=(t.milliseconds-jl(this.props.dateProfile.minTime))/jl(this.slotDuration);return s=Math.max(0,s),s=Math.min(r,s),u=Math.floor(s),d=s-(u=Math.min(u,r-1)),this.slatPositions.tops[u]+this.slatPositions.getHeight(u)*d},e.prototype.computeSegVerticals=function(t){var s,u,d,i=this.context.options.timeGridEventMinHeight;for(s=0;s<t.length;s++)(u=t[s]).top=this.computeDateTop(u.start,d=this.props.cells[u.col].date),u.bottom=Math.max(u.top+i,this.computeDateTop(u.end,d))},e.prototype.assignSegVerticals=function(t){var r,i;for(r=0;r<t.length;r++)Ri((i=t[r]).el,this.generateSegVerticalCss(i))},e.prototype.generateSegVerticalCss=function(t){return{top:t.top,bottom:-t.bottom}},e.prototype.buildPositionCaches=function(){this.buildColPositions(),this.buildSlatPositions()},e.prototype.buildColPositions=function(){this.colPositions.build()},e.prototype.buildSlatPositions=function(){this.slatPositions.build()},e.prototype.positionToHit=function(t,r){var i=this.context.dateEnv,s=this,u=s.snapsPerSlot,d=s.slatPositions,p=s.colPositions,y=p.leftToIndex(t),b=d.topToIndex(r);if(null!=y&&null!=b){var I=d.tops[b],x=d.getHeight(b),k=Math.floor((r-I)/x*u),Y=this.props.cells[y].date,me=WM(this.props.dateProfile.minTime,function _2(n,e){return{years:n.years*e,months:n.months*e,days:n.days*e,milliseconds:n.milliseconds*e}}(this.snapDuration,b*u+k)),Ne=i.add(Y,me);return{col:y,dateSpan:{range:{start:Ne,end:i.add(Ne,this.snapDuration)},allDay:!1},dayEl:this.colEls[y],relativeRect:{left:p.lefts[y],right:p.rights[y],top:I,bottom:I+x}}}},e.prototype._renderEventDrag=function(t){t&&(this.eventRenderer.hideByHash(t.affectedInstances),t.isEvent?this.mirrorRenderer.renderSegs(this.context,t.segs,{isDragging:!0,sourceSeg:t.sourceSeg}):this.fillRenderer.renderSegs("highlight",this.context,t.segs))},e.prototype._unrenderEventDrag=function(t){t&&(this.eventRenderer.showByHash(t.affectedInstances),t.isEvent?this.mirrorRenderer.unrender(this.context,t.segs,{isDragging:!0,sourceSeg:t.sourceSeg}):this.fillRenderer.unrender("highlight",this.context))},e.prototype._renderEventResize=function(t){t&&(this.eventRenderer.hideByHash(t.affectedInstances),this.mirrorRenderer.renderSegs(this.context,t.segs,{isResizing:!0,sourceSeg:t.sourceSeg}))},e.prototype._unrenderEventResize=function(t){t&&(this.eventRenderer.showByHash(t.affectedInstances),this.mirrorRenderer.unrender(this.context,t.segs,{isResizing:!0,sourceSeg:t.sourceSeg}))},e.prototype._renderDateSelection=function(t){t&&(this.context.options.selectMirror?this.mirrorRenderer.renderSegs(this.context,t,{isSelecting:!0}):this.fillRenderer.renderSegs("highlight",this.context,t))},e.prototype._unrenderDateSelection=function(t){t&&(this.context.options.selectMirror?this.mirrorRenderer.unrender(this.context,t,{isSelecting:!0}):this.fillRenderer.unrender("highlight",this.context))},e}(ep),F$=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return th(e,n),e.prototype.getKeyInfo=function(){return{allDay:{},timed:{}}},e.prototype.getKeysForDateSpan=function(t){return t.allDay?["allDay"]:["timed"]},e.prototype.getKeysForEventDef=function(t){return t.allDay?function rH(n){return"background"===n.rendering||"inverse-background"===n.rendering}(t)?["timed","allDay"]:["allDay"]:["timed"]},e}(MH),V$=Vs({week:"short"}),y1=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.splitter=new F$,t.renderSkeleton=Zt(t._renderSkeleton,t._unrenderSkeleton),t.renderHeadIntroHtml=function(){var y,r=t.context,i=r.theme,s=r.dateEnv,u=r.options,d=t.props.dateProfile.renderRange,p=Kf(d.start,d.end);return u.weekNumbers?(y=s.format(d.start,V$),'<th class="fc-axis fc-week-number '+i.getClass("widgetHeader")+'" '+t.axisStyleAttr()+">"+cb(u,s,{date:d.start,type:"week",forceOff:p>1},xi(y))+"</th>"):'<th class="fc-axis '+i.getClass("widgetHeader")+'" '+t.axisStyleAttr()+"></th>"},t.renderTimeGridBgIntroHtml=function(){return'<td class="fc-axis '+t.context.theme.getClass("widgetContent")+'" '+t.axisStyleAttr()+"></td>"},t.renderTimeGridIntroHtml=function(){return'<td class="fc-axis" '+t.axisStyleAttr()+"></td>"},t.renderDayGridBgIntroHtml=function(){var r=t.context,s=r.options;return'<td class="fc-axis '+r.theme.getClass("widgetContent")+'" '+t.axisStyleAttr()+"><span>"+xH(s)+"</span></td>"},t.renderDayGridIntroHtml=function(){return'<td class="fc-axis" '+t.axisStyleAttr()+"></td>"},t}return th(e,n),e.prototype.render=function(t,r){n.prototype.render.call(this,t,r),this.renderSkeleton(r)},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.renderSkeleton.unrender()},e.prototype._renderSkeleton=function(t){this.el.classList.add("fc-timeGrid-view"),this.el.innerHTML=this.renderSkeletonHtml(),this.scroller=new Fk("hidden","auto");var r=this.scroller.el;this.el.querySelector(".fc-body > tr > td").appendChild(r),r.classList.add("fc-time-grid-container");var i=ss("div",{className:"fc-time-grid"});if(r.appendChild(i),this.timeGrid=new k$(i,{renderBgIntroHtml:this.renderTimeGridBgIntroHtml,renderIntroHtml:this.renderTimeGridIntroHtml}),t.options.allDaySlot){this.dayGrid=new d1(this.el.querySelector(".fc-day-grid"),{renderNumberIntroHtml:this.renderDayGridIntroHtml,renderBgIntroHtml:this.renderDayGridBgIntroHtml,renderIntroHtml:this.renderDayGridIntroHtml,colWeekNumbersVisible:!1,cellWeekNumbersVisible:!1});var s=this.el.querySelector(".fc-divider");this.dayGrid.bottomCoordPadding=s.getBoundingClientRect().height}},e.prototype._unrenderSkeleton=function(){this.el.classList.remove("fc-timeGrid-view"),this.timeGrid.destroy(),this.dayGrid&&this.dayGrid.destroy(),this.scroller.destroy()},e.prototype.renderSkeletonHtml=function(){var t=this.context,r=t.theme,i=t.options;return'<table class="'+r.getClass("tableGrid")+'">'+(i.columnHeader?'<thead class="fc-head"><tr><td class="fc-head-container '+r.getClass("widgetHeader")+'">&nbsp;</td></tr></thead>':"")+'<tbody class="fc-body"><tr><td class="'+r.getClass("widgetContent")+'">'+(i.allDaySlot?'<div class="fc-day-grid"></div><hr class="fc-divider '+r.getClass("widgetHeader")+'" />':"")+"</td></tr></tbody></table>"},e.prototype.getNowIndicatorUnit=function(){return this.timeGrid.getNowIndicatorUnit()},e.prototype.unrenderNowIndicator=function(){this.timeGrid.unrenderNowIndicator()},e.prototype.updateSize=function(t,r,i){n.prototype.updateSize.call(this,t,r,i),this.timeGrid.updateSize(t),this.dayGrid&&this.dayGrid.updateSize(t)},e.prototype.updateBaseSize=function(t,r,i){var u,d,p,s=this;if(this.axisWidth=ek(os(this.el,".fc-axis")),this.timeGrid.colEls){var y=os(this.el,".fc-row").filter(function(b){return!s.scroller.el.contains(b)});this.timeGrid.bottomRuleEl.style.display="none",this.scroller.clear(),y.forEach(QO),this.dayGrid&&(this.dayGrid.removeSegPopover(),(u=this.context.options.eventLimit)&&"number"!=typeof u&&(u=5),u&&this.dayGrid.limitRows(u)),i||(d=this.computeScrollerHeight(r),this.scroller.setHeight(d),((p=this.scroller.getScrollbarWidths()).left||p.right)&&(y.forEach(function(b){YO(b,p)}),d=this.computeScrollerHeight(r),this.scroller.setHeight(d)),this.scroller.lockOverflow(p),this.timeGrid.getTotalSlatHeight()<d&&(this.timeGrid.bottomRuleEl.style.display=""))}else i||(d=this.computeScrollerHeight(r),this.scroller.setHeight(d))},e.prototype.computeScrollerHeight=function(t){return t-tk(this.el,this.scroller.el)},e.prototype.computeDateScroll=function(t){var r=this.timeGrid.computeTimeTop(t);return(r=Math.ceil(r))&&r++,{top:r}},e.prototype.queryDateScroll=function(){return{top:this.scroller.getScrollTop()}},e.prototype.applyDateScroll=function(t){void 0!==t.top&&this.scroller.setScrollTop(t.top)},e.prototype.axisStyleAttr=function(){return null!=this.axisWidth?'style="width:'+this.axisWidth+'px"':""},e}(pb);y1.prototype.usesMinMaxTime=!0;var U$=function(n){function e(t){var r=n.call(this,t.el)||this;return r.buildDayRanges=Dn(B$),r.slicer=new H$,r.timeGrid=t,r}return th(e,n),e.prototype.firstContext=function(t){t.calendar.registerInteractiveComponent(this,{el:this.timeGrid.el})},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.context.calendar.unregisterInteractiveComponent(this)},e.prototype.render=function(t,r){var s=t.dateProfile,u=t.dayTable,d=this.dayRanges=this.buildDayRanges(u,s,this.context.dateEnv),p=this.timeGrid;p.receiveContext(r),p.receiveProps(mb({},this.slicer.sliceProps(t,s,null,r.calendar,p,d),{dateProfile:s,cells:u.cells[0]}),r)},e.prototype.renderNowIndicator=function(t){this.timeGrid.renderNowIndicator(this.slicer.sliceNowDate(t,this.timeGrid,this.dayRanges),t)},e.prototype.buildPositionCaches=function(){this.timeGrid.buildPositionCaches()},e.prototype.queryHit=function(t,r){var i=this.timeGrid.positionToHit(t,r);if(i)return{component:this.timeGrid,dateSpan:i.dateSpan,dayEl:i.dayEl,rect:{left:i.relativeRect.left,right:i.relativeRect.right,top:i.relativeRect.top,bottom:i.relativeRect.bottom},layer:0}},e}(ep);function B$(n,e,t){for(var r=[],i=0,s=n.headerDates;i<s.length;i++){var u=s[i];r.push({start:t.add(u,e.minTime),end:t.add(u,e.maxTime)})}return r}var H$=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return th(e,n),e.prototype.sliceRange=function(t,r){for(var i=[],s=0;s<r.length;s++){var u=Ny(t,r[s]);u&&i.push({start:u.start,end:u.end,isStart:u.start.valueOf()===t.start.valueOf(),isEnd:u.end.valueOf()===t.end.valueOf(),col:s})}return i},e}(o1),j$=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.buildDayTable=Dn($$),t}return th(e,n),e.prototype.render=function(t,r){n.prototype.render.call(this,t,r);var i=this.props,s=i.dateProfile,u=i.dateProfileGenerator,d=r.nextDayThreshold,p=this.buildDayTable(s,u),y=this.splitter.splitProps(t);this.header&&this.header.receiveProps({dateProfile:s,dates:p.headerDates,datesRepDistinctDays:!0,renderIntroHtml:this.renderHeadIntroHtml},r),this.simpleTimeGrid.receiveProps(mb({},y.timed,{dateProfile:s,dayTable:p}),r),this.simpleDayGrid&&this.simpleDayGrid.receiveProps(mb({},y.allDay,{dateProfile:s,dayTable:p,nextDayThreshold:d,isRigid:!1}),r),this.startNowIndicator(s,u)},e.prototype._renderSkeleton=function(t){n.prototype._renderSkeleton.call(this,t),t.options.columnHeader&&(this.header=new r1(this.el.querySelector(".fc-head-container"))),this.simpleTimeGrid=new U$(this.timeGrid),this.dayGrid&&(this.simpleDayGrid=new f1(this.dayGrid))},e.prototype._unrenderSkeleton=function(){n.prototype._unrenderSkeleton.call(this),this.header&&this.header.destroy(),this.simpleTimeGrid.destroy(),this.simpleDayGrid&&this.simpleDayGrid.destroy()},e.prototype.renderNowIndicator=function(t){this.simpleTimeGrid.renderNowIndicator(t)},e}(y1);function $$(n,e){var t=new i1(n.renderRange,e);return new s1(t,!1)}const z$=tp({defaultView:"timeGridWeek",views:{timeGrid:{class:j$,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});var wR=function(n,e){return(wR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function nh(n,e){function t(){this.constructor=n}wR(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var Dc=function(){return Dc=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Dc.apply(this,arguments)};GT.touchMouseIgnoreWait=500;var bR=0,_1=0,DR=!1,SR=function(){function n(e){var t=this;this.subjectEl=null,this.downEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=function(r){if(!t.shouldIgnoreMouse()&&function q$(n){return 0===n.button&&!n.ctrlKey}(r)&&t.tryStart(r)){var i=t.createEventFromMouse(r,!0);t.emitter.trigger("pointerdown",i),t.initScrollWatch(i),t.shouldIgnoreMove||document.addEventListener("mousemove",t.handleMouseMove),document.addEventListener("mouseup",t.handleMouseUp)}},this.handleMouseMove=function(r){var i=t.createEventFromMouse(r);t.recordCoords(i),t.emitter.trigger("pointermove",i)},this.handleMouseUp=function(r){document.removeEventListener("mousemove",t.handleMouseMove),document.removeEventListener("mouseup",t.handleMouseUp),t.emitter.trigger("pointerup",t.createEventFromMouse(r)),t.cleanup()},this.handleTouchStart=function(r){if(t.tryStart(r)){t.isTouchDragging=!0;var i=t.createEventFromTouch(r,!0);t.emitter.trigger("pointerdown",i),t.initScrollWatch(i);var s=r.target;t.shouldIgnoreMove||s.addEventListener("touchmove",t.handleTouchMove),s.addEventListener("touchend",t.handleTouchEnd),s.addEventListener("touchcancel",t.handleTouchEnd),window.addEventListener("scroll",t.handleTouchScroll,!0)}},this.handleTouchMove=function(r){var i=t.createEventFromTouch(r);t.recordCoords(i),t.emitter.trigger("pointermove",i)},this.handleTouchEnd=function(r){if(t.isDragging){var i=r.target;i.removeEventListener("touchmove",t.handleTouchMove),i.removeEventListener("touchend",t.handleTouchEnd),i.removeEventListener("touchcancel",t.handleTouchEnd),window.removeEventListener("scroll",t.handleTouchScroll,!0),t.emitter.trigger("pointerup",t.createEventFromTouch(r)),t.cleanup(),t.isTouchDragging=!1,function W$(){bR++,setTimeout(function(){bR--},GT.touchMouseIgnoreWait)}()}},this.handleTouchScroll=function(){t.wasTouchScroll=!0},this.handleScroll=function(r){if(!t.shouldIgnoreMove){var i=window.pageXOffset-t.prevScrollX+t.prevPageX,s=window.pageYOffset-t.prevScrollY+t.prevPageY;t.emitter.trigger("pointermove",{origEvent:r,isTouch:t.isTouchDragging,subjectEl:t.subjectEl,pageX:i,pageY:s,deltaX:i-t.origPageX,deltaY:s-t.origPageY})}},this.containerEl=e,this.emitter=new db,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),function Z$(){_1++||window.addEventListener("touchmove",E1,{passive:!1})}()}return n.prototype.destroy=function(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),function K$(){--_1||window.removeEventListener("touchmove",E1,{passive:!1})}()},n.prototype.tryStart=function(e){var t=this.querySubjectEl(e),r=e.target;return!(!t||this.handleSelector&&!Go(r,this.handleSelector)||(this.subjectEl=t,this.downEl=r,this.isDragging=!0,this.wasTouchScroll=!1,0))},n.prototype.cleanup=function(){DR=!1,this.isDragging=!1,this.subjectEl=null,this.downEl=null,this.destroyScrollWatch()},n.prototype.querySubjectEl=function(e){return this.selector?Go(e.target,this.selector):this.containerEl},n.prototype.shouldIgnoreMouse=function(){return bR||this.isTouchDragging},n.prototype.cancelTouchScroll=function(){this.isDragging&&(DR=!0)},n.prototype.initScrollWatch=function(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))},n.prototype.recordCoords=function(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.pageXOffset,this.prevScrollY=window.pageYOffset)},n.prototype.destroyScrollWatch=function(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)},n.prototype.createEventFromMouse=function(e,t){var r=0,i=0;return t?(this.origPageX=e.pageX,this.origPageY=e.pageY):(r=e.pageX-this.origPageX,i=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:r,deltaY:i}},n.prototype.createEventFromTouch=function(e,t){var i,s,r=e.touches,u=0,d=0;return r&&r.length?(i=r[0].pageX,s=r[0].pageY):(i=e.pageX,s=e.pageY),t?(this.origPageX=i,this.origPageY=s):(u=i-this.origPageX,d=s-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:i,pageY:s,deltaX:u,deltaY:d}},n}();function E1(n){DR&&n.preventDefault()}var Y$=function(){function n(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}return n.prototype.start=function(e,t,r){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.pageXOffset,this.origScreenY=r-window.pageYOffset,this.deltaX=0,this.deltaY=0,this.updateElPosition()},n.prototype.handleMove=function(e,t){this.deltaX=e-window.pageXOffset-this.origScreenX,this.deltaY=t-window.pageYOffset-this.origScreenY,this.updateElPosition()},n.prototype.setIsVisible=function(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)},n.prototype.stop=function(e,t){var r=this,i=function(){r.cleanup(),t()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(i,this.revertDuration):setTimeout(i,0)},n.prototype.doRevertAnimation=function(e,t){var r=this.mirrorEl,i=this.sourceEl.getBoundingClientRect();r.style.transition="top "+t+"ms,left "+t+"ms",Ri(r,{left:i.left,top:i.top}),function i2(n,e){var t=function(r){e(r),jO.forEach(function(i){n.removeEventListener(i,t)})};jO.forEach(function(r){n.addEventListener(r,t)})}(r,function(){r.style.transition="",e()})},n.prototype.cleanup=function(){this.mirrorEl&&(Ls(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null},n.prototype.updateElPosition=function(){this.sourceEl&&this.isVisible&&Ri(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})},n.prototype.getMirrorEl=function(){var e=this.sourceElRect,t=this.mirrorEl;return t||((t=this.mirrorEl=this.sourceEl.cloneNode(!0)).classList.add("fc-unselectable"),t.classList.add("fc-dragging"),Ri(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t},n}(),w1=function(n){function e(t,r){var i=n.call(this)||this;return i.handleScroll=function(){i.scrollTop=i.scrollController.getScrollTop(),i.scrollLeft=i.scrollController.getScrollLeft(),i.handleScrollChange()},i.scrollController=t,i.doesListening=r,i.scrollTop=i.origScrollTop=t.getScrollTop(),i.scrollLeft=i.origScrollLeft=t.getScrollLeft(),i.scrollWidth=t.getScrollWidth(),i.scrollHeight=t.getScrollHeight(),i.clientWidth=t.getClientWidth(),i.clientHeight=t.getClientHeight(),i.clientRect=i.computeClientRect(),i.doesListening&&i.getEventTarget().addEventListener("scroll",i.handleScroll),i}return nh(e,n),e.prototype.destroy=function(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)},e.prototype.getScrollTop=function(){return this.scrollTop},e.prototype.getScrollLeft=function(){return this.scrollLeft},e.prototype.setScrollTop=function(t){this.scrollController.setScrollTop(t),this.doesListening||(this.scrollTop=Math.max(Math.min(t,this.getMaxScrollTop()),0),this.handleScrollChange())},e.prototype.setScrollLeft=function(t){this.scrollController.setScrollLeft(t),this.doesListening||(this.scrollLeft=Math.max(Math.min(t,this.getMaxScrollLeft()),0),this.handleScrollChange())},e.prototype.getClientWidth=function(){return this.clientWidth},e.prototype.getClientHeight=function(){return this.clientHeight},e.prototype.getScrollWidth=function(){return this.scrollWidth},e.prototype.getScrollHeight=function(){return this.scrollHeight},e.prototype.handleScrollChange=function(){},e}(dR),b1=function(n){function e(t,r){return n.call(this,new kk(t),r)||this}return nh(e,n),e.prototype.getEventTarget=function(){return this.scrollController.el},e.prototype.computeClientRect=function(){return VO(this.scrollController.el)},e}(w1),Q$=function(n){function e(t){return n.call(this,new OH,t)||this}return nh(e,n),e.prototype.getEventTarget=function(){return window},e.prototype.computeClientRect=function(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}},e.prototype.handleScrollChange=function(){this.clientRect=this.computeClientRect()},e}(w1),D1="function"==typeof performance?performance.now:Date.now,X$=function(){function n(){var e=this;this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=function(){if(e.isAnimating){var t=e.computeBestEdge(e.pointerScreenX+window.pageXOffset,e.pointerScreenY+window.pageYOffset);if(t){var r=D1();e.handleSide(t,(r-e.msSinceRequest)/1e3),e.requestAnimation(r)}else e.isAnimating=!1}}}return n.prototype.start=function(e,t){this.isEnabled&&(this.scrollCaches=this.buildCaches(),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,t))},n.prototype.handleMove=function(e,t){if(this.isEnabled){var r=e-window.pageXOffset,i=t-window.pageYOffset,s=null===this.pointerScreenY?0:i-this.pointerScreenY,u=null===this.pointerScreenX?0:r-this.pointerScreenX;s<0?this.everMovedUp=!0:s>0&&(this.everMovedDown=!0),u<0?this.everMovedLeft=!0:u>0&&(this.everMovedRight=!0),this.pointerScreenX=r,this.pointerScreenY=i,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(D1()))}},n.prototype.stop=function(){if(this.isEnabled){this.isAnimating=!1;for(var e=0,t=this.scrollCaches;e<t.length;e++)t[e].destroy();this.scrollCaches=null}},n.prototype.requestAnimation=function(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)},n.prototype.handleSide=function(e,t){var r=e.scrollCache,i=this.edgeThreshold,s=i-e.distance,u=s*s/(i*i)*this.maxVelocity*t,d=1;switch(e.name){case"left":d=-1;case"right":r.setScrollLeft(r.getScrollLeft()+u*d);break;case"top":d=-1;case"bottom":r.setScrollTop(r.getScrollTop()+u*d)}},n.prototype.computeBestEdge=function(e,t){for(var r=this.edgeThreshold,i=null,s=0,u=this.scrollCaches;s<u.length;s++){var d=u[s],p=d.clientRect,y=e-p.left,b=p.right-e,I=t-p.top,x=p.bottom-t;y>=0&&b>=0&&I>=0&&x>=0&&(I<=r&&this.everMovedUp&&d.canScrollUp()&&(!i||i.distance>I)&&(i={scrollCache:d,name:"top",distance:I}),x<=r&&this.everMovedDown&&d.canScrollDown()&&(!i||i.distance>x)&&(i={scrollCache:d,name:"bottom",distance:x}),y<=r&&this.everMovedLeft&&d.canScrollLeft()&&(!i||i.distance>y)&&(i={scrollCache:d,name:"left",distance:y}),b<=r&&this.everMovedRight&&d.canScrollRight()&&(!i||i.distance>b)&&(i={scrollCache:d,name:"right",distance:b}))}return i},n.prototype.buildCaches=function(){return this.queryScrollEls().map(function(e){return e===window?new Q$(!1):new b1(e,!1)})},n.prototype.queryScrollEls=function(){for(var e=[],t=0,r=this.scrollQuery;t<r.length;t++){var i=r[t];"object"==typeof i?e.push(i):e.push.apply(e,Array.prototype.slice.call(document.querySelectorAll(i)))}return e},n}(),ky=function(n){function e(t){var r=n.call(this,t)||this;r.delay=null,r.minDistance=0,r.touchScrollAllowed=!0,r.mirrorNeedsRevert=!1,r.isInteracting=!1,r.isDragging=!1,r.isDelayEnded=!1,r.isDistanceSurpassed=!1,r.delayTimeoutId=null,r.onPointerDown=function(s){r.isDragging||(r.isInteracting=!0,r.isDelayEnded=!1,r.isDistanceSurpassed=!1,function b2(n){n.classList.add("fc-unselectable"),n.addEventListener("selectstart",IT)}(document.body),function S2(n){n.addEventListener("contextmenu",IT)}(document.body),s.isTouch||s.origEvent.preventDefault(),r.emitter.trigger("pointerdown",s),r.pointer.shouldIgnoreMove||(r.mirror.setIsVisible(!1),r.mirror.start(s.subjectEl,s.pageX,s.pageY),r.startDelay(s),r.minDistance||r.handleDistanceSurpassed(s)))},r.onPointerMove=function(s){if(r.isInteracting){if(r.emitter.trigger("pointermove",s),!r.isDistanceSurpassed){var u=r.minDistance,p=s.deltaX,y=s.deltaY;p*p+y*y>=u*u&&r.handleDistanceSurpassed(s)}r.isDragging&&("scroll"!==s.origEvent.type&&(r.mirror.handleMove(s.pageX,s.pageY),r.autoScroller.handleMove(s.pageX,s.pageY)),r.emitter.trigger("dragmove",s))}},r.onPointerUp=function(s){r.isInteracting&&(r.isInteracting=!1,function D2(n){n.classList.remove("fc-unselectable"),n.removeEventListener("selectstart",IT)}(document.body),function T2(n){n.removeEventListener("contextmenu",IT)}(document.body),r.emitter.trigger("pointerup",s),r.isDragging&&(r.autoScroller.stop(),r.tryStopDrag(s)),r.delayTimeoutId&&(clearTimeout(r.delayTimeoutId),r.delayTimeoutId=null))};var i=r.pointer=new SR(t);return i.emitter.on("pointerdown",r.onPointerDown),i.emitter.on("pointermove",r.onPointerMove),i.emitter.on("pointerup",r.onPointerUp),r.mirror=new Y$,r.autoScroller=new X$,r}return nh(e,n),e.prototype.destroy=function(){this.pointer.destroy()},e.prototype.startDelay=function(t){var r=this;"number"==typeof this.delay?this.delayTimeoutId=setTimeout(function(){r.delayTimeoutId=null,r.handleDelayEnd(t)},this.delay):this.handleDelayEnd(t)},e.prototype.handleDelayEnd=function(t){this.isDelayEnded=!0,this.tryStartDrag(t)},e.prototype.handleDistanceSurpassed=function(t){this.isDistanceSurpassed=!0,this.tryStartDrag(t)},e.prototype.tryStartDrag=function(t){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(t.pageX,t.pageY),this.emitter.trigger("dragstart",t),!1===this.touchScrollAllowed&&this.pointer.cancelTouchScroll())},e.prototype.tryStopDrag=function(t){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,t))},e.prototype.stopDrag=function(t){this.isDragging=!1,this.emitter.trigger("dragend",t)},e.prototype.setIgnoreMove=function(t){this.pointer.shouldIgnoreMove=t},e.prototype.setMirrorIsVisible=function(t){this.mirror.setIsVisible(t)},e.prototype.setMirrorNeedsRevert=function(t){this.mirrorNeedsRevert=t},e.prototype.setAutoScrollEnabled=function(t){this.autoScroller.isEnabled=t},e}(t1),J$=function(){function n(e){this.origRect=qg(e),this.scrollCaches=HO(e).map(function(t){return new b1(t,!0)})}return n.prototype.destroy=function(){for(var e=0,t=this.scrollCaches;e<t.length;e++)t[e].destroy()},n.prototype.computeLeft=function(){for(var e=this.origRect.left,t=0,r=this.scrollCaches;t<r.length;t++){var i=r[t];e+=i.origScrollLeft-i.getScrollLeft()}return e},n.prototype.computeTop=function(){for(var e=this.origRect.top,t=0,r=this.scrollCaches;t<r.length;t++){var i=r[t];e+=i.origScrollTop-i.getScrollTop()}return e},n.prototype.isWithinClipping=function(e,t){for(var r={left:e,top:t},i=0,s=this.scrollCaches;i<s.length;i++){var u=s[i];if(!eG(u.getEventTarget())&&!KB(r,u.clientRect))return!1}return!0},n}();function eG(n){var e=n.tagName;return"HTML"===e||"BODY"===e}var vb=function(){function n(e,t){var r=this;this.useSubjectCenter=!1,this.requireInitial=!0,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=function(i){var s=r.dragging;r.initialHit=null,r.movingHit=null,r.finalHit=null,r.prepareHits(),r.processFirstCoord(i),r.initialHit||!r.requireInitial?(s.setIgnoreMove(!1),r.emitter.trigger("pointerdown",i)):s.setIgnoreMove(!0)},this.handleDragStart=function(i){r.emitter.trigger("dragstart",i),r.handleMove(i,!0)},this.handleDragMove=function(i){r.emitter.trigger("dragmove",i),r.handleMove(i)},this.handlePointerUp=function(i){r.releaseHits(),r.emitter.trigger("pointerup",i)},this.handleDragEnd=function(i){r.movingHit&&r.emitter.trigger("hitupdate",null,!0,i),r.finalHit=r.movingHit,r.movingHit=null,r.emitter.trigger("dragend",i)},this.droppableStore=t,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new db}return n.prototype.processFirstCoord=function(e){var s,t={left:e.pageX,top:e.pageY},r=t,i=e.subjectEl;i!==document&&(r=function YB(n,e){return{left:Math.min(Math.max(n.left,e.left),e.right),top:Math.min(Math.max(n.top,e.top),e.bottom)}}(r,s=qg(i)));var u=this.initialHit=this.queryHitForOffset(r.left,r.top);if(u){if(this.useSubjectCenter&&s){var d=kO(s,u.rect);d&&(r=function QB(n){return{left:(n.left+n.right)/2,top:(n.top+n.bottom)/2}}(d))}this.coordAdjust=function XB(n,e){return{left:n.left-e.left,top:n.top-e.top}}(r,t)}else this.coordAdjust={left:0,top:0}},n.prototype.handleMove=function(e,t){var r=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(t||!qT(this.movingHit,r))&&(this.movingHit=r,this.emitter.trigger("hitupdate",r,!1,e))},n.prototype.prepareHits=function(){this.offsetTrackers=bc(this.droppableStore,function(e){return e.component.buildPositionCaches(),new J$(e.el)})},n.prototype.releaseHits=function(){var e=this.offsetTrackers;for(var t in e)e[t].destroy();this.offsetTrackers={}},n.prototype.queryHitForOffset=function(e,t){var i=this.droppableStore,s=this.offsetTrackers,u=null;for(var d in i){var p=i[d].component,y=s[d];if(y.isWithinClipping(e,t)){var b=y.computeLeft(),I=y.computeTop(),x=e-b,P=t-I,k=y.origRect,H=k.right-k.left,Y=k.bottom-k.top;if(x>=0&&x<H&&P>=0&&P<Y){var me=p.queryHit(x,P,H,Y);me&&(!p.props.dateProfile||kT(p.props.dateProfile.activeRange,me.dateSpan.range))&&(!u||me.layer>u.layer)&&(me.rect.left+=b,me.rect.right+=b,me.rect.top+=I,me.rect.bottom+=I,u=me)}}}return u},n}();function qT(n,e){return!n&&!e||Boolean(n)===Boolean(e)&&function Lj(n,e){return OT(n.range,e.range)&&n.allDay===e.allDay&&function Vj(n,e){for(var t in e)if("range"!==t&&"allDay"!==t&&n[t]!==e[t])return!1;for(var t in n)if(!(t in e))return!1;return!0}(n,e)}(n.dateSpan,e.dateSpan)}var tG=function(n){function e(t){var r=n.call(this,t)||this;r.handlePointerDown=function(u){var d=r.dragging;d.setIgnoreMove(!r.component.isValidDateDownEl(d.pointer.downEl))},r.handleDragEnd=function(u){var p=r.component.context,y=p.calendar,b=p.view;if(!r.dragging.pointer.wasTouchScroll){var x=r.hitDragging,P=x.initialHit,k=x.finalHit;P&&k&&qT(P,k)&&y.triggerDateClick(P.dateSpan,P.dayEl,b,u.origEvent)}},r.dragging=new ky(t.component.el),r.dragging.autoScroller.isEnabled=!1;var s=r.hitDragging=new vb(r.dragging,mR(t));return s.emitter.on("pointerdown",r.handlePointerDown),s.emitter.on("dragend",r.handleDragEnd),r}return nh(e,n),e.prototype.destroy=function(){this.dragging.destroy()},e}(Oy),nG=function(n){function e(t){var r=n.call(this,t)||this;r.dragSelection=null,r.handlePointerDown=function(p){var b=r.component,I=r.dragging,P=b.context.options.selectable&&b.isValidDateDownEl(p.origEvent.target);I.setIgnoreMove(!P),I.delay=p.isTouch?function rG(n){var e=n.context.options,t=e.selectLongPressDelay;return null==t&&(t=e.longPressDelay),t}(b):null},r.handleDragStart=function(p){r.component.context.calendar.unselect(p)},r.handleHitUpdate=function(p,y){var b=r.component.context.calendar,I=null,x=!1;p&&(I=function iG(n,e,t){var r=n.dateSpan,i=e.dateSpan,s=[r.range.start,r.range.end,i.range.start,i.range.end];s.sort(M2);for(var u={},d=0,p=t;d<p.length;d++){var b=(0,p[d])(n,e);if(!1===b)return null;b&&Dc(u,b)}return u.range={start:s[0],end:s[3]},u.allDay=r.allDay,u}(r.hitDragging.initialHit,p,b.pluginSystem.hooks.dateSelectionTransformers),(!I||!r.component.isDateSelectionValid(I))&&(x=!0,I=null)),I?b.dispatch({type:"SELECT_DATES",selection:I}):y||b.dispatch({type:"UNSELECT_DATES"}),x?MT():RT(),y||(r.dragSelection=I)},r.handlePointerUp=function(p){r.dragSelection&&(r.component.context.calendar.triggerDateSelect(r.dragSelection,p),r.dragSelection=null)};var i=t.component,s=i.context.options,u=r.dragging=new ky(i.el);u.touchScrollAllowed=!1,u.minDistance=s.selectMinDistance||0,u.autoScroller.isEnabled=s.dragScroll;var d=r.hitDragging=new vb(r.dragging,mR(t));return d.emitter.on("pointerdown",r.handlePointerDown),d.emitter.on("dragstart",r.handleDragStart),d.emitter.on("hitupdate",r.handleHitUpdate),d.emitter.on("pointerup",r.handlePointerUp),r}return nh(e,n),e.prototype.destroy=function(){this.dragging.destroy()},e}(Oy),S1=function(n){function e(t){var r=n.call(this,t)||this;r.subjectSeg=null,r.isDragging=!1,r.eventRange=null,r.relevantEvents=null,r.receivingCalendar=null,r.validMutation=null,r.mutatedRelevantEvents=null,r.handlePointerDown=function(p){var y=p.origEvent.target,I=r.component,x=r.dragging,P=x.mirror,k=I.context.options,H=I.context.calendar,Y=r.subjectSeg=lb(p.subjectEl),Ne=(r.eventRange=Y.eventRange).instance.instanceId;r.relevantEvents=tR(H.state.eventStore,Ne),x.minDistance=p.isTouch?0:k.eventDragMinDistance,x.delay=p.isTouch&&Ne!==I.props.eventSelection?function oG(n){var e=n.context.options,t=e.eventLongPressDelay;return null==t&&(t=e.longPressDelay),t}(I):null,P.parentNode=H.el,P.revertDuration=k.dragRevertDuration;var Oe=I.isValidSegDownEl(y)&&!Go(y,".fc-resizer");x.setIgnoreMove(!Oe),r.isDragging=Oe&&p.subjectEl.classList.contains("fc-draggable")},r.handleDragStart=function(p){var y=r.component.context,b=y.calendar,I=r.eventRange,x=I.instance.instanceId;p.isTouch?x!==r.component.props.eventSelection&&b.dispatch({type:"SELECT_EVENT",eventInstanceId:x}):b.dispatch({type:"UNSELECT_EVENT"}),r.isDragging&&(b.unselect(p),b.publiclyTrigger("eventDragStart",[{el:r.subjectSeg.el,event:new Ir(b,I.def,I.instance),jsEvent:p.origEvent,view:y.view}]))},r.handleHitUpdate=function(p,y){if(r.isDragging){var b=r.relevantEvents,I=r.hitDragging.initialHit,x=r.component.context.calendar,P=null,k=null,H=null,Y=!1,me={affectedEvents:b,mutatedEvents:{defs:{},instances:{}},isEvent:!0,origSeg:r.subjectSeg};if(p){var Ne=p.component,Oe=Ne.context.options;x===(P=Ne.context.calendar)||Oe.editable&&Oe.droppable?(k=function sG(n,e,t){var r=n.dateSpan,i=e.dateSpan,s=r.range.start,u=i.range.start,d={};r.allDay!==i.allDay&&(d.allDay=i.allDay,d.hasEnd=e.component.context.options.allDayMaintainDuration,i.allDay&&(s=Pr(s)));var p=Ry(s,u,n.component.context.dateEnv,n.component===e.component?n.component.largeUnit:null);p.milliseconds&&(d.allDay=!1);for(var y={datesDelta:p,standardProps:d},b=0,I=t;b<I.length;b++)(0,I[b])(y,n,e);return y}(I,p,P.pluginSystem.hooks.eventDragMutationMassagers),k&&(H=sR(b,P.eventUiBases,k,P),me.mutatedEvents=H,Ne.isInteractionValid(me)||(Y=!0,k=null,H=null,me.mutatedEvents={defs:{},instances:{}}))):P=null}r.displayDrag(P,me),Y?MT():RT(),y||(x===P&&qT(I,p)&&(k=null),r.dragging.setMirrorNeedsRevert(!k),r.dragging.setMirrorIsVisible(!p||!document.querySelector(".fc-mirror")),r.receivingCalendar=P,r.validMutation=k,r.mutatedRelevantEvents=H)}},r.handlePointerUp=function(){r.isDragging||r.cleanup()},r.handleDragEnd=function(p){if(r.isDragging){var y=r.component.context,b=y.calendar,I=y.view,P=r.receivingCalendar,k=r.validMutation,H=r.eventRange.def,Y=r.eventRange.instance,me=new Ir(b,H,Y),Ne=r.relevantEvents,Oe=r.mutatedRelevantEvents,ke=r.hitDragging.finalHit;if(r.clearDrag(),b.publiclyTrigger("eventDragStop",[{el:r.subjectSeg.el,event:me,jsEvent:p.origEvent,view:I}]),k){if(P===b){b.dispatch({type:"MERGE_EVENTS",eventStore:Oe});for(var et={},Je=0,Et=b.pluginSystem.hooks.eventDropTransformers;Je<Et.length;Je++)Dc(et,(0,Et[Je])(k,b));var Qn=Dc({},et,{el:p.subjectEl,delta:k.datesDelta,oldEvent:me,event:new Ir(b,Oe.defs[H.defId],Y?Oe.instances[Y.instanceId]:null),revert:function(){b.dispatch({type:"MERGE_EVENTS",eventStore:Ne})},jsEvent:p.origEvent,view:I});b.publiclyTrigger("eventDrop",[Qn])}else if(P){b.publiclyTrigger("eventLeave",[{draggedEl:p.subjectEl,event:me,view:I}]),b.dispatch({type:"REMOVE_EVENT_INSTANCES",instances:r.mutatedRelevantEvents.instances}),P.dispatch({type:"MERGE_EVENTS",eventStore:r.mutatedRelevantEvents}),p.isTouch&&P.dispatch({type:"SELECT_EVENT",eventInstanceId:Y.instanceId});var ir=Dc({},P.buildDatePointApi(ke.dateSpan),{draggedEl:p.subjectEl,jsEvent:p.origEvent,view:ke.component});P.publiclyTrigger("drop",[ir]),P.publiclyTrigger("eventReceive",[{draggedEl:p.subjectEl,event:new Ir(P,Oe.defs[H.defId],Oe.instances[Y.instanceId]),view:ke.component}])}}else b.publiclyTrigger("_noEventDrop")}r.cleanup()};var i=r.component,s=i.context.options,u=r.dragging=new ky(i.el);u.pointer.selector=e.SELECTOR,u.touchScrollAllowed=!1,u.autoScroller.isEnabled=s.dragScroll;var d=r.hitDragging=new vb(r.dragging,zT);return d.useSubjectCenter=t.useEventCenter,d.emitter.on("pointerdown",r.handlePointerDown),d.emitter.on("dragstart",r.handleDragStart),d.emitter.on("hitupdate",r.handleHitUpdate),d.emitter.on("pointerup",r.handlePointerUp),d.emitter.on("dragend",r.handleDragEnd),r}return nh(e,n),e.prototype.destroy=function(){this.dragging.destroy()},e.prototype.displayDrag=function(t,r){var s=this.receivingCalendar;s&&s!==t&&s.dispatch(s===this.component.context.calendar?{type:"SET_EVENT_DRAG",state:{affectedEvents:r.affectedEvents,mutatedEvents:{defs:{},instances:{}},isEvent:!0,origSeg:r.origSeg}}:{type:"UNSET_EVENT_DRAG"}),t&&t.dispatch({type:"SET_EVENT_DRAG",state:r})},e.prototype.clearDrag=function(){var t=this.component.context.calendar,r=this.receivingCalendar;r&&r.dispatch({type:"UNSET_EVENT_DRAG"}),t!==r&&t.dispatch({type:"UNSET_EVENT_DRAG"})},e.prototype.cleanup=function(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingCalendar=null,this.validMutation=null,this.mutatedRelevantEvents=null},e.SELECTOR=".fc-draggable, .fc-resizable",e}(Oy),aG=function(n){function e(t){var r=n.call(this,t)||this;r.draggingSeg=null,r.eventRange=null,r.relevantEvents=null,r.validMutation=null,r.mutatedRelevantEvents=null,r.handlePointerDown=function(d){var p=r.component,y=r.querySeg(d),b=r.eventRange=y.eventRange;r.dragging.minDistance=p.context.options.eventDragMinDistance,r.dragging.setIgnoreMove(!r.component.isValidSegDownEl(d.origEvent.target)||d.isTouch&&r.component.props.eventSelection!==b.instance.instanceId)},r.handleDragStart=function(d){var p=r.component.context,y=p.calendar,b=p.view,I=r.eventRange;r.relevantEvents=tR(y.state.eventStore,r.eventRange.instance.instanceId),r.draggingSeg=r.querySeg(d),y.unselect(),y.publiclyTrigger("eventResizeStart",[{el:r.draggingSeg.el,event:new Ir(y,I.def,I.instance),jsEvent:d.origEvent,view:b}])},r.handleHitUpdate=function(d,p,y){var b=r.component.context.calendar,I=r.relevantEvents,x=r.hitDragging.initialHit,P=r.eventRange.instance,k=null,H=null,Y=!1,me={affectedEvents:I,mutatedEvents:{defs:{},instances:{}},isEvent:!0,origSeg:r.draggingSeg};d&&(k=function lG(n,e,t,r,i){for(var s=n.component.context.dateEnv,p=Ry(n.dateSpan.range.start,e.dateSpan.range.start,s,n.component.largeUnit),y={},b=0,I=i;b<I.length;b++){var P=(0,I[b])(n,e);if(!1===P)return null;P&&Dc(y,P)}if(t){if(s.add(r.start,p)<r.end)return y.startDelta=p,y}else if(s.add(r.end,p)>r.start)return y.endDelta=p,y;return null}(x,d,y.subjectEl.classList.contains("fc-start-resizer"),P.range,b.pluginSystem.hooks.eventResizeJoinTransforms)),k&&(H=sR(I,b.eventUiBases,k,b),me.mutatedEvents=H,r.component.isInteractionValid(me)||(Y=!0,k=null,H=null,me.mutatedEvents=null)),b.dispatch(H?{type:"SET_EVENT_RESIZE",state:me}:{type:"UNSET_EVENT_RESIZE"}),Y?MT():RT(),p||(k&&qT(x,d)&&(k=null),r.validMutation=k,r.mutatedRelevantEvents=H)},r.handleDragEnd=function(d){var p=r.component.context,y=p.calendar,b=p.view,I=r.eventRange.def,x=r.eventRange.instance,P=new Ir(y,I,x),k=r.relevantEvents,H=r.mutatedRelevantEvents;y.publiclyTrigger("eventResizeStop",[{el:r.draggingSeg.el,event:P,jsEvent:d.origEvent,view:b}]),r.validMutation?(y.dispatch({type:"MERGE_EVENTS",eventStore:H}),y.publiclyTrigger("eventResize",[{el:r.draggingSeg.el,startDelta:r.validMutation.startDelta||hn(0),endDelta:r.validMutation.endDelta||hn(0),prevEvent:P,event:new Ir(y,H.defs[I.defId],x?H.instances[x.instanceId]:null),revert:function(){y.dispatch({type:"MERGE_EVENTS",eventStore:k})},jsEvent:d.origEvent,view:b}])):y.publiclyTrigger("_noEventResize"),r.draggingSeg=null,r.relevantEvents=null,r.validMutation=null};var i=t.component,s=r.dragging=new ky(i.el);s.pointer.selector=".fc-resizer",s.touchScrollAllowed=!1,s.autoScroller.isEnabled=i.context.options.dragScroll;var u=r.hitDragging=new vb(r.dragging,mR(t));return u.emitter.on("pointerdown",r.handlePointerDown),u.emitter.on("dragstart",r.handleDragStart),u.emitter.on("hitupdate",r.handleHitUpdate),u.emitter.on("dragend",r.handleDragEnd),r}return nh(e,n),e.prototype.destroy=function(){this.dragging.destroy()},e.prototype.querySeg=function(t){return lb(Go(t.subjectEl,this.component.fgSegSelector))},e}(Oy),uG=function(){function n(e){var t=this;this.isRecentPointerDateSelect=!1,this.onSelect=function(i){i.jsEvent&&(t.isRecentPointerDateSelect=!0)},this.onDocumentPointerUp=function(i){var u=t.calendar,d=t.documentPointer,p=u.state;if(!d.wasTouchScroll){if(p.dateSelection&&!t.isRecentPointerDateSelect){var y=u.viewOpt("unselectAuto"),b=u.viewOpt("unselectCancel");y&&(!y||!Go(d.downEl,b))&&u.unselect(i)}p.eventSelection&&!Go(d.downEl,S1.SELECTOR)&&u.dispatch({type:"UNSELECT_EVENT"})}t.isRecentPointerDateSelect=!1},this.calendar=e;var r=this.documentPointer=new SR(document);r.shouldIgnoreMove=!0,r.shouldWatchScroll=!1,r.emitter.on("pointerup",this.onDocumentPointerUp),e.on("select",this.onSelect)}return n.prototype.destroy=function(){this.calendar.off("select",this.onSelect),this.documentPointer.destroy()},n}();!function(){function n(e,t){var r=this;this.receivingCalendar=null,this.droppableEvent=null,this.suppliedDragMeta=null,this.dragMeta=null,this.handleDragStart=function(s){r.dragMeta=r.buildDragMeta(s.subjectEl)},this.handleHitUpdate=function(s,u,d){var p=r.hitDragging.dragging,y=null,b=null,I=!1,x={affectedEvents:{defs:{},instances:{}},mutatedEvents:{defs:{},instances:{}},isEvent:r.dragMeta.create,origSeg:null};s&&r.canDropElOnCalendar(d.subjectEl,y=s.component.context.calendar)&&(b=function cG(n,e,t){for(var r=Dc({},e.leftoverProps),i=0,s=t.pluginSystem.hooks.externalDefTransforms;i<s.length;i++)Dc(r,(0,s[i])(n,e));var d=HT(r,e.sourceId,n.allDay,t.opt("forceEventDuration")||Boolean(e.duration),t),p=n.range.start;n.allDay&&e.startTime&&(p=t.dateEnv.add(p,e.startTime));var y=e.duration?t.dateEnv.add(p,e.duration):t.getDefaultEventEnd(n.allDay,p);return{def:d,instance:jT(d.defId,{start:p,end:y})}}(s.dateSpan,r.dragMeta,y),x.mutatedEvents=ob(b),(I=!Sk(x,y))&&(x.mutatedEvents={defs:{},instances:{}},b=null)),r.displayDrag(y,x),p.setMirrorIsVisible(u||!b||!document.querySelector(".fc-mirror")),I?MT():RT(),u||(p.setMirrorNeedsRevert(!b),r.receivingCalendar=y,r.droppableEvent=b)},this.handleDragEnd=function(s){var d=r.receivingCalendar,p=r.droppableEvent;if(r.clearDrag(),d&&p){var y=r.hitDragging.finalHit,b=y.component.context.view,I=r.dragMeta,x=Dc({},d.buildDatePointApi(y.dateSpan),{draggedEl:s.subjectEl,jsEvent:s.origEvent,view:b});d.publiclyTrigger("drop",[x]),I.create&&(d.dispatch({type:"MERGE_EVENTS",eventStore:ob(p)}),s.isTouch&&d.dispatch({type:"SELECT_EVENT",eventInstanceId:p.instance.instanceId}),d.publiclyTrigger("eventReceive",[{draggedEl:s.subjectEl,event:new Ir(d,p.def,p.instance),view:b}]))}r.receivingCalendar=null,r.droppableEvent=null};var i=this.hitDragging=new vb(e,zT);i.requireInitial=!1,i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("dragend",this.handleDragEnd),this.suppliedDragMeta=t}n.prototype.buildDragMeta=function(e){return"object"==typeof this.suppliedDragMeta?vR(this.suppliedDragMeta):"function"==typeof this.suppliedDragMeta?vR(this.suppliedDragMeta(e)):function dG(n){var e=function hG(n,e){var t=GT.dataAttrPrefix;return n.getAttribute("data-"+(t?t+"-":"")+e)||""}(n,"event");return vR(e?JSON.parse(e):{create:!1})}(e)},n.prototype.displayDrag=function(e,t){var r=this.receivingCalendar;r&&r!==e&&r.dispatch({type:"UNSET_EVENT_DRAG"}),e&&e.dispatch({type:"SET_EVENT_DRAG",state:t})},n.prototype.clearDrag=function(){this.receivingCalendar&&this.receivingCalendar.dispatch({type:"UNSET_EVENT_DRAG"})},n.prototype.canDropElOnCalendar=function(e,t){var r=t.opt("dropAccept");return"function"==typeof r?r(e):"string"!=typeof r||!r||Boolean(TT(e,r))}}();GT.dataAttrPrefix="";!function(n){function e(t){var r=n.call(this,t)||this;r.shouldIgnoreMove=!1,r.mirrorSelector="",r.currentMirrorEl=null,r.handlePointerDown=function(s){r.emitter.trigger("pointerdown",s),r.shouldIgnoreMove||r.emitter.trigger("dragstart",s)},r.handlePointerMove=function(s){r.shouldIgnoreMove||r.emitter.trigger("dragmove",s)},r.handlePointerUp=function(s){r.emitter.trigger("pointerup",s),r.shouldIgnoreMove||r.emitter.trigger("dragend",s)};var i=r.pointer=new SR(t);return i.emitter.on("pointerdown",r.handlePointerDown),i.emitter.on("pointermove",r.handlePointerMove),i.emitter.on("pointerup",r.handlePointerUp),r}nh(e,n),e.prototype.destroy=function(){this.pointer.destroy()},e.prototype.setIgnoreMove=function(t){this.shouldIgnoreMove=t},e.prototype.setMirrorIsVisible=function(t){if(t)this.currentMirrorEl&&(this.currentMirrorEl.style.visibility="",this.currentMirrorEl=null);else{var r=this.mirrorSelector?document.querySelector(this.mirrorSelector):null;r&&(this.currentMirrorEl=r,r.style.visibility="hidden")}}}(t1);const gG=tp({componentInteractions:[tG,nG,S1,aG],calendarInteractions:[uG],elementDraggingImpl:ky});let mG=(()=>{class n{constructor(t){this.el=t}ngOnInit(){if(this.config={theme:!0},this.options)for(let t in this.options)this.config[t]=this.options[t]}ngAfterViewChecked(){!this.initialized&&this.el.nativeElement.offsetParent&&this.initialize()}get events(){return this._events}set events(t){this._events=t,this._events&&this.calendar&&(this.calendar.removeAllEventSources(),this.calendar.addEventSource(this._events))}get options(){return this._options}set options(t){if(this._options=t,this._options&&this.calendar)for(let r in this._options){let i=this._options[r];this.config[r]=i,this.calendar.setOption(r,i)}}initialize(){this.calendar=new Qk(this.el.nativeElement.children[0],this.config),this.calendar.render(),this.initialized=!0,this.events&&(this.calendar.removeAllEventSources(),this.calendar.addEventSource(this.events))}getCalendar(){return this.calendar}ngOnDestroy(){this.calendar&&(this.calendar.destroy(),this.initialized=!1,this.calendar=null)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq))},n.\u0275cmp=h.Xpm({type:n,selectors:[["p-fullCalendar"]],hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",events:"events",options:"options"},decls:1,vars:3,consts:[[3,"ngStyle"]],template:function(t,r){1&t&&h._UZ(0,"div",0),2&t&&(h.Tol(r.styleClass),h.Q6J("ngStyle",r.style))},dependencies:[sh],encapsulation:2,changeDetection:0}),n})(),vG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[yo]}),n})();const yG=[{path:"",redirectTo:"inicio",pathMatch:"full"},{path:"list-sala",component:LB},{path:"acerca",component:dU},{path:"list-usuario",component:HB},{path:"create-sala",component:MO},{path:"create-usuario",component:xO},{path:"editSala/:id",component:MO},{path:"editUsuario/:id",component:xO},{path:"inicio",component:PB},{path:"reservar-sala",component:(()=>{class n{constructor(){this.events=[]}ngOnInit(){this.options={plugins:[A$,z$,gG],defaulDate:new Date,header:{left:"prev,next",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},editable:!1},this.events=[{title:"Sala A - Inf",start:new Date,description:"Evento 1"},{title:"Sala B - Inf",start:new Date((new Date).getTime()+864e5),description:"Evento 3"},{title:"Sala A - Proc",start:new Date((new Date).getTime()+1728e5),end:new Date((new Date).getTime()+2592e5),description:"Evento 3"}]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-reservar-sala"]],decls:7,vars:2,consts:[[1,"container","mt-4"],[1,"card"],[1,"card-body","body-dark"],[1,"text-center","text-success"],[3,"events","options"]],template:function(t,r){1&t&&(h._UZ(0,"app-nadvar"),h.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1",3),h._uU(5,"Reservar sala"),h.qZA(),h._UZ(6,"p-fullCalendar",4),h.qZA()()()),2&t&&(h.xp6(6),h.Q6J("events",r.events)("options",r.options))},dependencies:[mG,$g]}),n})()},{path:"footer",component:Sy},{path:"**",redirectTo:"inicio",pathMatch:"full"}];let _G=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[cP.forRoot(yG),cP]}),n})(),EG=(()=>{class n{constructor(){this.title="TecRooms"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[rM]}),n})();const I1_firebase={apiKey:"AIzaSyDkQjzteFJ-Stq4Bf2T4ADvQk2YpH85R6A",authDomain:"tecrooms.firebaseapp.com",projectId:"tecrooms",storageBucket:"tecrooms.appspot.com",messagingSenderId:"528099328779",appId:"1:528099328779:web:8e1973914ab8eddafe980e"};function C1(n){return new h.vHH(3e3,!1)}function tz(){return typeof window<"u"&&typeof window.document<"u"}function TR(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function np(n){switch(n.length){case 0:return new ib;case 1:return n[0];default:return new TO(n)}}function A1(n,e,t,r,i=new Map,s=new Map){const u=[],d=[];let p=-1,y=null;if(r.forEach(b=>{const I=b.get("offset"),x=I==p,P=x&&y||new Map;b.forEach((k,H)=>{let Y=H,me=k;if("offset"!==H)switch(Y=e.normalizePropertyName(Y,u),me){case"!":me=i.get(H);break;case Jd:me=s.get(H);break;default:me=e.normalizeStyleValue(H,Y,me,u)}P.set(Y,me)}),x||d.push(P),y=P,p=I}),u.length)throw function $G(n){return new h.vHH(3502,!1)}();return d}function IR(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&CR(t,"start",n)));break;case"done":n.onDone(()=>r(t&&CR(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&CR(t,"destroy",n)))}}function CR(n,e,t){const s=AR(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),u=n._data;return null!=u&&(s._data=u),s}function AR(n,e,t,r,i="",s=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!u}}function qo(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function M1(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let MR=(n,e)=>!1,R1=(n,e,t)=>[],x1=null;function RR(n){const e=n.parentNode||n.host;return e===x1?null:e}(TR()||typeof Element<"u")&&(tz()?(x1=(()=>document.documentElement)(),MR=(n,e)=>{for(;e;){if(e===n)return!0;e=RR(e)}return!1}):MR=(n,e)=>n.contains(e),R1=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Kg=null,N1=!1;const P1=MR,O1=R1;let k1=(()=>{class n{validateStyleProperty(t){return function rz(n){Kg||(Kg=function iz(){return typeof document<"u"?document.body:null}()||{},N1=!!Kg.style&&"WebkitAppearance"in Kg.style);let e=!0;return Kg.style&&!function nz(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Kg.style,!e&&N1&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Kg.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return P1(t,r)}getParentElement(t){return RR(t)}query(t,r,i){return O1(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,u,d=[],p){return new ib(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),xR=(()=>{class n{}return n.NOOP=new k1,n})();const NR="ng-enter",WT="ng-leave",ZT="ng-trigger",KT=".ng-trigger",L1="ng-animating",PR=".ng-animating";function rh(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:OR(parseFloat(e[1]),e[2])}function OR(n,e){return"s"===e?1e3*n:n}function YT(n,e,t){return n.hasOwnProperty("duration")?n:function az(n,e,t){let i,s=0,u="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(C1()),{duration:0,delay:0,easing:""};i=OR(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(s=OR(parseFloat(p),d[4]));const y=d[5];y&&(u=y)}else i=n;if(!t){let d=!1,p=e.length;i<0&&(e.push(function wG(){return new h.vHH(3100,!1)}()),d=!0),s<0&&(e.push(function bG(){return new h.vHH(3101,!1)}()),d=!0),d&&e.splice(p,0,C1())}return{duration:i,delay:s,easing:u}}(n,e,t)}function yb(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function V1(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function rp(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function B1(n,e,t){return t?e+":"+t+";":""}function H1(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=B1(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=B1(0,dz(t),n.style[t]));n.setAttribute("style",e)}function Sc(n,e,t){n.style&&(e.forEach((r,i)=>{const s=FR(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),TR()&&H1(n))}function Yg(n,e){n.style&&(e.forEach((t,r)=>{const i=FR(r);n.style[i]=""}),TR()&&H1(n))}function _b(n){return Array.isArray(n)?1==n.length?n[0]:bO(n):n}const kR=new RegExp("{{\\s*(.+?)\\s*}}","g");function j1(n){let e=[];if("string"==typeof n){let t;for(;t=kR.exec(n);)e.push(t[1]);kR.lastIndex=0}return e}function Eb(n,e,t){const r=n.toString(),i=r.replace(kR,(s,u)=>{let d=e[u];return null==d&&(t.push(function SG(n){return new h.vHH(3003,!1)}()),d=""),d.toString()});return i==r?n:i}function QT(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const cz=/-+([a-z0-9])/g;function FR(n){return n.replace(cz,(...e)=>e[1].toUpperCase())}function dz(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Wo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function TG(n){return new h.vHH(3004,!1)}()}}function $1(n,e){return window.getComputedStyle(n)[e]}function vz(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function yz(n,e,t){if(":"==n[0]){const p=function _z(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function UG(n){return new h.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function VG(n){return new h.vHH(3015,!1)}()),e;const i=r[1],s=r[2],u=r[3];e.push(G1(i,u));"<"==s[0]&&!("*"==i&&"*"==u)&&e.push(G1(u,i))}(r,t,e)):t.push(n),t}const tI=new Set(["true","1"]),nI=new Set(["false","0"]);function G1(n,e){const t=tI.has(n)||nI.has(n),r=tI.has(e)||nI.has(e);return(i,s)=>{let u="*"==n||n==i,d="*"==e||e==s;return!u&&t&&"boolean"==typeof i&&(u=i?tI.has(n):nI.has(n)),!d&&r&&"boolean"==typeof s&&(d=s?tI.has(e):nI.has(e)),u&&d}}const Ez=new RegExp("s*:selfs*,?","g");function LR(n,e,t,r){return new wz(n).build(e,t,r)}class wz{constructor(e){this._driver=e}build(e,t,r){const i=new Sz(t);return this._resetContextStyleTimingState(i),Wo(this,_b(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function CG(){return new h.vHH(3006,!1)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const p=d,y=p.name;y.toString().split(/\s*,\s*/).forEach(b=>{p.name=b,s.push(this.visitState(p,t))}),p.name=y}else if(1==d.type){const p=this.visitTransition(d,t);r+=p.queryCount,i+=p.depCount,u.push(p)}else t.errors.push(function AG(){return new h.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,u=i||{};r.styles.forEach(d=>{d instanceof Map&&d.forEach(p=>{j1(p).forEach(y=>{u.hasOwnProperty(y)||s.add(y)})})}),s.size&&(QT(s.values()),t.errors.push(function MG(n,e){return new h.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Wo(this,_b(e.animation),t);return{type:1,matchers:vz(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Qg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Wo(this,r,t)),options:Qg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(u=>{t.currentTime=r;const d=Wo(this,u,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:s,options:Qg(e.options)}}visitAnimate(e,t){const r=function Iz(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return VR(YT(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=VR(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=YT(t,e);return VR(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:rb({});if(5==s.type)i=this.visitKeyframes(s,t);else{let u=e.styles,d=!1;if(!u){d=!0;const y={};r.easing&&(y.easing=r.easing),u=rb(y)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(u,t);p.isEmptyStep=d,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let d of i)"string"==typeof d?d===Jd?r.push(d):t.errors.push(new h.vHH(3002,!1)):r.push(V1(d));let s=!1,u=null;return r.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(u=d.get("easing"),d.delete("easing")),!s))for(let p of d.values())if(p.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&u.forEach((d,p)=>{const y=t.collectedStyles.get(t.currentQuerySelector),b=y.get(p);let I=!0;b&&(s!=i&&s>=b.startTime&&i<=b.endTime&&(t.errors.push(function xG(n,e,t,r,i){return new h.vHH(3010,!1)}()),I=!1),s=b.startTime),I&&y.set(p,{startTime:s,endTime:i}),t.options&&function uz(n,e,t){const r=e.params||{},i=j1(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function DG(n){return new h.vHH(3001,!1)}())})}(d,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function NG(){return new h.vHH(3011,!1)}()),r;let s=0;const u=[];let d=!1,p=!1,y=0;const b=e.steps.map(me=>{const Ne=this._makeStyleAst(me,t);let Oe=null!=Ne.offset?Ne.offset:function Tz(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ne.styles),ke=0;return null!=Oe&&(s++,ke=Ne.offset=Oe),p=p||ke<0||ke>1,d=d||ke<y,y=ke,u.push(ke),Ne});p&&t.errors.push(function PG(){return new h.vHH(3012,!1)}()),d&&t.errors.push(function OG(){return new h.vHH(3200,!1)}());const I=e.steps.length;let x=0;s>0&&s<I?t.errors.push(function kG(){return new h.vHH(3202,!1)}()):0==s&&(x=1/(I-1));const P=I-1,k=t.currentTime,H=t.currentAnimateTimings,Y=H.duration;return b.forEach((me,Ne)=>{const Oe=x>0?Ne==P?1:x*Ne:u[Ne],ke=Oe*Y;t.currentTime=k+H.delay+ke,H.duration=ke,this._validateStyleAst(me,t),me.offset=Oe,r.styles.push(me)}),r}visitReference(e,t){return{type:8,animation:Wo(this,_b(e.animation),t),options:Qg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Qg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Qg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,u]=function bz(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Ez,"")),n=n.replace(/@\*/g,KT).replace(/@\w+/g,t=>KT+"-"+t.slice(1)).replace(/:animating/g,PR),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,qo(t.collectedStyles,t.currentQuerySelector,new Map);const d=Wo(this,_b(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:d,originalSelector:e.selector,options:Qg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function FG(){return new h.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:YT(e.timings,t.errors,!0);return{type:12,animation:Wo(this,_b(e.animation),t),timings:r,options:null}}}class Sz{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Qg(n){return n?(n=yb(n)).params&&(n.params=function Dz(n){return n?yb(n):null}(n.params)):n={},n}function VR(n,e,t){return{duration:n,delay:e,easing:t}}function UR(n,e,t,r,i,s,u=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:u,subTimeline:d}}class rI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Mz=new RegExp(":enter","g"),xz=new RegExp(":leave","g");function BR(n,e,t,r,i,s=new Map,u=new Map,d,p,y=[]){return(new Nz).buildKeyframes(n,e,t,r,i,s,u,d,p,y)}class Nz{buildKeyframes(e,t,r,i,s,u,d,p,y,b=[]){y=y||new rI;const I=new HR(e,t,y,i,s,b,[]);I.options=p;const x=p.delay?rh(p.delay):0;I.currentTimeline.delayNextStep(x),I.currentTimeline.setStyles([u],null,I.errors,p),Wo(this,r,I);const P=I.timelines.filter(k=>k.containsAnimation());if(P.length&&d.size){let k;for(let H=P.length-1;H>=0;H--){const Y=P[H];if(Y.element===t){k=Y;break}}k&&!k.allowOnlyTimelineStyles()&&k.setStyles([d],null,I.errors,p)}return P.length?P.map(k=>k.buildKeyframes()):[UR(t,[],[],[],0,x,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);s!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const u="number"==typeof s?s:rh(Eb(s,i?.params??{},t.errors));r.delayNextStep(u)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const u=null!=r.duration?rh(r.duration):null,d=null!=r.delay?rh(r.delay):null;return 0!==u&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,u,d);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Wo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=iI);const u=rh(s.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>Wo(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?rh(e.options.delay):0;e.steps.forEach(u=>{const d=t.createSubContext(e.options);s&&d.delayNextStep(s),Wo(this,u,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return YT(t.params?Eb(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(p=>{d.forwardTime((p.offset||0)*s),d.setStyles(p.styles,p.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?rh(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=iI);let u=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let p=null;d.forEach((y,b)=>{t.currentQueryIndex=b;const I=t.createSubContext(e.options,y);s&&I.delayNextStep(s),y===t.element&&(p=I.currentTimeline),Wo(this,e.animation,I),I.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,I.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,u=Math.abs(s.duration),d=u*(t.currentQueryTotal-1);let p=u*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=d-p;break;case"full":p=r.currentStaggerTime}const b=t.currentTimeline;p&&b.delayNextStep(p);const I=b.currentTime;Wo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-I+(i.startTime-r.currentTimeline.startTime)}}const iI={};class HR{constructor(e,t,r,i,s,u,d,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=u,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=iI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new sI(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=rh(r.duration)),null!=r.delay&&(i.delay=rh(r.delay));const s=r.params;if(s){let u=i.params;u||(u=this.options.params={}),Object.keys(s).forEach(d=>{(!t||!u.hasOwnProperty(d))&&(u[d]=Eb(s[d],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new HR(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=iI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new Pz(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,u){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(Mz,"."+this._enterClassName)).replace(xz,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),d.push(...y)}return!s&&0==d.length&&u.push(function LG(n){return new h.vHH(3014,!1)}()),d}}class sI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new sI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Jd),this._currentKeyframe.set(t,Jd);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},u=function Oz(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,Jd)}else rp(i,t)}),t}(e,this._globalTimelineStyles);for(let[d,p]of u){const y=Eb(p,s,r);this._pendingStyles.set(d,y),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??Jd),this._updateStyle(d,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,p)=>{const y=rp(d,new Map,this._backFill);y.forEach((b,I)=>{"!"===b?e.add(I):b===Jd&&t.add(I)}),r||y.set("offset",p/this.duration),i.push(y)});const s=e.size?QT(e.values()):[],u=t.size?QT(t.values()):[];if(r){const d=i[0],p=new Map(d);d.set("offset",0),p.set("offset",1),i=[d,p]}return UR(this.element,i,s,u,this.duration,this.startTime,this.easing,!1)}}class Pz extends sI{constructor(e,t,r,i,s,u,d=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],u=r+t,d=t/u,p=rp(e[0]);p.set("offset",0),s.push(p);const y=rp(e[0]);y.set("offset",W1(d)),s.push(y);const b=e.length-1;for(let I=1;I<=b;I++){let x=rp(e[I]);const P=x.get("offset");x.set("offset",W1((t+P*r)/u)),s.push(x)}r=u,t=0,i="",e=s}return UR(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function W1(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class jR{}const kz=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Fz extends jR{normalizePropertyName(e,t){return FR(e)}normalizeStyleValue(e,t,r,i){let s="";const u=r.toString().trim();if(kz.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function IG(n,e){return new h.vHH(3005,!1)}())}return u+s}}function Z1(n,e,t,r,i,s,u,d,p,y,b,I,x){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:u,timelines:d,queriedElements:p,preStyleProps:y,postStyleProps:b,totalTime:I,errors:x}}const $R={};class K1{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Lz(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,u,d,p,y,b){const I=[],x=this.ast.options&&this.ast.options.params||$R,k=this.buildStyles(r,d&&d.params||$R,I),H=p&&p.params||$R,Y=this.buildStyles(i,H,I),me=new Set,Ne=new Map,Oe=new Map,ke="void"===i,et={params:Vz(H,x),delay:this.ast.options?.delay},Je=b?[]:BR(e,t,this.ast.animation,s,u,k,Y,et,y,I);let Et=0;if(Je.forEach(Qn=>{Et=Math.max(Qn.duration+Qn.delay,Et)}),I.length)return Z1(t,this._triggerName,r,i,ke,k,Y,[],[],Ne,Oe,Et,I);Je.forEach(Qn=>{const ir=Qn.element,$l=qo(Ne,ir,new Set);Qn.preStyleProps.forEach(as=>$l.add(as));const ho=qo(Oe,ir,new Set);Qn.postStyleProps.forEach(as=>ho.add(as)),ir!==t&&me.add(ir)});const on=QT(me.values());return Z1(t,this._triggerName,r,i,ke,k,Y,Je,on,Ne,Oe,Et)}}function Vz(n,e){const t=yb(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Uz{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=yb(this.defaultParams);return Object.keys(e).forEach(s=>{const u=e[s];null!==u&&(i[s]=u)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((u,d)=>{u&&(u=Eb(u,i,t));const p=this.normalizer.normalizePropertyName(d,t);u=this.normalizer.normalizeStyleValue(d,p,u,t),r.set(p,u)})}),r}}class Hz{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Uz(i.style,i.options&&i.options.params||{},r))}),Y1(this.states,"true","1"),Y1(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new K1(e,i,this.states))}),this.fallbackTransition=function jz(n,e,t){return new K1(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Y1(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const $z=new rI;class Gz{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=LR(this._driver,t,r,[]);if(r.length)throw function GG(n){return new h.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=A1(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let u;const d=new Map;if(s?(u=BR(this._driver,t,s,NR,WT,new Map,new Map,r,$z,i),u.forEach(b=>{const I=qo(d,b.element,new Map);b.postStyleProps.forEach(x=>I.set(x,null))})):(i.push(function zG(){return new h.vHH(3300,!1)}()),u=[]),i.length)throw function qG(n){return new h.vHH(3504,!1)}();d.forEach((b,I)=>{b.forEach((x,P)=>{b.set(P,this._driver.computeStyle(I,P,Jd))})});const y=np(u.map(b=>{const I=d.get(b.element);return this._buildPlayer(b,new Map,I)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function WG(n){return new h.vHH(3301,!1)}();return t}listen(e,t,r,i){const s=AR(t,"","","");return IR(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Q1="ng-animate-queued",GR="ng-animate-disabled",Kz=[],X1={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Yz={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},La="__ng_removed";class zR{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function e3(n){return n??null}(r?e.value:e),r){const s=yb(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const wb="void",qR=new zR(wb);class Qz{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Va(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function ZG(n,e){return new h.vHH(3302,!1)}();if(null==r||0==r.length)throw function KG(n){return new h.vHH(3303,!1)}();if(!function t3(n){return"start"==n||"done"==n}(r))throw function YG(n,e){return new h.vHH(3400,!1)}();const s=qo(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};s.push(u);const d=qo(this._engine.statesByElement,e,new Map);return d.has(t)||(Va(e,ZT),Va(e,ZT+"-"+t),d.set(t,qR)),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(u);p>=0&&s.splice(p,1),this._triggers.has(t)||d.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function QG(n){return new h.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),u=new WR(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(Va(e,ZT),Va(e,ZT+"-"+t),this._engine.statesByElement.set(e,d=new Map));let p=d.get(t);const y=new zR(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),d.set(t,y),p||(p=qR),y.value!==wb&&p.value===y.value){if(!function i3(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,y.params)){const H=[],Y=s.matchStyles(p.value,p.params,H),me=s.matchStyles(y.value,y.params,H);H.length?this._engine.reportError(H):this._engine.afterFlush(()=>{Yg(e,Y),Sc(e,me)})}return}const x=qo(this._engine.playersByElement,e,[]);x.forEach(H=>{H.namespaceId==this.id&&H.triggerName==t&&H.queued&&H.destroy()});let P=s.matchTransition(p.value,y.value,e,y.params),k=!1;if(!P){if(!i)return;P=s.fallbackTransition,k=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:P,fromState:p,toState:y,player:u,isFallbackTransition:k}),k||(Va(e,Q1),u.onStart(()=>{Fy(e,Q1)})),u.onDone(()=>{let H=this.players.indexOf(u);H>=0&&this.players.splice(H,1);const Y=this._engine.playersByElement.get(e);if(Y){let me=Y.indexOf(u);me>=0&&Y.splice(me,1)}}),this.players.push(u),x.push(u),u}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,KT,!0);r.forEach(i=>{if(i[La])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),u=new Map;if(s){const d=[];if(s.forEach((p,y)=>{if(u.set(y,p.value),this._triggers.has(y)){const b=this.trigger(e,y,wb,i);b&&d.push(b)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&np(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const u=s.name;if(i.has(u))return;i.add(u);const p=this._triggers.get(u).fallbackTransition,y=r.get(u)||qR,b=new zR(wb),I=new WR(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:p,fromState:y,toState:b,player:I,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[La];(!s||s===X1)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Va(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,u=this._elementListeners.get(s);u&&u.forEach(d=>{if(d.name==r.triggerName){const p=AR(s,r.triggerName,r.fromState.value,r.toState.value);p._data=e,IR(r.player,d.phase,p,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==s||0==u?s-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class Xz{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Qz(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let u=!1,d=this.driver.getParentElement(t);for(;d;){const p=i.get(d);if(p){const y=r.indexOf(p);r.splice(y+1,0,e),u=!0;break}d=this.driver.getParentElement(d)}u||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(oI(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!oI(t))return;const s=t[La];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Va(e,GR)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Fy(e,GR))}removeNode(e,t,r,i){if(oI(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[La]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return oI(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,KT,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,PR,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return np(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[La];if(t&&t.setForRemoval){if(e[La]=X1,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(GR)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Va(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?np(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function XG(n){return new h.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new rI,i=[],s=new Map,u=[],d=new Map,p=new Map,y=new Map,b=new Set;this.disabledNodes.forEach(vt=>{b.add(vt);const xt=this.driver.query(vt,".ng-animate-queued",!0);for(let Lt=0;Lt<xt.length;Lt++)b.add(xt[Lt])});const I=this.bodyNode,x=Array.from(this.statesByElement.keys()),P=tF(x,this.collectedEnterElements),k=new Map;let H=0;P.forEach((vt,xt)=>{const Lt=NR+H++;k.set(xt,Lt),vt.forEach(vn=>Va(vn,Lt))});const Y=[],me=new Set,Ne=new Set;for(let vt=0;vt<this.collectedLeaveElements.length;vt++){const xt=this.collectedLeaveElements[vt],Lt=xt[La];Lt&&Lt.setForRemoval&&(Y.push(xt),me.add(xt),Lt.hasAnimation?this.driver.query(xt,".ng-star-inserted",!0).forEach(vn=>me.add(vn)):Ne.add(xt))}const Oe=new Map,ke=tF(x,Array.from(me));ke.forEach((vt,xt)=>{const Lt=WT+H++;Oe.set(xt,Lt),vt.forEach(vn=>Va(vn,Lt))}),e.push(()=>{P.forEach((vt,xt)=>{const Lt=k.get(xt);vt.forEach(vn=>Fy(vn,Lt))}),ke.forEach((vt,xt)=>{const Lt=Oe.get(xt);vt.forEach(vn=>Fy(vn,Lt))}),Y.forEach(vt=>{this.processLeaveNode(vt)})});const et=[],Je=[];for(let vt=this._namespaceList.length-1;vt>=0;vt--)this._namespaceList[vt].drainQueuedTransitions(t).forEach(Lt=>{const vn=Lt.player,Ni=Lt.element;if(et.push(vn),this.collectedEnterElements.length){const ls=Ni[La];if(ls&&ls.setForMove){if(ls.previousTriggersValues&&ls.previousTriggersValues.has(Lt.triggerName)){const Xg=ls.previousTriggersValues.get(Lt.triggerName),Ua=this.statesByElement.get(Lt.element);if(Ua&&Ua.has(Lt.triggerName)){const cI=Ua.get(Lt.triggerName);cI.value=Xg,Ua.set(Lt.triggerName,cI)}}return void vn.destroy()}}const Tc=!I||!this.driver.containsElement(I,Ni),Zo=Oe.get(Ni),ip=k.get(Ni),Cr=this._buildInstruction(Lt,r,ip,Zo,Tc);if(Cr.errors&&Cr.errors.length)return void Je.push(Cr);if(Tc)return vn.onStart(()=>Yg(Ni,Cr.fromStyles)),vn.onDestroy(()=>Sc(Ni,Cr.toStyles)),void i.push(vn);if(Lt.isFallbackTransition)return vn.onStart(()=>Yg(Ni,Cr.fromStyles)),vn.onDestroy(()=>Sc(Ni,Cr.toStyles)),void i.push(vn);const cF=[];Cr.timelines.forEach(ls=>{ls.stretchStartingKeyframe=!0,this.disabledNodes.has(ls.element)||cF.push(ls)}),Cr.timelines=cF,r.append(Ni,Cr.timelines),u.push({instruction:Cr,player:vn,element:Ni}),Cr.queriedElements.forEach(ls=>qo(d,ls,[]).push(vn)),Cr.preStyleProps.forEach((ls,Xg)=>{if(ls.size){let Ua=p.get(Xg);Ua||p.set(Xg,Ua=new Set),ls.forEach((cI,YR)=>Ua.add(YR))}}),Cr.postStyleProps.forEach((ls,Xg)=>{let Ua=y.get(Xg);Ua||y.set(Xg,Ua=new Set),ls.forEach((cI,YR)=>Ua.add(YR))})});if(Je.length){const vt=[];Je.forEach(xt=>{vt.push(function JG(n,e){return new h.vHH(3505,!1)}())}),et.forEach(xt=>xt.destroy()),this.reportError(vt)}const Et=new Map,on=new Map;u.forEach(vt=>{const xt=vt.element;r.has(xt)&&(on.set(xt,xt),this._beforeAnimationBuild(vt.player.namespaceId,vt.instruction,Et))}),i.forEach(vt=>{const xt=vt.element;this._getPreviousPlayers(xt,!1,vt.namespaceId,vt.triggerName,null).forEach(vn=>{qo(Et,xt,[]).push(vn),vn.destroy()})});const Qn=Y.filter(vt=>rF(vt,p,y)),ir=new Map;eF(ir,this.driver,Ne,y,Jd).forEach(vt=>{rF(vt,p,y)&&Qn.push(vt)});const ho=new Map;P.forEach((vt,xt)=>{eF(ho,this.driver,new Set(vt),p,"!")}),Qn.forEach(vt=>{const xt=ir.get(vt),Lt=ho.get(vt);ir.set(vt,new Map([...Array.from(xt?.entries()??[]),...Array.from(Lt?.entries()??[])]))});const as=[],Ly=[],uI={};u.forEach(vt=>{const{element:xt,player:Lt,instruction:vn}=vt;if(r.has(xt)){if(b.has(xt))return Lt.onDestroy(()=>Sc(xt,vn.toStyles)),Lt.disabled=!0,Lt.overrideTotalTime(vn.totalTime),void i.push(Lt);let Ni=uI;if(on.size>1){let Zo=xt;const ip=[];for(;Zo=Zo.parentNode;){const Cr=on.get(Zo);if(Cr){Ni=Cr;break}ip.push(Zo)}ip.forEach(Cr=>on.set(Cr,Ni))}const Tc=this._buildAnimation(Lt.namespaceId,vn,Et,s,ho,ir);if(Lt.setRealPlayer(Tc),Ni===uI)as.push(Lt);else{const Zo=this.playersByElement.get(Ni);Zo&&Zo.length&&(Lt.parentPlayer=np(Zo)),i.push(Lt)}}else Yg(xt,vn.fromStyles),Lt.onDestroy(()=>Sc(xt,vn.toStyles)),Ly.push(Lt),b.has(xt)&&i.push(Lt)}),Ly.forEach(vt=>{const xt=s.get(vt.element);if(xt&&xt.length){const Lt=np(xt);vt.setRealPlayer(Lt)}}),i.forEach(vt=>{vt.parentPlayer?vt.syncPlayerEvents(vt.parentPlayer):vt.destroy()});for(let vt=0;vt<Y.length;vt++){const xt=Y[vt],Lt=xt[La];if(Fy(xt,WT),Lt&&Lt.hasAnimation)continue;let vn=[];if(d.size){let Tc=d.get(xt);Tc&&Tc.length&&vn.push(...Tc);let Zo=this.driver.query(xt,PR,!0);for(let ip=0;ip<Zo.length;ip++){let Cr=d.get(Zo[ip]);Cr&&Cr.length&&vn.push(...Cr)}}const Ni=vn.filter(Tc=>!Tc.destroyed);Ni.length?n3(this,xt,Ni):this.processLeaveNode(xt)}return Y.length=0,as.forEach(vt=>{this.players.push(vt),vt.onDone(()=>{vt.destroy();const xt=this.players.indexOf(vt);this.players.splice(xt,1)}),vt.play()}),as}elementContainsData(e,t){let r=!1;const i=t[La];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let u=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(u=d)}else{const d=this.playersByElement.get(e);if(d){const p=!s||s==wb;d.forEach(y=>{y.queued||!p&&y.triggerName!=i||u.push(y)})}}return(r||i)&&(u=u.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),u}_beforeAnimationBuild(e,t,r){const s=t.element,u=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,b=y!==s,I=qo(r,y,[]);this._getPreviousPlayers(y,b,u,d,t.toState).forEach(P=>{const k=P.getRealPlayer();k.beforeDestroy&&k.beforeDestroy(),P.destroy(),I.push(P)})}Yg(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,u){const d=t.triggerName,p=t.element,y=[],b=new Set,I=new Set,x=t.timelines.map(k=>{const H=k.element;b.add(H);const Y=H[La];if(Y&&Y.removedBeforeQueried)return new ib(k.duration,k.delay);const me=H!==p,Ne=function r3(n){const e=[];return nF(n,e),e}((r.get(H)||Kz).map(Et=>Et.getRealPlayer())).filter(Et=>!!Et.element&&Et.element===H),Oe=s.get(H),ke=u.get(H),et=A1(0,this._normalizer,0,k.keyframes,Oe,ke),Je=this._buildPlayer(k,et,Ne);if(k.subTimeline&&i&&I.add(H),me){const Et=new WR(e,d,H);Et.setRealPlayer(Je),y.push(Et)}return Je});y.forEach(k=>{qo(this.playersByQueriedElement,k.element,[]).push(k),k.onDone(()=>function Jz(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,k.element,k))}),b.forEach(k=>Va(k,L1));const P=np(x);return P.onDestroy(()=>{b.forEach(k=>Fy(k,L1)),Sc(p,t.toStyles)}),I.forEach(k=>{qo(i,k,[]).push(P)}),P}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new ib(e.duration,e.delay)}}class WR{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new ib,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>IR(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){qo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function oI(n){return n&&1===n.nodeType}function J1(n,e){const t=n.style.display;return n.style.display=e??"none",t}function eF(n,e,t,r,i){const s=[];t.forEach(p=>s.push(J1(p)));const u=[];r.forEach((p,y)=>{const b=new Map;p.forEach(I=>{const x=e.computeStyle(y,I,i);b.set(I,x),(!x||0==x.length)&&(y[La]=Yz,u.push(y))}),n.set(y,b)});let d=0;return t.forEach(p=>J1(p,s[d++])),u}function tF(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const i=new Set(e),s=new Map;function u(d){if(!d)return 1;let p=s.get(d);if(p)return p;const y=d.parentNode;return p=t.has(y)?y:i.has(y)?1:u(y),s.set(d,p),p}return e.forEach(d=>{const p=u(d);1!==p&&t.get(p).push(d)}),t}function Va(n,e){n.classList?.add(e)}function Fy(n,e){n.classList?.remove(e)}function n3(n,e,t){np(t).onDone(()=>n.processLeaveNode(e))}function nF(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof TO?nF(r.players,e):e.push(r)}}function rF(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class aI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new Xz(e,t,r),this._timelineEngine=new Gz(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const u=e+"-"+i;let d=this._triggerCache[u];if(!d){const p=[],b=LR(this._driver,s,p,[]);if(p.length)throw function jG(n,e){return new h.vHH(3404,!1)}();d=function Bz(n,e,t){return new Hz(n,e,t)}(i,b,this._normalizer),this._triggerCache[u]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,u]=M1(r);this._timelineEngine.command(s,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[u,d]=M1(r);return this._timelineEngine.listen(u,t,d,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let o3=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Sc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Sc(this._element,this._initialStyles),this._endStyles&&(Sc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Yg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Yg(this._element,this._endStyles),this._endStyles=null),Sc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function ZR(n){let e=null;return n.forEach((t,r)=>{(function a3(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class iF{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:$1(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class l3{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return P1(e,t)}getParentElement(e){return RR(e)}query(e,t,r){return O1(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,u=[]){const p={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(p.easing=s);const y=new Map,b=u.filter(P=>P instanceof iF);(function hz(n,e){return 0===n||0===e})(r,i)&&b.forEach(P=>{P.currentSnapshot.forEach((k,H)=>y.set(H,k))});let I=function lz(n){return n.length?n[0]instanceof Map?n:n.map(e=>V1(e)):[]}(t).map(P=>rp(P));I=function fz(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,u)=>{r.has(u)||i.push(u),r.set(u,s)}),i.length)for(let s=1;s<e.length;s++){let u=e[s];i.forEach(d=>u.set(d,$1(n,d)))}}return e}(e,I,y);const x=function s3(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=ZR(e[0]),e.length>1&&(r=ZR(e[e.length-1]))):e instanceof Map&&(t=ZR(e)),t||r?new o3(n,t,r):null}(e,I);return new iF(e,I,p,x)}}let u3=(()=>{class n extends EO{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:h.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?bO(t):t;return sF(this._renderer,null,r,"register",[i]),new c3(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class c3 extends class oB{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new d3(this._id,e,t||{},this._renderer)}}class d3{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return sF(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function sF(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const oF="@.disabled";let h3=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,u)=>{const d=u?.parentNode(s);d&&u.removeChild(d,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let b=this._rendererCache.get(s);return b||(b=new aF("",s,this.engine),this._rendererCache.set(s,b)),b}const u=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const p=b=>{Array.isArray(b)?b.forEach(p):this.engine.registerTrigger(u,d,t,b.name,b)};return r.data.animation.forEach(p),new f3(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[u,d]=s;u(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(aI),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class aF{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==oF?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class f3 extends aF{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==oF?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function p3(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),u="";return"@"!=s.charAt(0)&&([s,u]=function g3(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,u,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let m3=(()=>{class n extends aI{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue),h.LFG(xR),h.LFG(jR),h.LFG(h.z2F))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const lF=[{provide:EO,useClass:u3},{provide:jR,useFactory:function v3(){return new Fz}},{provide:aI,useClass:m3},{provide:h.FYo,useFactory:function y3(n,e,t){return new h3(n,e,t)},deps:[To,aI,h.R0b]}],KR=[{provide:xR,useFactory:()=>new l3},{provide:h.QbO,useValue:"BrowserAnimations"},...lF],uF=[{provide:xR,useClass:k1},{provide:h.QbO,useValue:"NoopAnimations"},...lF];let _3=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?uF:KR}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:KR,imports:[_u]}),n})(),E3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[EG]}),n.\u0275inj=h.cJS({imports:[_u,_G,oi.hO.initializeApp(I1_firebase),FF,gO,_3,AB.forRoot(),vG]}),n})();(0,h.G48)(),yu().bootstrapModule(E3).catch(n=>console.error(n))},5867:(pt,Ae,V)=>{V.d(Ae,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=V(9681);(0,h.registerVersion)("firebase","9.12.1","app")},127:(pt,Ae,V)=>{V.d(Ae,{Z:()=>h.Z});var h=V(3942);h.Z.registerVersion("firebase","9.12.1","app-compat")},9545:(pt,Ae,V)=>{V.r(Ae);var h=V(5861),te=V(3942),F=V(2090),ae=V(9681),se=V(1877),he=V(655),ue=V(4859);const De=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},at=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ye=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),rt=new se.Yd("@firebase/auth");function ht(_,...g){rt.logLevel<=se.in.ERROR&&rt.error(`Auth (${ae.SDK_VERSION}): ${_}`,...g)}function Me(_,...g){throw ze(_,...g)}function Ee(_,...g){return ze(_,...g)}function Se(_,g,v){const w=Object.assign(Object.assign({},at()),{[g]:v});return new F.LL("auth","Firebase",w).create(g,{appName:_.name})}function $e(_,g,v){if(!(g instanceof v))throw v.name!==g.constructor.name&&Me(_,"argument-error"),Se(_,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ze(_,...g){if("string"!=typeof _){const v=g[0],w=[...g.slice(1)];return w[0]&&(w[0].appName=_.name),_._errorFactory.create(v,...w)}return ye.create(_,...g)}function j(_,g,...v){if(!_)throw ze(g,...v)}function ve(_){const g="INTERNAL ASSERTION FAILED: "+_;throw ht(g),new Error(g)}function Z(_,g){_||ve(g)}const ee=new Map;function ie(_){Z(_ instanceof Function,"Expected a class definition");let g=ee.get(_);return g?(Z(g instanceof _,"Instance stored in cache mismatched with class"),g):(g=new _,ee.set(_,g),g)}function Fe(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function _t(){return"http:"===nn()||"https:"===nn()}function nn(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class fn{constructor(g,v){this.shortDelay=g,this.longDelay=v,Z(v>g,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function zt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_t()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Sn(_,g){Z(_.emulator,"Emulator should always be set here");const{url:v}=_.emulator;return g?`${v}${g.startsWith("/")?g.slice(1):g}`:v}class Xt{static initialize(g,v,w){this.fetchImpl=g,v&&(this.headersImpl=v),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Br=new fn(3e4,6e4);function Ut(_,g){return _.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:_.tenantId}):g}function gn(_,g,v,w){return us.apply(this,arguments)}function us(){return(us=(0,h.Z)(function*(_,g,v,w,M={}){return Pi(_,M,(0,h.Z)(function*(){let O={},W={};w&&("GET"===g?W=w:O={body:JSON.stringify(w)});const ce=(0,F.xO)(Object.assign({key:_.config.apiKey},W)).slice(1),He=yield _._getAdditionalHeaders();return He["Content-Type"]="application/json",_.languageCode&&(He["X-Firebase-Locale"]=_.languageCode),Xt.fetch()(Oi(_,_.config.apiHost,v,ce),Object.assign({method:g,headers:He,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Pi(_,g,v){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,h.Z)(function*(_,g,v){_._canInitEmulator=!1;const w=Object.assign(Object.assign({},rn),g);try{const M=new fi(_),O=yield Promise.race([v(),M.promise]);M.clearNetworkTimeout();const W=yield O.json();if("needConfirmation"in W)throw pi(_,"account-exists-with-different-credential",W);if(O.ok&&!("errorMessage"in W))return W;{const ce=O.ok?W.errorMessage:W.error.message,[He,nt]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===He)throw pi(_,"credential-already-in-use",W);if("EMAIL_EXISTS"===He)throw pi(_,"email-already-in-use",W);if("USER_DISABLED"===He)throw pi(_,"user-disabled",W);const St=w[He]||He.toLowerCase().replace(/[_\s]+/g,"-");if(nt)throw Se(_,St,nt);Me(_,St)}}catch(M){if(M instanceof F.ZR)throw M;Me(_,"network-request-failed")}})).apply(this,arguments)}function ei(_,g,v,w){return fo.apply(this,arguments)}function fo(){return(fo=(0,h.Z)(function*(_,g,v,w,M={}){const O=yield gn(_,g,v,w,M);return"mfaPendingCredential"in O&&Me(_,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Oi(_,g,v,w){const M=`${g}${v}?${w}`;return _.config.emulator?Sn(_.config,M):`${_.config.apiScheme}://${M}`}class fi{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((v,w)=>{this.timer=setTimeout(()=>w(Ee(this.auth,"network-request-failed")),Br.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function pi(_,g,v){const w={appName:_.name};v.email&&(w.email=v.email),v.phoneNumber&&(w.phoneNumber=v.phoneNumber);const M=Ee(_,g,w);return M.customData._tokenResponse=v,M}function Xe(){return(Xe=(0,h.Z)(function*(_,g){return gn(_,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Or(_,g){return Us.apply(this,arguments)}function Us(){return(Us=(0,h.Z)(function*(_,g){return gn(_,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function sr(_,g){return gi.apply(this,arguments)}function gi(){return(gi=(0,h.Z)(function*(_,g){return gn(_,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function zi(_){if(_)try{const g=new Date(Number(_));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function _n(){return(_n=(0,h.Z)(function*(_,g=!1){const v=(0,F.m9)(_),w=yield v.getIdToken(g),M=ft(w);j(M&&M.exp&&M.auth_time&&M.iat,v.auth,"internal-error");const O="object"==typeof M.firebase?M.firebase:void 0,W=O?.sign_in_provider;return{claims:M,token:w,authTime:zi(wt(M.auth_time)),issuedAtTime:zi(wt(M.iat)),expirationTime:zi(wt(M.exp)),signInProvider:W||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function wt(_){return 1e3*Number(_)}function ft(_){var g;const[v,w,M]=_.split(".");if(void 0===v||void 0===w||void 0===M)return ht("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,F.tV)(w);return O?JSON.parse(O):(ht("Failed to decode base64 JWT payload"),null)}catch(O){return ht("Caught error parsing JWT payload as JSON",null===(g=O)||void 0===g?void 0:g.toString()),null}}function Ar(_,g){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,h.Z)(function*(_,g,v=!1){if(v)return g;try{return yield g}catch(w){throw w instanceof F.ZR&&ti(w)&&_.auth.currentUser===_&&(yield _.auth.signOut()),w}})).apply(this,arguments)}function ti({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Ft{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var v;if(g){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const M=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(g=!1){var v=this;if(!this.isRunning)return;const w=this.getInterval(g);this.timerId=setTimeout((0,h.Z)(function*(){yield v.iteration()}),w)}iteration(){var g=this;return(0,h.Z)(function*(){var v;try{yield g.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(v=w)||void 0===v?void 0:v.code)&&g.schedule(!0))}g.schedule()})()}}class Bs{constructor(g,v){this.createdAt=g,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=zi(this.lastLoginAt),this.creationTime=zi(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function an(_){return qi.apply(this,arguments)}function qi(){return(qi=(0,h.Z)(function*(_){var g;const v=_.auth,w=yield _.getIdToken(),M=yield Ar(_,sr(v,{idToken:w}));j(M?.users.length,v,"internal-error");const O=M.users[0];_._notifyReloadListener(O);const W=null!==(g=O.providerUserInfo)&&void 0!==g&&g.length?st(O.providerUserInfo):[],ce=jr(_.providerData,W),St=!!_.isAnonymous&&!(_.email&&O.passwordHash||ce?.length),Dt={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ce,metadata:new Bs(O.createdAt,O.lastLoginAt),isAnonymous:St};Object.assign(_,Dt)})).apply(this,arguments)}function or(){return(or=(0,h.Z)(function*(_){const g=(0,F.m9)(_);yield an(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function jr(_,g){return[..._.filter(w=>!g.some(M=>M.providerId===w.providerId)),...g]}function st(_){return _.map(g=>{var{providerId:v}=g,w=(0,he._T)(g,["providerId"]);return{providerId:v,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function it(){return(it=(0,h.Z)(function*(_,g){const v=yield Pi(_,{},(0,h.Z)(function*(){const w=(0,F.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:M,apiKey:O}=_.config,W=Oi(_,M,"/v1/token",`key=${O}`),ce=yield _._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",Xt.fetch()(W,{method:"POST",headers:ce,body:w})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class Mt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){j(g.idToken,"internal-error"),j(typeof g.idToken<"u","internal-error"),j(typeof g.refreshToken<"u","internal-error");const v="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function dn(_){const g=ft(_);return j(g,"internal-error"),j(typeof g.exp<"u","internal-error"),j(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,v)}getToken(g,v=!1){var w=this;return(0,h.Z)(function*(){return j(!w.accessToken||w.refreshToken,g,"user-token-expired"),v||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(g,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,v){var w=this;return(0,h.Z)(function*(){const{accessToken:M,refreshToken:O,expiresIn:W}=yield function Ie(_,g){return it.apply(this,arguments)}(g,v);w.updateTokensAndExpiration(M,O,Number(W))})()}updateTokensAndExpiration(g,v,w){this.refreshToken=v||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(g,v){const{refreshToken:w,accessToken:M,expirationTime:O}=v,W=new Mt;return w&&(j("string"==typeof w,"internal-error",{appName:g}),W.refreshToken=w),M&&(j("string"==typeof M,"internal-error",{appName:g}),W.accessToken=M),O&&(j("number"==typeof O,"internal-error",{appName:g}),W.expirationTime=O),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Mt,this.toJSON())}_performRefresh(){return ve("not implemented")}}function Ct(_,g){j("string"==typeof _||typeof _>"u","internal-error",{appName:g})}class Ht{constructor(g){var{uid:v,auth:w,stsTokenManager:M}=g,O=(0,he._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ft(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=w,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Bs(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(g){var v=this;return(0,h.Z)(function*(){const w=yield Ar(v,v.stsTokenManager.getToken(v.auth,g));return j(w,v.auth,"internal-error"),v.accessToken!==w&&(v.accessToken=w,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),w})()}getIdTokenResult(g){return function Xn(_){return _n.apply(this,arguments)}(this,g)}reload(){return function ln(_){return or.apply(this,arguments)}(this)}_assign(g){this!==g&&(j(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(v=>Object.assign({},v)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Ht(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,v=!1){var w=this;return(0,h.Z)(function*(){let M=!1;g.idToken&&g.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(g),M=!0),v&&(yield an(w)),yield w.auth._persistUserIfCurrent(w),M&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var g=this;return(0,h.Z)(function*(){const v=yield g.getIdToken();return yield Ar(g,function Ba(_,g){return Xe.apply(this,arguments)}(g.auth,{idToken:v})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,v){var w,M,O,W,ce,He,nt,St;const Dt=null!==(w=v.displayName)&&void 0!==w?w:void 0,gr=null!==(M=v.email)&&void 0!==M?M:void 0,Di=null!==(O=v.phoneNumber)&&void 0!==O?O:void 0,ud=null!==(W=v.photoURL)&&void 0!==W?W:void 0,Ip=null!==(ce=v.tenantId)&&void 0!==ce?ce:void 0,Lu=null!==(He=v._redirectEventId)&&void 0!==He?He:void 0,Am=null!==(nt=v.createdAt)&&void 0!==nt?nt:void 0,Cp=null!==(St=v.lastLoginAt)&&void 0!==St?St:void 0,{uid:Mm,emailVerified:Qy,isAnonymous:Xy,providerData:Vu,stsTokenManager:_l}=v;j(Mm&&_l,g,"internal-error");const Uu=Mt.fromJSON(this.name,_l);j("string"==typeof Mm,g,"internal-error"),Ct(Dt,g.name),Ct(gr,g.name),j("boolean"==typeof Qy,g,"internal-error"),j("boolean"==typeof Xy,g,"internal-error"),Ct(Di,g.name),Ct(ud,g.name),Ct(Ip,g.name),Ct(Lu,g.name),Ct(Am,g.name),Ct(Cp,g.name);const Bu=new Ht({uid:Mm,auth:g,email:gr,emailVerified:Qy,displayName:Dt,isAnonymous:Xy,photoURL:ud,phoneNumber:Di,tenantId:Ip,stsTokenManager:Uu,createdAt:Am,lastLoginAt:Cp});return Vu&&Array.isArray(Vu)&&(Bu.providerData=Vu.map(Ap=>Object.assign({},Ap))),Lu&&(Bu._redirectEventId=Lu),Bu}static _fromIdTokenResponse(g,v,w=!1){return(0,h.Z)(function*(){const M=new Mt;M.updateFromServerResponse(v);const O=new Ht({uid:v.localId,auth:g,stsTokenManager:M,isAnonymous:w});return yield an(O),O})()}}const B=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(v,w){var M=this;return(0,h.Z)(function*(){M.storage[v]=w})()}_get(v){var w=this;return(0,h.Z)(function*(){const M=w.storage[v];return void 0===M?null:M})()}_remove(v){var w=this;return(0,h.Z)(function*(){delete w.storage[v]})()}_addListener(v,w){}_removeListener(v,w){}}return _.type="NONE",_})();function K(_,g,v){return`firebase:${_}:${g}:${v}`}class be{constructor(g,v,w){this.persistence=g,this.auth=v,this.userKey=w;const{config:M,name:O}=this.auth;this.fullUserKey=K(this.userKey,M.apiKey,O),this.fullPersistenceKey=K("persistence",M.apiKey,O),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,h.Z)(function*(){const v=yield g.persistence._get(g.fullUserKey);return v?Ht._fromJSON(g.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var v=this;return(0,h.Z)(function*(){if(v.persistence===g)return;const w=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=g,w?v.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,v,w="authUser"){return(0,h.Z)(function*(){if(!v.length)return new be(ie(B),g,w);const M=(yield Promise.all(v.map(function(){var nt=(0,h.Z)(function*(St){if(yield St._isAvailable())return St});return function(St){return nt.apply(this,arguments)}}()))).filter(nt=>nt);let O=M[0]||ie(B);const W=K(w,g.config.apiKey,g.name);let ce=null;for(const nt of v)try{const St=yield nt._get(W);if(St){const Dt=Ht._fromJSON(g,St);nt!==O&&(ce=Dt),O=nt;break}}catch{}const He=M.filter(nt=>nt._shouldAllowMigration);return O._shouldAllowMigration&&He.length?(O=He[0],ce&&(yield O._set(W,ce.toJSON())),yield Promise.all(v.map(function(){var nt=(0,h.Z)(function*(St){if(St!==O)try{yield St._remove(W)}catch{}});return function(St){return nt.apply(this,arguments)}}())),new be(O,g,w)):new be(O,g,w)})()}}function J(_){const g=_.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(yn(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(We(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(je(g))return"Blackberry";if(qe(g))return"Webos";if(gt(g))return"Safari";if((g.includes("chrome/")||Jt(g))&&!g.includes("edge/"))return"Chrome";if(Kt(g))return"Android";{const w=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function We(_=(0,F.z$)()){return/firefox\//i.test(_)}function gt(_=(0,F.z$)()){const g=_.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Jt(_=(0,F.z$)()){return/crios\//i.test(_)}function yn(_=(0,F.z$)()){return/iemobile/i.test(_)}function Kt(_=(0,F.z$)()){return/android/i.test(_)}function je(_=(0,F.z$)()){return/blackberry/i.test(_)}function qe(_=(0,F.z$)()){return/webos/i.test(_)}function $t(_=(0,F.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function po(_=(0,F.z$)()){return $t(_)||Kt(_)||qe(_)||je(_)||/windows phone/i.test(_)||yn(_)}function Hs(_,g=[]){let v;switch(_){case"Browser":v=J((0,F.z$)());break;case"Worker":v=`${J((0,F.z$)())}-${_}`;break;default:v=_}const w=g.length?g.join(","):"FirebaseCore-web";return`${v}/JsCore/${ae.SDK_VERSION}/${w}`}class Ko{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,v){const w=O=>new Promise((W,ce)=>{try{W(g(O))}catch(He){ce(He)}});w.onAbort=v,this.queue.push(w);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(g){var v=this;return(0,h.Z)(function*(){var w;if(v.auth.currentUser===g)return;const M=[];try{for(const O of v.queue)yield O(g),O.onAbort&&M.push(O.onAbort)}catch(O){M.reverse();for(const W of M)try{W()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=O)||void 0===w?void 0:w.message})}})()}}class jt{constructor(g,v,w){this.app=g,this.heartbeatServiceProvider=v,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new go(this),this.idTokenSubscription=new go(this),this.beforeStateQueue=new Ko(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ye,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(g,v){var w=this;return v&&(this._popupRedirectResolver=ie(v)),this._initializationPromise=this.queue((0,h.Z)(function*(){var M,O;if(!w._deleted&&(w.persistenceManager=yield be.create(w,g),!w._deleted)){if(null!==(M=w._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(v),w.lastNotifiedUid=(null===(O=w.currentUser)||void 0===O?void 0:O.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,h.Z)(function*(){if(g._deleted)return;const v=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||v){if(g.currentUser&&v&&g.currentUser.uid===v.uid)return g._currentUser._assign(v),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(v,!0)}})()}initializeCurrentUser(g){var v=this;return(0,h.Z)(function*(){var w;const M=yield v.assertedPersistence.getCurrentUser();let O=M,W=!1;if(g&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const ce=null===(w=v.redirectUser)||void 0===w?void 0:w._redirectEventId,He=O?._redirectEventId,nt=yield v.tryRedirectSignIn(g);(!ce||ce===He)&&nt?.user&&(O=nt.user,W=!0)}if(!O)return v.directlySetCurrentUser(null);if(!O._redirectEventId){if(W)try{yield v.beforeStateQueue.runMiddleware(O)}catch(ce){O=M,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(ce))}return O?v.reloadAndSetCurrentUserOrClear(O):v.directlySetCurrentUser(null)}return j(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===O._redirectEventId?v.directlySetCurrentUser(O):v.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(g){var v=this;return(0,h.Z)(function*(){let w=null;try{w=yield v._popupRedirectResolver._completeRedirectFn(v,g,!0)}catch{yield v._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(g){var v=this;return(0,h.Z)(function*(){var w;try{yield an(g)}catch(M){if("auth/network-request-failed"!==(null===(w=M)||void 0===w?void 0:w.code))return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Qe(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var g=this;return(0,h.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var v=this;return(0,h.Z)(function*(){const w=g?(0,F.m9)(g):null;return w&&j(w.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(w&&w._clone(v))})()}_updateCurrentUser(g,v=!1){var w=this;return(0,h.Z)(function*(){if(!w._deleted)return g&&j(w.tenantId===g.tenantId,w,"tenant-id-mismatch"),v||(yield w.beforeStateQueue.runMiddleware(g)),w.queue((0,h.Z)(function*(){yield w.directlySetCurrentUser(g),w.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,h.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var v=this;return this.queue((0,h.Z)(function*(){yield v.assertedPersistence.setPersistence(ie(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new F.LL("auth","Firebase",g())}onAuthStateChanged(g,v,w){return this.registerStateListener(this.authStateSubscription,g,v,w)}beforeAuthStateChanged(g,v){return this.beforeStateQueue.pushCallback(g,v)}onIdTokenChanged(g,v,w){return this.registerStateListener(this.idTokenSubscription,g,v,w)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,v){var w=this;return(0,h.Z)(function*(){const M=yield w.getOrInitRedirectPersistenceManager(v);return null===g?M.removeCurrentUser():M.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var v=this;return(0,h.Z)(function*(){if(!v.redirectPersistenceManager){const w=g&&ie(g)||v._popupRedirectResolver;j(w,v,"argument-error"),v.redirectPersistenceManager=yield be.create(v,[ie(w._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(g){var v=this;return(0,h.Z)(function*(){var w,M;return v._isInitialized&&(yield v.queue((0,h.Z)(function*(){}))),(null===(w=v._currentUser)||void 0===w?void 0:w._redirectEventId)===g?v._currentUser:(null===(M=v.redirectUser)||void 0===M?void 0:M._redirectEventId)===g?v.redirectUser:null})()}_persistUserIfCurrent(g){var v=this;return(0,h.Z)(function*(){if(g===v.currentUser)return v.queue((0,h.Z)(function*(){return v.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(v=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,v,w,M){if(this._deleted)return()=>{};const O="function"==typeof v?v:v.next.bind(v),W=this._isInitialized?Promise.resolve():this._initializationPromise;return j(W,this,"internal-error"),W.then(()=>O(this.currentUser)),"function"==typeof v?g.addObserver(v,w,M):g.addObserver(v)}directlySetCurrentUser(g){var v=this;return(0,h.Z)(function*(){v.currentUser&&v.currentUser!==g&&v._currentUser._stopProactiveRefresh(),g&&v.isProactiveRefreshEnabled&&g._startProactiveRefresh(),v.currentUser=g,g?yield v.assertedPersistence.setCurrentUser(g):yield v.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Hs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,h.Z)(function*(){var v;const w={"X-Client-Version":g.clientVersion};g.app.options.appId&&(w["X-Firebase-gmpid"]=g.app.options.appId);const M=yield null===(v=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();return M&&(w["X-Firebase-Client"]=M),w})()}}function Cn(_){return(0,F.m9)(_)}class go{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,F.ne)(v=>this.observer=v)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Wi(_){const g=_.indexOf(":");return g<0?"":_.substr(0,g+1)}function js(_){if(!_)return null;const g=Number(_);return isNaN(g)?null:g}class Mr{constructor(g,v){this.providerId=g,this.signInMethod=v}toJSON(){return ve("not implemented")}_getIdTokenResponse(g){return ve("not implemented")}_linkToIdToken(g,v){return ve("not implemented")}_getReauthenticationResolver(g){return ve("not implemented")}}function tr(_,g){return zl.apply(this,arguments)}function zl(){return(zl=(0,h.Z)(function*(_,g){return gn(_,"POST","/v1/accounts:resetPassword",Ut(_,g))})).apply(this,arguments)}function mn(_,g){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,h.Z)(function*(_,g){return gn(_,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Cc(_,g){return mo.apply(this,arguments)}function mo(){return(mo=(0,h.Z)(function*(_,g){return gn(_,"POST","/v1/accounts:update",Ut(_,g))})).apply(this,arguments)}function Gs(){return(Gs=(0,h.Z)(function*(_,g){return ei(_,"POST","/v1/accounts:signInWithPassword",Ut(_,g))})).apply(this,arguments)}function zs(_,g){return ki.apply(this,arguments)}function ki(){return(ki=(0,h.Z)(function*(_,g){return gn(_,"POST","/v1/accounts:sendOobCode",Ut(_,g))})).apply(this,arguments)}function Nn(_,g){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,h.Z)(function*(_,g){return zs(_,g)})).apply(this,arguments)}function _r(_,g){return $r.apply(this,arguments)}function $r(){return($r=(0,h.Z)(function*(_,g){return zs(_,g)})).apply(this,arguments)}function ql(_,g){return ja.apply(this,arguments)}function ja(){return(ja=(0,h.Z)(function*(_,g){return zs(_,g)})).apply(this,arguments)}function Mc(_,g){return kr.apply(this,arguments)}function kr(){return(kr=(0,h.Z)(function*(_,g){return zs(_,g)})).apply(this,arguments)}function ih(){return(ih=(0,h.Z)(function*(_,g){return ei(_,"POST","/v1/accounts:signInWithEmailLink",Ut(_,g))})).apply(this,arguments)}function Rc(){return(Rc=(0,h.Z)(function*(_,g){return ei(_,"POST","/v1/accounts:signInWithEmailLink",Ut(_,g))})).apply(this,arguments)}class xc extends Mr{constructor(g,v,w,M=null){super("password",w),this._email=g,this._password=v,this._tenantId=M}static _fromEmailAndPassword(g,v){return new xc(g,v,"password")}static _fromEmailAndCode(g,v,w=null){return new xc(g,v,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(g){var v=this;return(0,h.Z)(function*(){switch(v.signInMethod){case"password":return function Ha(_,g){return Gs.apply(this,arguments)}(g,{returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function sp(_,g){return ih.apply(this,arguments)}(g,{email:v._email,oobCode:v._password});default:Me(g,"internal-error")}})()}_linkToIdToken(g,v){var w=this;return(0,h.Z)(function*(){switch(w.signInMethod){case"password":return mn(g,{idToken:v,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function sh(_,g){return Rc.apply(this,arguments)}(g,{idToken:v,email:w._email,oobCode:w._password});default:Me(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function lr(_,g){return oh.apply(this,arguments)}function oh(){return(oh=(0,h.Z)(function*(_,g){return ei(_,"POST","/v1/accounts:signInWithIdp",Ut(_,g))})).apply(this,arguments)}class cs extends Mr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const v=new cs(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(v.idToken=g.idToken),g.accessToken&&(v.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(v.nonce=g.nonce),g.pendingToken&&(v.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(v.accessToken=g.oauthToken,v.secret=g.oauthTokenSecret):Me("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:M}=v,O=(0,he._T)(v,["providerId","signInMethod"]);if(!w||!M)return null;const W=new cs(w,M);return W.idToken=O.idToken||void 0,W.accessToken=O.accessToken||void 0,W.secret=O.secret,W.nonce=O.nonce,W.pendingToken=O.pendingToken||null,W}_getIdTokenResponse(g){return lr(g,this.buildRequest())}_linkToIdToken(g,v){const w=this.buildRequest();return w.idToken=v,lr(g,w)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,lr(g,v)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),g.postBody=(0,F.xO)(v)}return g}}function em(_,g){return ah.apply(this,arguments)}function ah(){return(ah=(0,h.Z)(function*(_,g){return gn(_,"POST","/v1/accounts:sendVerificationCode",Ut(_,g))})).apply(this,arguments)}function qs(){return(qs=(0,h.Z)(function*(_,g){return ei(_,"POST","/v1/accounts:signInWithPhoneNumber",Ut(_,g))})).apply(this,arguments)}function lh(){return(lh=(0,h.Z)(function*(_,g){const v=yield ei(_,"POST","/v1/accounts:signInWithPhoneNumber",Ut(_,g));if(v.temporaryProof)throw pi(_,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const nm={USER_NOT_FOUND:"user-not-found"};function uh(){return(uh=(0,h.Z)(function*(_,g){return ei(_,"POST","/v1/accounts:signInWithPhoneNumber",Ut(_,Object.assign(Object.assign({},g),{operation:"REAUTH"})),nm)})).apply(this,arguments)}class Ws extends Mr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,v){return new Ws({verificationId:g,verificationCode:v})}static _fromTokenResponse(g,v){return new Ws({phoneNumber:g,temporaryProof:v})}_getIdTokenResponse(g){return function Nc(_,g){return qs.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,v){return function tm(_,g){return lh.apply(this,arguments)}(g,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function rm(_,g){return uh.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:v,verificationId:w,verificationCode:M}=this.params;return g&&v?{temporaryProof:g,phoneNumber:v}:{sessionInfo:w,code:M}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:v,verificationCode:w,phoneNumber:M,temporaryProof:O}=g;return w||v||M||O?new Ws({verificationId:v,verificationCode:w,phoneNumber:M,temporaryProof:O}):null}}class Wl{constructor(g){var v,w,M,O,W,ce;const He=(0,F.zd)((0,F.pd)(g)),nt=null!==(v=He.apiKey)&&void 0!==v?v:null,St=null!==(w=He.oobCode)&&void 0!==w?w:null,Dt=function ch(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=He.mode)&&void 0!==M?M:null);j(nt&&St&&Dt,"argument-error"),this.apiKey=nt,this.operation=Dt,this.code=St,this.continueUrl=null!==(O=He.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(W=He.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(ce=He.tenantId)&&void 0!==ce?ce:null}static parseLink(g){const v=function dh(_){const g=(0,F.zd)((0,F.pd)(_)).link,v=g?(0,F.zd)((0,F.pd)(g)).deep_link_id:null,w=(0,F.zd)((0,F.pd)(_)).deep_link_id;return(w?(0,F.zd)((0,F.pd)(w)).link:null)||w||v||g||_}(g);try{return new Wl(v)}catch{return null}}}let Zi=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(v,w){return xc._fromEmailAndPassword(v,w)}static credentialWithLink(v,w){const M=Wl.parseLink(w);return j(M,"argument-error"),xc._fromEmailAndCode(v,M.code,M.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class ds{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class hs extends ds{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class vo extends hs{static credentialFromJSON(g){const v="string"==typeof g?JSON.parse(g):g;return j("providerId"in v&&"signInMethod"in v,"argument-error"),cs._fromParams(v)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return j(g.idToken||g.accessToken,"argument-error"),cs._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return vo.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return vo.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:w,oauthTokenSecret:M,pendingToken:O,nonce:W,providerId:ce}=g;if(!w&&!M&&!v&&!O||!ce)return null;try{return new vo(ce)._credential({idToken:v,accessToken:w,nonce:W,pendingToken:O})}catch{return null}}}let $a=(()=>{class _ extends hs{constructor(){super("facebook.com")}static credential(v){return cs._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return _.credentialFromTaggedObject(v)}static credentialFromError(v){return _.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return _.credential(v.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Zl=(()=>{class _ extends hs{constructor(){super("google.com"),this.addScope("profile")}static credential(v,w){return cs._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:w})}static credentialFromResult(v){return _.credentialFromTaggedObject(v)}static credentialFromError(v){return _.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:w,oauthAccessToken:M}=v;if(!w&&!M)return null;try{return _.credential(w,M)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Pc=(()=>{class _ extends hs{constructor(){super("github.com")}static credential(v){return cs._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return _.credentialFromTaggedObject(v)}static credentialFromError(v){return _.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return _.credential(v.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class yo extends Mr{constructor(g,v){super(g,g),this.pendingToken=v}_getIdTokenResponse(g){return lr(g,this.buildRequest())}_linkToIdToken(g,v){const w=this.buildRequest();return w.idToken=v,lr(g,w)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,lr(g,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:M,pendingToken:O}=v;return w&&M&&O&&w===M?new yo(w,O):null}static _create(g,v){return new yo(g,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class mi extends ds{constructor(g){j(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return mi.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return mi.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const v=yo.fromJSON(g);return j(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:v,providerId:w}=g;if(!v||!w)return null;try{return yo._create(w,v)}catch{return null}}}let ri=(()=>{class _ extends hs{constructor(){super("twitter.com")}static credential(v,w){return cs._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:w})}static credentialFromResult(v){return _.credentialFromTaggedObject(v)}static credentialFromError(v){return _.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:w,oauthTokenSecret:M}=v;if(!w||!M)return null;try{return _.credential(w,M)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Yo(_,g){return hh.apply(this,arguments)}function hh(){return(hh=(0,h.Z)(function*(_,g){return ei(_,"POST","/v1/accounts:signUp",Ut(_,g))})).apply(this,arguments)}class Rr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,v,w,M=!1){return(0,h.Z)(function*(){const O=yield Ht._fromIdTokenResponse(g,w,M),W=lp(w);return new Rr({user:O,providerId:W,_tokenResponse:w,operationType:v})})()}static _forOperation(g,v,w){return(0,h.Z)(function*(){yield g._updateTokensIfNecessary(w,!0);const M=lp(w);return new Rr({user:g,providerId:M,_tokenResponse:w,operationType:v})})()}}function lp(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Vn(){return(Vn=(0,h.Z)(function*(_){var g;const v=Cn(_);if(yield v._initializationPromise,null!==(g=v.currentUser)&&void 0!==g&&g.isAnonymous)return new Rr({user:v.currentUser,providerId:null,operationType:"signIn"});const w=yield Yo(v,{returnSecureToken:!0}),M=yield Rr._fromIdTokenResponse(v,"signIn",w,!0);return yield v._updateCurrentUser(M.user),M})).apply(this,arguments)}class Kl extends F.ZR{constructor(g,v,w,M){var O;super(v.code,v.message),this.operationType=w,this.user=M,Object.setPrototypeOf(this,Kl.prototype),this.customData={appName:g.name,tenantId:null!==(O=g.tenantId)&&void 0!==O?O:void 0,_serverResponse:v.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(g,v,w,M){return new Kl(g,v,w,M)}}function cp(_,g,v,w){return("reauthenticate"===g?v._getReauthenticationResolver(_):v._getIdTokenResponse(_)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Kl._fromErrorAndOperation(_,O,g,w):O})}function vi(_){return new Set(_.map(({providerId:g})=>g).filter(g=>!!g))}function Yl(){return(Yl=(0,h.Z)(function*(_,g){const v=(0,F.m9)(_);yield Yt(!0,v,g);const{providerUserInfo:w}=yield Or(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[g]}),M=vi(w||[]);return v.providerData=v.providerData.filter(O=>M.has(O.providerId)),M.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function Qo(_,g){return ps.apply(this,arguments)}function ps(){return(ps=(0,h.Z)(function*(_,g,v=!1){const w=yield Ar(_,g._linkToIdToken(_.auth,yield _.getIdToken()),v);return Rr._forOperation(_,"link",w)})).apply(this,arguments)}function Yt(_,g,v){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,h.Z)(function*(_,g,v){yield an(g);const M=!1===_?"provider-already-linked":"no-such-provider";j(vi(g.providerData).has(v)===_,g.auth,M)})).apply(this,arguments)}function _o(_,g){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,h.Z)(function*(_,g,v=!1){var w;const{auth:M}=_,O="reauthenticate";try{const W=yield Ar(_,cp(M,O,g,_),v);j(W.idToken,M,"internal-error");const ce=ft(W.idToken);j(ce,M,"internal-error");const{sub:He}=ce;return j(_.uid===He,M,"user-mismatch"),Rr._forOperation(_,O,W)}catch(W){throw"auth/user-not-found"===(null===(w=W)||void 0===w?void 0:w.code)&&Me(M,"user-mismatch"),W}})).apply(this,arguments)}function Fi(_,g){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,h.Z)(function*(_,g,v=!1){const w="signIn",M=yield cp(_,w,g),O=yield Rr._fromIdTokenResponse(_,w,M);return v||(yield _._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Pn(_,g){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,h.Z)(function*(_,g){return Fi(Cn(_),g)})).apply(this,arguments)}function eu(_,g){return dp.apply(this,arguments)}function dp(){return(dp=(0,h.Z)(function*(_,g){const v=(0,F.m9)(_);return yield Yt(!1,v,g.providerId),Qo(v,g)})).apply(this,arguments)}function tu(_,g){return nu.apply(this,arguments)}function nu(){return(nu=(0,h.Z)(function*(_,g){return _o((0,F.m9)(_),g)})).apply(this,arguments)}function Oc(_,g){return gs.apply(this,arguments)}function gs(){return(gs=(0,h.Z)(function*(_,g){return ei(_,"POST","/v1/accounts:signInWithCustomToken",Ut(_,g))})).apply(this,arguments)}function Ga(){return(Ga=(0,h.Z)(function*(_,g){const v=Cn(_),w=yield Oc(v,{token:g,returnSecureToken:!0}),M=yield Rr._fromIdTokenResponse(v,"signIn",w);return yield v._updateCurrentUser(M.user),M})).apply(this,arguments)}class Ce{constructor(g,v){this.factorId=g,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(g,v){return"phoneInfo"in v?Wt._fromServerResponse(g,v):Me(g,"internal-error")}}class Wt extends Ce{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,v){return new Wt(v)}}function ru(_,g,v){var w;j((null===(w=v.url)||void 0===w?void 0:w.length)>0,_,"invalid-continue-uri"),j(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),g.continueUrl=v.url,g.dynamicLinkDomain=v.dynamicLinkDomain,g.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(j(v.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),g.iOSBundleId=v.iOS.bundleId),v.android&&(j(v.android.packageName.length>0,_,"missing-android-pkg-name"),g.androidInstallApp=v.android.installApp,g.androidMinimumVersionCode=v.android.minimumVersion,g.androidPackageName=v.android.packageName)}function Un(){return(Un=(0,h.Z)(function*(_,g,v){const w=(0,F.m9)(_),M={requestType:"PASSWORD_RESET",email:g};v&&ru(w,M,v),yield _r(w,M)})).apply(this,arguments)}function Xo(){return(Xo=(0,h.Z)(function*(_,g,v){yield tr((0,F.m9)(_),{oobCode:g,newPassword:v})})).apply(this,arguments)}function za(){return(za=(0,h.Z)(function*(_,g){yield Cc((0,F.m9)(_),{oobCode:g})})).apply(this,arguments)}function qa(_,g){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,h.Z)(function*(_,g){const v=(0,F.m9)(_),w=yield tr(v,{oobCode:g}),M=w.requestType;switch(j(M,v,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(w.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(w.mfaInfo,v,"internal-error");default:j(w.email,v,"internal-error")}let O=null;return w.mfaInfo&&(O=Ce._fromServerResponse(Cn(v),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:O},operation:M}})).apply(this,arguments)}function fh(){return(fh=(0,h.Z)(function*(_,g){const{data:v}=yield qa((0,F.m9)(_),g);return v.email})).apply(this,arguments)}function Bn(){return(Bn=(0,h.Z)(function*(_,g,v){const w=Cn(_),M=yield Yo(w,{returnSecureToken:!0,email:g,password:v}),O=yield Rr._fromIdTokenResponse(w,"signIn",M);return yield w._updateCurrentUser(O.user),O})).apply(this,arguments)}function Eo(){return(Eo=(0,h.Z)(function*(_,g,v){const w=(0,F.m9)(_),M={requestType:"EMAIL_SIGNIN",email:g};j(v.handleCodeInApp,w,"argument-error"),v&&ru(w,M,v),yield ql(w,M)})).apply(this,arguments)}function Za(){return(Za=(0,h.Z)(function*(_,g,v){const w=(0,F.m9)(_),M=Zi.credentialWithLink(g,v||Fe());return j(M._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Pn(w,M)})).apply(this,arguments)}function sm(_,g){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,h.Z)(function*(_,g){return gn(_,"POST","/v1/accounts:createAuthUri",Ut(_,g))})).apply(this,arguments)}function Ka(){return(Ka=(0,h.Z)(function*(_,g){const w={identifier:g,continueUri:_t()?Fe():"http://localhost"},{signinMethods:M}=yield sm((0,F.m9)(_),w);return M||[]})).apply(this,arguments)}function Ya(){return(Ya=(0,h.Z)(function*(_,g){const v=(0,F.m9)(_),M={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};g&&ru(v.auth,M,g);const{email:O}=yield Nn(v.auth,M);O!==_.email&&(yield _.reload())})).apply(this,arguments)}function au(){return(au=(0,h.Z)(function*(_,g,v){const w=(0,F.m9)(_),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:g};v&&ru(w.auth,O,v);const{email:W}=yield Mc(w.auth,O);W!==_.email&&(yield _.reload())})).apply(this,arguments)}function lu(_,g){return jc.apply(this,arguments)}function jc(){return(jc=(0,h.Z)(function*(_,g){return gn(_,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Gc(){return(Gc=(0,h.Z)(function*(_,{displayName:g,photoURL:v}){if(void 0===g&&void 0===v)return;const w=(0,F.m9)(_),O={idToken:yield w.getIdToken(),displayName:g,photoUrl:v,returnSecureToken:!0},W=yield Ar(w,lu(w.auth,O));w.displayName=W.displayName||null,w.photoURL=W.photoUrl||null;const ce=w.providerData.find(({providerId:He})=>"password"===He);ce&&(ce.displayName=w.displayName,ce.photoURL=w.photoURL),yield w._updateTokensIfNecessary(W)})).apply(this,arguments)}function bo(_,g,v){return uu.apply(this,arguments)}function uu(){return(uu=(0,h.Z)(function*(_,g,v){const{auth:w}=_,O={idToken:yield _.getIdToken(),returnSecureToken:!0};g&&(O.email=g),v&&(O.password=v);const W=yield Ar(_,mn(w,O));yield _._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class ii{constructor(g,v,w={}){this.isNewUser=g,this.providerId=v,this.profile=w}}class In extends ii{constructor(g,v,w,M){super(g,v,w),this.username=M}}class gh extends ii{constructor(g,v){super(g,"facebook.com",v)}}class zc extends In{constructor(g,v){super(g,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class hp extends ii{constructor(g,v){super(g,"google.com",v)}}class qc extends In{constructor(g,v,w){super(g,"twitter.com",v,w)}}function cu(_){const{user:g,_tokenResponse:v}=_;return g.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function ur(_){var g,v;if(!_)return null;const{providerId:w}=_,M=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},O=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!w&&_?.idToken){const W=null===(v=null===(g=ft(_.idToken))||void 0===g?void 0:g.firebase)||void 0===v?void 0:v.sign_in_provider;if(W)return new ii(O,"anonymous"!==W&&"custom"!==W?W:null)}if(!w)return null;switch(w){case"facebook.com":return new gh(O,M);case"github.com":return new zc(O,M);case"google.com":return new hp(O,M);case"twitter.com":return new qc(O,M,_.screenName||null);case"custom":case"anonymous":return new ii(O,null);default:return new ii(O,w,M)}}(v)}class So{constructor(g,v,w){this.type=g,this.credential=v,this.auth=w}static _fromIdtoken(g,v){return new So("enroll",g,v)}static _fromMfaPendingCredential(g){return new So("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var v,w;if(g?.multiFactorSession){if(null!==(v=g.multiFactorSession)&&void 0!==v&&v.pendingCredential)return So._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(w=g.multiFactorSession)&&void 0!==w&&w.idToken)return So._fromIdtoken(g.multiFactorSession.idToken)}return null}}class hu{constructor(g,v,w){this.session=g,this.hints=v,this.signInResolver=w}static _fromError(g,v){const w=Cn(g),M=v.customData._serverResponse,O=(M.mfaInfo||[]).map(ce=>Ce._fromServerResponse(w,ce));j(M.mfaPendingCredential,w,"internal-error");const W=So._fromMfaPendingCredential(M.mfaPendingCredential);return new hu(W,O,function(){var ce=(0,h.Z)(function*(He){const nt=yield He._process(w,W);delete M.mfaInfo,delete M.mfaPendingCredential;const St=Object.assign(Object.assign({},M),{idToken:nt.idToken,refreshToken:nt.refreshToken});switch(v.operationType){case"signIn":const Dt=yield Rr._fromIdTokenResponse(w,v.operationType,St);return yield w._updateCurrentUser(Dt.user),Dt;case"reauthenticate":return j(v.user,w,"internal-error"),Rr._forOperation(v.user,v.operationType,St);default:Me(w,"internal-error")}});return function(He){return ce.apply(this,arguments)}}())}resolveSignIn(g){var v=this;return(0,h.Z)(function*(){return v.signInResolver(g)})()}}function fu(_,g){return gn(_,"POST","/v2/accounts/mfaEnrollment:start",Ut(_,g))}class fp{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(w=>Ce._fromServerResponse(g.auth,w)))})}static _fromUser(g){return new fp(g)}getSession(){var g=this;return(0,h.Z)(function*(){return So._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,v){var w=this;return(0,h.Z)(function*(){const M=g,O=yield w.getSession(),W=yield Ar(w.user,M._process(w.user.auth,O,v));return yield w.user._updateTokensIfNecessary(W),w.user.reload()})()}unenroll(g){var v=this;return(0,h.Z)(function*(){var w;const M="string"==typeof g?g:g.uid,O=yield v.user.getIdToken(),W=yield Ar(v.user,function _h(_,g){return gn(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Ut(_,g))}(v.user.auth,{idToken:O,mfaEnrollmentId:M}));v.enrolledFactors=v.enrolledFactors.filter(({uid:ce})=>ce!==M),yield v.user._updateTokensIfNecessary(W);try{yield v.user.reload()}catch(ce){if("auth/user-token-expired"!==(null===(w=ce)||void 0===w?void 0:w.code))throw ce}})()}}const To=new WeakMap,Io="__sak";class gu{constructor(g,v){this.storageRetriever=g,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(Io,"1"),this.storage.removeItem(Io),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,v){return this.storage.setItem(g,JSON.stringify(v)),Promise.resolve()}_get(g){const v=this.storage.getItem(g);return Promise.resolve(v?JSON.parse(v):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Xa=(()=>{class _ extends gu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,w)=>this.onStorageEvent(v,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Qa(){const _=(0,F.z$)();return gt(_)||$t(_)}()&&function Tn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=po(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const w of Object.keys(this.listeners)){const M=this.storage.getItem(w),O=this.localCache[w];M!==O&&v(w,O,M)}}onStorageEvent(v,w=!1){if(!v.key)return void this.forAllChangedKeys((ce,He,nt)=>{this.notifyListeners(ce,nt)});const M=v.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(M);if(v.newValue!==ce)null!==v.newValue?this.storage.setItem(M,v.newValue):this.storage.removeItem(M);else if(this.localCache[M]===v.newValue&&!w)return}const O=()=>{const ce=this.storage.getItem(M);!w&&this.localCache[M]===ce||this.notifyListeners(M,ce)},W=this.storage.getItem(M);!function ar(){return(0,F.w1)()&&10===document.documentMode}()||W===v.newValue||v.newValue===v.oldValue?O():setTimeout(O,10)}notifyListeners(v,w){this.localCache[v]=w;const M=this.listeners[v];if(M)for(const O of Array.from(M))O(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,w,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:w,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(w)}_removeListener(v,w){this.listeners[v]&&(this.listeners[v].delete(w),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,w){var M=()=>super._set,O=this;return(0,h.Z)(function*(){yield M().call(O,v,w),O.localCache[v]=JSON.stringify(w)})()}_get(v){var w=()=>super._get,M=this;return(0,h.Z)(function*(){const O=yield w().call(M,v);return M.localCache[v]=JSON.stringify(O),O})()}_remove(v){var w=()=>super._remove,M=this;return(0,h.Z)(function*(){yield w().call(M,v),delete M.localCache[v]})()}}return _.type="LOCAL",_})(),Yi=(()=>{class _ extends gu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,w){}_removeListener(v,w){}}return _.type="SESSION",_})();let bh=(()=>{class _{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const w=this.receivers.find(O=>O.isListeningto(v));if(w)return w;const M=new _(v);return this.receivers.push(M),M}isListeningto(v){return this.eventTarget===v}handleEvent(v){var w=this;return(0,h.Z)(function*(){const M=v,{eventId:O,eventType:W,data:ce}=M.data,He=w.handlersMap[W];if(!He?.size)return;M.ports[0].postMessage({status:"ack",eventId:O,eventType:W});const nt=Array.from(He).map(function(){var Dt=(0,h.Z)(function*(gr){return gr(M.origin,ce)});return function(gr){return Dt.apply(this,arguments)}}()),St=yield function el(_){return Promise.all(_.map(function(){var g=(0,h.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(w){return{fulfilled:!1,reason:w}}});return function(v){return g.apply(this,arguments)}}()))}(nt);M.ports[0].postMessage({status:"done",eventId:O,eventType:W,response:St})})()}_subscribe(v,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(w)}_unsubscribe(v,w){this.handlersMap[v]&&w&&this.handlersMap[v].delete(w),(!w||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function tl(_="",g=10){let v="";for(let w=0;w<g;w++)v+=Math.floor(10*Math.random());return _+v}class Wc{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,v,w=50){var M=this;return(0,h.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let W,ce;return new Promise((He,nt)=>{const St=tl("",20);O.port1.start();const Dt=setTimeout(()=>{nt(new Error("unsupported_event"))},w);ce={messageChannel:O,onMessage(gr){const Di=gr;if(Di.data.eventId===St)switch(Di.data.status){case"ack":clearTimeout(Dt),W=setTimeout(()=>{nt(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),He(Di.data.response);break;default:clearTimeout(Dt),clearTimeout(W),nt(new Error("invalid_response"))}}},M.handlers.add(ce),O.port1.addEventListener("message",ce.onMessage),M.target.postMessage({eventType:g,eventId:St,data:v},[O.port2])}).finally(()=>{ce&&M.removeMessageHandler(ce)})})()}}function zn(){return window}function mu(){return typeof zn().WorkerGlobalScope<"u"&&"function"==typeof zn().importScripts}function nl(){return(nl=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ys="firebaseLocalStorageDb",Qs="firebaseLocalStorage",_u="fbase_key";class Ao{constructor(g){this.request=g}toPromise(){return new Promise((g,v)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function rl(_,g){return _.transaction([Qs],g?"readwrite":"readonly").objectStore(Qs)}function na(){const _=indexedDB.open(Ys,1);return new Promise((g,v)=>{_.addEventListener("error",()=>{v(_.error)}),_.addEventListener("upgradeneeded",()=>{const w=_.result;try{w.createObjectStore(Qs,{keyPath:_u})}catch(M){v(M)}}),_.addEventListener("success",(0,h.Z)(function*(){const w=_.result;w.objectStoreNames.contains(Qs)?g(w):(w.close(),yield function Sh(){const _=indexedDB.deleteDatabase(Ys);return new Ao(_).toPromise()}(),g(yield na()))}))})}function vs(_,g,v){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,h.Z)(function*(_,g,v){const w=rl(_,!0).put({[_u]:g,value:v});return new Ao(w).toPromise()})).apply(this,arguments)}function il(){return(il=(0,h.Z)(function*(_,g){const v=rl(_,!1).get(g),w=yield new Ao(v).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Mo(_,g){const v=rl(_,!0).delete(g);return new Ao(v).toPromise()}const ra=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,h.Z)(function*(){return v.db||(v.db=yield na()),v.db})()}_withRetries(v){var w=this;return(0,h.Z)(function*(){let M=0;for(;;)try{const O=yield w._openDb();return yield v(O)}catch(O){if(M++>3)throw O;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,h.Z)(function*(){return mu()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,h.Z)(function*(){v.receiver=bh._getInstance(function yu(){return mu()?self:null}()),v.receiver._subscribe("keyChanged",function(){var w=(0,h.Z)(function*(M,O){return{keyProcessed:(yield v._poll()).includes(O.key)}});return function(M,O){return w.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var w=(0,h.Z)(function*(M,O){return["keyChanged"]});return function(M,O){return w.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,h.Z)(function*(){var w,M;if(v.activeServiceWorker=yield function Co(){return nl.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Wc(v.activeServiceWorker);const O=yield v.sender._send("ping",{},800);!O||(null===(w=O[0])||void 0===w?void 0:w.fulfilled)&&(null===(M=O[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var w=this;return(0,h.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function vu(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:v},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const v=yield na();return yield vs(v,Io,"1"),yield Mo(v,Io),!0}catch{}return!1})()}_withPendingWrite(v){var w=this;return(0,h.Z)(function*(){w.pendingWrites++;try{yield v()}finally{w.pendingWrites--}})()}_set(v,w){var M=this;return(0,h.Z)(function*(){return M._withPendingWrite((0,h.Z)(function*(){return yield M._withRetries(O=>vs(O,v,w)),M.localCache[v]=w,M.notifyServiceWorker(v)}))})()}_get(v){var w=this;return(0,h.Z)(function*(){const M=yield w._withRetries(O=>function Eu(_,g){return il.apply(this,arguments)}(O,v));return w.localCache[v]=M,M})()}_remove(v){var w=this;return(0,h.Z)(function*(){return w._withPendingWrite((0,h.Z)(function*(){return yield w._withRetries(M=>Mo(M,v)),delete w.localCache[v],w.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,h.Z)(function*(){const w=yield v._withRetries(W=>{const ce=rl(W,!1).getAll();return new Ao(ce).toPromise()});if(!w)return[];if(0!==v.pendingWrites)return[];const M=[],O=new Set;for(const{fbase_key:W,value:ce}of w)O.add(W),JSON.stringify(v.localCache[W])!==JSON.stringify(ce)&&(v.notifyListeners(W,ce),M.push(W));for(const W of Object.keys(v.localCache))v.localCache[W]&&!O.has(W)&&(v.notifyListeners(W,null),M.push(W));return M})()}notifyListeners(v,w){this.localCache[v]=w;const M=this.listeners[v];if(M)for(const O of Array.from(M))O(w)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(w)}_removeListener(v,w){this.listeners[v]&&(this.listeners[v].delete(w),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function ia(_,g){return gn(_,"POST","/v2/accounts/mfaSignIn:start",Ut(_,g))}function Xs(){return(Xs=(0,h.Z)(function*(_){return(yield gn(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function oa(_){return new Promise((g,v)=>{const w=document.createElement("script");w.setAttribute("src",_),w.onload=g,w.onerror=M=>{const O=Ee("internal-error");O.customData=M,v(O)},w.type="text/javascript",w.charset="UTF-8",function sa(){var _,g;return null!==(g=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==g?g:document}().appendChild(w)})}function Du(_){return`__${_}${Math.floor(1e6*Math.random())}`}const sl=1e12;class En{constructor(g){this.auth=g,this.counter=sl,this._widgets=new Map}render(g,v){const w=this.counter;return this._widgets.set(w,new om(g,this.auth.name,v||{})),this.counter++,w}reset(g){var v;const w=g||sl;null===(v=this._widgets.get(w))||void 0===v||v.delete(),this._widgets.delete(w)}getResponse(g){var v;return(null===(v=this._widgets.get(g||sl))||void 0===v?void 0:v.getResponse())||""}execute(g){var v=this;return(0,h.Z)(function*(){var w;return null===(w=v._widgets.get(g||sl))||void 0===w||w.execute(),""})()}}class om{constructor(g,v,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof g?document.getElementById(g):g;j(M,"argument-error",{appName:v}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Vy(_){const g=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<_;w++)g.push(v.charAt(Math.floor(Math.random()*v.length)));return g.join("")}(50);const{callback:g,"expired-callback":v}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const am=Du("rcb"),Uy=new fn(3e4,6e4);class pp{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=zn().grecaptcha)||void 0===g||!g.render)}load(g,v=""){return j(function bb(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(v),g,"argument-error"),this.shouldResolveImmediately(v)?Promise.resolve(zn().grecaptcha):new Promise((w,M)=>{const O=zn().setTimeout(()=>{M(Ee(g,"network-request-failed"))},Uy.get());zn()[am]=()=>{zn().clearTimeout(O),delete zn()[am];const ce=zn().grecaptcha;if(!ce)return void M(Ee(g,"internal-error"));const He=ce.render;ce.render=(nt,St)=>{const Dt=He(nt,St);return this.counter++,Dt},this.hostLanguage=v,w(ce)},oa(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:am,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(O),M(Ee(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var v;return!(null===(v=zn().grecaptcha)||void 0===v||!v.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ol{load(g){return(0,h.Z)(function*(){return new En(g)})()}clearedOneInstance(){}}const lm="recaptcha",um={theme:"light",type:"image"};class wr{constructor(g,v=Object.assign({},um),w){this.parameters=v,this.type=lm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cn(w),this.isInvisible="invisible"===this.parameters.size,j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof g?document.getElementById(g):g;j(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ol:new pp,this.validateStartingState()}verify(){var g=this;return(0,h.Z)(function*(){g.assertNotDestroyed();const v=yield g.render(),w=g.getAssertedRecaptcha();return w.getResponse(v)||new Promise(O=>{const W=ce=>{!ce||(g.tokenChangeListeners.delete(W),O(ce))};g.tokenChangeListeners.add(W),g.isInvisible&&w.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return v=>{if(this.tokenChangeListeners.forEach(w=>w(v)),"function"==typeof g)g(v);else if("string"==typeof g){const w=zn()[g];"function"==typeof w&&w(v)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,h.Z)(function*(){if(yield g.init(),!g.widgetId){let v=g.container;if(!g.isInvisible){const w=document.createElement("div");v.appendChild(w),v=w}g.widgetId=g.getAssertedRecaptcha().render(v,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,h.Z)(function*(){j(_t()&&!mu(),g.auth,"internal-error"),yield function oi(){let _=null;return new Promise(g=>{"complete"!==document.readyState?(_=()=>g(),window.addEventListener("load",_)):g()}).catch(g=>{throw _&&window.removeEventListener("load",_),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const v=yield function si(_){return Xs.apply(this,arguments)}(g.auth);j(v,g.auth,"internal-error"),g.parameters.sitekey=v})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class la{constructor(g,v){this.verificationId=g,this.onConfirmation=v}confirm(g){const v=Ws._fromVerification(this.verificationId,g);return this.onConfirmation(v)}}function pn(){return(pn=(0,h.Z)(function*(_,g,v){const w=Cn(_),M=yield Js(w,g,(0,F.m9)(v));return new la(M,O=>Pn(w,O))})).apply(this,arguments)}function tt(){return(tt=(0,h.Z)(function*(_,g,v){const w=(0,F.m9)(_);yield Yt(!1,w,"phone");const M=yield Js(w.auth,g,(0,F.m9)(v));return new la(M,O=>eu(w,O))})).apply(this,arguments)}function Qi(){return(Qi=(0,h.Z)(function*(_,g,v){const w=(0,F.m9)(_),M=yield Js(w.auth,g,(0,F.m9)(v));return new la(M,O=>tu(w,O))})).apply(this,arguments)}function Js(_,g,v){return ua.apply(this,arguments)}function ua(){return(ua=(0,h.Z)(function*(_,g,v){var w;const M=yield v.verify();try{let O;if(j("string"==typeof M,_,"argument-error"),j(v.type===lm,_,"argument-error"),O="string"==typeof g?{phoneNumber:g}:g,"session"in O){const W=O.session;if("phoneNumber"in O)return j("enroll"===W.type,_,"internal-error"),(yield fu(_,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{j("signin"===W.type,_,"internal-error");const ce=(null===(w=O.multiFactorHint)||void 0===w?void 0:w.uid)||O.multiFactorUid;return j(ce,_,"missing-multi-factor-info"),(yield ia(_,{mfaPendingCredential:W.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield em(_,{phoneNumber:O.phoneNumber,recaptchaToken:M});return W}}finally{v._reset()}})).apply(this,arguments)}function ca(){return(ca=(0,h.Z)(function*(_,g){yield Qo((0,F.m9)(_),g)})).apply(this,arguments)}let nr=(()=>{class _{constructor(v){this.providerId=_.PROVIDER_ID,this.auth=Cn(v)}verifyPhoneNumber(v,w){return Js(this.auth,v,(0,F.m9)(w))}static credential(v,w){return Ws._fromVerification(v,w)}static credentialFromResult(v){return _.credentialFromTaggedObject(v)}static credentialFromError(v){return _.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:w,temporaryProof:M}=v;return w&&M?Ws._fromTokenResponse(w,M):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function eo(_,g){return g?ie(g):(j(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class At extends Mr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return lr(g,this._buildIdpRequest())}_linkToIdToken(g,v){return lr(g,this._buildIdpRequest(v))}_getReauthenticationResolver(g){return lr(g,this._buildIdpRequest())}_buildIdpRequest(g){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(v.idToken=g),v}}function ai(_){return Fi(_.auth,new At(_),_.bypassAuthState)}function Es(_){const{auth:g,user:v}=_;return j(v,g,"internal-error"),_o(v,new At(_),_.bypassAuthState)}function _i(_){return Su.apply(this,arguments)}function Su(){return(Su=(0,h.Z)(function*(_){const{auth:g,user:v}=_;return j(v,g,"internal-error"),Qo(v,new At(_),_.bypassAuthState)})).apply(this,arguments)}class al{constructor(g,v,w,M,O=!1){this.auth=g,this.resolver=w,this.user=M,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var g=this;return new Promise(function(){var v=(0,h.Z)(function*(w,M){g.pendingPromise={resolve:w,reject:M};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(O){g.reject(O)}});return function(w,M){return v.apply(this,arguments)}}())}onAuthEvent(g){var v=this;return(0,h.Z)(function*(){const{urlResponse:w,sessionId:M,postBody:O,tenantId:W,error:ce,type:He}=g;if(ce)return void v.reject(ce);const nt={auth:v.auth,requestUri:w,sessionId:M,tenantId:W||void 0,postBody:O||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(He)(nt))}catch(St){v.reject(St)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return ai;case"linkViaPopup":case"linkViaRedirect":return _i;case"reauthViaPopup":case"reauthViaRedirect":return Es;default:Me(this.auth,"internal-error")}}resolve(g){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const li=new fn(2e3,1e4);function ll(){return(ll=(0,h.Z)(function*(_,g,v){const w=Cn(_);$e(_,g,ds);const M=eo(w,v);return new qt(w,"signInViaPopup",g,M).executeNotNull()})).apply(this,arguments)}function to(){return(to=(0,h.Z)(function*(_,g,v){const w=(0,F.m9)(_);$e(w.auth,g,ds);const M=eo(w.auth,v);return new qt(w.auth,"reauthViaPopup",g,M,w).executeNotNull()})).apply(this,arguments)}function Ei(){return(Ei=(0,h.Z)(function*(_,g,v){const w=(0,F.m9)(_);$e(w.auth,g,ds);const M=eo(w.auth,v);return new qt(w.auth,"linkViaPopup",g,M,w).executeNotNull()})).apply(this,arguments)}let qt=(()=>{class _ extends al{constructor(v,w,M,O,W){super(v,w,O,W),this.provider=M,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var v=this;return(0,h.Z)(function*(){const w=yield v.execute();return j(w,v.auth,"internal-error"),w})()}onExecution(){var v=this;return(0,h.Z)(function*(){Z(1===v.filter.length,"Popup operations only handle one event");const w=tl();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],w),v.authWindow.associatedEvent=w,v.resolver._originValidation(v.auth).catch(M=>{v.reject(M)}),v.resolver._isIframeWebStorageSupported(v.auth,M=>{M||v.reject(Ee(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const v=()=>{var w,M;this.pollId=null!==(M=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(v,li.get())};v()}}return _.currentPopupAction=null,_})();const hr=new Map;class lt extends al{constructor(g,v,w=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,w),this.eventId=null}execute(){var g=()=>super.execute,v=this;return(0,h.Z)(function*(){let w=hr.get(v.auth._key());if(!w){try{const O=(yield function da(_,g){return bt.apply(this,arguments)}(v.resolver,v.auth))?yield g().call(v):null;w=()=>Promise.resolve(O)}catch(M){w=()=>Promise.reject(M)}hr.set(v.auth._key(),w)}return v.bypassAuthState||hr.set(v.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(g){var v=()=>super.onAuthEvent,w=this;return(0,h.Z)(function*(){if("signInViaRedirect"===g.type)return v().call(w,g);if("unknown"!==g.type){if(g.eventId){const M=yield w.auth._redirectUserForId(g.eventId);if(M)return w.user=M,v().call(w,g);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function bt(){return(bt=(0,h.Z)(function*(_,g){const v=Ih(g),w=Xi(_);if(!(yield w._isAvailable()))return!1;const M="true"===(yield w._get(v));return yield w._remove(v),M})).apply(this,arguments)}function ha(_,g){return wi.apply(this,arguments)}function wi(){return(wi=(0,h.Z)(function*(_,g){return Xi(_)._set(Ih(g),"true")})).apply(this,arguments)}function fa(_,g){hr.set(_._key(),g)}function Xi(_){return ie(_._redirectPersistence)}function Ih(_){return K("pendingRedirect",_.config.apiKey,_.name)}function T(){return(T=(0,h.Z)(function*(_,g,v){const w=Cn(_);$e(_,g,ds);const M=eo(w,v);return yield ha(M,w),M._openRedirect(w,g,"signInViaRedirect")})).apply(this,arguments)}function U(){return(U=(0,h.Z)(function*(_,g,v){const w=(0,F.m9)(_);$e(w.auth,g,ds);const M=eo(w.auth,v);yield ha(M,w.auth);const O=yield mt(w);return M._openRedirect(w.auth,g,"reauthViaRedirect",O)})).apply(this,arguments)}function Te(){return(Te=(0,h.Z)(function*(_,g,v){const w=(0,F.m9)(_);$e(w.auth,g,ds);const M=eo(w.auth,v);yield Yt(!1,w,g.providerId),yield ha(M,w.auth);const O=yield mt(w);return M._openRedirect(w.auth,g,"linkViaRedirect",O)})).apply(this,arguments)}function yt(){return(yt=(0,h.Z)(function*(_,g){return yield Cn(_)._initializationPromise,ot(_,g,!1)})).apply(this,arguments)}function ot(_,g){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,h.Z)(function*(_,g,v=!1){const w=Cn(_),M=eo(w,g),W=yield new lt(w,M,v).execute();return W&&!v&&(delete W.user._redirectEventId,yield w._persistUserIfCurrent(W.user),yield w._setRedirectUser(null,g)),W})).apply(this,arguments)}function mt(_){return An.apply(this,arguments)}function An(){return(An=(0,h.Z)(function*(_){const g=tl(`${_.uid}:::`);return _._redirectEventId=g,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),g})).apply(this,arguments)}class ws{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let v=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(g,w)&&(v=!0,this.sendToConsumer(g,w),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function pa(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bs(_);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=g,v=!0)),v}sendToConsumer(g,v){var w;if(g.error&&!bs(g)){const M=(null===(w=g.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";v.onError(Ee(this.auth,M))}else v.onAuthEvent(g)}isEventForConsumer(g,v){const w=null===v.eventId||!!g.eventId&&g.eventId===v.eventId;return v.filter.includes(g.type)&&w}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fr(g))}saveEventToCache(g){this.cachedEventUids.add(Fr(g)),this.lastProcessedEventTime=Date.now()}}function Fr(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(g=>g).join("-")}function bs({type:_,error:g}){return"unknown"===_&&"auth/no-auth-event"===g?.code}function no(_){return bi.apply(this,arguments)}function bi(){return(bi=(0,h.Z)(function*(_,g={}){return gn(_,"GET","/v1/projects",g)})).apply(this,arguments)}const xo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ds=/^https?/;function cm(){return(cm=(0,h.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:g}=yield no(_);for(const v of g)try{if(dm(v))return}catch{}Me(_,"unauthorized-domain")})).apply(this,arguments)}function dm(_){const g=Fe(),{protocol:v,hostname:w}=new URL(g);if(_.startsWith("chrome-extension://")){const W=new URL(_);return""===W.hostname&&""===w?"chrome-extension:"===v&&_.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===v&&W.hostname===w}if(!Ds.test(v))return!1;if(xo.test(_))return w===_;const M=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(w)}const Ch=new fn(3e4,6e4);function Ah(){const _=zn().___jsl;if(_?.H)for(const g of Object.keys(_.H))if(_.H[g].r=_.H[g].r||[],_.H[g].L=_.H[g].L||[],_.H[g].r=[..._.H[g].L],_.CP)for(let v=0;v<_.CP.length;v++)_.CP[v]=null}let dl=null;function Hy(_){return dl=dl||function Tu(_){return new Promise((g,v)=>{var w,M,O;function W(){Ah(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Ah(),v(Ee(_,"network-request-failed"))},timeout:Ch.get()})}if(null!==(M=null===(w=zn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==M&&M.Iframe)g(gapi.iframes.getContext());else{if(null===(O=zn().gapi)||void 0===O||!O.load){const ce=Du("iframefcb");return zn()[ce]=()=>{gapi.load?W():v(Ee(_,"network-request-failed"))},oa(`https://apis.google.com/js/api.js?onload=${ce}`).catch(He=>v(He))}W()}}).catch(g=>{throw dl=null,g})}(_),dl}const hm=new fn(5e3,15e3),Db={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jy(_){const g=_.config;j(g.authDomain,_,"auth-domain-config-required");const v=g.emulator?Sn(g,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,w={apiKey:g.apiKey,appName:_.name,v:ae.SDK_VERSION},M=hl.get(_.config.apiHost);M&&(w.eid=M);const O=_._getFrameworks();return O.length&&(w.fw=O.join(",")),`${v}?${(0,F.xO)(w).slice(1)}`}function Cu(){return Cu=(0,h.Z)(function*(_){const g=yield Hy(_),v=zn().gapi;return j(v,_,"internal-error"),g.open({where:document.body,url:jy(_),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Db,dontclear:!0},w=>new Promise(function(){var M=(0,h.Z)(function*(O,W){yield w.restyle({setHideOnLeave:!1});const ce=Ee(_,"network-request-failed"),He=zn().setTimeout(()=>{W(ce)},hm.get());function nt(){zn().clearTimeout(He),O(w)}w.ping(nt).then(nt,()=>{W(ce)})});return function(O,W){return M.apply(this,arguments)}}()))}),Cu.apply(this,arguments)}const vp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Au{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ss(_,g,v,w,M,O){j(_.config.authDomain,_,"auth-domain-config-required"),j(_.config.apiKey,_,"invalid-api-key");const W={apiKey:_.config.apiKey,appName:_.name,authType:v,redirectUrl:w,v:ae.SDK_VERSION,eventId:M};if(g instanceof ds){g.setDefaultLanguage(_.languageCode),W.providerId=g.providerId||"",(0,F.xb)(g.getCustomParameters())||(W.customParameters=JSON.stringify(g.getCustomParameters()));for(const[He,nt]of Object.entries(O||{}))W[He]=nt}if(g instanceof hs){const He=g.getScopes().filter(nt=>""!==nt);He.length>0&&(W.scopes=He.join(","))}_.tenantId&&(W.tid=_.tenantId);const ce=W;for(const He of Object.keys(ce))void 0===ce[He]&&delete ce[He];return`${function gm({config:_}){return _.emulator?Sn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,F.xO)(ce).slice(1)}`}const Nh="webStorageSupport";class Vi extends class mm{constructor(g){this.factorId=g}_process(g,v,w){switch(v.type){case"enroll":return this._finalizeEnroll(g,v.credential,w);case"signin":return this._finalizeSignIn(g,v.credential);default:return ve("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Vi(g)}_finalizeEnroll(g,v,w){return function pu(_,g){return gn(_,"POST","/v2/accounts/mfaEnrollment:finalize",Ut(_,g))}(g,{idToken:v,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,v){return function bu(_,g){return gn(_,"POST","/v2/accounts/mfaSignIn:finalize",Ut(_,g))}(g,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let fl=(()=>{class _{constructor(){}static assertion(v){return Vi._fromCredential(v)}}return _.FACTOR_ID="phone",_})();var vm="@firebase/auth",Ph="0.20.10";class Ep{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var v=this;return(0,h.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const v=this.auth.onIdTokenChanged(w=>{var M;g((null===(M=w)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,v),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const v=this.internalListeners.get(g);!v||(this.internalListeners.delete(g),v(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ga(){return window}function ma(){return(ma=(0,h.Z)(function*(_,g,v){var w;const{BuildInfo:M}=ga();Z(g.sessionId,"AuthEvent did not contain a session ID");const O=yield Jc(g.sessionId),W={};return $t()?W.ibi=M.packageName:Kt()?W.apn=M.packageName:Me(_,"operation-not-supported-in-this-environment"),M.displayName&&(W.appDisplayName=M.displayName),W.sessionId=O,Ss(_,v,g.type,void 0,null!==(w=g.eventId)&&void 0!==w?w:void 0,W)})).apply(this,arguments)}function Lh(){return(Lh=(0,h.Z)(function*(_){const{BuildInfo:g}=ga(),v={};$t()?v.iosBundleId=g.packageName:Kt()?v.androidPackageName=g.packageName:Me(_,"operation-not-supported-in-this-environment"),yield no(_,v)})).apply(this,arguments)}function ym(){return(ym=(0,h.Z)(function*(_,g,v){const{cordova:w}=ga();let M=()=>{};try{yield new Promise((O,W)=>{let ce=null;function He(){var Dt;O();const gr=null===(Dt=w.plugins.browsertab)||void 0===Dt?void 0:Dt.close;"function"==typeof gr&&gr(),"function"==typeof v?.close&&v.close()}function nt(){ce||(ce=window.setTimeout(()=>{W(Ee(_,"redirect-cancelled-by-user"))},2e3))}function St(){"visible"===document?.visibilityState&&nt()}g.addPassiveListener(He),document.addEventListener("resume",nt,!1),Kt()&&document.addEventListener("visibilitychange",St,!1),M=()=>{g.removePassiveListener(He),document.removeEventListener("resume",nt,!1),document.removeEventListener("visibilitychange",St,!1),ce&&window.clearTimeout(ce)}})}finally{M()}})).apply(this,arguments)}function Jc(_){return pl.apply(this,arguments)}function pl(){return(pl=(0,h.Z)(function*(_){const g=Wy(_),v=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(v)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Wy(_){if(Z(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_);const g=new ArrayBuffer(_.length),v=new Uint8Array(g);for(let w=0;w<_.length;w++)v[w]=_.charCodeAt(w);return v}(0,F.Pz)("authIdTokenMaxAge"),function xr(_){(0,ae._registerComponent)(new ue.wA("auth",(g,{options:v})=>{const w=g.getProvider("app").getImmediate(),M=g.getProvider("heartbeat"),{apiKey:O,authDomain:W}=w.options;return((ce,He)=>{j(O&&!O.includes(":"),"invalid-api-key",{appName:ce.name}),j(!W?.includes(":"),"argument-error",{appName:ce.name});const nt={apiKey:O,authDomain:W,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hs(_)},St=new jt(ce,He,nt);return function Ve(_,g){const v=g?.persistence||[],w=(Array.isArray(v)?v:[v]).map(ie);g?.errorMap&&_._updateErrorMap(g.errorMap),_._initializeWithPersistence(w,g?.popupRedirectResolver)}(St,v),St})(w,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,v,w)=>{g.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new ue.wA("auth-internal",g=>{const v=Cn(g.getProvider("auth").getImmediate());return new Ep(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(vm,Ph,function wp(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,ae.registerVersion)(vm,Ph,"esm2017")}("Browser");class Ru extends ws{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(g)),super.onEvent(g)}initialized(){var g=this;return(0,h.Z)(function*(){yield g.initPromise})()}}function Dp(_){return xu.apply(this,arguments)}function xu(){return(xu=(0,h.Z)(function*(_){const g=yield Oo()._get(ed(_));return g&&(yield Oo()._remove(ed(_))),g})).apply(this,arguments)}function Uh(){const _=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<20;v++){const w=Math.floor(Math.random()*g.length);_.push(g.charAt(w))}return _.join("")}function Oo(){return ie(Xa)}function ed(_){return K("authEvent",_.config.apiKey,_.name)}function Nu(_){if(!_?.includes("?"))return{};const[g,...v]=_.split("?");return(0,F.zd)(v.join("?"))}function Sp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function nd(){var _;return(null===(_=self?.location)||void 0===_?void 0:_.protocol)||null}function gl(_=(0,F.z$)()){return!("file:"!==nd()&&"ionic:"!==nd()&&"capacitor:"!==nd()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function qh(){try{const _=self.localStorage,g=tl();if(_)return _.setItem(g,"1"),_.removeItem(g),!function zh(_=(0,F.z$)()){return function Ou(){return(0,F.w1)()&&11===document?.documentMode}()||function Gh(_=(0,F.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,F.hl)()}catch{return ml()&&(0,F.hl)()}return!1}function ml(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function va(){return(function Dm(){return"http:"===nd()||"https:"===nd()}()||(0,F.ru)()||gl())&&!function $h(){return(0,F.b$)()||(0,F.UG)()}()&&qh()&&!ml()}function rd(){return gl()&&typeof document<"u"}function id(){return(id=(0,h.Z)(function*(){return!!rd()&&new Promise(_=>{const g=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),_(!0)})})})).apply(this,arguments)}const qr={LOCAL:"local",NONE:"none",SESSION:"session"},vl=j,ko="persistence";function sd(_){return ro.apply(this,arguments)}function ro(){return(ro=(0,h.Z)(function*(_){yield _._initializationPromise;const g=yl(),v=K(ko,_.config.apiKey,_.name);g&&g.setItem(v,_._getPersistence())})).apply(this,arguments)}function yl(){var _;try{return(null===(_=function ku(){return typeof window<"u"?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch{return null}}const ya=j;class pr{constructor(){this.browserResolver=ie(class Gy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yi,this._completeRedirectFn=ot,this._overrideRedirectResult=fa}_openPopup(g,v,w,M){var O=this;return(0,h.Z)(function*(){var W;Z(null===(W=O.eventManagers[g._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const ce=Ss(g,v,w,Fe(),M);return function Mu(_,g,v,w=500,M=600){const O=Math.max((window.screen.availHeight-M)/2,0).toString(),W=Math.max((window.screen.availWidth-w)/2,0).toString();let ce="";const He=Object.assign(Object.assign({},vp),{width:w.toString(),height:M.toString(),top:O,left:W}),nt=(0,F.z$)().toLowerCase();v&&(ce=Jt(nt)?"_blank":v),We(nt)&&(g=g||"http://localhost",He.scrollbars="yes");const St=Object.entries(He).reduce((gr,[Di,ud])=>`${gr}${Di}=${ud},`,"");if(function ni(_=(0,F.z$)()){var g;return $t(_)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(nt)&&"_self"!==ce)return function Mh(_,g){const v=document.createElement("a");v.href=_,v.target=g;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(w)}(g||"",ce),new Au(null);const Dt=window.open(g||"",ce,St);j(Dt,_,"popup-blocked");try{Dt.focus()}catch{}return new Au(Dt)}(g,ce,tl())})()}_openRedirect(g,v,w,M){var O=this;return(0,h.Z)(function*(){return yield O._originValidation(g),function Li(_){zn().location.href=_}(Ss(g,v,w,Fe(),M)),new Promise(()=>{})})()}_initialize(g){const v=g._key();if(this.eventManagers[v]){const{manager:M,promise:O}=this.eventManagers[v];return M?Promise.resolve(M):(Z(O,"If manager is not set, promise should be"),O)}const w=this.initAndGetManager(g);return this.eventManagers[v]={promise:w},w.catch(()=>{delete this.eventManagers[v]}),w}initAndGetManager(g){var v=this;return(0,h.Z)(function*(){const w=yield function Iu(_){return Cu.apply(this,arguments)}(g),M=new ws(g);return w.register("authEvent",O=>(j(O?.authEvent,g,"invalid-auth-event"),{status:M.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[g._key()]={manager:M},v.iframes[g._key()]=w,M})()}_isIframeWebStorageSupported(g,v){this.iframes[g._key()].send(Nh,{type:Nh},M=>{var O;const W=null===(O=M?.[0])||void 0===O?void 0:O[Nh];void 0!==W&&v(!!W),Me(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Qc(_){return cm.apply(this,arguments)}(g)),this.originValidationPromises[v]}get _shouldInitProactively(){return po()||gt()||$t()}}),this.cordovaResolver=ie(class Hh{constructor(){this._redirectPersistence=Yi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ot,this._overrideRedirectResult=fa}_initialize(g){var v=this;return(0,h.Z)(function*(){const w=g._key();let M=v.eventManagers.get(w);return M||(M=new Ru(g),v.eventManagers.set(w,M),v.attachCallbackListeners(g,M)),M})()}_openPopup(g){Me(g,"operation-not-supported-in-this-environment")}_openRedirect(g,v,w,M){var O=this;return(0,h.Z)(function*(){!function bp(_){var g,v,w,M,O,W,ce,He,nt,St;const Dt=ga();j("function"==typeof(null===(g=Dt?.universalLinks)||void 0===g?void 0:g.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(typeof(null===(v=Dt?.BuildInfo)||void 0===v?void 0:v.packageName)<"u",_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j("function"==typeof(null===(O=null===(M=null===(w=Dt?.cordova)||void 0===w?void 0:w.plugins)||void 0===M?void 0:M.browsertab)||void 0===O?void 0:O.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(He=null===(ce=null===(W=Dt?.cordova)||void 0===W?void 0:W.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===He?void 0:He.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(St=null===(nt=Dt?.cordova)||void 0===nt?void 0:nt.InAppBrowser)||void 0===St?void 0:St.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const W=yield O._initialize(g);yield W.initialized(),W.resetRedirect(),function cl(){hr.clear()}(),yield O._originValidation(g);const ce=function _m(_,g,v=null){return{type:g,eventId:v,urlResponse:null,sessionId:Uh(),postBody:null,tenantId:_.tenantId,error:Ee(_,"no-auth-event")}}(g,w,M);yield function Em(_,g){return Oo()._set(ed(_),g)}(g,ce);const He=yield function Po(_,g,v){return ma.apply(this,arguments)}(g,ce,v),nt=yield function Vh(_){const{cordova:g}=ga();return new Promise(v=>{g.plugins.browsertab.isAvailable(w=>{let M=null;w?g.plugins.browsertab.openUrl(_):M=g.InAppBrowser.open(_,function yr(_=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),v(M)})})}(He);return function qy(_,g,v){return ym.apply(this,arguments)}(g,W,nt)})()}_isIframeWebStorageSupported(g,v){throw new Error("Method not implemented.")}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Fh(_){return Lh.apply(this,arguments)}(g)),this.originValidationPromises[v]}attachCallbackListeners(g,v){const{universalLinks:w,handleOpenURL:M,BuildInfo:O}=ga(),W=setTimeout((0,h.Z)(function*(){yield Dp(g),v.onEvent(Sp())}),500),ce=function(){var St=(0,h.Z)(function*(Dt){clearTimeout(W);const gr=yield Dp(g);let Di=null;gr&&Dt?.url&&(Di=function wm(_,g){var v,w;const M=function wn(_){const g=Nu(_),v=g.link?decodeURIComponent(g.link):void 0,w=Nu(v).link,M=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Nu(M).link||M||w||v||_}(g);if(M.includes("/__/auth/callback")){const O=Nu(M),W=O.firebaseError?function Zy(_){try{return JSON.parse(_)}catch{return null}}(decodeURIComponent(O.firebaseError)):null,ce=null===(w=null===(v=W?.code)||void 0===v?void 0:v.split("auth/"))||void 0===w?void 0:w[1],He=ce?Ee(ce):null;return He?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:He,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:M,postBody:null}}return null}(gr,Dt.url)),v.onEvent(Di||Sp())});return function(gr){return St.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,ce);const He=M,nt=`${O.packageName.toLowerCase()}://`;ga().handleOpenURL=function(){var St=(0,h.Z)(function*(Dt){if(Dt.toLowerCase().startsWith(nt)&&ce({url:Dt}),"function"==typeof He)try{He(Dt)}catch(gr){console.error(gr)}});return function(Dt){return St.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Yi,this._completeRedirectFn=ot,this._overrideRedirectResult=fa}_initialize(g){var v=this;return(0,h.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,v,w,M){var O=this;return(0,h.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(g,v,w,M)})()}_openRedirect(g,v,w,M){var O=this;return(0,h.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(g,v,w,M)})()}_isIframeWebStorageSupported(g,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,v)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return rd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ya(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,h.Z)(function*(){if(g.underlyingResolver)return;const v=yield function Ib(){return id.apply(this,arguments)}();g.underlyingResolver=v?g.cordovaResolver:g.browserResolver})()}}function od(_){return _.unwrap()}function Ky(_){return Wh(_)}function Wh(_){const{_tokenResponse:g}=_ instanceof F.ZR?_.customData:_;if(!g)return null;if(!(_ instanceof F.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return nr.credentialFromResult(_);const v=g.providerId;if(!v||"password"===v)return null;let w;switch(v){case"google.com":w=Zl;break;case"facebook.com":w=$a;break;case"github.com":w=Pc;break;case"twitter.com":w=ri;break;default:const{oauthIdToken:M,oauthAccessToken:O,oauthTokenSecret:W,pendingToken:ce,nonce:He}=g;return O||W||M||ce?ce?v.startsWith("saml.")?yo._create(v,ce):cs._fromParams({providerId:v,signInMethod:v,pendingToken:ce,idToken:M,accessToken:O}):new vo(v).credential({idToken:M,accessToken:O,rawNonce:He}):null}return _ instanceof F.ZR?w.credentialFromError(_):w.credentialFromResult(_)}function br(_,g){return g.catch(v=>{throw v instanceof F.ZR&&function Im(_,g){var v,w;const M=null===(v=g.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=g)||void 0===w?void 0:w.code))g.resolver=new Zh(_,function Hn(_,g){var v;const w=(0,F.m9)(_),M=g;return j(g.customData.operationType,w,"argument-error"),j(null===(v=M.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,w,"argument-error"),hu._fromError(w,M)}(_,g));else if(M){const O=Wh(g),W=g;O&&(W.credential=O,W.tenantId=M.tenantId||void 0,W.email=M.email||void 0,W.phoneNumber=M.phoneNumber||void 0)}}(_,v),v}).then(v=>{const M=v.user;return{operationType:v.operationType,credential:Ky(v),additionalUserInfo:cu(v),user:Ji.getOrCreate(M)}})}function Fo(_,g){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,h.Z)(function*(_,g){const v=yield g;return{verificationId:v.verificationId,confirm:w=>br(_,v.confirm(w))}})).apply(this,arguments)}class Zh{constructor(g,v){this.resolver=v,this.auth=function Tp(_){return _.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return br(od(this.auth),this.resolver.resolveSignIn(g))}}class Ji{constructor(g){this._delegate=g,this.multiFactor=function ta(_){const g=(0,F.m9)(_);return To.has(g)||To.set(g,fp._fromUser(g)),To.get(g)}(g)}static getOrCreate(g){return Ji.USER_MAP.has(g)||Ji.USER_MAP.set(g,new Ji(g)),Ji.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var v=this;return(0,h.Z)(function*(){return br(v.auth,eu(v._delegate,g))})()}linkWithPhoneNumber(g,v){var w=this;return(0,h.Z)(function*(){return Fo(w.auth,function cr(_,g,v){return tt.apply(this,arguments)}(w._delegate,g,v))})()}linkWithPopup(g){var v=this;return(0,h.Z)(function*(){return br(v.auth,function Yc(_,g,v){return Ei.apply(this,arguments)}(v._delegate,g,pr))})()}linkWithRedirect(g){var v=this;return(0,h.Z)(function*(){return yield sd(Cn(v.auth)),function X(_,g,v){return function le(_,g,v){return Te.apply(this,arguments)}(_,g,v)}(v._delegate,g,pr)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var v=this;return(0,h.Z)(function*(){return br(v.auth,tu(v._delegate,g))})()}reauthenticateWithPhoneNumber(g,v){return Fo(this.auth,function dr(_,g,v){return Qi.apply(this,arguments)}(this._delegate,g,v))}reauthenticateWithPopup(g){return br(this.auth,function _e(_,g,v){return to.apply(this,arguments)}(this._delegate,g,pr))}reauthenticateWithRedirect(g){var v=this;return(0,h.Z)(function*(){return yield sd(Cn(v.auth)),function C(_,g,v){return function R(_,g,v){return U.apply(this,arguments)}(_,g,v)}(v._delegate,g,pr)})()}sendEmailVerification(g){return function Bc(_,g){return Ya.apply(this,arguments)}(this._delegate,g)}unlink(g){var v=this;return(0,h.Z)(function*(){return yield function Gr(_,g){return Yl.apply(this,arguments)}(v._delegate,g),v})()}updateEmail(g){return function ph(_,g){return bo((0,F.m9)(_),g,null)}(this._delegate,g)}updatePassword(g){return function wo(_,g){return bo((0,F.m9)(_),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function zr(_,g){return ca.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function $c(_,g){return Gc.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,v){return function Hc(_,g,v){return au.apply(this,arguments)}(this._delegate,g,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ji.USER_MAP=new WeakMap;const _a=j;let Mn=(()=>{class _{constructor(v,w){if(this.app=v,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=v.options;_a(M,"invalid-api-key",{appName:v.name}),_a(M,"invalid-api-key",{appName:v.name});const O=typeof window<"u"?pr:void 0;this._delegate=w.initialize({options:{persistence:ad(M,v.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(De),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ji.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,w){!function Gl(_,g,v){const w=Cn(_);j(w._canInitEmulator,w,"emulator-config-failed"),j(/^https?:\/\//.test(g),w,"invalid-emulator-scheme");const M=!!v?.disableWarnings,O=Wi(g),{host:W,port:ce}=function er(_){const g=Wi(_),v=/(\/\/)?([^?#/]+)/.exec(_.substr(g.length));if(!v)return{host:"",port:null};const w=v[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(w);if(M){const O=M[1];return{host:O,port:js(w.substr(O.length+1))}}{const[O,W]=w.split(":");return{host:O,port:js(W)}}}(g);w.config.emulator={url:`${O}//${W}${null===ce?"":`:${ce}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:W,port:ce,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function $s(){function _(){const g=document.createElement("p"),v=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,v,w)}applyActionCode(v){return function yi(_,g){return za.apply(this,arguments)}(this._delegate,v)}checkActionCode(v){return qa(this._delegate,v)}confirmPasswordReset(v,w){return function su(_,g,v){return Xo.apply(this,arguments)}(this._delegate,v,w)}createUserWithEmailAndPassword(v,w){var M=this;return(0,h.Z)(function*(){return br(M._delegate,function Wa(_,g,v){return Bn.apply(this,arguments)}(M._delegate,v,w))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return function ou(_,g){return Ka.apply(this,arguments)}(this._delegate,v)}isSignInWithEmailLink(v){return function ms(_,g){return"EMAIL_SIGNIN"===Wl.parseLink(g)?.operation}(0,v)}getRedirectResult(){var v=this;return(0,h.Z)(function*(){_a(va(),v._delegate,"operation-not-supported-in-this-environment");const w=yield function Ge(_,g){return yt.apply(this,arguments)}(v._delegate,pr);return w?br(v._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function ui(_,g){Cn(_)._logFramework(g)}(this._delegate,v)}onAuthStateChanged(v,w,M){const{next:O,error:W,complete:ce}=Fu(v,w,M);return this._delegate.onAuthStateChanged(O,W,ce)}onIdTokenChanged(v,w,M){const{next:O,error:W,complete:ce}=Fu(v,w,M);return this._delegate.onIdTokenChanged(O,W,ce)}sendSignInLinkToEmail(v,w){return function Vc(_,g,v){return Eo.apply(this,arguments)}(this._delegate,v,w)}sendPasswordResetEmail(v,w){return function iu(_,g,v){return Un.apply(this,arguments)}(this._delegate,v,w||void 0)}setPersistence(v){var w=this;return(0,h.Z)(function*(){let M;switch(function Sm(_,g){vl(Object.values(qr).includes(g),_,"invalid-persistence-type"),(0,F.b$)()?vl(g!==qr.SESSION,_,"unsupported-persistence-type"):(0,F.UG)()?vl(g===qr.NONE,_,"unsupported-persistence-type"):ml()?vl(g===qr.NONE||g===qr.LOCAL&&(0,F.hl)(),_,"unsupported-persistence-type"):vl(g===qr.NONE||qh(),_,"unsupported-persistence-type")}(w._delegate,v),v){case qr.SESSION:M=Yi;break;case qr.LOCAL:M=(yield ie(ra)._isAvailable())?ra:Xa;break;case qr.NONE:M=B;break;default:return Me("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return br(this._delegate,function up(_){return Vn.apply(this,arguments)}(this._delegate))}signInWithCredential(v){return br(this._delegate,Pn(this._delegate,v))}signInWithCustomToken(v){return br(this._delegate,function kc(_,g){return Ga.apply(this,arguments)}(this._delegate,v))}signInWithEmailAndPassword(v,w){return br(this._delegate,function Ki(_,g,v){return Pn((0,F.m9)(_),Zi.credential(g,v))}(this._delegate,v,w))}signInWithEmailLink(v,w){return br(this._delegate,function im(_,g,v){return Za.apply(this,arguments)}(this._delegate,v,w))}signInWithPhoneNumber(v,w){return Fo(this._delegate,function _s(_,g,v){return pn.apply(this,arguments)}(this._delegate,v,w))}signInWithPopup(v){var w=this;return(0,h.Z)(function*(){return _a(va(),w._delegate,"operation-not-supported-in-this-environment"),br(w._delegate,function Th(_,g,v){return ll.apply(this,arguments)}(w._delegate,v,pr))})()}signInWithRedirect(v){var w=this;return(0,h.Z)(function*(){return _a(va(),w._delegate,"operation-not-supported-in-this-environment"),yield sd(w._delegate),function qn(_,g,v){return function gp(_,g,v){return T.apply(this,arguments)}(_,g,v)}(w._delegate,v,pr)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return function Lc(_,g){return fh.apply(this,arguments)}(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=qr,_})();function Fu(_,g,v){let w=_;"function"!=typeof _&&({next:w,error:g,complete:v}=_);const M=w;return{next:W=>M(W&&Ji.getOrCreate(W)),error:g,complete:v}}function ad(_,g){const v=function Tm(_,g){const v=yl();if(!v)return[];const w=K(ko,_,g);switch(v.getItem(w)){case qr.NONE:return[B];case qr.LOCAL:return[ra,Yi];case qr.SESSION:return[Yi];default:return[]}}(_,g);if(typeof self<"u"&&!v.includes(ra)&&v.push(ra),typeof window<"u")for(const w of[Xa,Yi])v.includes(w)||v.push(w);return v.includes(B)||v.push(B),v}class Ea{constructor(){this.providerId="phone",this._delegate=new nr(od(te.Z.auth()))}static credential(g,v){return nr.credential(g,v)}verifyPhoneNumber(g,v){return this._delegate.verifyPhoneNumber(g,v)}unwrap(){return this._delegate}}Ea.PHONE_SIGN_IN_METHOD=nr.PHONE_SIGN_IN_METHOD,Ea.PROVIDER_ID=nr.PROVIDER_ID;const Cb=j;class Cm{constructor(g,v,w=te.Z.app()){var M;Cb(null===(M=w.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new wr(g,v,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Yy(_){_.INTERNAL.registerComponent(new ue.wA("auth-compat",g=>{const v=g.getProvider("app-compat").getImmediate(),w=g.getProvider("auth");return new Mn(v,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Zi,FacebookAuthProvider:$a,GithubAuthProvider:Pc,GoogleAuthProvider:Zl,OAuthProvider:vo,SAMLAuthProvider:mi,PhoneAuthProvider:Ea,PhoneMultiFactorGenerator:fl,RecaptchaVerifier:Cm,TwitterAuthProvider:ri,Auth:Mn,AuthCredential:Mr,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.23")}(te.Z)},9751:(pt,Ae,V)=>{V.d(Ae,{y:()=>fe});var h=V(2961),te=V(727),F=V(8822),ae=V(9635),se=V(2416),he=V(576),ue=V(2806);let fe=(()=>{class Q{constructor(xe){xe&&(this._subscribe=xe)}lift(xe){const De=new Q;return De.source=this,De.operator=xe,De}subscribe(xe,De,at){const ye=function G(Q){return Q&&Q instanceof h.Lv||function $(Q){return Q&&(0,he.m)(Q.next)&&(0,he.m)(Q.error)&&(0,he.m)(Q.complete)}(Q)&&(0,te.Nn)(Q)}(xe)?xe:new h.Hp(xe,De,at);return(0,ue.x)(()=>{const{operator:ge,source:rt}=this;ye.add(ge?ge.call(ye,rt):rt?this._subscribe(ye):this._trySubscribe(ye))}),ye}_trySubscribe(xe){try{return this._subscribe(xe)}catch(De){xe.error(De)}}forEach(xe,De){return new(De=pe(De))((at,ye)=>{const ge=new h.Hp({next:rt=>{try{xe(rt)}catch(ht){ye(ht),ge.unsubscribe()}},error:ye,complete:at});this.subscribe(ge)})}_subscribe(xe){var De;return null===(De=this.source)||void 0===De?void 0:De.subscribe(xe)}[F.L](){return this}pipe(...xe){return(0,ae.U)(xe)(this)}toPromise(xe){return new(xe=pe(xe))((De,at)=>{let ye;this.subscribe(ge=>ye=ge,ge=>at(ge),()=>De(ye))})}}return Q.create=Be=>new Q(Be),Q})();function pe(Q){var Be;return null!==(Be=Q??se.v.Promise)&&void 0!==Be?Be:Promise}},7579:(pt,Ae,V)=>{V.d(Ae,{x:()=>ue});var h=V(9751),te=V(727);const ae=(0,V(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=V(8737),he=V(2806);let ue=(()=>{class pe extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const Q=new fe(this,this);return Q.operator=G,Q}_throwIfClosed(){if(this.closed)throw new ae}next(G){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(G)}})}error(G){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:Q}=this;for(;Q.length;)Q.shift().error(G)}})}complete(){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:Q,isStopped:Be,observers:xe}=this;return Q||Be?te.Lc:(this.currentObservers=null,xe.push(G),new te.w0(()=>{this.currentObservers=null,(0,se.P)(xe,G)}))}_checkFinalizedStatuses(G){const{hasError:Q,thrownError:Be,isStopped:xe}=this;Q?G.error(Be):xe&&G.complete()}asObservable(){const G=new h.y;return G.source=this,G}}return pe.create=($,G)=>new fe($,G),pe})();class fe extends ue{constructor($,G){super(),this.destination=$,this.source=G}next($){var G,Q;null===(Q=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===Q||Q.call(G,$)}error($){var G,Q;null===(Q=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===Q||Q.call(G,$)}complete(){var $,G;null===(G=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===G||G.call($)}_subscribe($){var G,Q;return null!==(Q=null===(G=this.source)||void 0===G?void 0:G.subscribe($))&&void 0!==Q?Q:te.Lc}}},2961:(pt,Ae,V)=>{V.d(Ae,{Hp:()=>at,Lv:()=>Q});var h=V(576),te=V(727),F=V(2416),ae=V(7849);function se(){}const he=pe("C",void 0,void 0);function pe(Me,Ee,Se){return{kind:Me,value:Ee,error:Se}}var $=V(3410),G=V(2806);class Q extends te.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,te.Nn)(Ee)&&Ee.add(this)):this.destination=ht}static create(Ee,Se,$e){return new at(Ee,Se,$e)}next(Ee){this.isStopped?rt(function fe(Me){return pe("N",Me,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?rt(function ue(Me){return pe("E",void 0,Me)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?rt(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function xe(Me,Ee){return Be.call(Me,Ee)}class De{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:Se}=this;if(Se.next)try{Se.next(Ee)}catch($e){ye($e)}}error(Ee){const{partialObserver:Se}=this;if(Se.error)try{Se.error(Ee)}catch($e){ye($e)}else ye(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(Se){ye(Se)}}}class at extends Q{constructor(Ee,Se,$e){let ze;if(super(),(0,h.m)(Ee)||!Ee)ze={next:Ee??void 0,error:Se??void 0,complete:$e??void 0};else{let j;this&&F.v.useDeprecatedNextContext?(j=Object.create(Ee),j.unsubscribe=()=>this.unsubscribe(),ze={next:Ee.next&&xe(Ee.next,j),error:Ee.error&&xe(Ee.error,j),complete:Ee.complete&&xe(Ee.complete,j)}):ze=Ee}this.destination=new De(ze)}}function ye(Me){F.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Me):(0,ae.h)(Me)}function rt(Me,Ee){const{onStoppedNotification:Se}=F.v;Se&&$.z.setTimeout(()=>Se(Me,Ee))}const ht={closed:!0,next:se,error:function ge(Me){throw Me},complete:se}},727:(pt,Ae,V)=>{V.d(Ae,{Lc:()=>he,w0:()=>se,Nn:()=>ue});var h=V(576);const F=(0,V(3888).d)(pe=>function(G){pe(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((Q,Be)=>`${Be+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ae=V(8737);class se{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const xe of G)xe.remove(this);else G.remove(this);const{initialTeardown:Q}=this;if((0,h.m)(Q))try{Q()}catch(xe){$=xe instanceof F?xe.errors:[xe]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const xe of Be)try{fe(xe)}catch(De){$=$??[],De instanceof F?$=[...$,...De.errors]:$.push(De)}}if($)throw new F($)}}add($){var G;if($&&$!==this)if(this.closed)fe($);else{if($ instanceof se){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push($)}}_hasParent($){const{_parentage:G}=this;return G===$||Array.isArray(G)&&G.includes($)}_addParent($){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push($),G):G?[G,$]:$}_removeParent($){const{_parentage:G}=this;G===$?this._parentage=null:Array.isArray(G)&&(0,ae.P)(G,$)}remove($){const{_finalizers:G}=this;G&&(0,ae.P)(G,$),$ instanceof se&&$._removeParent(this)}}se.EMPTY=(()=>{const pe=new se;return pe.closed=!0,pe})();const he=se.EMPTY;function ue(pe){return pe instanceof se||pe&&"closed"in pe&&(0,h.m)(pe.remove)&&(0,h.m)(pe.add)&&(0,h.m)(pe.unsubscribe)}function fe(pe){(0,h.m)(pe)?pe():pe.unsubscribe()}},2416:(pt,Ae,V)=>{V.d(Ae,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(pt,Ae,V)=>{V.d(Ae,{E:()=>te});const te=new(V(9751).y)(se=>se.complete())},8996:(pt,Ae,V)=>{V.d(Ae,{D:()=>Ee});var h=V(8421),te=V(5363),F=V(9468),he=V(9751),fe=V(2202),pe=V(576),$=V(9672);function Q(Se,$e){if(!Se)throw new Error("Iterable cannot be null");return new he.y(ze=>{(0,$.f)(ze,$e,()=>{const j=Se[Symbol.asyncIterator]();(0,$.f)(ze,$e,()=>{j.next().then(ve=>{ve.done?ze.complete():ze.next(ve.value)})},0,!0)})})}var Be=V(3670),xe=V(8239),De=V(1144),at=V(6495),ye=V(2206),ge=V(4532),rt=V(3260);function Ee(Se,$e){return $e?function Me(Se,$e){if(null!=Se){if((0,Be.c)(Se))return function ae(Se,$e){return(0,h.Xf)(Se).pipe((0,F.R)($e),(0,te.Q)($e))}(Se,$e);if((0,De.z)(Se))return function ue(Se,$e){return new he.y(ze=>{let j=0;return $e.schedule(function(){j===Se.length?ze.complete():(ze.next(Se[j++]),ze.closed||this.schedule())})})}(Se,$e);if((0,xe.t)(Se))return function se(Se,$e){return(0,h.Xf)(Se).pipe((0,F.R)($e),(0,te.Q)($e))}(Se,$e);if((0,ye.D)(Se))return Q(Se,$e);if((0,at.T)(Se))return function G(Se,$e){return new he.y(ze=>{let j;return(0,$.f)(ze,$e,()=>{j=Se[fe.h](),(0,$.f)(ze,$e,()=>{let ve,Z;try{({value:ve,done:Z}=j.next())}catch(ee){return void ze.error(ee)}Z?ze.complete():ze.next(ve)},0,!0)}),()=>(0,pe.m)(j?.return)&&j.return()})}(Se,$e);if((0,rt.L)(Se))return function ht(Se,$e){return Q((0,rt.Q)(Se),$e)}(Se,$e)}throw(0,ge.z)(Se)}(Se,$e):(0,h.Xf)(Se)}},8421:(pt,Ae,V)=>{V.d(Ae,{Xf:()=>Be});var h=V(655),te=V(1144),F=V(8239),ae=V(9751),se=V(3670),he=V(2206),ue=V(4532),fe=V(6495),pe=V(3260),$=V(576),G=V(7849),Q=V(8822);function Be(Me){if(Me instanceof ae.y)return Me;if(null!=Me){if((0,se.c)(Me))return function xe(Me){return new ae.y(Ee=>{const Se=Me[Q.L]();if((0,$.m)(Se.subscribe))return Se.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,te.z)(Me))return function De(Me){return new ae.y(Ee=>{for(let Se=0;Se<Me.length&&!Ee.closed;Se++)Ee.next(Me[Se]);Ee.complete()})}(Me);if((0,F.t)(Me))return function at(Me){return new ae.y(Ee=>{Me.then(Se=>{Ee.closed||(Ee.next(Se),Ee.complete())},Se=>Ee.error(Se)).then(null,G.h)})}(Me);if((0,he.D)(Me))return ge(Me);if((0,fe.T)(Me))return function ye(Me){return new ae.y(Ee=>{for(const Se of Me)if(Ee.next(Se),Ee.closed)return;Ee.complete()})}(Me);if((0,pe.L)(Me))return function rt(Me){return ge((0,pe.Q)(Me))}(Me)}throw(0,ue.z)(Me)}function ge(Me){return new ae.y(Ee=>{(function ht(Me,Ee){var Se,$e,ze,j;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Se=(0,h.KL)(Me);!($e=yield Se.next()).done;)if(Ee.next($e.value),Ee.closed)return}catch(ve){ze={error:ve}}finally{try{$e&&!$e.done&&(j=Se.return)&&(yield j.call(Se))}finally{if(ze)throw ze.error}}Ee.complete()})})(Me,Ee).catch(Se=>Ee.error(Se))})}},6451:(pt,Ae,V)=>{V.d(Ae,{T:()=>he});var h=V(8189),te=V(8421),F=V(515),ae=V(7669),se=V(8996);function he(...ue){const fe=(0,ae.yG)(ue),pe=(0,ae._6)(ue,1/0),$=ue;return $.length?1===$.length?(0,te.Xf)($[0]):(0,h.J)(pe)((0,se.D)($,fe)):F.E}},5403:(pt,Ae,V)=>{V.d(Ae,{x:()=>te});var h=V(2961);function te(ae,se,he,ue,fe){return new F(ae,se,he,ue,fe)}class F extends h.Lv{constructor(se,he,ue,fe,pe,$){super(se),this.onFinalize=pe,this.shouldUnsubscribe=$,this._next=he?function(G){try{he(G)}catch(Q){se.error(Q)}}:super._next,this._error=fe?function(G){try{fe(G)}catch(Q){se.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(G){se.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:he}=this;super.unsubscribe(),!he&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(pt,Ae,V)=>{V.d(Ae,{U:()=>F});var h=V(4482),te=V(5403);function F(ae,se){return(0,h.e)((he,ue)=>{let fe=0;he.subscribe((0,te.x)(ue,pe=>{ue.next(ae.call(se,pe,fe++))}))})}},8189:(pt,Ae,V)=>{V.d(Ae,{J:()=>F});var h=V(5577),te=V(4671);function F(ae=1/0){return(0,h.z)(te.y,ae)}},5577:(pt,Ae,V)=>{V.d(Ae,{z:()=>fe});var h=V(4004),te=V(8421),F=V(4482),ae=V(9672),se=V(5403),ue=V(576);function fe(pe,$,G=1/0){return(0,ue.m)($)?fe((Q,Be)=>(0,h.U)((xe,De)=>$(Q,xe,Be,De))((0,te.Xf)(pe(Q,Be))),G):("number"==typeof $&&(G=$),(0,F.e)((Q,Be)=>function he(pe,$,G,Q,Be,xe,De,at){const ye=[];let ge=0,rt=0,ht=!1;const Me=()=>{ht&&!ye.length&&!ge&&$.complete()},Ee=$e=>ge<Q?Se($e):ye.push($e),Se=$e=>{xe&&$.next($e),ge++;let ze=!1;(0,te.Xf)(G($e,rt++)).subscribe((0,se.x)($,j=>{Be?.(j),xe?Ee(j):$.next(j)},()=>{ze=!0},void 0,()=>{if(ze)try{for(ge--;ye.length&&ge<Q;){const j=ye.shift();De?(0,ae.f)($,De,()=>Se(j)):Se(j)}Me()}catch(j){$.error(j)}}))};return pe.subscribe((0,se.x)($,Ee,()=>{ht=!0,Me()})),()=>{at?.()}}(Q,Be,pe,G)))}},5363:(pt,Ae,V)=>{V.d(Ae,{Q:()=>ae});var h=V(9672),te=V(4482),F=V(5403);function ae(se,he=0){return(0,te.e)((ue,fe)=>{ue.subscribe((0,F.x)(fe,pe=>(0,h.f)(fe,se,()=>fe.next(pe),he),()=>(0,h.f)(fe,se,()=>fe.complete(),he),pe=>(0,h.f)(fe,se,()=>fe.error(pe),he)))})}},3099:(pt,Ae,V)=>{V.d(Ae,{B:()=>se});var h=V(8421),te=V(7579),F=V(2961),ae=V(4482);function se(ue={}){const{connector:fe=(()=>new te.x),resetOnError:pe=!0,resetOnComplete:$=!0,resetOnRefCountZero:G=!0}=ue;return Q=>{let Be,xe,De,at=0,ye=!1,ge=!1;const rt=()=>{xe?.unsubscribe(),xe=void 0},ht=()=>{rt(),Be=De=void 0,ye=ge=!1},Me=()=>{const Ee=Be;ht(),Ee?.unsubscribe()};return(0,ae.e)((Ee,Se)=>{at++,!ge&&!ye&&rt();const $e=De=De??fe();Se.add(()=>{at--,0===at&&!ge&&!ye&&(xe=he(Me,G))}),$e.subscribe(Se),!Be&&at>0&&(Be=new F.Hp({next:ze=>$e.next(ze),error:ze=>{ge=!0,rt(),xe=he(ht,pe,ze),$e.error(ze)},complete:()=>{ye=!0,rt(),xe=he(ht,$),$e.complete()}}),(0,h.Xf)(Ee).subscribe(Be))})(Q)}}function he(ue,fe,...pe){if(!0===fe)return void ue();if(!1===fe)return;const $=new F.Hp({next:()=>{$.unsubscribe(),ue()}});return fe(...pe).subscribe($)}},9468:(pt,Ae,V)=>{V.d(Ae,{R:()=>te});var h=V(4482);function te(F,ae=0){return(0,h.e)((se,he)=>{he.add(F.schedule(()=>se.subscribe(he),ae))})}},8505:(pt,Ae,V)=>{V.d(Ae,{b:()=>se});var h=V(576),te=V(4482),F=V(5403),ae=V(4671);function se(he,ue,fe){const pe=(0,h.m)(he)||ue||fe?{next:he,error:ue,complete:fe}:he;return pe?(0,te.e)(($,G)=>{var Q;null===(Q=pe.subscribe)||void 0===Q||Q.call(pe);let Be=!0;$.subscribe((0,F.x)(G,xe=>{var De;null===(De=pe.next)||void 0===De||De.call(pe,xe),G.next(xe)},()=>{var xe;Be=!1,null===(xe=pe.complete)||void 0===xe||xe.call(pe),G.complete()},xe=>{var De;Be=!1,null===(De=pe.error)||void 0===De||De.call(pe,xe),G.error(xe)},()=>{var xe,De;Be&&(null===(xe=pe.unsubscribe)||void 0===xe||xe.call(pe)),null===(De=pe.finalize)||void 0===De||De.call(pe)}))}):ae.y}},4408:(pt,Ae,V)=>{V.d(Ae,{o:()=>se});var h=V(727);class te extends h.w0{constructor(ue,fe){super()}schedule(ue,fe=0){return this}}const F={setInterval(he,ue,...fe){const{delegate:pe}=F;return pe?.setInterval?pe.setInterval(he,ue,...fe):setInterval(he,ue,...fe)},clearInterval(he){const{delegate:ue}=F;return(ue?.clearInterval||clearInterval)(he)},delegate:void 0};var ae=V(8737);class se extends te{constructor(ue,fe){super(ue,fe),this.scheduler=ue,this.work=fe,this.pending=!1}schedule(ue,fe=0){var pe;if(this.closed)return this;this.state=ue;const $=this.id,G=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(G,$,fe)),this.pending=!0,this.delay=fe,this.id=null!==(pe=this.id)&&void 0!==pe?pe:this.requestAsyncId(G,this.id,fe),this}requestAsyncId(ue,fe,pe=0){return F.setInterval(ue.flush.bind(ue,this),pe)}recycleAsyncId(ue,fe,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return fe;null!=fe&&F.clearInterval(fe)}execute(ue,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(ue,fe);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,fe){let $,pe=!1;try{this.work(ue)}catch(G){pe=!0,$=G||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ue,scheduler:fe}=this,{actions:pe}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(pe,this),null!=ue&&(this.id=this.recycleAsyncId(fe,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(pt,Ae,V)=>{V.d(Ae,{v:()=>F});var h=V(6063);class te{constructor(se,he=te.now){this.schedulerActionCtor=se,this.now=he}schedule(se,he=0,ue){return new this.schedulerActionCtor(this,se).schedule(ue,he)}}te.now=h.l.now;class F extends te{constructor(se,he=te.now){super(se,he),this.actions=[],this._active=!1}flush(se){const{actions:he}=this;if(this._active)return void he.push(se);let ue;this._active=!0;do{if(ue=se.execute(se.state,se.delay))break}while(se=he.shift());if(this._active=!1,ue){for(;se=he.shift();)se.unsubscribe();throw ue}}}},4986:(pt,Ae,V)=>{V.d(Ae,{z:()=>F});var h=V(4408);const F=new(V(7565).v)(h.o)},6063:(pt,Ae,V)=>{V.d(Ae,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(pt,Ae,V)=>{V.d(Ae,{z:()=>h});const h={setTimeout(te,F,...ae){const{delegate:se}=h;return se?.setTimeout?se.setTimeout(te,F,...ae):setTimeout(te,F,...ae)},clearTimeout(te){const{delegate:F}=h;return(F?.clearTimeout||clearTimeout)(te)},delegate:void 0}},2202:(pt,Ae,V)=>{V.d(Ae,{h:()=>te});const te=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pt,Ae,V)=>{V.d(Ae,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(pt,Ae,V)=>{V.d(Ae,{_6:()=>he,jO:()=>ae,yG:()=>se});var h=V(576);function F(ue){return ue[ue.length-1]}function ae(ue){return(0,h.m)(F(ue))?ue.pop():void 0}function se(ue){return function te(ue){return ue&&(0,h.m)(ue.schedule)}(F(ue))?ue.pop():void 0}function he(ue,fe){return"number"==typeof F(ue)?ue.pop():fe}},8737:(pt,Ae,V)=>{function h(te,F){if(te){const ae=te.indexOf(F);0<=ae&&te.splice(ae,1)}}V.d(Ae,{P:()=>h})},3888:(pt,Ae,V)=>{function h(te){const ae=te(se=>{Error.call(se),se.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}V.d(Ae,{d:()=>h})},2806:(pt,Ae,V)=>{V.d(Ae,{O:()=>ae,x:()=>F});var h=V(2416);let te=null;function F(se){if(h.v.useDeprecatedSynchronousErrorHandling){const he=!te;if(he&&(te={errorThrown:!1,error:null}),se(),he){const{errorThrown:ue,error:fe}=te;if(te=null,ue)throw fe}}else se()}function ae(se){h.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=se)}},9672:(pt,Ae,V)=>{function h(te,F,ae,se=0,he=!1){const ue=F.schedule(function(){ae(),he?te.add(this.schedule(null,se)):this.unsubscribe()},se);if(te.add(ue),!he)return ue}V.d(Ae,{f:()=>h})},4671:(pt,Ae,V)=>{function h(te){return te}V.d(Ae,{y:()=>h})},1144:(pt,Ae,V)=>{V.d(Ae,{z:()=>h});const h=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(pt,Ae,V)=>{V.d(Ae,{D:()=>te});var h=V(576);function te(F){return Symbol.asyncIterator&&(0,h.m)(F?.[Symbol.asyncIterator])}},576:(pt,Ae,V)=>{function h(te){return"function"==typeof te}V.d(Ae,{m:()=>h})},3670:(pt,Ae,V)=>{V.d(Ae,{c:()=>F});var h=V(8822),te=V(576);function F(ae){return(0,te.m)(ae[h.L])}},6495:(pt,Ae,V)=>{V.d(Ae,{T:()=>F});var h=V(2202),te=V(576);function F(ae){return(0,te.m)(ae?.[h.h])}},8239:(pt,Ae,V)=>{V.d(Ae,{t:()=>te});var h=V(576);function te(F){return(0,h.m)(F?.then)}},3260:(pt,Ae,V)=>{V.d(Ae,{L:()=>ae,Q:()=>F});var h=V(655),te=V(576);function F(se){return(0,h.FC)(this,arguments,function*(){const ue=se.getReader();try{for(;;){const{value:fe,done:pe}=yield(0,h.qq)(ue.read());if(pe)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(fe)}}finally{ue.releaseLock()}})}function ae(se){return(0,te.m)(se?.getReader)}},4482:(pt,Ae,V)=>{V.d(Ae,{A:()=>te,e:()=>F});var h=V(576);function te(ae){return(0,h.m)(ae?.lift)}function F(ae){return se=>{if(te(se))return se.lift(function(he){try{return ae(he,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(pt,Ae,V)=>{V.d(Ae,{U:()=>F,z:()=>te});var h=V(4671);function te(...ae){return F(ae)}function F(ae){return 0===ae.length?h.y:1===ae.length?ae[0]:function(he){return ae.reduce((ue,fe)=>fe(ue),he)}}},7849:(pt,Ae,V)=>{V.d(Ae,{h:()=>F});var h=V(2416),te=V(3410);function F(ae){te.z.setTimeout(()=>{const{onUnhandledError:se}=h.v;if(!se)throw ae;se(ae)})}},4532:(pt,Ae,V)=>{function h(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Ae,{z:()=>h})},655:(pt,Ae,V)=>{function ae(Z,ee){var ie={};for(var re in Z)Object.prototype.hasOwnProperty.call(Z,re)&&ee.indexOf(re)<0&&(ie[re]=Z[re]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var Ve=0;for(re=Object.getOwnPropertySymbols(Z);Ve<re.length;Ve++)ee.indexOf(re[Ve])<0&&Object.prototype.propertyIsEnumerable.call(Z,re[Ve])&&(ie[re[Ve]]=Z[re[Ve]])}return ie}function fe(Z,ee,ie,re){return new(ie||(ie=Promise))(function(Fe,_t){function nn(fn){try{Qe(re.next(fn))}catch(Sn){_t(Sn)}}function zt(fn){try{Qe(re.throw(fn))}catch(Sn){_t(Sn)}}function Qe(fn){fn.done?Fe(fn.value):function Ve(Fe){return Fe instanceof ie?Fe:new ie(function(_t){_t(Fe)})}(fn.value).then(nn,zt)}Qe((re=re.apply(Z,ee||[])).next())})}function ye(Z){return this instanceof ye?(this.v=Z,this):new ye(Z)}function ge(Z,ee,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ve,re=ie.apply(Z,ee||[]),Fe=[];return Ve={},_t("next"),_t("throw"),_t("return"),Ve[Symbol.asyncIterator]=function(){return this},Ve;function _t(Xt){re[Xt]&&(Ve[Xt]=function(rn){return new Promise(function(Br,Ut){Fe.push([Xt,rn,Br,Ut])>1||nn(Xt,rn)})})}function nn(Xt,rn){try{!function zt(Xt){Xt.value instanceof ye?Promise.resolve(Xt.value.v).then(Qe,fn):Sn(Fe[0][2],Xt)}(re[Xt](rn))}catch(Br){Sn(Fe[0][3],Br)}}function Qe(Xt){nn("next",Xt)}function fn(Xt){nn("throw",Xt)}function Sn(Xt,rn){Xt(rn),Fe.shift(),Fe.length&&nn(Fe[0][0],Fe[0][1])}}function ht(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,ee=Z[Symbol.asyncIterator];return ee?ee.call(Z):(Z=function Q(Z){var ee="function"==typeof Symbol&&Symbol.iterator,ie=ee&&Z[ee],re=0;if(ie)return ie.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&re>=Z.length&&(Z=void 0),{value:Z&&Z[re++],done:!Z}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),ie={},re("next"),re("throw"),re("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function re(Fe){ie[Fe]=Z[Fe]&&function(_t){return new Promise(function(nn,zt){!function Ve(Fe,_t,nn,zt){Promise.resolve(zt).then(function(Qe){Fe({value:Qe,done:nn})},_t)}(nn,zt,(_t=Z[Fe](_t)).done,_t.value)})}}}V.d(Ae,{FC:()=>ge,KL:()=>ht,_T:()=>ae,mG:()=>fe,qq:()=>ye})},4650:(pt,Ae,V)=>{V.d(Ae,{$8M:()=>bu,$Z:()=>Wu,AFp:()=>Zd,AaK:()=>fe,BQk:()=>oc,CHM:()=>ru,CRH:()=>iS,CZH:()=>Yv,CqO:()=>$D,D6c:()=>Mw,EJc:()=>hA,EiD:()=>Oo,EpF:()=>lc,F4k:()=>jD,FYo:()=>M,FiY:()=>Ge,G48:()=>_A,GfV:()=>He,Gpc:()=>G,JOm:()=>wa,JVY:()=>Ph,KtG:()=>iu,L6k:()=>Ep,LAX:()=>xr,LFG:()=>qn,LSH:()=>Hh,Lbi:()=>_S,Lck:()=>BE,MMx:()=>Pv,NdJ:()=>rg,OlP:()=>En,Oqu:()=>oE,PXZ:()=>ry,Q6J:()=>mf,QGY:()=>fv,QP$:()=>Jt,QbO:()=>uA,Qsj:()=>O,R0b:()=>lo,RDi:()=>jy,Rgc:()=>Nf,SBq:()=>g,Sil:()=>fA,Suo:()=>Cg,TTD:()=>hs,TgZ:()=>dv,Tol:()=>t0,Udp:()=>J_,VKq:()=>qE,X6Q:()=>bx,XFs:()=>Xe,Xpm:()=>Ie,Xts:()=>$h,Y36:()=>yd,YKP:()=>z0,YNc:()=>UD,Yjl:()=>be,Yz7:()=>rn,Z0I:()=>us,ZZ4:()=>Cw,_Bn:()=>G0,_UZ:()=>z_,_Vd:()=>ld,_c5:()=>AA,_uU:()=>sE,aQg:()=>$f,c2e:()=>cA,cJS:()=>Ut,cg1:()=>yg,d8E:()=>gg,dDg:()=>mA,dqk:()=>dn,eBb:()=>wp,eFA:()=>IS,ekj:()=>lg,eoX:()=>ny,f3M:()=>T,g9A:()=>yS,h0i:()=>pc,hGG:()=>US,hij:()=>dg,iGM:()=>YC,ifc:()=>ft,ip1:()=>mw,jDz:()=>Ov,kL8:()=>wf,lG2:()=>K,lqb:()=>pr,lri:()=>Vf,mCW:()=>kh,n5z:()=>ys,oAB:()=>Ht,oJD:()=>Nu,oxw:()=>yf,pB0:()=>Lr,q3G:()=>wn,q4F:()=>nt,qLn:()=>Yh,qOj:()=>rv,qZA:()=>ng,qzn:()=>fl,rWj:()=>Ai,sBO:()=>wA,sIi:()=>Jp,s_b:()=>Pf,soG:()=>Xv,tb:()=>kl,tp0:()=>ot,uIk:()=>lv,vHH:()=>De,vpe:()=>Ma,wAp:()=>Tt,xp6:()=>Fp,ynx:()=>hv,z2F:()=>Hf,z3N:()=>Vi,zSh:()=>sd,zs3:()=>zu});var h=V(7579),te=V(727),F=V(9751),ae=V(6451),se=V(3099);function he(o){for(let a in o)if(o[a]===he)return a;throw Error("Could not find renamed property on target object.")}function ue(o,a){for(const l in a)a.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(o[l]=a[l])}function fe(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(fe).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function pe(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const $=he({__forward_ref__:he});function G(o){return o.__forward_ref__=G,o.toString=function(){return fe(this())},o}function Q(o){return Be(o)?o():o}function Be(o){return"function"==typeof o&&o.hasOwnProperty($)&&o.__forward_ref__===G}class De extends Error{constructor(a,l){super(function at(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,l)),this.code=a}}function ye(o){return"string"==typeof o?o:null==o?"":String(o)}function Ee(o,a){throw new De(-201,!1)}function zt(o,a){null==o&&function Qe(o,a,l,c){throw new Error(`ASSERTION ERROR: ${o}`+(null==c?"":` [Expected=> ${l} ${c} ${a} <=Actual]`))}(a,o,null,"!=")}function rn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Ut(o){return{providers:o.providers||[],imports:o.imports||[]}}function gn(o){return Pi(o,Oi)||Pi(o,pi)}function us(o){return null!==gn(o)}function Pi(o,a){return o.hasOwnProperty(a)?o[a]:null}function fo(o){return o&&(o.hasOwnProperty(fi)||o.hasOwnProperty(Ba))?o[fi]:null}const Oi=he({\u0275prov:he}),fi=he({\u0275inj:he}),pi=he({ngInjectableDef:he}),Ba=he({ngInjectorDef:he});var Xe=(()=>((Xe=Xe||{})[Xe.Default=0]="Default",Xe[Xe.Host=1]="Host",Xe[Xe.Self=2]="Self",Xe[Xe.SkipSelf=4]="SkipSelf",Xe[Xe.Optional=8]="Optional",Xe))();let Or;function sr(o){const a=Or;return Or=o,a}function gi(o,a,l){const c=gn(o);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&Xe.Optional?null:void 0!==a?a:void Ee(fe(o))}function Gn(o){return{toString:o}.toString()}var Xn=(()=>((Xn=Xn||{})[Xn.OnPush=0]="OnPush",Xn[Xn.Default=1]="Default",Xn))(),ft=(()=>{return(o=ft||(ft={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",ft;var o})();const dn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ti={},Ft=[],Bs=he({\u0275cmp:he}),an=he({\u0275dir:he}),qi=he({\u0275pipe:he}),ln=he({\u0275mod:he}),or=he({\u0275fac:he}),jr=he({__NG_ELEMENT_ID__:he});let st=0;function Ie(o){return Gn(()=>{const l=!0===o.standalone,c={},f={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Xn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||Ft,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||ft.Emulated,id:"c"+st++,styles:o.styles||Ft,_:null,setInput:null,schemas:o.schemas||null,tView:null},m=o.dependencies,E=o.features;return f.inputs=B(o.inputs,c),f.outputs=B(o.outputs),E&&E.forEach(D=>D(f)),f.directiveDefs=m?()=>("function"==typeof m?m():m).map(Mt).filter(Ct):null,f.pipeDefs=m?()=>("function"==typeof m?m():m).map(gt).filter(Ct):null,f})}function Mt(o){return J(o)||We(o)}function Ct(o){return null!==o}function Ht(o){return Gn(()=>({type:o.type,bootstrap:o.bootstrap||Ft,declarations:o.declarations||Ft,imports:o.imports||Ft,exports:o.exports||Ft,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function B(o,a){if(null==o)return ti;const l={};for(const c in o)if(o.hasOwnProperty(c)){let f=o[c],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),l[f]=c,a&&(a[f]=m)}return l}const K=Ie;function be(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function J(o){return o[Bs]||null}function We(o){return o[an]||null}function gt(o){return o[qi]||null}function Jt(o){const a=J(o)||We(o)||gt(o);return null!==a&&a.standalone}function yn(o,a){const l=o[ln]||null;if(!l&&!0===a)throw new Error(`Type ${fe(o)} does not have '\u0275mod' property.`);return l}function _r(o){return Array.isArray(o)&&"object"==typeof o[1]}function $r(o){return Array.isArray(o)&&!0===o[1]}function ql(o){return 0!=(8&o.flags)}function ja(o){return 2==(2&o.flags)}function Mc(o){return 1==(1&o.flags)}function kr(o){return null!==o.template}function sp(o){return 0!=(256&o[2])}function Zi(o,a){return o.hasOwnProperty(or)?o[or]:null}class ds{constructor(a,l,c){this.previousValue=a,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function hs(){return vo}function vo(o){return o.type.prototype.ngOnChanges&&(o.setInput=Zl),$a}function $a(){const o=ap(this),a=o?.current;if(a){const l=o.previous;if(l===ti)o.previous=a;else for(let c in a)l[c]=a[c];o.current=null,this.ngOnChanges(a)}}function Zl(o,a,l,c){const f=ap(o)||function yo(o,a){return o[Pc]=a}(o,{previous:ti,current:null}),m=f.current||(f.current={}),E=f.previous,D=this.declaredInputs[l],S=E[D];m[D]=new ds(S&&S.currentValue,a,E===ti),o[c]=a}hs.ngInherit=!0;const Pc="__ngSimpleChanges__";function ap(o){return o[Pc]||null}function Vn(o){for(;Array.isArray(o);)o=o[0];return o}function vi(o,a){return Vn(a[o])}function Gr(o,a){return Vn(a[o.index])}function Qo(o,a){return o.data[a]}function Yt(o,a){const l=a[o];return _r(l)?l:l[0]}function _o(o){return 64==(64&o[2])}function Fi(o,a){return null==a?null:o[a]}function Jl(o){o[18]=0}function Pn(o,a){o[5]+=a;let l=o,c=o[3];for(;null!==c&&(1===a&&1===l[5]||-1===a&&0===l[5]);)c[5]+=a,l=c,c=c[3]}const Nt={lFrame:$c(null),bindingsEnabled:!0};function gs(){return Nt.bindingsEnabled}function Ce(){return Nt.lFrame.lView}function Wt(){return Nt.lFrame.tView}function ru(o){return Nt.lFrame.contextLView=o,o[8]}function iu(o){return Nt.lFrame.contextLView=null,o}function Un(){let o=su();for(;null!==o&&64===o.type;)o=o.parent;return o}function su(){return Nt.lFrame.currentTNode}function yi(o,a){const l=Nt.lFrame;l.currentTNode=o,l.isParent=a}function za(){return Nt.lFrame.isParent}function qa(){Nt.lFrame.isParent=!1}function Eo(){return Nt.lFrame.bindingIndex++}function ms(o){const a=Nt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,l}function sm(o,a){const l=Nt.lFrame;l.bindingIndex=l.bindingRootIndex=o,ou(a)}function ou(o){Nt.lFrame.currentDirectiveIndex=o}function Ka(o){const a=Nt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function Bc(){return Nt.lFrame.currentQueryIndex}function Ya(o){Nt.lFrame.currentQueryIndex=o}function Hc(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function au(o,a,l){if(l&Xe.SkipSelf){let f=a,m=o;for(;!(f=f.parent,null!==f||l&Xe.Host||(f=Hc(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;a=f,o=m}const c=Nt.lFrame=jc();return c.currentTNode=a,c.lView=o,!0}function lu(o){const a=jc(),l=o[1];Nt.lFrame=a,a.currentTNode=l.firstChild,a.lView=o,a.tView=l,a.contextLView=o,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function jc(){const o=Nt.lFrame,a=null===o?null:o.child;return null===a?$c(o):a}function $c(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Gc(){const o=Nt.lFrame;return Nt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const ph=Gc;function wo(){const o=Gc();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function ur(){return Nt.lFrame.selectedIndex}function ii(o){Nt.lFrame.selectedIndex=o}function In(){const o=Nt.lFrame;return Qo(o.tView,o.selectedIndex)}function du(o,a){for(let l=a.directiveStart,c=a.directiveEnd;l<c;l++){const m=o.data[l].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:D,ngAfterViewInit:S,ngAfterViewChecked:A,ngOnDestroy:N}=m;E&&(o.contentHooks||(o.contentHooks=[])).push(-l,E),D&&((o.contentHooks||(o.contentHooks=[])).push(l,D),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(l,D)),S&&(o.viewHooks||(o.viewHooks=[])).push(-l,S),A&&((o.viewHooks||(o.viewHooks=[])).push(l,A),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(l,A)),null!=N&&(o.destroyHooks||(o.destroyHooks=[])).push(l,N)}}function Do(o,a,l){ea(o,a,3,l)}function Jo(o,a,l,c){(3&o[2])===l&&ea(o,a,l,c)}function vh(o,a){let l=o[2];(3&l)===a&&(l&=2047,l+=1,o[2]=l)}function ea(o,a,l,c){const m=c??-1,E=a.length-1;let D=0;for(let S=void 0!==c?65535&o[18]:0;S<E;S++)if("number"==typeof a[S+1]){if(D=a[S],null!=c&&D>=c)break}else a[S]<0&&(o[18]+=65536),(D<m||-1==m)&&(yh(o,l,a,S),o[18]=(4294901760&o[18])+S+2),S++}function yh(o,a,l,c){const f=l[c]<0,m=l[c+1],D=o[f?-l[c]:l[c]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{m.call(D)}finally{}}}else try{m.call(D)}finally{}}class Ks{constructor(a,l,c){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function ta(o,a,l){let c=0;for(;c<l.length;){const f=l[c];if("number"==typeof f){if(0!==f)break;c++;const m=l[c++],E=l[c++],D=l[c++];o.setAttribute(a,E,D,m)}else{const m=f,E=l[++c];gu(m)?o.setProperty(a,m,E):o.setAttribute(a,m,E),c++}}return c}function Io(o){return 3===o||4===o||6===o}function gu(o){return 64===o.charCodeAt(0)}function Qa(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let l=-1;for(let c=0;c<a.length;c++){const f=a[c];"number"==typeof f?l=f:0===l||Eh(o,l,f,null,-1===l||2===l?a[++c]:null)}}return o}function Eh(o,a,l,c,f){let m=0,E=o.length;if(-1===a)E=-1;else for(;m<o.length;){const D=o[m++];if("number"==typeof D){if(D===a){E=-1;break}if(D>a){E=m-1;break}}}for(;m<o.length;){const D=o[m];if("number"==typeof D)break;if(D===l){if(null===c)return void(null!==f&&(o[m+1]=f));if(c===o[m+1])return void(o[m+2]=f)}m++,null!==c&&m++,null!==f&&m++}-1!==E&&(o.splice(E,0,a),m=E+1),o.splice(m++,0,l),null!==c&&o.splice(m++,0,c),null!==f&&o.splice(m++,0,f)}function wh(o){return-1!==o}function Er(o){return 32767&o}function Ja(o,a){let l=function Xa(o){return o>>16}(o),c=a;for(;l>0;)c=c[15],l--;return c}let Yi=!0;function el(o){const a=Yi;return Yi=o,a}let zn=0;const Li={};function Co(o,a){const l=vu(o,a);if(-1!==l)return l;const c=a[1];c.firstCreatePass&&(o.injectorIndex=a.length,nl(c.data,o),nl(a,null),nl(c.blueprint,null));const f=yu(o,a),m=o.injectorIndex;if(wh(f)){const E=Er(f),D=Ja(f,a),S=D[1].data;for(let A=0;A<8;A++)a[m+A]=D[E+A]|S[E+A]}return a[m+8]=f,m}function nl(o,a){o.push(0,0,0,0,0,0,0,0,a)}function vu(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function yu(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let l=0,c=null,f=a;for(;null!==f;){if(c=ia(f),null===c)return-1;if(l++,f=f[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function Ys(o,a,l){!function mu(o,a,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(jr)&&(c=l[jr]),null==c&&(c=l[jr]=zn++);const f=255&c;a.data[o+(f>>5)]|=1<<f}(o,a,l)}function Qs(o,a,l){if(l&Xe.Optional||void 0!==o)return o;Ee()}function _u(o,a,l,c){if(l&Xe.Optional&&void 0===c&&(c=null),0==(l&(Xe.Self|Xe.Host))){const f=o[9],m=sr(void 0);try{return f?f.get(a,c,l&Xe.Optional):gi(a,c,l&Xe.Optional)}finally{sr(m)}}return Qs(c,0,l)}function Ao(o,a,l,c=Xe.Default,f){if(null!==o){if(1024&a[2]){const E=function ra(o,a,l,c,f){let m=o,E=a;for(;null!==m&&null!==E&&1024&E[2]&&!(256&E[2]);){const D=rl(m,E,l,c|Xe.Self,Li);if(D!==Li)return D;let S=m.parent;if(!S){const A=E[21];if(A){const N=A.get(l,Li,c);if(N!==Li)return N}S=ia(E),E=E[15]}m=S}return f}(o,a,l,c,Li);if(E!==Li)return E}const m=rl(o,a,l,c,Li);if(m!==Li)return m}return _u(a,l,c,f)}function rl(o,a,l,c,f){const m=function Zc(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(jr)?o[jr]:void 0;return"number"==typeof a?a>=0?255&a:Kc:a}(l);if("function"==typeof m){if(!au(a,o,c))return c&Xe.Host?Qs(f,0,c):_u(a,l,c,f);try{const E=m(c);if(null!=E||c&Xe.Optional)return E;Ee()}finally{ph()}}else if("number"==typeof m){let E=null,D=vu(o,a),S=-1,A=c&Xe.Host?a[16][6]:null;for((-1===D||c&Xe.SkipSelf)&&(S=-1===D?yu(o,a):a[D+8],-1!==S&&il(c,!1)?(E=a[1],D=Er(S),a=Ja(S,a)):D=-1);-1!==D;){const N=a[1];if(Eu(m,D,N.data)){const L=Sh(D,a,l,E,c,A);if(L!==Li)return L}S=a[D+8],-1!==S&&il(c,a[1].data[D+8]===A)&&Eu(m,D,a)?(E=N,D=Er(S),a=Ja(S,a)):D=-1}}return f}function Sh(o,a,l,c,f,m){const E=a[1],D=E.data[o+8],N=na(D,E,l,null==c?ja(D)&&Yi:c!=E&&0!=(3&D.type),f&Xe.Host&&m===D);return null!==N?vs(a,E,N,D):Li}function na(o,a,l,c,f){const m=o.providerIndexes,E=a.data,D=1048575&m,S=o.directiveStart,N=m>>20,q=f?D+N:o.directiveEnd;for(let ne=c?D:D+N;ne<q;ne++){const we=E[ne];if(ne<S&&l===we||ne>=S&&we.type===l)return ne}if(f){const ne=E[S];if(ne&&kr(ne)&&ne.type===l)return S}return null}function vs(o,a,l,c){let f=o[l];const m=a.data;if(function So(o){return o instanceof Ks}(f)){const E=f;E.resolving&&function rt(o,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new De(-200,`Circular dependency in DI detected for ${o}${l}`)}(function ge(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():ye(o)}(m[l]));const D=el(E.canSeeViewProviders);E.resolving=!0;const S=E.injectImpl?sr(E.injectImpl):null;au(o,c,Xe.Default);try{f=o[l]=E.factory(void 0,m,o,c),a.firstCreatePass&&l>=c.directiveStart&&function mh(o,a,l){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(c){const E=vo(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(o,E),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,E)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-o,f),m&&((l.preOrderHooks||(l.preOrderHooks=[])).push(o,m),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,m))}(l,m[l],a)}finally{null!==S&&sr(S),el(D),E.resolving=!1,ph()}}return f}function Eu(o,a,l){return!!(l[a+(o>>5)]&1<<o)}function il(o,a){return!(o&Xe.Self||o&Xe.Host&&a)}class Mo{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,c){return Ao(this._tNode,this._lView,a,c,l)}}function Kc(){return new Mo(Un(),Ce())}function ys(o){return Gn(()=>{const a=o.prototype.constructor,l=a[or]||wu(a),c=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==c;){const m=f[or]||wu(f);if(m&&m!==l)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function wu(o){return Be(o)?()=>{const a=wu(Q(o));return a&&a()}:Zi(o)}function ia(o){const a=o[1],l=a.type;return 2===l?a.declTNode:1===l?o[6]:null}function bu(o){return function Dh(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const l=o.attrs;if(l){const c=l.length;let f=0;for(;f<c;){const m=l[f];if(Io(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<c&&"string"==typeof l[f];)f++;else{if(m===a)return l[f+1];f+=2}}}return null}(Un(),o)}const Xs="__parameters__";function aa(o,a,l){return Gn(()=>{const c=function Du(o){return function(...l){if(o){const c=o(...l);for(const f in c)this[f]=c[f]}}}(a);function f(...m){if(this instanceof f)return c.apply(this,m),this;const E=new f(...m);return D.annotation=E,D;function D(S,A,N){const L=S.hasOwnProperty(Xs)?S[Xs]:Object.defineProperty(S,Xs,{value:[]})[Xs];for(;L.length<=N;)L.push(null);return(L[N]=L[N]||[]).push(E),S}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class En{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=rn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function cr(o,a){void 0===a&&(a=o);for(let l=0;l<o.length;l++){let c=o[l];Array.isArray(c)?(a===o&&(a=o.slice(0,l)),cr(c,a)):a!==o&&a.push(c)}return a}function tt(o,a){o.forEach(l=>Array.isArray(l)?tt(l,a):a(l))}function dr(o,a,l){a>=o.length?o.push(l):o.splice(a,0,l)}function Qi(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function ai(o,a,l){let c=_i(o,a);return c>=0?o[1|c]=l:(c=~c,function ca(o,a,l,c){let f=o.length;if(f==a)o.push(l,c);else if(1===f)o.push(c,o[0]),o[0]=l;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=l,o[a+1]=c}}(o,c,a,l)),c}function Es(o,a){const l=_i(o,a);if(l>=0)return o[1|l]}function _i(o,a){return function al(o,a,l){let c=0,f=o.length>>l;for(;f!==c;){const m=c+(f-c>>1),E=o[m<<l];if(a===E)return m<<l;E>a?f=m:c=m+1}return~(f<<l)}(o,a,1)}const hr={},lt="__NG_DI_FLAG__",da="ngTempTokenPath",ha=/\n/gm,cl="__source";let fa;function Xi(o){const a=fa;return fa=o,a}function Ih(o,a=Xe.Default){if(void 0===fa)throw new De(-203,!1);return null===fa?gi(o,void 0,a):fa.get(o,a&Xe.Optional?null:void 0,a)}function qn(o,a=Xe.Default){return(function Us(){return Or}()||Ih)(Q(o),a)}function T(o,a=Xe.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),qn(o,a)}function C(o){const a=[];for(let l=0;l<o.length;l++){const c=Q(o[l]);if(Array.isArray(c)){if(0===c.length)throw new De(900,!1);let f,m=Xe.Default;for(let E=0;E<c.length;E++){const D=c[E],S=U(D);"number"==typeof S?-1===S?f=D.token:m|=S:f=D}a.push(qn(f,m))}else a.push(qn(c))}return a}function R(o,a){return o[lt]=a,o.prototype[lt]=a,o}function U(o){return o[lt]}const Ge=R(aa("Optional"),8),ot=R(aa("SkipSelf"),4);let hl,Cu,Au;function jy(o){hl=o}function No(o){return function vp(){if(void 0===Cu&&(Cu=null,dn.trustedTypes))try{Cu=dn.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Cu}()?.createHTML(o)||o}function Mh(o){return function Mu(){if(void 0===Au&&(Au=null,dn.trustedTypes))try{Au=dn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Au}()?.createHTML(o)||o}class Ss{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class gm extends Ss{getTypeName(){return"HTML"}}class Nh extends Ss{getTypeName(){return"Style"}}class Gy extends Ss{getTypeName(){return"Script"}}class _p extends Ss{getTypeName(){return"URL"}}class mm extends Ss{getTypeName(){return"ResourceURL"}}function Vi(o){return o instanceof Ss?o.changingThisBreaksApplicationSecurity:o}function fl(o,a){const l=function vm(o){return o instanceof Ss&&o.getTypeName()||null}(o);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}function Ph(o){return new gm(o)}function Ep(o){return new Nh(o)}function wp(o){return new Gy(o)}function xr(o){return new _p(o)}function Lr(o){return new mm(o)}class Oh{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(No(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch{return null}}}class zy{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const c=this.inertDocument.createElement("body");l.appendChild(c)}}getInertBodyElement(a){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=No(a),l;const c=this.inertDocument.createElement("body");return c.innerHTML=No(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(a){const l=a.attributes;for(let f=l.length-1;0<f;f--){const E=l.item(f).name;("xmlns:ns1"===E||0===E.indexOf("ns1:"))&&a.removeAttribute(E)}let c=a.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const ga=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function kh(o){return(o=String(o)).match(ga)?o:"unsafe:"+o}function Po(o){const a={};for(const l of o.split(","))a[l]=!0;return a}function ma(...o){const a={};for(const l of o)for(const c in l)l.hasOwnProperty(c)&&(a[c]=!0);return a}const Fh=Po("area,br,col,hr,img,wbr"),Lh=Po("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Vh=Po("rp,rt"),Jc=ma(Fh,ma(Lh,Po("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ma(Vh,Po("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ma(Vh,Lh)),pl=Po("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ru=ma(pl,Po("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Po("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),_m=Po("script,style,template");class Em{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,c=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?c=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,c&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(a){const l=a.nodeName.toLowerCase();if(!Jc.hasOwnProperty(l))return this.sanitizedSomething=!0,!_m.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const c=a.attributes;for(let f=0;f<c.length;f++){const m=c.item(f),E=m.name,D=E.toLowerCase();if(!Ru.hasOwnProperty(D)){this.sanitizedSomething=!0;continue}let S=m.value;pl[D]&&(S=kh(S)),this.buf.push(" ",E,'="',wm(S),'"')}return this.buf.push(">"),!0}endElement(a){const l=a.nodeName.toLowerCase();Jc.hasOwnProperty(l)&&!Fh.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(wm(a))}checkClobberedElement(a,l){if(l&&(a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return l}}const Dp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,xu=/([^\#-~ |!])/g;function wm(o){return o.replace(/&/g,"&amp;").replace(Dp,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(xu,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Uh;function Oo(o,a){let l=null;try{Uh=Uh||function Xc(o){const a=new zy(o);return function Sb(){try{return!!(new window.DOMParser).parseFromString(No(""),"text/html")}catch{return!1}}()?new Oh(a):a}(o);let c=a?String(a):"";l=Uh.getInertBodyElement(c);let f=5,m=c;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,c=m,m=l.innerHTML,l=Uh.getInertBodyElement(c)}while(c!==m);return No((new Em).sanitizeChildren(ed(l)||l))}finally{if(l){const c=ed(l)||l;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function ed(o){return"content"in o&&function Zy(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var wn=(()=>((wn=wn||{})[wn.NONE=0]="NONE",wn[wn.HTML=1]="HTML",wn[wn.STYLE=2]="STYLE",wn[wn.SCRIPT=3]="SCRIPT",wn[wn.URL=4]="URL",wn[wn.RESOURCE_URL=5]="RESOURCE_URL",wn))();function Nu(o){const a=gl();return a?Mh(a.sanitize(wn.HTML,o)||""):fl(o,"HTML")?Mh(Vi(o)):Oo(function Iu(){return void 0!==hl?hl:typeof document<"u"?document:void 0}(),ye(o))}function Hh(o){const a=gl();return a?a.sanitize(wn.URL,o)||"":fl(o,"URL")?Vi(o):kh(ye(o))}function gl(){const o=Ce();return o&&o[12]}const $h=new En("ENVIRONMENT_INITIALIZER"),Ou=new En("INJECTOR",-1),Gh=new En("INJECTOR_DEF_TYPES");class zh{get(a,l=hr){if(l===hr){const c=new Error(`NullInjectorError: No provider for ${fe(a)}!`);throw c.name="NullInjectorError",c}return l}}function qh(...o){return{\u0275providers:ml(0,o)}}function ml(o,...a){const l=[],c=new Set;let f;return tt(a,m=>{const E=m;rd(E,l,[],c)&&(f||(f=[]),f.push(E))}),void 0!==f&&va(f,l),l}function va(o,a){for(let l=0;l<o.length;l++){const{providers:f}=o[l];tt(f,m=>{a.push(m)})}}function rd(o,a,l,c){if(!(o=Q(o)))return!1;let f=null,m=fo(o);const E=!m&&J(o);if(m||E){if(E&&!E.standalone)return!1;f=o}else{const S=o.ngModule;if(m=fo(S),!m)return!1;f=S}const D=c.has(f);if(E){if(D)return!1;if(c.add(f),E.dependencies){const S="function"==typeof E.dependencies?E.dependencies():E.dependencies;for(const A of S)rd(A,a,l,c)}}else{if(!m)return!1;{if(null!=m.imports&&!D){let A;c.add(f);try{tt(m.imports,N=>{rd(N,a,l,c)&&(A||(A=[]),A.push(N))})}finally{}void 0!==A&&va(A,a)}if(!D){const A=Zi(f)||(()=>new f);a.push({provide:f,useFactory:A,deps:Ft},{provide:Gh,useValue:f,multi:!0},{provide:$h,useValue:()=>qn(f),multi:!0})}const S=m.providers;null==S||D||tt(S,N=>{a.push(N)})}}return f!==o&&void 0!==o.providers}const id=he({provide:String,useValue:he});function ku(o){return null!==o&&"object"==typeof o&&id in o}function ko(o){return"function"==typeof o}const sd=new En("Set Injector scope."),ro={},Tm={};let yl;function ya(){return void 0===yl&&(yl=new zh),yl}class pr{}class od extends pr{constructor(a,l,c,f){super(),this.parent=l,this.source=c,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_a(a,E=>this.processProvider(E)),this.records.set(Ou,br(void 0,this)),f.has("environment")&&this.records.set(pr,br(void 0,this));const m=this.records.get(sd);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(Gh.multi,Ft,Xe.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const l=Xi(this),c=sr(void 0);try{return a()}finally{Xi(l),sr(c)}}get(a,l=hr,c=Xe.Default){this.assertNotDestroyed();const f=Xi(this),m=sr(void 0);try{if(!(c&Xe.SkipSelf)){let D=this.records.get(a);if(void 0===D){const S=function Zh(o){return"function"==typeof o||"object"==typeof o&&o instanceof En}(a)&&gn(a);D=S&&this.injectableDefInScope(S)?br(Tp(a),ro):null,this.records.set(a,D)}if(null!=D)return this.hydrate(a,D)}return(c&Xe.Self?ya():this.parent).get(a,l=c&Xe.Optional&&l===hr?null:l)}catch(E){if("NullInjectorError"===E.name){if((E[da]=E[da]||[]).unshift(fe(a)),f)throw E;return function X(o,a,l,c){const f=o[da];throw a[cl]&&f.unshift(a[cl]),o.message=function le(o,a,l,c=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let f=fe(a);if(Array.isArray(a))f=a.map(fe).join(" -> ");else if("object"==typeof a){let m=[];for(let E in a)if(a.hasOwnProperty(E)){let D=a[E];m.push(E+":"+("string"==typeof D?JSON.stringify(D):fe(D)))}f=`{${m.join(", ")}}`}return`${l}${c?"("+c+")":""}[${f}]: ${o.replace(ha,"\n  ")}`}("\n"+o.message,f,l,c),o.ngTokenPath=f,o[da]=null,o}(E,a,"R3InjectorError",this.source)}throw E}finally{sr(m),Xi(f)}}resolveInjectorInitializers(){const a=Xi(this),l=sr(void 0);try{const c=this.get($h.multi,Ft,Xe.Self);for(const f of c)f()}finally{Xi(a),sr(l)}}toString(){const a=[],l=this.records;for(const c of l.keys())a.push(fe(c));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new De(205,!1)}processProvider(a){let l=ko(a=Q(a))?a:Q(a&&a.provide);const c=function Im(o){return ku(o)?br(void 0,o.useValue):br(Wh(o),ro)}(a);if(ko(a)||!0!==a.multi)this.records.get(l);else{let f=this.records.get(l);f||(f=br(void 0,ro,!0),f.factory=()=>C(f.multi),this.records.set(l,f)),l=a,f.multi.push(a)}this.records.set(l,c)}hydrate(a,l){return l.value===ro&&(l.value=Tm,l.value=l.factory()),"object"==typeof l.value&&l.value&&function Ts(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=Q(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function Tp(o){const a=gn(o),l=null!==a?a.factory:Zi(o);if(null!==l)return l;if(o instanceof En)throw new De(204,!1);if(o instanceof Function)return function Ky(o){const a=o.length;if(a>0)throw function Js(o,a){const l=[];for(let c=0;c<o;c++)l.push(a);return l}(a,"?"),new De(204,!1);const l=function Hr(o){const a=o&&(o[Oi]||o[pi]);if(a){const l=function ei(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(o);return null!==l?()=>l.factory(o):()=>new o}(o);throw new De(204,!1)}function Wh(o,a,l){let c;if(ko(o)){const f=Q(o);return Zi(f)||Tp(f)}if(ku(o))c=()=>Q(o.useValue);else if(function vl(o){return!(!o||!o.useFactory)}(o))c=()=>o.useFactory(...C(o.deps||[]));else if(function qr(o){return!(!o||!o.useExisting)}(o))c=()=>qn(Q(o.useExisting));else{const f=Q(o&&(o.useClass||o.provide));if(!function Fo(o){return!!o.deps}(o))return Zi(f)||Tp(f);c=()=>new f(...C(o.deps))}return c}function br(o,a,l=!1){return{factory:o,value:a,multi:l?[]:void 0}}function Ji(o){return!!o.\u0275providers}function _a(o,a){for(const l of o)Array.isArray(l)?_a(l,a):Ji(l)?_a(l.\u0275providers,a):a(l)}class Fu{}class Cm{resolveComponentFactory(a){throw function ad(o){const a=Error(`No component factory found for ${fe(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let ld=(()=>{class o{}return o.NULL=new Cm,o})();function Yy(){return _(Un(),Ce())}function _(o,a){return new g(Gr(o,a))}let g=(()=>{class o{constructor(l){this.nativeElement=l}}return o.__NG_ELEMENT_ID__=Yy,o})();function v(o){return o instanceof g?o.nativeElement:o}class M{}let O=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function W(){const o=Ce(),l=Yt(Un().index,o);return(_r(l)?l:o)[11]}(),o})(),ce=(()=>{class o{}return o.\u0275prov=rn({token:o,providedIn:"root",factory:()=>null}),o})();class He{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const nt=new He("14.2.7"),St={};function Wn(o){return o.ngOriginalError}class Yh{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&Wn(a);for(;l&&Wn(l);)l=Wn(l);return l||null}}const Lo=new Map;let xb=0;const n_="__ngContext__";function ci(o,a){_r(a)?(o[n_]=a[20],function e_(o){Lo.set(o[20],o)}(a)):o[n_]=a}function Dr(o){return o instanceof Function?o():o}var wa=(()=>((wa=wa||{})[wa.Important=1]="Important",wa[wa.DashCase=2]="DashCase",wa))();function Pm(o,a){return undefined(o,a)}function Xh(o){const a=o[3];return $r(a)?a[3]:a}function ba(o){return zb(o[13])}function Pp(o){return zb(o[4])}function zb(o){for(;null!==o&&!$r(o);)o=o[4];return o}function On(o,a,l,c,f){if(null!=c){let m,E=!1;$r(c)?m=c:_r(c)&&(E=!0,c=c[0]);const D=Vn(c);0===o&&null!==l?null==f?u_(a,l,D):hd(a,l,D,f||null,!0):1===o&&null!==l?hd(a,l,D,f||null,!0):2===o?function Op(o,a,l){const c=Rn(o,a);c&&function ef(o,a,l,c){o.removeChild(a,l,c)}(o,c,a,l)}(a,D,E):3===o&&a.destroyNode(D),null!=m&&function Is(o,a,l,c,f){const m=l[7];m!==Vn(l)&&On(a,o,c,m,f);for(let D=10;D<l.length;D++){const S=l[D];Dl(S[1],S,o,a,c,m)}}(a,o,m,l,f)}}function Rt(o,a,l){return o.createElement(a,l)}function Wb(o,a){const l=o[9],c=l.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,Pn(f,-1)),l.splice(c,1)}function a_(o,a){if(o.length<=10)return;const l=10+a,c=o[l];if(c){const f=c[17];null!==f&&f!==o&&Wb(f,c),a>0&&(o[l-1][4]=c[4]);const m=Qi(o,10+a);!function vI(o,a){Dl(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(c[1],c);const E=m[19];null!==E&&E.detachView(m[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Zb(o,a){if(!(128&a[2])){const l=a[11];l.destroyNode&&Dl(o,a,l,3,null,null),function Pe(o){let a=o[13];if(!a)return l_(o[1],o);for(;a;){let l=null;if(_r(a))l=a[13];else{const c=a[10];c&&(l=c)}if(!l){for(;a&&!a[4]&&a!==o;)_r(a)&&l_(a[1],a),a=a[3];null===a&&(a=o),_r(a)&&l_(a[1],a),l=a&&a[4]}a=l}}(a)}}function l_(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function Kb(o,a){let l;if(null!=o&&null!=(l=o.destroyHooks))for(let c=0;c<l.length;c+=2){const f=a[l[c]];if(!(f instanceof Ks)){const m=l[c+1];if(Array.isArray(m))for(let E=0;E<m.length;E+=2){const D=f[m[E]],S=m[E+1];try{S.call(D)}finally{}}else try{m.call(f)}finally{}}}}(o,a),function yI(o,a){const l=o.cleanup,c=a[7];let f=-1;if(null!==l)for(let m=0;m<l.length-1;m+=2)if("string"==typeof l[m]){const E=l[m+1],D="function"==typeof E?E(a):Vn(a[E]),S=c[f=l[m+2]],A=l[m+3];"boolean"==typeof A?D.removeEventListener(l[m],S,A):A>=0?c[f=A]():c[f=-A].unsubscribe(),m+=2}else{const E=c[f=l[m+1]];l[m].call(E)}if(null!==c){for(let m=f+1;m<c.length;m++)(0,c[m])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const l=a[17];if(null!==l&&$r(a[3])){l!==a[3]&&Wb(l,a);const c=a[19];null!==c&&c.detachView(o)}!function Pb(o){Lo.delete(o[20])}(a)}}function Yb(o,a,l){return function _I(o,a,l){let c=a;for(;null!==c&&40&c.type;)c=(a=c).parent;if(null===c)return l[0];if(2&c.flags){const f=o.data[c.directiveStart].encapsulation;if(f===ft.None||f===ft.Emulated)return null}return Gr(c,l)}(o,a.parent,l)}function hd(o,a,l,c,f){o.insertBefore(a,l,c,f)}function u_(o,a,l){o.appendChild(a,l)}function Vt(o,a,l,c,f){null!==c?hd(o,a,l,c,f):u_(o,a,l)}function Rn(o,a){return o.parentNode(a)}let Qb=function sn(o,a,l){return 40&o.type?Gr(o,l):null};function fd(o,a,l,c){const f=Yb(o,c,a),m=a[11],D=function tf(o,a,l){return Qb(o,a,l)}(c.parent||a[6],c,a);if(null!=f)if(Array.isArray(l))for(let S=0;S<l.length;S++)Vt(m,f,l[S],D,!1);else Vt(m,f,l,D,!1)}function nf(o,a){if(null!==a){const l=a.type;if(3&l)return Gr(a,o);if(4&l)return c_(-1,o[a.index]);if(8&l){const c=a.child;if(null!==c)return nf(o,c);{const f=o[a.index];return $r(f)?c_(-1,f):Vn(f)}}if(32&l)return Pm(a,o)()||Vn(o[a.index]);{const c=Hu(o,a);return null!==c?Array.isArray(c)?c[0]:nf(Xh(o[16]),c):nf(o,a.next)}}return null}function Hu(o,a){return null!==a?o[16][6].projection[a.projection]:null}function c_(o,a){const l=10+o+1;if(l<a.length){const c=a[l],f=c[1].firstChild;if(null!==f)return nf(c,f)}return a[7]}function d_(o,a,l,c,f,m,E){for(;null!=l;){const D=c[l.index],S=l.type;if(E&&0===a&&(D&&ci(Vn(D),c),l.flags|=4),64!=(64&l.flags))if(8&S)d_(o,a,l.child,c,f,m,!1),On(a,o,f,D,m);else if(32&S){const A=Pm(l,c);let N;for(;N=A();)On(a,o,f,N,m);On(a,o,f,D,m)}else 16&S?h_(o,a,c,l,f,m):On(a,o,f,D,m);l=E?l.projectionNext:l.next}}function Dl(o,a,l,c,f,m){d_(l,c,o.firstChild,a,f,m,!1)}function h_(o,a,l,c,f,m){const E=l[16],S=E[6].projection[c.projection];if(Array.isArray(S))for(let A=0;A<S.length;A++)On(a,o,f,S[A],m);else d_(o,a,S,E[3],f,m,!0)}function p_(o,a,l){o.setAttribute(a,"style",l)}function km(o,a,l){""===l?o.removeAttribute(a,"class"):o.setAttribute(a,"class",l)}function Sl(o,a,l){let c=o.length;for(;;){const f=o.indexOf(a,l);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=a.length;if(f+m===c||o.charCodeAt(f+m)<=32)return f}l=f+1}}const oe="ng-template";function Fm(o,a,l){let c=0;for(;c<o.length;){let f=o[c++];if(l&&"class"===f){if(f=o[c],-1!==Sl(f.toLowerCase(),a,0))return!0}else if(1===f){for(;c<o.length&&"string"==typeof(f=o[c++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function io(o){return 4===o.type&&o.value!==oe}function wI(o,a,l){return a===(4!==o.type||l?o.value:oe)}function kp(o,a,l){let c=4;const f=o.attrs||[],m=function g_(o){for(let a=0;a<o.length;a++)if(Io(o[a]))return a;return o.length}(f);let E=!1;for(let D=0;D<a.length;D++){const S=a[D];if("number"!=typeof S){if(!E)if(4&c){if(c=2|1&c,""!==S&&!wI(o,S,l)||""===S&&1===a.length){if(Kr(c))return!1;E=!0}}else{const A=8&c?S:a[++D];if(8&c&&null!==o.attrs){if(!Fm(o.attrs,A,l)){if(Kr(c))return!1;E=!0}continue}const L=bI(8&c?"class":S,f,io(o),l);if(-1===L){if(Kr(c))return!1;E=!0;continue}if(""!==A){let q;q=L>m?"":f[L+1].toLowerCase();const ne=8&c?q:null;if(ne&&-1!==Sl(ne,A,0)||2&c&&A!==q){if(Kr(c))return!1;E=!0}}}}else{if(!E&&!Kr(c)&&!Kr(S))return!1;if(E&&Kr(S))continue;E=!1,c=S|1&c}}return Kr(c)||E}function Kr(o){return 0==(1&o)}function bI(o,a,l,c){if(null===a)return-1;let f=0;if(c||!l){let m=!1;for(;f<a.length;){const E=a[f];if(E===o)return f;if(3===E||6===E)m=!0;else{if(1===E||2===E){let D=a[++f];for(;"string"==typeof D;)D=a[++f];continue}if(4===E)break;if(0===E){f+=4;continue}}f+=m?1:2}return-1}return function DI(o,a){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const c=o[l];if("number"==typeof c)return-1;if(c===a)return l;l++}return-1}(a,o)}function ju(o,a,l=!1){for(let c=0;c<a.length;c++)if(kp(o,a[c],l))return!0;return!1}function Ui(o,a){return o?":not("+a.trim()+")":a}function tD(o){let a=o[0],l=1,c=2,f="",m=!1;for(;l<o.length;){let E=o[l];if("string"==typeof E)if(2&c){const D=o[++l];f+="["+E+(D.length>0?'="'+D+'"':"")+"]"}else 8&c?f+="."+E:4&c&&(f+=" "+E);else""!==f&&!Kr(E)&&(a+=Ui(m,f),f=""),c=E,m=m||!Kr(c);l++}return""!==f&&(a+=Ui(m,f)),a}const ct={};function Fp(o){Yr(Wt(),Ce(),ur()+o,!1)}function Yr(o,a,l,c){if(!c)if(3==(3&a[2])){const m=o.preOrderCheckHooks;null!==m&&Do(a,m,l)}else{const m=o.preOrderHooks;null!==m&&Jo(a,m,0,l)}ii(l)}function Gu(o,a=null,l=null,c){const f=Lm(o,a,l,c);return f.resolveInjectorInitializers(),f}function Lm(o,a=null,l=null,c,f=new Set){const m=[l||Ft,qh(o)];return c=c||("object"==typeof o?void 0:fe(o)),new od(m,a||ya(),c||null,f)}let zu=(()=>{class o{static create(l,c){if(Array.isArray(l))return Gu({name:""},c,l,"");{const f=l.name??"";return Gu({name:f},l.parent,l.providers,f)}}}return o.THROW_IF_NOT_FOUND=hr,o.NULL=new zh,o.\u0275prov=rn({token:o,providedIn:"any",factory:()=>qn(Ou)}),o.__NG_ELEMENT_ID__=-1,o})();function yd(o,a=Xe.Default){const l=Ce();return null===l?qn(o,a):Ao(Un(),l,Q(o),a)}function Wu(){throw new Error("invalid")}function Zu(o,a){return o<<17|a<<2}function ts(o){return o>>17&32767}function Gm(o){return 2|o}function jn(o){return(131068&o)>>2}function __(o,a){return-131069&o|a<<2}function E_(o){return 1|o}function wD(o,a){const l=o.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const f=l[c],m=l[c+1];if(-1!==m){const E=o.data[m];Ya(f),E.contentQueries(2,a[m],m)}}}function bd(o,a,l,c,f,m,E,D,S,A,N){const L=a.blueprint.slice();return L[0]=f,L[2]=76|c,(null!==N||o&&1024&o[2])&&(L[2]|=1024),Jl(L),L[3]=L[15]=o,L[8]=l,L[10]=E||o&&o[10],L[11]=D||o&&o[11],L[12]=S||o&&o[12]||null,L[9]=A||o&&o[9]||null,L[6]=m,L[20]=function Nb(){return xb++}(),L[21]=N,L[16]=2==a.type?o[16]:L,L}function Ml(o,a,l,c,f){let m=o.data[a];if(null===m)m=function Zm(o,a,l,c,f){const m=su(),E=za(),S=o.data[a]=function un(o,a,l,c,f,m){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?m:m&&m.parent,l,a,c,f);return null===o.firstChild&&(o.firstChild=S),null!==m&&(E?null==m.child&&null!==S.parent&&(m.child=S):null===m.next&&(m.next=S)),S}(o,a,l,c,f),function im(){return Nt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=l,m.value=c,m.attrs=f;const E=function Xo(){const o=Nt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===E?-1:E.injectorIndex}return yi(m,!0),m}function lf(o,a,l,c){if(0===l)return-1;const f=a.length;for(let m=0;m<l;m++)a.push(c),o.blueprint.push(c),o.data.push(null);return f}function Dd(o,a,l){lu(a);try{const c=o.viewQuery;null!==c&&Jm(1,c,l);const f=o.template;null!==f&&A_(o,a,f,1,l),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&wD(o,a),o.staticViewQueries&&Jm(2,o.viewQuery,l);const m=o.components;null!==m&&function Kn(o,a){for(let l=0;l<a.length;l++)Qr(o,a[l])}(a,m)}catch(c){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),c}finally{a[2]&=-5,wo()}}function Km(o,a,l,c){const f=a[2];if(128!=(128&f)){lu(a);try{Jl(a),function Vc(o){return Nt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==l&&A_(o,a,l,2,c);const E=3==(3&f);if(E){const A=o.preOrderCheckHooks;null!==A&&Do(a,A,null)}else{const A=o.preOrderHooks;null!==A&&Jo(a,A,0,null),vh(a,0)}if(function Kp(o){for(let a=ba(o);null!==a;a=Pp(a)){if(!a[2])continue;const l=a[9];for(let c=0;c<l.length;c++){const f=l[c],m=f[3];0==(512&f[2])&&Pn(m,1),f[2]|=512}}}(a),function jI(o){for(let a=ba(o);null!==a;a=Pp(a))for(let l=10;l<a.length;l++){const c=a[l],f=c[1];_o(c)&&Km(f,c,f.template,c[8])}}(a),null!==o.contentQueries&&wD(o,a),E){const A=o.contentCheckHooks;null!==A&&Do(a,A)}else{const A=o.contentHooks;null!==A&&Jo(a,A,1),vh(a,1)}!function $p(o,a){const l=o.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const f=l[c];if(f<0)ii(~f);else{const m=f,E=l[++c],D=l[++c];sm(E,m),D(2,a[m])}}}finally{ii(-1)}}(o,a);const D=o.components;null!==D&&function LI(o,a){for(let l=0;l<a.length;l++)MD(o,a[l])}(a,D);const S=o.viewQuery;if(null!==S&&Jm(2,S,c),E){const A=o.viewCheckHooks;null!==A&&Do(a,A)}else{const A=o.viewHooks;null!==A&&Jo(a,A,2),vh(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,Pn(a[3],-1))}finally{wo()}}}function A_(o,a,l,c,f){const m=ur(),E=2&c;try{ii(-1),E&&a.length>22&&Yr(o,a,22,!1),l(c,f)}finally{ii(m)}}function Sd(o,a,l){if(ql(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const E=o.data[m];E.contentQueries&&E.contentQueries(1,l[m],m)}}}function Vo(o,a,l){!gs()||(function UI(o,a,l,c){const f=l.directiveStart,m=l.directiveEnd;o.firstCreatePass||Co(l,a),ci(c,a);const E=l.initialInputs;for(let D=f;D<m;D++){const S=o.data[D],A=kr(S);A&&TD(a,l,S);const N=vs(a,o,D,l);ci(N,a),null!==E&&ID(0,D-f,N,S,0,E),A&&(Yt(l.index,a)[8]=N)}}(o,a,l,Gr(l,a)),128==(128&l.flags)&&function BI(o,a,l){const c=l.directiveStart,f=l.directiveEnd,m=l.index,E=function Uc(){return Nt.lFrame.currentDirectiveIndex}();try{ii(m);for(let D=c;D<f;D++){const S=o.data[D],A=a[D];ou(D),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&Gt(S,A)}}finally{ii(-1),ou(E)}}(o,a,l))}function Ym(o,a,l=Gr){const c=a.localNames;if(null!==c){let f=a.index+1;for(let m=0;m<c.length;m+=2){const E=c[m+1],D=-1===E?l(a,o):o[E];o[f++]=D}}}function M_(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Qm(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Qm(o,a,l,c,f,m,E,D,S,A){const N=22+c,L=N+f,q=function uf(o,a){const l=[];for(let c=0;c<a;c++)l.push(c<o?null:ct);return l}(N,L),ne="function"==typeof A?A():A;return q[1]={type:o,blueprint:q,template:l,queries:null,viewQuery:D,declTNode:a,data:q.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:S,consts:ne,incompleteFirstPass:!1}}function Tr(o,a,l,c){const f=L_(a);null===l?f.push(c):(f.push(l),o.firstCreatePass&&V_(o).push(c,f.length-1))}function R_(o,a,l){for(let c in o)if(o.hasOwnProperty(c)){const f=o[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(a,f):l[c]=[a,f]}return l}function x_(o,a){const c=a.directiveEnd,f=o.data,m=a.attrs,E=[];let D=null,S=null;for(let A=a.directiveStart;A<c;A++){const N=f[A],L=N.inputs,q=null===m||io(a)?null:CD(L,m);E.push(q),D=R_(L,A,D),S=R_(N.outputs,A,S)}null!==D&&(D.hasOwnProperty("class")&&(a.flags|=16),D.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=E,a.inputs=D,a.outputs=S}function Ms(o,a,l,c,f,m,E,D){const S=Gr(a,l);let N,A=a.inputs;!D&&null!=A&&(N=A[c])?(B_(o,l,N,c,f),ja(a)&&Bi(l,a.index)):3&a.type&&(c=function Qu(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(c),f=null!=E?E(f,a.value||"",c):f,m.setProperty(S,c,f))}function Bi(o,a){const l=Yt(a,o);16&l[2]||(l[2]|=32)}function so(o,a,l,c){let f=!1;if(gs()){const m=function HI(o,a,l){const c=o.directiveRegistry;let f=null;if(c)for(let m=0;m<c.length;m++){const E=c[m];ju(l,E.selectors,!1)&&(f||(f=[]),Ys(Co(l,a),o,E.type),kr(E)?(zp(o,l),f.unshift(E)):f.push(E))}return f}(o,a,l),E=null===c?null:{"":-1};if(null!==m){f=!0,Zp(l,o.data.length,m.length);for(let N=0;N<m.length;N++){const L=m[N];L.providersResolver&&L.providersResolver(L)}let D=!1,S=!1,A=lf(o,a,m.length,null);for(let N=0;N<m.length;N++){const L=m[N];l.mergedAttrs=Qa(l.mergedAttrs,L.hostAttrs),P_(o,l,a,A,L),Wp(A,L,E),null!==L.contentQueries&&(l.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(l.flags|=128);const q=L.type.prototype;!D&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(l.index),D=!0),!S&&(q.ngOnChanges||q.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l.index),S=!0),A++}x_(o,l)}E&&function qp(o,a,l){if(a){const c=o.localNames=[];for(let f=0;f<a.length;f+=2){const m=l[a[f+1]];if(null==m)throw new De(-301,!1);c.push(a[f],m)}}}(l,c,E)}return l.mergedAttrs=Qa(l.mergedAttrs,l.attrs),f}function N_(o,a,l,c,f,m){const E=m.hostBindings;if(E){let D=o.hostBindingOpCodes;null===D&&(D=o.hostBindingOpCodes=[]);const S=~a.index;(function Gp(o){let a=o.length;for(;a>0;){const l=o[--a];if("number"==typeof l&&l<0)return l}return 0})(D)!=S&&D.push(S),D.push(c,f,E)}}function Gt(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function zp(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function Wp(o,a,l){if(l){if(a.exportAs)for(let c=0;c<a.exportAs.length;c++)l[a.exportAs[c]]=o;kr(a)&&(l[""]=o)}}function Zp(o,a,l){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+l,o.providerIndexes=a}function P_(o,a,l,c,f){o.data[c]=f;const m=f.factory||(f.factory=Zi(f.type)),E=new Ks(m,kr(f),yd);o.blueprint[c]=E,l[c]=E,N_(o,a,0,c,lf(o,l,f.hostVars,ct),f)}function TD(o,a,l){const c=Gr(a,o),f=M_(l),m=o[10],E=Yp(o,bd(o,f,null,l.onPush?32:16,c,a,m,m.createRenderer(c,l),null,null,null));o[a.index]=E}function Uo(o,a,l,c,f,m){const E=Gr(o,a);!function O_(o,a,l,c,f,m,E){if(null==m)o.removeAttribute(a,f,l);else{const D=null==E?ye(m):E(m,c||"",f);o.setAttribute(a,f,D,l)}}(a[11],E,m,o.value,l,c,f)}function ID(o,a,l,c,f,m){const E=m[a];if(null!==E){const D=c.setInput;for(let S=0;S<E.length;){const A=E[S++],N=E[S++],L=E[S++];null!==D?c.setInput(l,L,A,N):l[N]=L}}}function CD(o,a){let l=null,c=0;for(;c<a.length;){const f=a[c];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,o[f],a[c+1])),c+=2}else c+=2;else c+=4}return l}function AD(o,a,l,c){return new Array(o,!0,!1,a,null,0,c,l,null,null)}function MD(o,a){const l=Yt(a,o);if(_o(l)){const c=l[1];48&l[2]?Km(c,l,c.template,l[8]):l[5]>0&&k_(l)}}function k_(o){for(let c=ba(o);null!==c;c=Pp(c))for(let f=10;f<c.length;f++){const m=c[f];if(_o(m))if(512&m[2]){const E=m[1];Km(E,m,E.template,m[8])}else m[5]>0&&k_(m)}const l=o[1].components;if(null!==l)for(let c=0;c<l.length;c++){const f=Yt(l[c],o);_o(f)&&f[5]>0&&k_(f)}}function Qr(o,a){const l=Yt(a,o),c=l[1];(function F_(o,a){for(let l=a.length;l<o.blueprint.length;l++)a.push(o.blueprint[l])})(c,l),Dd(c,l,l[8])}function Yp(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function Td(o){for(;o;){o[2]|=32;const a=Xh(o);if(sp(o)&&!a)return o;o=a}return null}function Rs(o,a,l,c=!0){const f=a[10];f.begin&&f.begin();try{Km(o,a,o.template,l)}catch(E){throw c&&xD(a,E),E}finally{f.end&&f.end()}}function Jm(o,a,l){Ya(0),a(o,l)}function L_(o){return o[7]||(o[7]=[])}function V_(o){return o.cleanup||(o.cleanup=[])}function xD(o,a){const l=o[9],c=l?l.get(Yh,null):null;c&&c.handleError(a)}function B_(o,a,l,c,f){for(let m=0;m<l.length;){const E=l[m++],D=l[m++],S=a[E],A=o.data[E];null!==A.setInput?A.setInput(S,f,c,D):S[D]=f}}function cf(o,a,l){let c=l?o.styles:null,f=l?o.classes:null,m=0;if(null!==a)for(let E=0;E<a.length;E++){const D=a[E];"number"==typeof D?m=D:1==m?f=pe(f,D):2==m&&(c=pe(c,D+": "+a[++E]+";"))}l?o.styles=c:o.stylesWithoutHost=c,l?o.classes=f:o.classesWithoutHost=f}function tv(o,a,l,c,f=!1){for(;null!==l;){const m=a[l.index];if(null!==m&&c.push(Vn(m)),$r(m))for(let D=10;D<m.length;D++){const S=m[D],A=S[1].firstChild;null!==A&&tv(S[1],S,A,c)}const E=l.type;if(8&E)tv(o,a,l.child,c);else if(32&E){const D=Pm(l,a);let S;for(;S=D();)c.push(S)}else if(16&E){const D=Hu(a,l);if(Array.isArray(D))c.push(...D);else{const S=Xh(a[16]);tv(S[1],S,D,c,!0)}}l=f?l.projectionNext:l.next}return c}class df{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return tv(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if($r(a)){const l=a[8],c=l?l.indexOf(this):-1;c>-1&&(a_(a,c),Qi(l,c))}this._attachedToViewContainer=!1}Zb(this._lView[1],this._lView)}onDestroy(a){Tr(this._lView[1],this._lView,null,a)}markForCheck(){Td(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Rs(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function de(o,a){Dl(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new De(902,!1);this._appRef=a}}class H_ extends df{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Rs(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class nv extends ld{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=J(a);return new Qp(l,this.ngModule)}}function ND(o){const a=[];for(let l in o)o.hasOwnProperty(l)&&a.push({propName:o[l],templateName:l});return a}class $I{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,c){const f=this.injector.get(a,St,c);return f!==St||l===St?f:this.parentInjector.get(a,l,c)}}class Qp extends Fu{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function pd(o){return o.map(tD).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return ND(this.componentDef.inputs)}get outputs(){return ND(this.componentDef.outputs)}create(a,l,c,f){let m=(f=f||this.ngModule)instanceof pr?f:f?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const E=m?new $I(a,m):a,D=E.get(M,null);if(null===D)throw new De(407,!1);const S=E.get(ce,null),A=D.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",L=c?function VI(o,a,l){return o.selectRootElement(a,l===ft.ShadowDom)}(A,c,this.componentDef.encapsulation):Rt(D.createRenderer(null,this.componentDef),N,function PD(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(N)),q=this.componentDef.onPush?288:272,ne=Qm(0,null,null,1,0,null,null,null,null,null),we=bd(null,ne,null,q,null,null,D,A,S,E,null);let Ue,Ke;lu(we);try{const dt=function zI(o,a,l,c,f,m){const E=l[1];l[22]=o;const S=Ml(E,22,2,"#host",null),A=S.mergedAttrs=a.hostAttrs;null!==A&&(cf(S,A,!0),null!==o&&(ta(f,o,A),null!==S.classes&&km(f,o,S.classes),null!==S.styles&&p_(f,o,S.styles)));const N=c.createRenderer(o,a),L=bd(l,M_(a),null,a.onPush?32:16,l[22],S,c,N,m||null,null,null);return E.firstCreatePass&&(Ys(Co(S,l),E,a.type),zp(E,S),Zp(S,l.length,1)),Yp(l,L),l[22]=L}(L,this.componentDef,we,D,A);if(L)if(c)ta(A,L,["ng-version",nt.full]);else{const{attrs:It,classes:Re}=function nD(o){const a=[],l=[];let c=1,f=2;for(;c<o.length;){let m=o[c];if("string"==typeof m)2===f?""!==m&&a.push(m,o[++c]):8===f&&l.push(m);else{if(!Kr(f))break;f=m}c++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);It&&ta(A,L,It),Re&&Re.length>0&&km(A,L,Re.join(" "))}if(Ke=Qo(ne,22),void 0!==l){const It=Ke.projection=[];for(let Re=0;Re<this.ngContentSelectors.length;Re++){const Ot=l[Re];It.push(null!=Ot?Array.from(Ot):null)}}Ue=function OD(o,a,l,c){const f=l[1],m=function SD(o,a,l){const c=Un();o.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),P_(o,c,a,lf(o,a,1,null),l),x_(o,c));const f=vs(a,o,c.directiveStart,c);ci(f,a);const m=Gr(c,a);return m&&ci(m,a),f}(f,l,a);if(o[8]=l[8]=m,null!==c)for(const D of c)D(m,a);if(a.contentQueries){const D=Un();a.contentQueries(1,m,D.directiveStart)}const E=Un();return!f.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(ii(E.index),N_(l[1],E,0,E.directiveStart,E.directiveEnd,a),Gt(a,m)),m}(dt,this.componentDef,we,[Hi]),Dd(ne,we,null)}finally{wo()}return new GI(this.componentType,Ue,_(Ke,we),we,Ke)}}class GI extends class Mn{}{constructor(a,l,c,f,m){super(),this.location=c,this._rootLView=f,this._tNode=m,this.instance=l,this.hostView=this.changeDetectorRef=new H_(f),this.componentType=a}setInput(a,l){const c=this._tNode.inputs;let f;if(null!==c&&(f=c[a])){const m=this._rootLView;B_(m[1],m,f,a,l),Bi(m,this._tNode.index)}}get injector(){return new Mo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function Hi(){const o=Un();du(Ce()[1],o)}function rv(o){let a=function kD(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),l=!0;const c=[o];for(;a;){let f;if(kr(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new De(903,!1);f=a.\u0275dir}if(f){if(l){c.push(f);const E=o;E.inputs=iv(o.inputs),E.declaredInputs=iv(o.declaredInputs),E.outputs=iv(o.outputs);const D=f.hostBindings;D&&qI(o,D);const S=f.viewQuery,A=f.contentQueries;if(S&&sv(o,S),A&&FD(o,A),ue(o.inputs,f.inputs),ue(o.declaredInputs,f.declaredInputs),ue(o.outputs,f.outputs),kr(f)&&f.data.animation){const N=o.data;N.animation=(N.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let E=0;E<m.length;E++){const D=m[E];D&&D.ngInherit&&D(o),D===rv&&(l=!1)}}a=Object.getPrototypeOf(a)}!function Ta(o){let a=0,l=null;for(let c=o.length-1;c>=0;c--){const f=o[c];f.hostVars=a+=f.hostVars,f.hostAttrs=Qa(f.hostAttrs,l=Qa(l,f.hostAttrs))}}(c)}function iv(o){return o===ti?{}:o===Ft?[]:o}function sv(o,a){const l=o.viewQuery;o.viewQuery=l?(c,f)=>{a(c,f),l(c,f)}:a}function FD(o,a){const l=o.contentQueries;o.contentQueries=l?(c,f,m)=>{a(c,f,m),l(c,f,m)}:a}function qI(o,a){const l=o.hostBindings;o.hostBindings=l?(c,f)=>{a(c,f),l(c,f)}:a}let ov=null;function Id(){if(!ov){const o=dn.Symbol;if(o&&o.iterator)ov=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const c=a[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(ov=c)}}}return ov}function Jp(o){return!!j_(o)&&(Array.isArray(o)||!(o instanceof Map)&&Id()in o)}function j_(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Ii(o,a,l){return!Object.is(o[a],l)&&(o[a]=l,!0)}function lv(o,a,l,c){const f=Ce();return Ii(f,Eo(),a)&&(Wt(),Uo(In(),f,o,a,l,c)),lv}function UD(o,a,l,c,f,m,E,D){const S=Ce(),A=Wt(),N=o+22,L=A.firstCreatePass?function VD(o,a,l,c,f,m,E,D,S){const A=a.consts,N=Ml(a,o,4,E||null,Fi(A,D));so(a,l,N,Fi(A,S)),du(a,N);const L=N.tViews=Qm(2,N,c,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,A);return null!==a.queries&&(a.queries.template(a,N),L.queries=a.queries.embeddedTView(N)),N}(N,A,S,a,l,c,f,m,E):A.data[N];yi(L,!1);const q=S[11].createComment("");fd(A,S,q,L),ci(q,S),Yp(S,S[N]=AD(q,S,q,L)),Mc(L)&&Vo(A,S,L),null!=E&&Ym(S,L,D)}function mf(o,a,l){const c=Ce();return Ii(c,Eo(),a)&&Ms(Wt(),In(),c,o,a,c[11],l,!1),mf}function Ad(o,a,l,c,f){const E=f?"class":"style";B_(o,l,a.inputs[E],E,c)}function dv(o,a,l,c){const f=Ce(),m=Wt(),E=22+o,D=f[11],S=f[E]=Rt(D,a,function cu(){return Nt.lFrame.currentNamespace}()),A=m.firstCreatePass?function Md(o,a,l,c,f,m,E){const D=a.consts,A=Ml(a,o,2,f,Fi(D,m));return so(a,l,A,Fi(D,E)),null!==A.attrs&&cf(A,A.attrs,!1),null!==A.mergedAttrs&&cf(A,A.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,A),A}(E,m,f,0,a,l,c):m.data[E];yi(A,!0);const N=A.mergedAttrs;null!==N&&ta(D,S,N);const L=A.classes;null!==L&&km(D,S,L);const q=A.styles;return null!==q&&p_(D,S,q),64!=(64&A.flags)&&fd(m,f,S,A),0===function tu(){return Nt.lFrame.elementDepthCount}()&&ci(S,f),function nu(){Nt.lFrame.elementDepthCount++}(),Mc(A)&&(Vo(m,f,A),Sd(m,A,f)),null!==c&&Ym(f,A),dv}function ng(){let o=Un();za()?qa():(o=o.parent,yi(o,!1));const a=o;!function Oc(){Nt.lFrame.elementDepthCount--}();const l=Wt();return l.firstCreatePass&&(du(l,o),ql(o)&&l.queries.elementEnd(o)),null!=a.classesWithoutHost&&function pu(o){return 0!=(16&o.flags)}(a)&&Ad(l,a,Ce(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function _h(o){return 0!=(32&o.flags)}(a)&&Ad(l,a,Ce(),a.stylesWithoutHost,!1),ng}function z_(o,a,l,c){return dv(o,a,l,c),ng(),z_}function hv(o,a,l){const c=Ce(),f=Wt(),m=o+22,E=f.firstCreatePass?function JI(o,a,l,c,f){const m=a.consts,E=Fi(m,c),D=Ml(a,o,8,"ng-container",E);return null!==E&&cf(D,E,!0),so(a,l,D,Fi(m,f)),null!==a.queries&&a.queries.elementStart(a,D),D}(m,f,c,a,l):f.data[m];yi(E,!0);const D=c[m]=c[11].createComment("");return fd(f,c,D,E),ci(D,c),Mc(E)&&(Vo(f,c,E),Sd(f,E,c)),null!=l&&Ym(c,E),hv}function oc(){let o=Un();const a=Wt();return za()?qa():(o=o.parent,yi(o,!1)),a.firstCreatePass&&(du(a,o),ql(o)&&a.queries.elementEnd(o)),oc}function lc(){return Ce()}function fv(o){return!!o&&"function"==typeof o.then}function jD(o){return!!o&&"function"==typeof o.subscribe}const $D=jD;function rg(o,a,l,c){const f=Ce(),m=Wt(),E=Un();return function q_(o,a,l,c,f,m,E,D){const S=Mc(c),N=o.firstCreatePass&&V_(o),L=a[8],q=L_(a);let ne=!0;if(3&c.type||D){const Ke=Gr(c,a),dt=D?D(Ke):Ke,It=q.length,Re=D?cn=>D(Vn(cn[c.index])):c.index;let Ot=null;if(!D&&S&&(Ot=function eC(o,a,l,c){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const E=f[m];if(E===l&&f[m+1]===c){const D=a[7],S=f[m+2];return D.length>S?D[S]:null}"string"==typeof E&&(m+=2)}return null}(o,a,f,c.index)),null!==Ot)(Ot.__ngLastListenerFn__||Ot).__ngNextListenerFn__=m,Ot.__ngLastListenerFn__=m,ne=!1;else{m=sg(c,a,L,m,!1);const cn=l.listen(dt,f,m);q.push(m,cn),N&&N.push(f,Re,It,It+1)}}else m=sg(c,a,L,m,!1);const we=c.outputs;let Ue;if(ne&&null!==we&&(Ue=we[f])){const Ke=Ue.length;if(Ke)for(let dt=0;dt<Ke;dt+=2){const $n=a[Ue[dt]][Ue[dt+1]].subscribe(m),_c=q.length;q.push(m,$n),N&&N.push(f,c.index,_c,-(_c+1))}}}(m,f,f[11],E,o,a,0,c),rg}function vf(o,a,l,c){try{return!1!==l(c)}catch(f){return xD(o,f),!1}}function sg(o,a,l,c,f){return function m(E){if(E===Function)return c;Td(2&o.flags?Yt(o.index,a):a);let S=vf(a,0,c,E),A=m.__ngNextListenerFn__;for(;A;)S=vf(a,0,A,E)&&S,A=A.__ngNextListenerFn__;return f&&!1===S&&(E.preventDefault(),E.returnValue=!1),S}}function yf(o=1){return function bo(o){return(Nt.lFrame.contextLView=function uu(o,a){for(;o>0;)a=a[15],o--;return a}(o,Nt.lFrame.contextLView))[8]}(o)}function ZD(o,a,l,c,f){const m=o[l+1],E=null===a;let D=c?ts(m):jn(m),S=!1;for(;0!==D&&(!1===S||E);){const N=o[D+1];nC(o[D],a)&&(S=!0,o[D+1]=c?E_(N):Gm(N)),D=c?ts(N):jn(N)}S&&(o[l+1]=c?Gm(m):E_(m))}function nC(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&_i(o,a)>=0}const Ur={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function KD(o){return o.substring(Ur.key,Ur.keyEnd)}function QD(o,a){const l=Ur.textEnd;return l===a?-1:(a=Ur.keyEnd=function ag(o,a,l){for(;a<l&&o.charCodeAt(a)>32;)a++;return a}(o,Ur.key=a,l),oo(o,a,l))}function oo(o,a,l){for(;a<l&&o.charCodeAt(a)<=32;)a++;return a}function J_(o,a,l){return Bo(o,a,l,!1),J_}function lg(o,a){return Bo(o,a,null,!0),lg}function t0(o){!function ao(o,a,l,c){const f=Wt(),m=ms(2);f.firstUpdatePass&&ug(f,null,m,c);const E=Ce();if(l!==ct&&Ii(E,m,l)){const D=f.data[ur()];if(a0(D,c)&&!n0(f,m)){let S=c?D.classesWithoutHost:D.stylesWithoutHost;null!==S&&(l=pe(S,l||"")),Ad(f,D,E,l,c)}else!function s0(o,a,l,c,f,m,E,D){f===ct&&(f=Ft);let S=0,A=0,N=0<f.length?f[0]:null,L=0<m.length?m[0]:null;for(;null!==N||null!==L;){const q=S<f.length?f[S+1]:void 0,ne=A<m.length?m[A+1]:void 0;let Ue,we=null;N===L?(S+=2,A+=2,q!==ne&&(we=L,Ue=ne)):null===L||null!==N&&N<L?(S+=2,we=N):(A+=2,we=L,Ue=ne),null!==we&&o0(o,a,l,c,we,Ue,E,D),N=S<f.length?f[S]:null,L=A<m.length?m[A]:null}}(f,D,E,E[11],E[m+1],E[m+1]=function nE(o,a,l){if(null==l||""===l)return Ft;const c=[],f=Vi(l);if(Array.isArray(f))for(let m=0;m<f.length;m++)o(c,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&o(c,m,f[m]);else"string"==typeof f&&a(c,f);return c}(o,a,l),c,m)}}(ai,Ca,o,!0)}function Ca(o,a){for(let l=function YD(o){return function Y_(o){Ur.key=0,Ur.keyEnd=0,Ur.value=0,Ur.valueEnd=0,Ur.textEnd=o.length}(o),QD(o,oo(o,0,Ur.textEnd))}(a);l>=0;l=QD(a,l))ai(o,KD(a),!0)}function Bo(o,a,l,c){const f=Ce(),m=Wt(),E=ms(2);m.firstUpdatePass&&ug(m,o,E,c),a!==ct&&Ii(f,E,a)&&o0(m,m.data[ur()],f,f[11],o,f[E+1]=function iE(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=fe(Vi(o)))),o}(a,l),c,E)}function n0(o,a){return a>=o.expandoStartIndex}function ug(o,a,l,c){const f=o.data;if(null===f[l+1]){const m=f[ur()],E=n0(o,l);a0(m,c)&&null===a&&!E&&(a=!1),a=function sC(o,a,l,c){const f=Ka(o);let m=c?a.residualClasses:a.residualStyles;if(null===f)0===(c?a.classBindings:a.styleBindings)&&(l=dc(l=Nd(null,o,a,l,c),a.attrs,c),m=null);else{const E=a.directiveStylingLast;if(-1===E||o[E]!==f)if(l=Nd(f,o,a,l,c),null===m){let S=function r0(o,a,l){const c=l?a.classBindings:a.styleBindings;if(0!==jn(c))return o[ts(c)]}(o,a,c);void 0!==S&&Array.isArray(S)&&(S=Nd(null,o,a,S[1],c),S=dc(S,a.attrs,c),function eE(o,a,l,c){o[ts(l?a.classBindings:a.styleBindings)]=c}(o,a,c,S))}else m=function tE(o,a,l){let c;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)c=dc(c,o[m].hostAttrs,l);return dc(c,a.attrs,l)}(o,a,c)}return void 0!==m&&(c?a.residualClasses=m:a.residualStyles=m),l}(f,m,a,c),function cc(o,a,l,c,f,m){let E=m?a.classBindings:a.styleBindings,D=ts(E),S=jn(E);o[c]=l;let N,A=!1;if(Array.isArray(l)){const L=l;N=L[1],(null===N||_i(L,N)>0)&&(A=!0)}else N=l;if(f)if(0!==S){const q=ts(o[D+1]);o[c+1]=Zu(q,D),0!==q&&(o[q+1]=__(o[q+1],c)),o[D+1]=function uD(o,a){return 131071&o|a<<17}(o[D+1],c)}else o[c+1]=Zu(D,0),0!==D&&(o[D+1]=__(o[D+1],c)),D=c;else o[c+1]=Zu(S,0),0===D?D=c:o[S+1]=__(o[S+1],c),S=c;A&&(o[c+1]=Gm(o[c+1])),ZD(o,N,c,!0),ZD(o,N,c,!1),function WD(o,a,l,c,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&_i(m,a)>=0&&(l[c+1]=E_(l[c+1]))}(a,N,o,c,m),E=Zu(D,S),m?a.classBindings=E:a.styleBindings=E}(f,m,a,l,E,c)}}function Nd(o,a,l,c,f){let m=null;const E=l.directiveEnd;let D=l.directiveStylingLast;for(-1===D?D=l.directiveStart:D++;D<E&&(m=a[D],c=dc(c,m.hostAttrs,f),m!==o);)D++;return null!==o&&(l.directiveStylingLast=D),c}function dc(o,a,l){const c=l?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const E=a[m];"number"==typeof E?f=E:f===c&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),ai(o,E,!!l||a[++m]))}return void 0===o?null:o}function o0(o,a,l,c,f,m,E,D){if(!(3&a.type))return;const S=o.data,A=S[D+1];cg(function cD(o){return 1==(1&o)}(A)?rE(S,a,l,f,jn(A),E):void 0)||(cg(m)||function jp(o){return 2==(2&o)}(A)&&(m=rE(S,null,l,f,D,E)),function f_(o,a,l,c,f){if(a)f?o.addClass(l,c):o.removeClass(l,c);else{let m=-1===c.indexOf("-")?void 0:wa.DashCase;null==f?o.removeStyle(l,c,m):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),m|=wa.Important),o.setStyle(l,c,f,m))}}(c,E,vi(ur(),l),f,m))}function rE(o,a,l,c,f,m){const E=null===a;let D;for(;f>0;){const S=o[f],A=Array.isArray(S),N=A?S[1]:S,L=null===N;let q=l[f+1];q===ct&&(q=L?Ft:void 0);let ne=L?Es(q,c):N===c?q:void 0;if(A&&!cg(ne)&&(ne=Es(S,c)),cg(ne)&&(D=ne,E))return D;const we=o[f+1];f=E?ts(we):jn(we)}if(null!==a){let S=m?a.residualClasses:a.residualStyles;null!=S&&(D=Es(S,c))}return D}function cg(o){return void 0!==o}function a0(o,a){return 0!=(o.flags&(a?16:32))}function sE(o,a=""){const l=Ce(),c=Wt(),f=o+22,m=c.firstCreatePass?Ml(c,f,1,a,null):c.data[f],E=l[f]=function bl(o,a){return o.createText(a)}(l[11],a);fd(c,l,E,m),yi(m,!1)}function oE(o){return dg("",o,""),oE}function dg(o,a,l){const c=Ce(),f=function Ju(o,a,l,c){return Ii(o,Eo(),l)?a+ye(l)+c:ct}(c,o,a,l);return f!==ct&&function xs(o,a,l){const c=vi(a,o);!function Om(o,a,l){o.setValue(a,l)}(o[11],c,l)}(c,ur(),f),dg}function gg(o,a,l){const c=Ce();if(Ii(c,Eo(),a)){const m=Wt(),E=In();Ms(m,E,c,o,a,function U_(o,a,l){return(null===o||kr(o))&&(l=function Kl(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(l[a.index])),l[11]}(Ka(m.data),E,c),l,!0)}return gg}const kd=void 0;var mg=["en",[["a","p"],["AM","PM"],kd],[["AM","PM"],kd,kd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],kd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],kd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",kd,"{1} 'at' {0}",kd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function dC(o){const l=Math.floor(Math.abs(o)),c=o.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let hc={};function yg(o){const a=function _E(o){return o.toLowerCase().replace(/_/g,"-")}(o);let l=Ev(a);if(l)return l;const c=a.split("-")[0];if(l=Ev(c),l)return l;if("en"===c)return mg;throw new De(701,!1)}function wf(o){return yg(o)[Tt.PluralCase]}function Ev(o){return o in hc||(hc[o]=dn.ng&&dn.ng.common&&dn.ng.common.locales&&dn.ng.common.locales[o]),hc[o]}var Tt=(()=>((Tt=Tt||{})[Tt.LocaleId=0]="LocaleId",Tt[Tt.DayPeriodsFormat=1]="DayPeriodsFormat",Tt[Tt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Tt[Tt.DaysFormat=3]="DaysFormat",Tt[Tt.DaysStandalone=4]="DaysStandalone",Tt[Tt.MonthsFormat=5]="MonthsFormat",Tt[Tt.MonthsStandalone=6]="MonthsStandalone",Tt[Tt.Eras=7]="Eras",Tt[Tt.FirstDayOfWeek=8]="FirstDayOfWeek",Tt[Tt.WeekendRange=9]="WeekendRange",Tt[Tt.DateFormat=10]="DateFormat",Tt[Tt.TimeFormat=11]="TimeFormat",Tt[Tt.DateTimeFormat=12]="DateTimeFormat",Tt[Tt.NumberSymbols=13]="NumberSymbols",Tt[Tt.NumberFormats=14]="NumberFormats",Tt[Tt.CurrencyCode=15]="CurrencyCode",Tt[Tt.CurrencySymbol=16]="CurrencySymbol",Tt[Tt.CurrencyName=17]="CurrencyName",Tt[Tt.Currencies=18]="Currencies",Tt[Tt.Directionality=19]="Directionality",Tt[Tt.PluralCase=20]="PluralCase",Tt[Tt.ExtraData=21]="ExtraData",Tt))();const bf="en-US";let _g=bf;function VE(o,a,l,c,f){if(o=Q(o),Array.isArray(o))for(let m=0;m<o.length;m++)VE(o[m],a,l,c,f);else{const m=Wt(),E=Ce();let D=ko(o)?o:Q(o.provide),S=Wh(o);const A=Un(),N=1048575&A.providerIndexes,L=A.directiveStart,q=A.providerIndexes>>20;if(ko(o)||!o.multi){const ne=new Ks(S,f,yd),we=Sg(D,a,f?N:N+q,L);-1===we?(Ys(Co(A,E),m,D),Dg(m,o,a.length),a.push(D),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),l.push(ne),E.push(ne)):(l[we]=ne,E[we]=ne)}else{const ne=Sg(D,a,N+q,L),we=Sg(D,a,N,N+q),Ue=ne>=0&&l[ne],Ke=we>=0&&l[we];if(f&&!Ke||!f&&!Ue){Ys(Co(A,E),m,D);const dt=function MC(o,a,l,c,f){const m=new Ks(o,l,yd);return m.multi=[],m.index=a,m.componentProviders=0,j0(m,f,c&&!l),m}(f?UE:$0,l.length,f,c,S);!f&&Ke&&(l[we].providerFactory=dt),Dg(m,o,a.length,0),a.push(D),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),l.push(dt),E.push(dt)}else Dg(m,o,ne>-1?ne:we,j0(l[f?we:ne],S,!f&&c));!f&&c&&Ke&&l[we].componentProviders++}}}function Dg(o,a,l,c){const f=ko(a),m=function Sm(o){return!!o.useClass}(a);if(f||m){const S=(m?Q(a.useClass):a).prototype.ngOnDestroy;if(S){const A=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const N=A.indexOf(l);-1===N?A.push(l,[c,S]):A[N+1].push(c,S)}else A.push(l,S)}}}function j0(o,a,l){return l&&o.componentProviders++,o.multi.push(a)-1}function Sg(o,a,l,c){for(let f=l;f<c;f++)if(a[f]===o)return f;return-1}function $0(o,a,l,c){return xv(this.multi,[])}function UE(o,a,l,c){const f=this.multi;let m;if(this.providerFactory){const E=this.providerFactory.componentProviders,D=vs(l,l[1],this.providerFactory.index,c);m=D.slice(0,E),xv(f,m);for(let S=E;S<D.length;S++)m.push(D[S])}else m=[],xv(f,m);return m}function xv(o,a){for(let l=0;l<o.length;l++)a.push((0,o[l])());return a}function G0(o,a=[]){return l=>{l.providersResolver=(c,f)=>function LE(o,a,l){const c=Wt();if(c.firstCreatePass){const f=kr(o);VE(l,c.data,c.blueprint,f,!0),VE(a,c.data,c.blueprint,f,!1)}}(c,f?f(o):o,a)}}class pc{}class z0{}function BE(o,a){return new Nv(o,a??null)}class Nv extends pc{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new nv(this);const c=yn(a);this._bootstrapComponents=Dr(c.bootstrap),this._r3Injector=Lm(a,l,[{provide:pc,useValue:this},{provide:ld,useValue:this.componentFactoryResolver}],fe(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class HE extends z0{constructor(a){super(),this.moduleType=a}create(a){return new Nv(this.moduleType,a)}}class W0 extends pc{constructor(a,l,c){super(),this.componentFactoryResolver=new nv(this),this.instance=null;const f=new od([...a,{provide:pc,useValue:this},{provide:ld,useValue:this.componentFactoryResolver}],l||ya(),c,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Pv(o,a,l=null){return new W0(o,a,l).injector}let RC=(()=>{class o{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const c=ml(0,l.type),f=c.length>0?Pv([c],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,f)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=rn({token:o,providedIn:"environment",factory:()=>new o(qn(pr))}),o})();function Ov(o){o.getStandaloneInjector=a=>a.get(RC).getOrCreateStandaloneInjector(o)}function qE(o,a,l,c){return function Lv(o,a,l,c,f,m){const E=a+l;return Ii(o,E,f)?function Ia(o,a,l){return o[a]=l}(o,E+1,m?c.call(m,f):c(f)):function Rf(o,a){const l=o[a];return l===ct?void 0:l}(o,E+1)}(Ce(),function Bn(){const o=Nt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}(),o,a,l,c)}function QE(o){return a=>{setTimeout(o,void 0,a)}}const Ma=class BC extends h.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,c){let f=a,m=l||(()=>null),E=c;if(a&&"object"==typeof a){const S=a;f=S.next?.bind(S),m=S.error?.bind(S),E=S.complete?.bind(S)}this.__isAsync&&(m=QE(m),f&&(f=QE(f)),E&&(E=QE(E)));const D=super.subscribe({next:f,error:m,complete:E});return a instanceof te.w0&&a.add(D),D}};function J0(){return this._results[Id()]()}class XE{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Id(),c=XE.prototype;c[l]||(c[l]=J0)}get changes(){return this._changes||(this._changes=new Ma)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const c=this;c.dirty=!1;const f=cr(a);(this._changesDetected=!function pn(o,a,l){if(o.length!==a.length)return!1;for(let c=0;c<o.length;c++){let f=o[c],m=a[c];if(l&&(f=l(f),m=l(m)),m!==f)return!1}return!0}(c._results,f,l))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Nf=(()=>{class o{}return o.__NG_ELEMENT_ID__=$C,o})();const HC=Nf,jC=class extends HC{constructor(a,l,c){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(a,l){const c=this._declarationTContainer.tViews,f=bd(this._declarationLView,c,a,16,null,c.declTNode,null,null,null,null,l||null);f[17]=this._declarationLView[this._declarationTContainer.index];const E=this._declarationLView[19];return null!==E&&(f[19]=E.createEmbeddedView(c)),Dd(c,f,a),new df(f)}};function $C(){return $v(Un(),Ce())}function $v(o,a){return 4&o.type?new jC(a,o,_(o,a)):null}let Pf=(()=>{class o{}return o.__NG_ELEMENT_ID__=GC,o})();function GC(){return vr(Un(),Ce())}const zC=Pf,Ln=class extends zC{constructor(a,l,c){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=c}get element(){return _(this._hostTNode,this._hostLView)}get injector(){return new Mo(this._hostTNode,this._hostLView)}get parentInjector(){const a=yu(this._hostTNode,this._hostLView);if(wh(a)){const l=Ja(a,this._hostLView),c=Er(a);return new Mo(l[1].data[c+8],l)}return new Mo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=qC(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,c){let f,m;"number"==typeof c?f=c:null!=c&&(f=c.index,m=c.injector);const E=a.createEmbeddedView(l||{},m);return this.insert(E,f),E}createComponent(a,l,c,f,m){const E=a&&!function la(o){return"function"==typeof o}(a);let D;if(E)D=l;else{const L=l||{};D=L.index,c=L.injector,f=L.projectableNodes,m=L.environmentInjector||L.ngModuleRef}const S=E?a:new Qp(J(a)),A=c||this.parentInjector;if(!m&&null==S.ngModule){const q=(E?A:this.parentInjector).get(pr,null);q&&(m=q)}const N=S.create(A,f,void 0,m);return this.insert(N.hostView,D),N}insert(a,l){const c=a._lView,f=c[1];if(function Xl(o){return $r(o[3])}(c)){const N=this.indexOf(a);if(-1!==N)this.detach(N);else{const L=c[3],q=new Ln(L,L[6],L[3]);q.detach(q.indexOf(a))}}const m=this._adjustIndex(l),E=this._lContainer;!function Vr(o,a,l,c){const f=10+c,m=l.length;c>0&&(l[f-1][4]=a),c<m-10?(a[4]=l[f],dr(l,10+c,a)):(l.push(a),a[4]=null),a[3]=l;const E=a[17];null!==E&&l!==E&&function qb(o,a){const l=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===l?o[9]=[a]:l.push(a)}(E,a);const D=a[19];null!==D&&D.insertView(o),a[2]|=64}(f,c,E,m);const D=c_(m,E),S=c[11],A=Rn(S,E[7]);return null!==A&&function Ye(o,a,l,c,f,m){c[0]=f,c[6]=a,Dl(o,c,l,1,f,m)}(f,E[6],S,c,A,D),a.attachToViewContainerRef(),dr(eS(E),m,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=qC(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),c=a_(this._lContainer,l);c&&(Qi(eS(this._lContainer),l),Zb(c[1],c))}detach(a){const l=this._adjustIndex(a,-1),c=a_(this._lContainer,l);return c&&null!=Qi(eS(this._lContainer),l)?new df(c):null}_adjustIndex(a,l=0){return a??this.length+l}};function qC(o){return o[8]}function eS(o){return o[8]||(o[8]=[])}function vr(o,a){let l;const c=a[o.index];if($r(c))l=c;else{let f;if(8&o.type)f=Vn(c);else{const m=a[11];f=m.createComment("");const E=Gr(o,a);hd(m,Rn(m,E),f,function Pt(o,a){return o.nextSibling(a)}(m,E),!1)}a[o.index]=l=AD(c,a,f,o),Yp(a,l)}return new Ln(l,o,a)}class Gv{constructor(a){this.queryList=a,this.matches=null}clone(){return new Gv(this.queryList)}setDirty(){this.queryList.setDirty()}}class JE{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const c=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let m=0;m<c;m++){const E=l.getByIndex(m);f.push(this.queries[E.indexInDeclarationView].clone())}return new JE(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==sS(a,l).matches&&this.queries[l].setDirty()}}class nS{constructor(a,l,c=null){this.predicate=a,this.flags=l,this.read=c}}class ew{constructor(a=[]){this.queries=a}elementStart(a,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let c=0;c<this.length;c++){const f=null!==l?l.length:0,m=this.getByIndex(c).embeddedTView(a,f);m&&(m.indexInDeclarationView=c,null!==l?l.push(m):l=[m])}return null!==l?new ew(l):null}template(a,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class tw{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new tw(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=a.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const m=c[f];this.matchTNodeWithReadOption(a,l,ux(l,m)),this.matchTNodeWithReadOption(a,l,na(l,a,m,!1,!1))}else c===Nf?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,na(l,a,c,!1,!1))}matchTNodeWithReadOption(a,l,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===g||f===Pf||f===Nf&&4&l.type)this.addMatch(l.index,-2);else{const m=na(l,a,f,!1,!1);null!==m&&this.addMatch(l.index,m)}else this.addMatch(l.index,c)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function ux(o,a){const l=o.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===a)return l[c+1];return null}function KC(o,a,l,c){return-1===l?function ZC(o,a){return 11&o.type?_(o,a):4&o.type?$v(o,a):null}(a,o):-2===l?function rS(o,a,l){return l===g?_(a,o):l===Nf?$v(a,o):l===Pf?vr(a,o):void 0}(o,a,c):vs(o,o[1],l,a)}function Ho(o,a,l,c){const f=a[19].queries[c];if(null===f.matches){const m=o.data,E=l.matches,D=[];for(let S=0;S<E.length;S+=2){const A=E[S];D.push(A<0?null:KC(a,m[A],E[S+1],l.metadata.read))}f.matches=D}return f.matches}function jo(o,a,l,c){const f=o.queries.getByIndex(l),m=f.matches;if(null!==m){const E=Ho(o,a,f,l);for(let D=0;D<m.length;D+=2){const S=m[D];if(S>0)c.push(E[D/2]);else{const A=m[D+1],N=a[-S];for(let L=10;L<N.length;L++){const q=N[L];q[17]===q[3]&&jo(q[1],q,A,c)}if(null!==N[9]){const L=N[9];for(let q=0;q<L.length;q++){const ne=L[q];jo(ne[1],ne,A,c)}}}}}return c}function YC(o){const a=Ce(),l=Wt(),c=Bc();Ya(c+1);const f=sS(l,c);if(o.dirty&&function Ql(o){return 4==(4&o[2])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?jo(l,a,c,[]):Ho(l,a,f,c);o.reset(m,v),o.notifyOnChanges()}return!0}return!1}function Cg(o,a,l,c){const f=Wt();if(f.firstCreatePass){const m=Un();(function rw(o,a,l){null===o.queries&&(o.queries=new ew),o.queries.track(new tw(a,l))})(f,new nS(a,l,c),m.index),function zv(o,a){const l=o.contentQueries||(o.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(o.queries.length-1,a)}(f,o),2==(2&l)&&(f.staticContentQueries=!0)}!function nw(o,a,l){const c=new XE(4==(4&l));Tr(o,a,c,c.destroy),null===a[19]&&(a[19]=new JE),a[19].queries.push(new Gv(c))}(f,Ce(),l)}function iS(){return function QC(o,a){return o[19].queries[a].queryList}(Ce(),Bc())}function sS(o,a){return o.queries.getByIndex(a)}function Kv(...o){}const mw=new En("Application Initializer");let Yv=(()=>{class o{constructor(l){this.appInits=l,this.resolve=Kv,this.reject=Kv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,f)=>{this.resolve=c,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(fv(m))l.push(m);else if($D(m)){const E=new Promise((D,S)=>{m.subscribe({complete:D,error:S})});l.push(E)}}Promise.all(l).then(()=>{c()}).catch(f=>{this.reject(f)}),0===l.length&&c(),this.initialized=!0}}return o.\u0275fac=function(l){return new(l||o)(qn(mw,8))},o.\u0275prov=rn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Zd=new En("AppId",{providedIn:"root",factory:function Qv(){return`${vS()}${vS()}${vS()}`}});function vS(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const yS=new En("Platform Initializer"),_S=new En("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),kl=new En("appBootstrapListener"),uA=new En("AnimationModuleType");let cA=(()=>{class o{log(l){console.log(l)}warn(l){console.warn(l)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=rn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Xv=new En("LocaleId",{providedIn:"root",factory:()=>T(Xv,Xe.Optional|Xe.SkipSelf)||function dA(){return typeof $localize<"u"&&$localize.locale||bf}()}),hA=new En("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ES{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let fA=(()=>{class o{compileModuleSync(l){return new HE(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),m=Dr(yn(l).declarations).reduce((E,D)=>{const S=J(D);return S&&E.push(new Qp(S)),E},[]);return new ES(c,m)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=rn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const gA=(()=>Promise.resolve(0))();function Jv(o){typeof Zone>"u"?gA.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class lo{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ma(!1),this.onMicrotaskEmpty=new Ma(!1),this.onStable=new Ma(!1),this.onError=new Ma(!1),typeof Zone>"u")throw new De(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&l,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function ey(){let o=dn.requestAnimationFrame,a=dn.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function uo(o){const a=()=>{!function Kd(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(dn,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,di(o),o.isCheckStableRunning=!0,ty(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),di(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,f,m,E,D)=>{try{return yw(o),l.invokeTask(f,m,E,D)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),_w(o)}},onInvoke:(l,c,f,m,E,D,S)=>{try{return yw(o),l.invoke(f,m,E,D,S)}finally{o.shouldCoalesceRunChangeDetection&&a(),_w(o)}},onHasTask:(l,c,f,m)=>{l.hasTask(f,m),c===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,di(o),ty(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(l,c,f,m)=>(l.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!lo.isInAngularZone())throw new De(909,!1)}static assertNotInAngularZone(){if(lo.isInAngularZone())throw new De(909,!1)}run(a,l,c){return this._inner.run(a,l,c)}runTask(a,l,c,f){const m=this._inner,E=m.scheduleEventTask("NgZoneEvent: "+f,a,SS,Kv,Kv);try{return m.runTask(E,l,c)}finally{m.cancelTask(E)}}runGuarded(a,l,c){return this._inner.runGuarded(a,l,c)}runOutsideAngular(a){return this._outer.run(a)}}const SS={};function ty(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function di(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function yw(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function _w(o){o._nesting--,ty(o)}class Rg{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ma,this.onMicrotaskEmpty=new Ma,this.onStable=new Ma,this.onError=new Ma}run(a,l,c){return a.apply(l,c)}runGuarded(a,l,c){return a.apply(l,c)}runOutsideAngular(a){return a()}runTask(a,l,c,f){return a.apply(l,c)}}const Vf=new En(""),Ai=new En("");let Fl,mA=(()=>{class o{constructor(l,c,f){this._ngZone=l,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Fl||(function Uf(o){Fl=o}(f),f.addToWindow(c)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{lo.assertNotInAngularZone(),Jv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Jv(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,f){let m=-1;c&&c>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==m),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:m,updateCb:f})}whenStable(l,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,c,f){return[]}}return o.\u0275fac=function(l){return new(l||o)(qn(lo),qn(ny),qn(Ai))},o.\u0275prov=rn({token:o,factory:o.\u0275fac}),o})(),ny=(()=>{class o{constructor(){this._applications=new Map}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return Fl?.findTestabilityInTree(this,l,c)??null}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=rn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),Na=null;const yc=new En("AllowMultipleToken"),Ew=new En("PlatformDestroyListeners");class ry{constructor(a,l){this.name=a,this.token=l}}function IS(o,a,l=[]){const c=`Platform: ${a}`,f=new En(c);return(m=[])=>{let E=Vl();if(!E||E.injector.get(yc,!1)){const D=[...l,...m,{provide:f,useValue:!0}];o?o(D):function iy(o){if(Na&&!Na.get(yc,!1))throw new De(400,!1);Na=o;const a=o.get(Bf);(function TS(o){const a=o.get(yS,null);a&&a.forEach(l=>l())})(o)}(function AS(o=[],a){return zu.create({name:a,providers:[{provide:sd,useValue:"platform"},{provide:Ew,useValue:new Set([()=>Na=null])},...o]})}(D,c))}return function CS(o){const a=Vl();if(!a)throw new De(401,!1);return a}()}}function Vl(){return Na?.get(Bf)??null}let Bf=(()=>{class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const f=function bw(o,a){let l;return l="noop"===o?new Rg:("zone.js"===o?void 0:o)||new lo(a),l}(c?.ngZone,function xg(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(c)),m=[{provide:lo,useValue:f}];return f.run(()=>{const E=zu.create({providers:m,parent:this.injector,name:l.moduleType.name}),D=l.create(E),S=D.injector.get(Yh,null);if(!S)throw new De(402,!1);return f.runOutsideAngular(()=>{const A=f.onError.subscribe({next:N=>{S.handleError(N)}});D.onDestroy(()=>{Ng(this._modules,D),A.unsubscribe()})}),function MS(o,a,l){try{const c=l();return fv(c)?c.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):c}catch(c){throw a.runOutsideAngular(()=>o.handleError(c)),c}}(S,f,()=>{const A=D.injector.get(Yv);return A.runInitializers(),A.donePromise.then(()=>(function bv(o){zt(o,"Expected localeId to be defined"),"string"==typeof o&&(_g=o.toLowerCase().replace(/_/g,"-"))}(D.injector.get(Xv,bf)||bf),this._moduleDoBootstrap(D),D))})})}bootstrapModule(l,c=[]){const f=Pa({},c);return function vA(o,a,l){const c=new HE(l);return Promise.resolve(c)}(0,0,l).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(l){const c=l.injector.get(Hf);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new De(403,!1);l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new De(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const l=this._injector.get(Ew,null);l&&(l.forEach(c=>c()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(l){return new(l||o)(qn(zu))},o.\u0275prov=rn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function Pa(o,a){return Array.isArray(a)?a.reduce(Pa,o):{...o,...a}}let Hf=(()=>{class o{constructor(l,c,f){this._zone=l,this._injector=c,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new F.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),E=new F.y(D=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{lo.assertNotInAngularZone(),Jv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{lo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{S.unsubscribe(),A.unsubscribe()}});this.isStable=(0,ae.T)(m,E.pipe((0,se.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,c){const f=l instanceof Fu;if(!this._injector.get(Yv).done)throw!f&&Jt(l),new De(405,false);let E;E=f?l:this._injector.get(ld).resolveComponentFactory(l),this.componentTypes.push(E.componentType);const D=function yA(o){return o.isBoundToModule}(E)?void 0:this._injector.get(pc),A=E.create(zu.NULL,[],c||E.selector,D),N=A.location.nativeElement,L=A.injector.get(Vf,null);return L?.registerApplication(N),A.onDestroy(()=>{this.detachView(A.hostView),Ng(this.components,A),L?.unregisterApplication(N)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new De(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;Ng(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(kl,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>Ng(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new De(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(l){return new(l||o)(qn(lo),qn(pr),qn(Yh))},o.\u0275prov=rn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Ng(o,a){const l=o.indexOf(a);l>-1&&o.splice(l,1)}let Pg=!0,xS=!1;function bx(){return xS=!0,Pg}function _A(){if(xS)throw new Error("Cannot enable prod mode after platform setup.");Pg=!1}let wA=(()=>{class o{}return o.__NG_ELEMENT_ID__=bA,o})();function bA(o){return function Dx(o,a,l){if(ja(o)&&!l){const c=Yt(o.index,a);return new df(c,c)}return 47&o.type?new df(a[16],a):null}(Un(),Ce(),16==(16&o))}class Mi{constructor(){}supports(a){return Jp(a)}create(a){return new kS(a)}}const oy=(o,a)=>a;class kS{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||oy}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,c=this._removalsHead,f=0,m=null;for(;l||c;){const E=!c||l&&l.currentIndex<uy(c,f,m)?l:c,D=uy(E,f,m),S=E.currentIndex;if(E===c)f--,c=c._nextRemoved;else if(l=l._next,null==E.previousIndex)f++;else{m||(m=[]);const A=D-f,N=S-f;if(A!=N){for(let q=0;q<A;q++){const ne=q<m.length?m[q]:m[q]=0,we=ne+q;N<=we&&we<A&&(m[q]=ne+1)}m[E.previousIndex]=N-A}}D!==S&&a(E,D,S)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!Jp(a))throw new De(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,E,l=this._itHead,c=!1;if(Array.isArray(a)){this.length=a.length;for(let D=0;D<this.length;D++)m=a[D],E=this._trackByFn(D,m),null!==l&&Object.is(l.trackById,E)?(c&&(l=this._verifyReinsertion(l,m,E,D)),Object.is(l.item,m)||this._addIdentityChange(l,m)):(l=this._mismatch(l,m,E,D),c=!0),l=l._next}else f=0,function QI(o,a){if(Array.isArray(o))for(let l=0;l<o.length;l++)a(o[l]);else{const l=o[Id()]();let c;for(;!(c=l.next()).done;)a(c.value)}}(a,D=>{E=this._trackByFn(f,D),null!==l&&Object.is(l.trackById,E)?(c&&(l=this._verifyReinsertion(l,D,E,f)),Object.is(l.item,D)||this._addIdentityChange(l,D)):(l=this._mismatch(l,D,E,f),c=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,c,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,m,f)):a=this._addAfter(new Iw(l,c),m,f),a}_verifyReinsertion(a,l,c,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,l,c),this._addToMoves(a,c),a}_moveAfter(a,l,c){return this._unlink(a),this._insertAfter(a,l,c),this._addToMoves(a,c),a}_addAfter(a,l,c){return this._insertAfter(a,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,c){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new ly),this._linkedRecords.put(a),a.currentIndex=c,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,c=a._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ly),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Iw{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ay{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,a))return c;return null}remove(a){const l=a._prevDup,c=a._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class ly{constructor(){this.map=new Map}put(a){const l=a.trackById;let c=this.map.get(l);c||(c=new ay,this.map.set(l,c)),c.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function uy(o,a,l){const c=o.previousIndex;if(null===c)return c;let f=0;return l&&c<l.length&&(f=l[c]),c+a+f}class FS{constructor(){}supports(a){return a instanceof Map||j_(a)}create(){return new TA}}class TA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||j_(a)))throw new De(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(c,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const m=this._getOrCreateRecordForKey(f,c);l=this._insertBeforeOrAppend(l,m)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const c=a._prev;return l._next=a,l._prev=c,a._prev=l,c&&(c._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const m=f._prev,E=f._next;return m&&(m._next=E),E&&(E._prev=m),f._next=null,f._prev=null,f}const c=new IA(a);return this._records.set(a,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(c=>l(a[c],c))}}class IA{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function LS(){return new Cw([new Mi])}let Cw=(()=>{class o{constructor(l){this.factories=l}static create(l,c){if(null!=c){const f=c.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:c=>o.create(l,c||LS()),deps:[[o,new ot,new Ge]]}}find(l){const c=this.factories.find(f=>f.supports(l));if(null!=c)return c;throw new De(901,!1)}}return o.\u0275prov=rn({token:o,providedIn:"root",factory:LS}),o})();function Aw(){return new $f([new FS])}let $f=(()=>{class o{constructor(l){this.factories=l}static create(l,c){if(c){const f=c.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:c=>o.create(l,c||Aw()),deps:[[o,new ot,new Ge]]}}find(l){const c=this.factories.find(f=>f.supports(l));if(c)return c;throw new De(901,!1)}}return o.\u0275prov=rn({token:o,providedIn:"root",factory:Aw}),o})();const AA=IS(null,"core",[]);let US=(()=>{class o{constructor(l){}}return o.\u0275fac=function(l){return new(l||o)(qn(Hf))},o.\u0275mod=Ht({type:o}),o.\u0275inj=Ut({}),o})();function Mw(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(pt,Ae,V)=>{V.d(Ae,{Z:()=>De});var h=V(2090),te=V(4859),F=V(9681),ae=V(1877);class se{constructor(ye,ge){this._delegate=ye,this.firebase=ge,(0,F._addComponent)(ye,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(ye,ge=F._DEFAULT_ENTRY_NAME){var rt;this._delegate.checkDestroyed();const ht=this._delegate.container.getProvider(ye);return!ht.isInitialized()&&"EXPLICIT"===(null===(rt=ht.getComponent())||void 0===rt?void 0:rt.instantiationMode)&&ht.initialize(),ht.getImmediate({identifier:ge})}_removeServiceInstance(ye,ge=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(ge)}_addComponent(ye){(0,F._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,F._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function pe(){const at=function fe(at){const ye={},ge={__esModule:!0,initializeApp:function Me(ze,j={}){const ve=F.initializeApp(ze,j);if((0,h.r3)(ye,ve.name))return ye[ve.name];const Z=new at(ve,ge);return ye[ve.name]=Z,Z},app:ht,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Se(ze){const j=ze.name,ve=j.replace("-compat","");if(F._registerComponent(ze)&&"PUBLIC"===ze.type){const Z=(ee=ht())=>{if("function"!=typeof ee[ve])throw ue.create("invalid-app-argument",{appName:j});return ee[ve]()};void 0!==ze.serviceProps&&(0,h.ZB)(Z,ze.serviceProps),ge[ve]=Z,at.prototype[ve]=function(...ee){return this._getService.bind(this,j).apply(this,ze.multipleInstances?ee:[])}}return"PUBLIC"===ze.type?ge[ve]:null},removeApp:function rt(ze){delete ye[ze]},useAsService:function $e(ze,j){return"serverAuth"===j?null:j},modularAPIs:F}};function ht(ze){if(!(0,h.r3)(ye,ze=ze||F._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:ze});return ye[ze]}return ge.default=ge,Object.defineProperty(ge,"apps",{get:function Ee(){return Object.keys(ye).map(ze=>ye[ze])}}),ht.App=at,ge}(se);return at.INTERNAL=Object.assign(Object.assign({},at.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function ye(ge){(0,h.ZB)(at,ge)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),at}(),G=new ae.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const at=self.firebase.SDK_VERSION;at&&at.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const De=$;!function xe(at){(0,F.registerVersion)("@firebase/app-compat","0.1.37",at)}()},9681:(pt,Ae,V)=>{V.r(Ae),V.d(Ae,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>fo,_DEFAULT_ENTRY_NAME:()=>zt,_addComponent:()=>Xt,_addOrOverwriteComponent:()=>rn,_apps:()=>fn,_clearComponents:()=>us,_components:()=>Sn,_getProvider:()=>Ut,_registerComponent:()=>Br,_removeServiceInstance:()=>gn,deleteApp:()=>Ba,getApp:()=>fi,getApps:()=>pi,initializeApp:()=>Oi,onLog:()=>Us,registerVersion:()=>Or,setLogLevel:()=>sr});var h=V(5861),te=V(4859),F=V(1877),ae=V(2090),se=V(8766);class he{constructor(Ie){this.container=Ie}getPlatformInfoString(){return this.container.getProviders().map(it=>{if(function ue(st){return"VERSION"===st.getComponent()?.type}(it)){const Mt=it.getImmediate();return`${Mt.library}/${Mt.version}`}return null}).filter(it=>it).join(" ")}}const fe="@firebase/app",$=new F.Yd("@firebase/app"),zt="[DEFAULT]",Qe={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},fn=new Map,Sn=new Map;function Xt(st,Ie){try{st.container.addComponent(Ie)}catch(it){$.debug(`Component ${Ie.name} failed to register with FirebaseApp ${st.name}`,it)}}function rn(st,Ie){st.container.addOrOverwriteComponent(Ie)}function Br(st){const Ie=st.name;if(Sn.has(Ie))return $.debug(`There were multiple attempts to register component ${Ie}.`),!1;Sn.set(Ie,st);for(const it of fn.values())Xt(it,st);return!0}function Ut(st,Ie){const it=st.container.getProvider("heartbeat").getImmediate({optional:!0});return it&&it.triggerHeartbeat(),st.container.getProvider(Ie)}function gn(st,Ie,it=zt){Ut(st,Ie).clearInstance(it)}function us(){Sn.clear()}const Hr=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ei{constructor(Ie,it,Mt){this._isDeleted=!1,this._options=Object.assign({},Ie),this._config=Object.assign({},it),this._name=it.name,this._automaticDataCollectionEnabled=it.automaticDataCollectionEnabled,this._container=Mt,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ie){this._isDeleted=Ie}checkDestroyed(){if(this.isDeleted)throw Hr.create("app-deleted",{appName:this._name})}}const fo="9.12.1";function Oi(st,Ie={}){let it=st;"object"!=typeof Ie&&(Ie={name:Ie});const Mt=Object.assign({name:zt,automaticDataCollectionEnabled:!1},Ie),Ct=Mt.name;if("string"!=typeof Ct||!Ct)throw Hr.create("bad-app-name",{appName:String(Ct)});if(it||(it=(0,ae.aH)()),!it)throw Hr.create("no-options");const Ht=fn.get(Ct);if(Ht){if((0,ae.vZ)(it,Ht.options)&&(0,ae.vZ)(Mt,Ht.config))return Ht;throw Hr.create("duplicate-app",{appName:Ct})}const z=new te.H0(Ct);for(const K of Sn.values())z.addComponent(K);const B=new ei(it,Mt,z);return fn.set(Ct,B),B}function fi(st=zt){const Ie=fn.get(st);if(!Ie&&st===zt)return Oi();if(!Ie)throw Hr.create("no-app",{appName:st});return Ie}function pi(){return Array.from(fn.values())}function Ba(st){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,h.Z)(function*(st){const Ie=st.name;fn.has(Ie)&&(fn.delete(Ie),yield Promise.all(st.container.getProviders().map(it=>it.delete())),st.isDeleted=!0)})).apply(this,arguments)}function Or(st,Ie,it){var Mt;let Ct=null!==(Mt=Qe[st])&&void 0!==Mt?Mt:st;it&&(Ct+=`-${it}`);const Ht=Ct.match(/\s|\//),z=Ie.match(/\s|\//);if(Ht||z){const B=[`Unable to register library "${Ct}" with version "${Ie}":`];return Ht&&B.push(`library name "${Ct}" contains illegal characters (whitespace or "/")`),Ht&&z&&B.push("and"),z&&B.push(`version name "${Ie}" contains illegal characters (whitespace or "/")`),void $.warn(B.join(" "))}Br(new te.wA(`${Ct}-version`,()=>({library:Ct,version:Ie}),"VERSION"))}function Us(st,Ie){if(null!==st&&"function"!=typeof st)throw Hr.create("invalid-log-argument");(0,F.Am)(st,Ie)}function sr(st){(0,F.Ub)(st)}const Gn="firebase-heartbeat-store";let Xn=null;function _n(){return Xn||(Xn=(0,se.X3)("firebase-heartbeat-database",1,{upgrade:(st,Ie)=>{0===Ie&&st.createObjectStore(Gn)}}).catch(st=>{throw Hr.create("idb-open",{originalErrorMessage:st.message})})),Xn}function ft(){return(ft=(0,h.Z)(function*(st){var Ie;try{return(yield _n()).transaction(Gn).objectStore(Gn).get(Jn(st))}catch(it){if(it instanceof ae.ZR)$.warn(it.message);else{const Mt=Hr.create("idb-get",{originalErrorMessage:null===(Ie=it)||void 0===Ie?void 0:Ie.message});$.warn(Mt.message)}}})).apply(this,arguments)}function dn(st,Ie){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,h.Z)(function*(st,Ie){var it;try{const Ct=(yield _n()).transaction(Gn,"readwrite");return yield Ct.objectStore(Gn).put(Ie,Jn(st)),Ct.done}catch(Mt){if(Mt instanceof ae.ZR)$.warn(Mt.message);else{const Ct=Hr.create("idb-set",{originalErrorMessage:null===(it=Mt)||void 0===it?void 0:it.message});$.warn(Ct.message)}}})).apply(this,arguments)}function Jn(st){return`${st.name}!${st.options.appId}`}class Bs{constructor(Ie){this.container=Ie,this._heartbeatsCache=null;const it=this.container.getProvider("app").getImmediate();this._storage=new ln(it),this._heartbeatsCachePromise=this._storage.read().then(Mt=>(this._heartbeatsCache=Mt,Mt))}triggerHeartbeat(){var Ie=this;return(0,h.Z)(function*(){const Mt=Ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ct=an();if(null===Ie._heartbeatsCache&&(Ie._heartbeatsCache=yield Ie._heartbeatsCachePromise),Ie._heartbeatsCache.lastSentHeartbeatDate!==Ct&&!Ie._heartbeatsCache.heartbeats.some(Ht=>Ht.date===Ct))return Ie._heartbeatsCache.heartbeats.push({date:Ct,agent:Mt}),Ie._heartbeatsCache.heartbeats=Ie._heartbeatsCache.heartbeats.filter(Ht=>{const z=new Date(Ht.date).valueOf();return Date.now()-z<=2592e6}),Ie._storage.overwrite(Ie._heartbeatsCache)})()}getHeartbeatsHeader(){var Ie=this;return(0,h.Z)(function*(){if(null===Ie._heartbeatsCache&&(yield Ie._heartbeatsCachePromise),null===Ie._heartbeatsCache||0===Ie._heartbeatsCache.heartbeats.length)return"";const it=an(),{heartbeatsToSend:Mt,unsentEntries:Ct}=function qi(st,Ie=1024){const it=[];let Mt=st.slice();for(const Ct of st){const Ht=it.find(z=>z.agent===Ct.agent);if(Ht){if(Ht.dates.push(Ct.date),or(it)>Ie){Ht.dates.pop();break}}else if(it.push({agent:Ct.agent,dates:[Ct.date]}),or(it)>Ie){it.pop();break}Mt=Mt.slice(1)}return{heartbeatsToSend:it,unsentEntries:Mt}}(Ie._heartbeatsCache.heartbeats),Ht=(0,ae.L)(JSON.stringify({version:2,heartbeats:Mt}));return Ie._heartbeatsCache.lastSentHeartbeatDate=it,Ct.length>0?(Ie._heartbeatsCache.heartbeats=Ct,yield Ie._storage.overwrite(Ie._heartbeatsCache)):(Ie._heartbeatsCache.heartbeats=[],Ie._storage.overwrite(Ie._heartbeatsCache)),Ht})()}}function an(){return(new Date).toISOString().substring(0,10)}class ln{constructor(Ie){this.app=Ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ie=this;return(0,h.Z)(function*(){return(yield Ie._canUseIndexedDBPromise)&&(yield function wt(st){return ft.apply(this,arguments)}(Ie.app))||{heartbeats:[]}})()}overwrite(Ie){var it=this;return(0,h.Z)(function*(){var Mt;if(yield it._canUseIndexedDBPromise){const Ht=yield it.read();return dn(it.app,{lastSentHeartbeatDate:null!==(Mt=Ie.lastSentHeartbeatDate)&&void 0!==Mt?Mt:Ht.lastSentHeartbeatDate,heartbeats:Ie.heartbeats})}})()}add(Ie){var it=this;return(0,h.Z)(function*(){var Mt;if(yield it._canUseIndexedDBPromise){const Ht=yield it.read();return dn(it.app,{lastSentHeartbeatDate:null!==(Mt=Ie.lastSentHeartbeatDate)&&void 0!==Mt?Mt:Ht.lastSentHeartbeatDate,heartbeats:[...Ht.heartbeats,...Ie.heartbeats]})}})()}}function or(st){return(0,ae.L)(JSON.stringify({version:2,heartbeats:st})).length}!function jr(st){Br(new te.wA("platform-logger",Ie=>new he(Ie),"PRIVATE")),Br(new te.wA("heartbeat",Ie=>new Bs(Ie),"PRIVATE")),Or(fe,"0.8.2",st),Or(fe,"0.8.2","esm2017"),Or("fire-js","")}("")},4859:(pt,Ae,V)=>{V.d(Ae,{H0:()=>fe,wA:()=>F});var h=V(5861),te=V(2090);class F{constructor($,G,Q){this.name=$,this.instanceFactory=G,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ae="[DEFAULT]";class se{constructor($,G){this.name=$,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const G=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(G)){const Q=new te.BH;if(this.instancesDeferred.set(G,Q),this.isInitialized(G)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:G});Be&&Q.resolve(Be)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate($){var G;const Q=this.normalizeInstanceIdentifier($?.identifier),Be=null!==(G=$?.optional)&&void 0!==G&&G;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(xe){if(Be)return null;throw xe}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ue(pe){return"EAGER"===pe.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[G,Q]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(G);try{const xe=this.getOrInitializeService({instanceIdentifier:Be});Q.resolve(xe)}catch{}}}}clearInstance($=ae){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,h.Z)(function*(){const G=Array.from($.instances.values());yield Promise.all([...G.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...G.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ae){return this.instances.has($)}getOptions($=ae){return this.instancesOptions.get($)||{}}initialize($={}){const{options:G={}}=$,Q=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:Q,options:G});for(const[xe,De]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(xe)&&De.resolve(Be);return Be}onInit($,G){var Q;const Be=this.normalizeInstanceIdentifier(G),xe=null!==(Q=this.onInitCallbacks.get(Be))&&void 0!==Q?Q:new Set;xe.add($),this.onInitCallbacks.set(Be,xe);const De=this.instances.get(Be);return De&&$(De,Be),()=>{xe.delete($)}}invokeOnInitCallbacks($,G){const Q=this.onInitCallbacks.get(G);if(Q)for(const Be of Q)try{Be($,G)}catch{}}getOrInitializeService({instanceIdentifier:$,options:G={}}){let Q=this.instances.get($);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=$,pe===ae?void 0:pe),options:G}),this.instances.set($,Q),this.instancesOptions.set($,G),this.invokeOnInitCallbacks(Q,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,Q)}catch{}var pe;return Q||null}normalizeInstanceIdentifier($=ae){return this.component?this.component.multipleInstances?$:ae:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor($){this.name=$,this.providers=new Map}addComponent($){const G=this.getProvider($.name);if(G.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);G.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const G=new se($,this);return this.providers.set($,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(pt,Ae,V)=>{V.d(Ae,{Am:()=>pe,Ub:()=>fe,Yd:()=>ue,in:()=>te});const h=[];var te=(()=>{return($=te||(te={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",te;var $})();const F={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},ae=te.INFO,se={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},he=($,G,...Q)=>{if(G<$.logLevel)return;const Be=(new Date).toISOString(),xe=se[G];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[xe](`[${Be}]  ${$.name}:`,...Q)};class ue{constructor(G){this.name=G,this._logLevel=ae,this._logHandler=he,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in te))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?F[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...G),this._logHandler(this,te.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...G),this._logHandler(this,te.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,te.INFO,...G),this._logHandler(this,te.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,te.WARN,...G),this._logHandler(this,te.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...G),this._logHandler(this,te.ERROR,...G)}}function fe($){h.forEach(G=>{G.setLogLevel($)})}function pe($,G){for(const Q of h){let Be=null;G&&G.level&&(Be=F[G.level]),Q.userLogHandler=null===$?null:(xe,De,...at)=>{const ye=at.map(ge=>{if(null==ge)return null;if("string"==typeof ge)return ge;if("number"==typeof ge||"boolean"==typeof ge)return ge.toString();if(ge instanceof Error)return ge.message;try{return JSON.stringify(ge)}catch{return null}}).filter(ge=>ge).join(" ");De>=(Be??xe.logLevel)&&$({level:te[De].toLowerCase(),message:ye,args:at,type:xe.name})}}}},8766:(pt,Ae,V)=>{V.d(Ae,{Lj:()=>Me,X3:()=>ht});var h=V(5861);let F,ae;const ue=new WeakMap,fe=new WeakMap,pe=new WeakMap,$=new WeakMap,G=new WeakMap;let xe={get(j,ve,Z){if(j instanceof IDBTransaction){if("done"===ve)return fe.get(j);if("objectStoreNames"===ve)return j.objectStoreNames||pe.get(j);if("store"===ve)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return ge(j[ve])},set:(j,ve,Z)=>(j[ve]=Z,!0),has:(j,ve)=>j instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in j};function ye(j){return"function"==typeof j?function at(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...ve){return j.apply(rt(this),ve),ge(ue.get(this))}:function(...ve){return ge(j.apply(rt(this),ve))}:function(ve,...Z){const ee=j.call(rt(this),ve,...Z);return pe.set(ee,ve.sort?ve.sort():[ve]),ge(ee)}}(j):(j instanceof IDBTransaction&&function Be(j){if(fe.has(j))return;const ve=new Promise((Z,ee)=>{const ie=()=>{j.removeEventListener("complete",re),j.removeEventListener("error",Ve),j.removeEventListener("abort",Ve)},re=()=>{Z(),ie()},Ve=()=>{ee(j.error||new DOMException("AbortError","AbortError")),ie()};j.addEventListener("complete",re),j.addEventListener("error",Ve),j.addEventListener("abort",Ve)});fe.set(j,ve)}(j),((j,ve)=>ve.some(Z=>j instanceof Z))(j,function se(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,xe):j)}function ge(j){if(j instanceof IDBRequest)return function Q(j){const ve=new Promise((Z,ee)=>{const ie=()=>{j.removeEventListener("success",re),j.removeEventListener("error",Ve)},re=()=>{Z(ge(j.result)),ie()},Ve=()=>{ee(j.error),ie()};j.addEventListener("success",re),j.addEventListener("error",Ve)});return ve.then(Z=>{Z instanceof IDBCursor&&ue.set(Z,j)}).catch(()=>{}),G.set(ve,j),ve}(j);if($.has(j))return $.get(j);const ve=ye(j);return ve!==j&&($.set(j,ve),G.set(ve,j)),ve}const rt=j=>G.get(j);function ht(j,ve,{blocked:Z,upgrade:ee,blocking:ie,terminated:re}={}){const Ve=indexedDB.open(j,ve),Fe=ge(Ve);return ee&&Ve.addEventListener("upgradeneeded",_t=>{ee(ge(Ve.result),_t.oldVersion,_t.newVersion,ge(Ve.transaction))}),Z&&Ve.addEventListener("blocked",()=>Z()),Fe.then(_t=>{re&&_t.addEventListener("close",()=>re()),ie&&_t.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Fe}function Me(j,{blocked:ve}={}){const Z=indexedDB.deleteDatabase(j);return ve&&Z.addEventListener("blocked",()=>ve()),ge(Z).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],$e=new Map;function ze(j,ve){if(!(j instanceof IDBDatabase)||ve in j||"string"!=typeof ve)return;if($e.get(ve))return $e.get(ve);const Z=ve.replace(/FromIndex$/,""),ee=ve!==Z,ie=Se.includes(Z);if(!(Z in(ee?IDBIndex:IDBObjectStore).prototype)||!ie&&!Ee.includes(Z))return;const re=function(){var Ve=(0,h.Z)(function*(Fe,..._t){const nn=this.transaction(Fe,ie?"readwrite":"readonly");let zt=nn.store;return ee&&(zt=zt.index(_t.shift())),(yield Promise.all([zt[Z](..._t),ie&&nn.done]))[0]});return function(_t){return Ve.apply(this,arguments)}}();return $e.set(ve,re),re}!function De(j){xe=j(xe)}(j=>({...j,get:(ve,Z,ee)=>ze(ve,Z)||j.get(ve,Z,ee),has:(ve,Z)=>!!ze(ve,Z)||j.has(ve,Z)}))},5861:(pt,Ae,V)=>{function h(F,ae,se,he,ue,fe,pe){try{var $=F[fe](pe),G=$.value}catch(Q){return void se(Q)}$.done?ae(G):Promise.resolve(G).then(he,ue)}function te(F){return function(){var ae=this,se=arguments;return new Promise(function(he,ue){var fe=F.apply(ae,se);function pe(G){h(fe,he,ue,pe,$,"next",G)}function $(G){h(fe,he,ue,pe,$,"throw",G)}pe(void 0)})}}V.d(Ae,{Z:()=>te})}},pt=>{pt(pt.s=3680)}]);